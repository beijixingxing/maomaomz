{"version":3,"mappings":";2cAAAA,EAAiBC,SCIe,SAASC,EAAaC,EAAMC,EAAaC,GACrE,SAASC,EAAKC,EAAMC,GAChB,IAAIC,EACJC,OAAOC,eAAeJ,EAAM,OAAQ,CAChCK,MAAOL,EAAKM,MAAQ,GACpBC,YAAY,KAEfL,EAAKF,EAAKM,MAAME,SAAWN,EAAGM,OAAS,IAAIC,KAC5CT,EAAKM,KAAKE,OAAOE,IAAId,GACrBC,EAAYG,EAAMC,GAElB,IAAK,MAAMU,KAAKC,EAAEC,UACRF,KAAKX,GACPG,OAAOC,eAAeJ,EAAMW,EAAG,CAAEN,MAAOO,EAAEC,UAAUF,GAAGG,KAAKd,KAEpEA,EAAKM,KAAKS,OAASH,EACnBZ,EAAKM,KAAKL,IAAMA,CACpB,CAEA,MAAMe,EAASlB,GAAQkB,QAAUb,OACjC,MAAMc,UAAmBD,GAGzB,SAASJ,EAAEX,GACP,IAAIC,EACJ,MAAMF,EAAOF,GAAQkB,OAAS,IAAIC,EAAeC,KACjDnB,EAAKC,EAAMC,IACVC,EAAKF,EAAKM,MAAMa,WAAajB,EAAGiB,SAAW,IAC5C,IAAK,MAAMC,KAAMpB,EAAKM,KAAKa,SACvBC,IAEJ,OAAOpB,CACX,CAUA,OApBAG,OAAOC,eAAea,EAAY,OAAQ,CAAEZ,MAAOT,IAWnDO,OAAOC,eAAeQ,EAAG,OAAQ,CAAEP,MAAON,IAC1CI,OAAOC,eAAeQ,EAAGS,OAAOC,YAAa,CACzCjB,MAAQL,MACAF,GAAQkB,QAAUhB,aAAgBF,EAAOkB,SAEtChB,GAAMM,MAAME,QAAQe,IAAI3B,KAGvCO,OAAOC,eAAeQ,EAAG,OAAQ,CAAEP,MAAOT,IACnCgB,CACX,CAGO,MAAMY,UAAuBC,MAChC,WAAAC,GACIC,MAAM,2EACV,EAEG,MAAMC,UAAwBH,MACjC,WAAAC,CAAY9B,GACR+B,MAAM,uDAAuD/B,KAC7DsB,KAAKtB,KAAO,gBAChB,EAEG,MAAMiC,GAAe,GACrB,SAASC,GAAOC,GAGnB,OAAOF,EACX,CC5CO,SAASG,GAAsBpB,EAAGP,GACrC,MAAqB,iBAAVA,EACAA,EAAM4B,WACV5B,CACX,CACO,SAAS6B,GAAOC,GAEnB,MAAO,CACH,SAAI9B,GACU,CACN,MAAMA,EAAQ8B,IAEd,OADAhC,OAAOC,eAAec,KAAM,QAAS,CAAEb,UAChCA,CACX,CAEJ,EAER,CACO,SAAS+B,GAAQC,GACpB,OAAOA,OACX,CACO,SAASC,GAAWC,GACvB,MAAMC,EAAQD,EAAOE,WAAW,KAAO,EAAI,EACrCC,EAAMH,EAAOI,SAAS,KAAOJ,EAAOK,OAAS,EAAIL,EAAOK,OAC9D,OAAOL,EAAOM,MAAML,EAAOE,EAC/B,CAgBA,MAAMI,GAAazB,OAAO,cACnB,SAAS0B,GAAWC,EAAQC,EAAKd,GACpC,IAAI9B,EACJF,OAAOC,eAAe4C,EAAQC,EAAK,CAC/B,GAAAC,GACI,GAAI7C,IAAUyC,GAQd,YAJcK,IAAV9C,IACAA,EAAQyC,GACRzC,EAAQ8B,KAEL9B,CACX,EACA,GAAA+C,CAAIC,GACAlD,OAAOC,eAAe4C,EAAQC,EAAK,CAC/B5C,MAAOgD,GAIf,EACAC,cAAc,GAEtB,CAIO,SAASC,GAAWC,EAAQC,EAAMpD,GACrCF,OAAOC,eAAeoD,EAAQC,EAAM,CAChCpD,QACAqD,UAAU,EACVnD,YAAY,EACZ+C,cAAc,GAEtB,CACO,SAASK,MAAaC,GACzB,MAAMC,EAAoB,GAC1B,IAAK,MAAM5D,KAAO2D,EAAM,CACpB,MAAME,EAAc3D,OAAO4D,0BAA0B9D,GACrDE,OAAO6D,OAAOH,EAAmBC,EACrC,CACA,OAAO3D,OAAO8D,iBAAiB,GAAIJ,EACvC,CA4BO,SAASK,GAAIC,GAChB,OAAOC,KAAKC,UAAUF,EAC1B,CACO,MAAMG,GAAqB,sBAAuB7C,MAAQA,MAAM6C,kBAAoB,IAAIC,OACxF,SAASC,GAASC,GACrB,MAAuB,iBAATA,GAA8B,OAATA,IAAkBC,MAAMC,QAAQF,EACvE,CACO,MAAMG,GAAa1C,GAAO,KAE7B,GAAyB,oBAAd2C,WAA6BA,WAAWC,WAAWC,SAAS,cACnE,OAAO,EAEX,IAGI,OADA,IADUC,SACJ,KACC,CACX,CACA,MAAOpE,GACH,OAAO,CACX,IAEG,SAASqE,GAAcC,GAC1B,IAAoB,IAAhBV,GAASU,GACT,OAAO,EAEX,MAAMC,EAAOD,EAAExD,YACf,QAAayB,IAATgC,EACA,OAAO,EAEX,MAAMC,EAAOD,EAAKtE,UAClB,OAAuB,IAAnB2D,GAASY,KAGuD,IAAhEjF,OAAOU,UAAUwE,eAAeC,KAAKF,EAAM,gBAInD,CACO,SAASG,GAAaL,GACzB,OAAID,GAAcC,GACP,IAAKA,GACZR,MAAMC,QAAQO,GACP,IAAIA,GACRA,CACX,CAuDO,MAAMM,GAAmB,IAAI/E,IAAI,CAAC,SAAU,SAAU,WAEtD,SAASgF,GAAYtB,GACxB,OAAOA,EAAIuB,QAAQ,sBAAuB,OAC9C,CAEO,SAASC,GAAM3F,EAAMC,EAAKH,GAC7B,MAAM8F,EAAK,IAAI5F,EAAKM,KAAKS,OAAOd,GAAOD,EAAKM,KAAKL,KAGjD,OAFKA,IAAOH,GAAQ+F,SAChBD,EAAGtF,KAAKuF,OAAS7F,GACd4F,CACX,CACO,SAASE,GAAgBC,GAC5B,MAAMjG,EAASiG,EACf,IAAKjG,EACD,MAAO,GACX,GAAsB,iBAAXA,EACP,MAAO,CAAEkG,MAAO,IAAMlG,GAC1B,QAAwBqD,IAApBrD,GAAQmG,QAAuB,CAC/B,QAAsB9C,IAAlBrD,GAAQkG,MACR,MAAM,IAAIvE,MAAM,oDACpB3B,EAAOkG,MAAQlG,EAAOmG,OAC1B,CAEA,cADOnG,EAAOmG,QACc,iBAAjBnG,EAAOkG,MACP,IAAKlG,EAAQkG,MAAO,IAAMlG,EAAOkG,OACrClG,CACX,CA4NO,SAASoG,GAAQC,EAAGC,EAAa,GACpC,IAAkB,IAAdD,EAAED,QACF,OAAO,EACX,IAAK,IAAIG,EAAID,EAAYC,EAAIF,EAAEG,OAAO1D,OAAQyD,IAC1C,IAA8B,IAA1BF,EAAEG,OAAOD,IAAIE,SACb,OAAO,EAGf,OAAO,CACX,CACO,SAASC,GAAaC,EAAMH,GAC/B,OAAOA,EAAOI,IAAKC,IACf,IAAIzG,EAGJ,OAFCA,EAAKyG,GAAKF,OAASvG,EAAGuG,KAAO,IAC9BE,EAAIF,KAAKG,QAAQH,GACVE,GAEf,CACO,SAASE,GAAcZ,GAC1B,MAA0B,iBAAZA,EAAuBA,EAAUA,GAASA,OAC5D,CACO,SAASa,GAAcH,EAAKI,EAAKjF,GACpC,MAAMkF,EAAO,IAAKL,EAAKF,KAAME,EAAIF,MAAQ,IAEzC,IAAKE,EAAIV,QAAS,CACd,MAAMA,EAAUY,GAAcF,EAAI3G,MAAMM,KAAKL,KAAK+F,QAAQW,KACtDE,GAAcE,GAAKf,QAAQW,KAC3BE,GAAc/E,EAAOmF,cAAcN,KACnCE,GAAc/E,EAAOoF,cAAcP,KACnC,gBACJK,EAAKf,QAAUA,CACnB,CAOA,cALOe,EAAKhH,YACLgH,EAAKT,SACPQ,GAAKI,oBACCH,EAAK3E,MAET2E,CACX,CAWO,SAASI,GAAoB/E,GAChC,OAAIqC,MAAMC,QAAQtC,GACP,QACU,iBAAVA,EACA,SACJ,SACX,CACO,SAASgF,MAASC,GACrB,MAAOX,EAAKtE,EAAOrC,GAAQsH,EAC3B,MAAmB,iBAARX,EACA,CACHV,QAASU,EACTY,KAAM,SACNlF,QACArC,QAGD,IAAK2G,EAChB,CCliBA,MAAM9G,GAAc,CAACG,EAAMC,KACvBD,EAAKJ,KAAO,YACZO,OAAOC,eAAeJ,EAAM,OAAQ,CAChCK,MAAOL,EAAKM,KACZC,YAAY,IAEhBJ,OAAOC,eAAeJ,EAAM,SAAU,CAClCK,MAAOJ,EACPM,YAAY,IAEhBP,EAAKiG,QAAU7B,KAAKC,UAAUpE,EAAKuH,GAA4B,GAC/DrH,OAAOC,eAAeJ,EAAM,WAAY,CACpCK,MAAO,IAAML,EAAKiG,QAClB1F,YAAY,KAGPkH,GAAY9H,EAAa,YAAaE,IACtC6H,GAAgB/H,EAAa,YAAaE,GAAa,CAAEmB,OAAQS,QChBvE,MAAMkG,GAAUC,GAAS,CAACC,EAAQxH,EAAOyH,EAAM/B,KAClD,MAAMgB,EAAMe,EAAO3H,OAAO6D,OAAO8D,EAAM,CAAEC,OAAO,IAAW,CAAEA,OAAO,GAC9DC,EAASH,EAAOvH,KAAK2H,IAAI,CAAE5H,QAAOiG,OAAQ,IAAMS,GACtD,GAAIiB,aAAkBE,QAClB,MAAM,IAAIC,EAEd,GAAIH,EAAO1B,OAAO1D,OAAQ,CACtB,MAAMwF,EAAI,IAAKrC,GAASsC,KAAOT,GAAMI,EAAO1B,OAAOI,IAAKC,GAAQ2B,GAAmB3B,EAAKI,EAAKwB,QAE7F,MADAC,GAAuBJ,EAAGrC,GAAS0C,QAC7BL,CACV,CACA,OAAOJ,EAAO3H,OAGLqI,GAAed,GAASG,MAAOF,EAAQxH,EAAOyH,EAAMhI,KAC7D,MAAMiH,EAAMe,EAAO3H,OAAO6D,OAAO8D,EAAM,CAAEC,OAAO,IAAU,CAAEA,OAAO,GACnE,IAAIC,EAASH,EAAOvH,KAAK2H,IAAI,CAAE5H,QAAOiG,OAAQ,IAAMS,GAGpD,GAFIiB,aAAkBE,UAClBF,QAAeA,GACfA,EAAO1B,OAAO1D,OAAQ,CACtB,MAAMwF,EAAI,IAAKtI,GAAQuI,KAAOT,GAAMI,EAAO1B,OAAOI,IAAKC,GAAQ2B,GAAmB3B,EAAKI,EAAKwB,QAE5F,MADAC,GAAuBJ,EAAGtI,GAAQ2I,QAC5BL,CACV,CACA,OAAOJ,EAAO3H,OAGLsI,GAAcf,GAAS,CAACC,EAAQxH,EAAOyH,KAChD,MAAMf,EAAMe,EAAO,IAAKA,EAAMC,OAAO,GAAU,CAAEA,OAAO,GAClDC,EAASH,EAAOvH,KAAK2H,IAAI,CAAE5H,QAAOiG,OAAQ,IAAMS,GACtD,GAAIiB,aAAkBE,QAClB,MAAM,IAAIC,EAEd,OAAOH,EAAO1B,OAAO1D,OACf,CACEgG,SAAS,EACT5C,MAAO,IAAK4B,GAAQiB,IAAkBb,EAAO1B,OAAOI,IAAKC,GAAQ2B,GAAmB3B,EAAKI,EAAKwB,SAEhG,CAAEK,SAAS,EAAMnE,KAAMuD,EAAO3H,QAE3ByI,GAA2BH,GAAWI,IACtCC,GAAmBpB,GAASG,MAAOF,EAAQxH,EAAOyH,KAC3D,MAAMf,EAAMe,EAAO3H,OAAO6D,OAAO8D,EAAM,CAAEC,OAAO,IAAU,CAAEA,OAAO,GACnE,IAAIC,EAASH,EAAOvH,KAAK2H,IAAI,CAAE5H,QAAOiG,OAAQ,IAAMS,GAGpD,OAFIiB,aAAkBE,UAClBF,QAAeA,GACZA,EAAO1B,OAAO1D,OACf,CACEgG,SAAS,EACT5C,MAAO,IAAI4B,EAAKI,EAAO1B,OAAOI,IAAKC,GAAQ2B,GAAmB3B,EAAKI,EAAKwB,SAE1E,CAAEK,SAAS,EAAMnE,KAAMuD,EAAO3H,QAE3B4I,GAAgCD,GAAgBD,IAChDG,GAAWtB,GAAS,CAACC,EAAQxH,EAAOyH,KAC7C,MAAMf,EAAMe,EAAO3H,OAAO6D,OAAO8D,EAAM,CAAEqB,UAAW,aAAgB,CAAEA,UAAW,YACjF,OAAOxB,GAAOC,EAAPD,CAAaE,EAAQxH,EAAO0G,IAG1BqC,GAAWxB,GAAS,CAACC,EAAQxH,EAAOyH,IACtCH,GAAOC,EAAPD,CAAaE,EAAQxH,EAAOyH,GAG1BuB,GAAgBzB,GAASG,MAAOF,EAAQxH,EAAOyH,KACxD,MAAMf,EAAMe,EAAO3H,OAAO6D,OAAO8D,EAAM,CAAEqB,UAAW,aAAgB,CAAEA,UAAW,YACjF,OAAOT,GAAYd,EAAZc,CAAkBb,EAAQxH,EAAO0G,IAG/BuC,GAAgB1B,GAASG,MAAOF,EAAQxH,EAAOyH,IACjDY,GAAYd,EAAZc,CAAkBb,EAAQxH,EAAOyH,GAG/ByB,GAAe3B,GAAS,CAACC,EAAQxH,EAAOyH,KACjD,MAAMf,EAAMe,EAAO3H,OAAO6D,OAAO8D,EAAM,CAAEqB,UAAW,aAAgB,CAAEA,UAAW,YACjF,OAAOR,GAAWf,EAAXe,CAAiBd,EAAQxH,EAAO0G,IAG9ByC,GAAe5B,GAAS,CAACC,EAAQxH,EAAOyH,IAC1Ca,GAAWf,EAAXe,CAAiBd,EAAQxH,EAAOyH,GAG9B2B,GAAoB7B,GAASG,MAAOF,EAAQxH,EAAOyH,KAC5D,MAAMf,EAAMe,EAAO3H,OAAO6D,OAAO8D,EAAM,CAAEqB,UAAW,aAAgB,CAAEA,UAAW,YACjF,OAAOH,GAAgBpB,EAAhBoB,CAAsBnB,EAAQxH,EAAO0G,IAGnC2C,GAAoB9B,GAASG,MAAOF,EAAQxH,EAAOyH,IACrDkB,GAAgBpB,EAAhBoB,CAAsBnB,EAAQxH,EAAOyH,GC1FnC6B,GAAO,mBACPC,GAAQ,cACRC,GAAO,wCACPC,GAAM,oBACNC,GAAQ,oBACRC,GAAS,sBAETC,GAAW,gGAIXC,GAAO,kFAIPC,GAAQC,GACZA,EAEE,IAAIC,OAAO,mCAAmCD,4DAD1C,yKAOFE,GAAQ,mGAcd,MAAMC,GAAO,sHACPC,GAAO,+XACPC,GAAS,2IACTC,GAAS,iIAETC,GAAS,8EACTC,GAAY,mBAGZC,GAAW,yHAGXC,GAAO,2BAEdC,GAAa,sNACNC,GAAqB,IAAIX,OAAO,IAAIU,OACjD,SAASE,GAAW3D,GAChB,MAAM4D,EAAO,8BAQb,MAPwC,iBAAnB5D,EAAK6D,WACD,IAAnB7D,EAAK6D,UACD,GAAGD,IACgB,IAAnB5D,EAAK6D,UACD,GAAGD,aACH,GAAGA,oBAAuB5D,EAAK6D,aACvC,GAAGD,6BAEb,CAgBO,MAaME,GAAY,YAEZC,GAAY,YC3FZC,GAA0BC,EAAkB,YAAa,CAACvL,EAAMC,KACzE,IAAIC,EACJF,EAAKM,OAASN,EAAKM,KAAO,IAC1BN,EAAKM,KAAKL,IAAMA,GACfC,EAAKF,EAAKM,MAAMkL,WAAatL,EAAGsL,SAAW,MA8SnCC,GAAmCF,EAAkB,qBAAsB,CAACvL,EAAMC,KAC3F,IAAIC,EACJoL,GAAUvL,KAAKC,EAAMC,IACpBC,EAAKF,EAAKM,KAAKL,KAAKyL,OAASxL,EAAGwL,KAAQC,IACrC,MAAMC,EAAMD,EAAQtL,MACpB,OAAQwL,GAAaD,SAAuBzI,IAAfyI,EAAIhJ,SAErC5C,EAAKM,KAAKkL,SAASM,KAAM9L,IACrB,MAAM+L,EAAQ/L,EAAKM,KAAK0L,IAAIC,SAAWC,OAAOC,kBAC1ClM,EAAIgM,QAAUF,IACd/L,EAAKM,KAAK0L,IAAIC,QAAUhM,EAAIgM,WAEpCjM,EAAKM,KAAK8L,MAAST,IACf,MAAMtJ,EAAQsJ,EAAQtL,MAEtB,GADegC,EAAMO,QACP3C,EAAIgM,QACd,OACJ,MAAMI,EAASC,GAAyBjK,GACxCsJ,EAAQrF,OAAOwF,KAAK,CAChBO,SACA9E,KAAM,UACN0E,QAAShM,EAAIgM,QACbM,WAAW,EACXlK,QACArC,OACAuG,UAAWtG,EAAIuM,WAIdC,GAAmClB,EAAkB,qBAAsB,CAACvL,EAAMC,KAC3F,IAAIC,EACJoL,GAAUvL,KAAKC,EAAMC,IACpBC,EAAKF,EAAKM,KAAKL,KAAKyL,OAASxL,EAAGwL,KAAQC,IACrC,MAAMC,EAAMD,EAAQtL,MACpB,OAAQwL,GAAaD,SAAuBzI,IAAfyI,EAAIhJ,SAErC5C,EAAKM,KAAKkL,SAASM,KAAM9L,IACrB,MAAM+L,EAAQ/L,EAAKM,KAAK0L,IAAIU,SAAWR,OAAOS,kBAC1C1M,EAAIyM,QAAUX,IACd/L,EAAKM,KAAK0L,IAAIU,QAAUzM,EAAIyM,WAEpC1M,EAAKM,KAAK8L,MAAST,IACf,MAAMtJ,EAAQsJ,EAAQtL,MAEtB,GADegC,EAAMO,QACP3C,EAAIyM,QACd,OACJ,MAAML,EAASC,GAAyBjK,GACxCsJ,EAAQrF,OAAOwF,KAAK,CAChBO,SACA9E,KAAM,YACNmF,QAASzM,EAAIyM,QACbH,WAAW,EACXlK,QACArC,OACAuG,UAAWtG,EAAIuM,WAIdI,GAAsCrB,EAAkB,wBAAyB,CAACvL,EAAMC,KACjG,IAAIC,EACJoL,GAAUvL,KAAKC,EAAMC,IACpBC,EAAKF,EAAKM,KAAKL,KAAKyL,OAASxL,EAAGwL,KAAQC,IACrC,MAAMC,EAAMD,EAAQtL,MACpB,OAAQwL,GAAaD,SAAuBzI,IAAfyI,EAAIhJ,SAErC5C,EAAKM,KAAKkL,SAASM,KAAM9L,IACrB,MAAMgM,EAAMhM,EAAKM,KAAK0L,IACtBA,EAAIU,QAAUzM,EAAI2C,OAClBoJ,EAAIC,QAAUhM,EAAI2C,OAClBoJ,EAAIpJ,OAAS3C,EAAI2C,SAErB5C,EAAKM,KAAK8L,MAAST,IACf,MAAMtJ,EAAQsJ,EAAQtL,MAChBuC,EAASP,EAAMO,OACrB,GAAIA,IAAW3C,EAAI2C,OACf,OACJ,MAAMyJ,EAASC,GAAyBjK,GAClCwK,EAASjK,EAAS3C,EAAI2C,OAC5B+I,EAAQrF,OAAOwF,KAAK,CAChBO,YACIQ,EAAS,CAAEtF,KAAM,UAAW0E,QAAShM,EAAI2C,QAAW,CAAE2E,KAAM,YAAamF,QAASzM,EAAI2C,QAC1F2J,WAAW,EACXO,OAAO,EACPzK,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,WAIdO,GAAsCxB,EAAkB,wBAAyB,CAACvL,EAAMC,KACjG,IAAIC,EAAI8M,EACR1B,GAAUvL,KAAKC,EAAMC,GACrBD,EAAKM,KAAKkL,SAASM,KAAM9L,IACrB,MAAMgM,EAAMhM,EAAKM,KAAK0L,IACtBA,EAAIiB,OAAShN,EAAIgN,OACbhN,EAAIiN,UACJlB,EAAImB,WAAanB,EAAImB,SAAW,IAAI1M,KACpCuL,EAAImB,SAASzM,IAAIT,EAAIiN,YAGzBjN,EAAIiN,SACHhN,EAAKF,EAAKM,MAAM8L,QAAUlM,EAAGkM,MAAST,IACnC1L,EAAIiN,QAAQE,UAAY,EACpBnN,EAAIiN,QAAQG,KAAK1B,EAAQtL,QAE7BsL,EAAQrF,OAAOwF,KAAK,CAChBO,OAAQ,SACR9E,KAAM,iBACN0F,OAAQhN,EAAIgN,OACZ5K,MAAOsJ,EAAQtL,SACXJ,EAAIiN,QAAU,CAAEA,QAASjN,EAAIiN,QAAQjL,YAAe,GACxDjC,OACAuG,UAAWtG,EAAIuM,WAItBQ,EAAKhN,EAAKM,MAAM8L,QAAUY,EAAGZ,MAAQ,UAEjCkB,GAA+B/B,EAAkB,iBAAkB,CAACvL,EAAMC,KACnF8M,GAAsBhN,KAAKC,EAAMC,GACjCD,EAAKM,KAAK8L,MAAST,IACf1L,EAAIiN,QAAQE,UAAY,EACpBnN,EAAIiN,QAAQG,KAAK1B,EAAQtL,QAE7BsL,EAAQrF,OAAOwF,KAAK,CAChBO,OAAQ,SACR9E,KAAM,iBACN0F,OAAQ,QACR5K,MAAOsJ,EAAQtL,MACf6M,QAASjN,EAAIiN,QAAQjL,WACrBjC,OACAuG,UAAWtG,EAAIuM,WAIde,GAAmChC,EAAkB,qBAAsB,CAACvL,EAAMC,KAC3FA,EAAIiN,UAAYjN,EAAIiN,QAAUM,IAC9BT,GAAsBhN,KAAKC,EAAMC,KAExBwN,GAAmClC,EAAkB,qBAAsB,CAACvL,EAAMC,KAC3FA,EAAIiN,UAAYjN,EAAIiN,QAAUQ,IAC9BX,GAAsBhN,KAAKC,EAAMC,KAExB0N,GAAkCpC,EAAkB,oBAAqB,CAACvL,EAAMC,KACzFqL,GAAUvL,KAAKC,EAAMC,GACrB,MAAM2N,EAAeC,GAAiB5N,EAAI8E,UACpCmI,EAAU,IAAI7C,OAA+B,iBAAjBpK,EAAI6N,SAAwB,MAAM7N,EAAI6N,YAAYF,IAAiBA,GACrG3N,EAAIiN,QAAUA,EACdlN,EAAKM,KAAKkL,SAASM,KAAM9L,IACrB,MAAMgM,EAAMhM,EAAKM,KAAK0L,IACtBA,EAAImB,WAAanB,EAAImB,SAAW,IAAI1M,KACpCuL,EAAImB,SAASzM,IAAIwM,KAErBlN,EAAKM,KAAK8L,MAAST,IACXA,EAAQtL,MAAM0E,SAAS9E,EAAI8E,SAAU9E,EAAI6N,WAE7CnC,EAAQrF,OAAOwF,KAAK,CAChBO,OAAQ,SACR9E,KAAM,iBACN0F,OAAQ,WACRlI,SAAU9E,EAAI8E,SACd1C,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,WAIduB,GAAoCxC,EAAkB,sBAAuB,CAACvL,EAAMC,KAC7FqL,GAAUvL,KAAKC,EAAMC,GACrB,MAAMiN,EAAU,IAAI7C,OAAO,IAAIwD,GAAiB5N,EAAI+N,aACpD/N,EAAIiN,UAAYjN,EAAIiN,QAAUA,GAC9BlN,EAAKM,KAAKkL,SAASM,KAAM9L,IACrB,MAAMgM,EAAMhM,EAAKM,KAAK0L,IACtBA,EAAImB,WAAanB,EAAImB,SAAW,IAAI1M,KACpCuL,EAAImB,SAASzM,IAAIwM,KAErBlN,EAAKM,KAAK8L,MAAST,IACXA,EAAQtL,MAAMoC,WAAWxC,EAAI+N,SAEjCrC,EAAQrF,OAAOwF,KAAK,CAChBO,OAAQ,SACR9E,KAAM,iBACN0F,OAAQ,cACRe,OAAQ/N,EAAI+N,OACZ3L,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,WAIdyB,GAAkC1C,EAAkB,oBAAqB,CAACvL,EAAMC,KACzFqL,GAAUvL,KAAKC,EAAMC,GACrB,MAAMiN,EAAU,IAAI7C,OAAO,KAAKwD,GAAiB5N,EAAIiO,YACrDjO,EAAIiN,UAAYjN,EAAIiN,QAAUA,GAC9BlN,EAAKM,KAAKkL,SAASM,KAAM9L,IACrB,MAAMgM,EAAMhM,EAAKM,KAAK0L,IACtBA,EAAImB,WAAanB,EAAImB,SAAW,IAAI1M,KACpCuL,EAAImB,SAASzM,IAAIwM,KAErBlN,EAAKM,KAAK8L,MAAST,IACXA,EAAQtL,MAAMsC,SAAS1C,EAAIiO,SAE/BvC,EAAQrF,OAAOwF,KAAK,CAChBO,OAAQ,SACR9E,KAAM,iBACN0F,OAAQ,YACRiB,OAAQjO,EAAIiO,OACZ7L,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,WA4Cd2B,GAAmC5C,EAAkB,qBAAsB,CAACvL,EAAMC,KAC3FqL,GAAUvL,KAAKC,EAAMC,GACrBD,EAAKM,KAAK8L,MAAST,IACfA,EAAQtL,MAAQJ,EAAImO,GAAGzC,EAAQtL,UCtjBhC,MAAMgO,GACT,WAAA3M,CAAY4F,EAAO,IACfpG,KAAKoN,QAAU,GACfpN,KAAKqN,OAAS,EACVrN,OACAA,KAAKoG,KAAOA,EACpB,CACA,QAAAkH,CAASpN,GACLF,KAAKqN,QAAU,EACfnN,EAAGF,MACHA,KAAKqN,QAAU,CACnB,CACA,KAAAE,CAAMC,GACF,GAAmB,mBAARA,EAGP,OAFAA,EAAIxN,KAAM,CAAEyN,UAAW,cACvBD,EAAIxN,KAAM,CAAEyN,UAAW,UAG3B,MACMC,EADUF,EACMG,MAAM,MAAMC,OAAQ3I,GAAMA,GAC1C4I,EAAYC,KAAKC,OAAOL,EAAMlI,IAAKP,GAAMA,EAAEvD,OAASuD,EAAE+I,YAAYtM,SAClEuM,EAAWP,EAAMlI,IAAKP,GAAMA,EAAEtD,MAAMkM,IAAYrI,IAAKP,GAAM,IAAIiJ,OAAqB,EAAdlO,KAAKqN,QAAcpI,GAC/F,IAAK,MAAMkJ,KAAQF,EACfjO,KAAKoN,QAAQxC,KAAKuD,EAE1B,CACA,OAAAC,GACI,MAAMC,EAAIvK,SACJsC,EAAOpG,MAAMoG,KAInB,OAAO,IAAIiI,KAAKjI,EAFF,KADEpG,MAAMoN,SAAW,CAAC,KACR5H,IAAKP,GAAM,KAAKA,MAEdqJ,KAAK,MACrC,ECjCG,MAAMpF,GAAU,CACnBqF,MAAO,EACPC,MAAO,EACPC,MAAO,ICIEC,GAAyBrE,EAAkB,WAAY,CAACvL,EAAMC,KACvE,IAAIC,EACJF,IAASA,EAAO,IAChBA,EAAKM,KAAKL,IAAMA,EAChBD,EAAKM,KAAK0L,IAAMhM,EAAKM,KAAK0L,KAAO,GACjChM,EAAKM,KAAK8J,QAAUA,GACpB,MAAMyF,EAAS,IAAK7P,EAAKM,KAAKL,IAAI4P,QAAU,IAExC7P,EAAKM,KAAKE,OAAOe,IAAI,cACrBsO,EAAOjJ,QAAQ5G,GAEnB,IAAK,MAAM8P,KAAMD,EACb,IAAK,MAAMzO,KAAM0O,EAAGxP,KAAKkL,SACrBpK,EAAGpB,GAGX,GAAsB,IAAlB6P,EAAOjN,QAGN1C,EAAKF,EAAKM,MAAMa,WAAajB,EAAGiB,SAAW,IAC5CnB,EAAKM,KAAKa,UAAU2K,KAAK,KACrB9L,EAAKM,KAAK2H,IAAMjI,EAAKM,KAAKyP,YAG7B,CACD,MAAMC,EAAY,CAACrE,EAASkE,EAAQ9I,KAChC,IACIkJ,EADAC,EAAYC,GAAaxE,GAE7B,IAAK,MAAMmE,KAAMD,EAAQ,CACrB,GAAIC,EAAGxP,KAAKL,IAAIyL,KAAM,CAElB,IADkBoE,EAAGxP,KAAKL,IAAIyL,KAAKC,GAE/B,QACR,MACK,GAAIuE,EACL,SAEJ,MAAME,EAAUzE,EAAQrF,OAAO1D,OACzBhC,EAAIkP,EAAGxP,KAAK8L,MAAMT,GACxB,GAAI/K,aAAasH,UAA0B,IAAfnB,GAAKgB,MAC7B,MAAM,IAAII,EAEd,GAAI8H,GAAerP,aAAasH,QAC5B+H,GAAeA,GAAe/H,QAAQmI,WAAWC,KAAKvI,gBAC5CnH,EACU+K,EAAQrF,OAAO1D,SACfwN,IAEXF,IACDA,EAAYC,GAAaxE,EAASyE,WAGzC,CAED,GADgBzE,EAAQrF,OAAO1D,SACfwN,EACZ,SACCF,IACDA,EAAYC,GAAaxE,EAASyE,GAC1C,CACJ,CACA,OAAIH,EACOA,EAAYK,KAAK,IACb3E,GAGRA,GAYL4E,EAAqB,CAACC,EAAQ7E,EAAS5E,KAEzC,GAAIoJ,GAAaK,GAEb,OADAA,EAAOtK,SAAU,EACVsK,EAGX,MAAMC,EAAcT,EAAUrE,EAASkE,EAAQ9I,GAC/C,GAAI0J,aAAuBvI,QAAS,CAChC,IAAkB,IAAdnB,EAAIgB,MACJ,MAAM,IAAII,EACd,OAAOsI,EAAYH,KAAMG,GAAgBzQ,EAAKM,KAAKyP,MAAMU,EAAa1J,GAC1E,CACA,OAAO/G,EAAKM,KAAKyP,MAAMU,EAAa1J,IAExC/G,EAAKM,KAAK2H,IAAM,CAAC0D,EAAS5E,KACtB,GAAIA,EAAI2J,WACJ,OAAO1Q,EAAKM,KAAKyP,MAAMpE,EAAS5E,GAEpC,GAAsB,aAAlBA,EAAIoC,UAA0B,CAG9B,MAAMqH,EAASxQ,EAAKM,KAAKyP,MAAM,CAAE1P,MAAOsL,EAAQtL,MAAOiG,OAAQ,IAAM,IAAKS,EAAK2J,YAAY,IAC3F,OAAIF,aAAkBtI,QACXsI,EAAOF,KAAME,GACTD,EAAmBC,EAAQ7E,EAAS5E,IAG5CwJ,EAAmBC,EAAQ7E,EAAS5E,EAC/C,CAEA,MAAMiB,EAAShI,EAAKM,KAAKyP,MAAMpE,EAAS5E,GACxC,GAAIiB,aAAkBE,QAAS,CAC3B,IAAkB,IAAdnB,EAAIgB,MACJ,MAAM,IAAII,EACd,OAAOH,EAAOsI,KAAMtI,GAAWgI,EAAUhI,EAAQ6H,EAAQ9I,GAC7D,CACA,OAAOiJ,EAAUhI,EAAQ6H,EAAQ9I,GAEzC,CACA/G,EAAK,aAAe,CAChB2Q,SAAWtQ,IACP,IACI,MAAMuQ,EAAI9H,GAAU9I,EAAMK,GAC1B,OAAOuQ,EAAEhI,QAAU,CAAEvI,MAAOuQ,EAAEnM,MAAS,CAAE6B,OAAQsK,EAAE5K,OAAOM,OAC9D,CACA,MAAO1F,GACH,OAAOqI,GAAejJ,EAAMK,GAAOiQ,KAAMM,GAAOA,EAAEhI,QAAU,CAAEvI,MAAOuQ,EAAEnM,MAAS,CAAE6B,OAAQsK,EAAE5K,OAAOM,QACvG,GAEJuK,OAAQ,MACRzG,QAAS,KAIJ0G,GAA2BvF,EAAkB,aAAc,CAACvL,EAAMC,KJ3DzD,IAACH,EI4DnB8P,GAAS7P,KAAKC,EAAMC,GACpBD,EAAKM,KAAK4M,QAAU,IAAKlN,GAAMM,KAAK0L,KAAKmB,UAAY,IAAK4D,QJ7DvCjR,EI6D+DE,EAAKM,KAAK0L,IJ3DrF,IAAI3B,OAAO,IADJvK,EAAS,YAAYA,GAAQ4M,SAAW,KAAK5M,GAAQmM,SAAW,MAAQ,iBI6DtFjM,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS/K,KACxB,GAAIX,EAAI+Q,OACJ,IACIrF,EAAQtL,MAAQ4Q,OAAOtF,EAAQtL,MACnC,CACA,MAAOO,GAAK,CAChB,MAA6B,iBAAlB+K,EAAQtL,OAEnBsL,EAAQrF,OAAOwF,KAAK,CAChBoF,SAAU,SACV3J,KAAM,eACNlF,MAAOsJ,EAAQtL,MACfL,SALO2L,KAUNwF,GAAiC5F,EAAkB,mBAAoB,CAACvL,EAAMC,KAEvFmR,GAA6BrR,KAAKC,EAAMC,GACxC6Q,GAAW/Q,KAAKC,EAAMC,KAEboR,GAAyB9F,EAAkB,WAAY,CAACvL,EAAMC,KACvEA,EAAIiN,UAAYjN,EAAIiN,QAAUoE,IAC9BH,GAAiBpR,KAAKC,EAAMC,KAEnBsR,GAAyBhG,EAAkB,WAAY,CAACvL,EAAMC,KACvE,GAAIA,EAAImK,QAAS,CACb,MAUM/G,EAVa,CACfmO,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,GAEa9R,EAAImK,SACzB,QAAUjH,IAANE,EACA,MAAM,IAAI5B,MAAM,0BAA0BxB,EAAImK,YAClDnK,EAAIiN,UAAYjN,EAAIiN,QAAU8E,GAAa3O,GAC/C,MAEIpD,EAAIiN,UAAYjN,EAAIiN,QAAU8E,MAClCb,GAAiBpR,KAAKC,EAAMC,KAEnBgS,GAA0B1G,EAAkB,YAAa,CAACvL,EAAMC,KACzEA,EAAIiN,UAAYjN,EAAIiN,QAAUgF,IAC9Bf,GAAiBpR,KAAKC,EAAMC,KAEnBkS,GAAwB5G,EAAkB,UAAW,CAACvL,EAAMC,KACrEkR,GAAiBpR,KAAKC,EAAMC,GAC5BD,EAAKM,KAAK8L,MAAST,IACf,IAEI,MAAMyG,EAAUzG,EAAQtL,MAAMgS,OAExBC,EAAM,IAAIC,IAAIH,GAsCpB,OArCInS,EAAI4K,WACJ5K,EAAI4K,SAASuC,UAAY,EACpBnN,EAAI4K,SAASwC,KAAKiF,EAAIzH,WACvBc,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,iBACN0F,OAAQ,MACRuF,KAAM,mBACNtF,QAASuF,GAAiBlQ,OAC1BF,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,SAIvBvM,EAAIyS,WACJzS,EAAIyS,SAAStF,UAAY,EACpBnN,EAAIyS,SAASrF,KAAKiF,EAAII,SAAS/P,SAAS,KAAO2P,EAAII,SAAS7P,MAAM,GAAI,GAAKyP,EAAII,WAChF/G,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,iBACN0F,OAAQ,MACRuF,KAAM,mBACNtF,QAASjN,EAAIyS,SAASnQ,OACtBF,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,cAKvBvM,EAAI0S,UAEJhH,EAAQtL,MAAQiS,EAAIM,KAIpBjH,EAAQtL,MAAQ+R,EAGxB,CACA,MAAOxR,GACH+K,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,iBACN0F,OAAQ,MACR5K,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,OAEvB,KAGKqG,GAA0BtH,EAAkB,YAAa,CAACvL,EAAMC,KACzEA,EAAIiN,UAAYjN,EAAIiN,QJxNb,IAAI7C,OAFA,uDAEe,MIyN1B8G,GAAiBpR,KAAKC,EAAMC,KAEnB6S,GAA2BvH,EAAkB,aAAc,CAACvL,EAAMC,KAC3EA,EAAIiN,UAAYjN,EAAIiN,QAAU6F,IAC9B5B,GAAiBpR,KAAKC,EAAMC,KAEnB+S,GAAyBzH,EAAkB,WAAY,CAACvL,EAAMC,KACvEA,EAAIiN,UAAYjN,EAAIiN,QAAU+F,IAC9B9B,GAAiBpR,KAAKC,EAAMC,KAEnBiT,GAA0B3H,EAAkB,YAAa,CAACvL,EAAMC,KACzEA,EAAIiN,UAAYjN,EAAIiN,QAAUiG,IAC9BhC,GAAiBpR,KAAKC,EAAMC,KAEnBmT,GAAyB7H,EAAkB,WAAY,CAACvL,EAAMC,KACvEA,EAAIiN,UAAYjN,EAAIiN,QAAUmG,IAC9BlC,GAAiBpR,KAAKC,EAAMC,KAEnBqT,GAAwB/H,EAAkB,UAAW,CAACvL,EAAMC,KACrEA,EAAIiN,UAAYjN,EAAIiN,QAAUqG,IAC9BpC,GAAiBpR,KAAKC,EAAMC,KAEnBuT,GAA0BjI,EAAkB,YAAa,CAACvL,EAAMC,KACzEA,EAAIiN,UAAYjN,EAAIiN,QAAUuG,IAC9BtC,GAAiBpR,KAAKC,EAAMC,KAEnByT,GAAgCnI,EAAkB,kBAAmB,CAACvL,EAAMC,KACrFA,EAAIiN,UAAYjN,EAAIiN,QJnNjB,SAAkB5F,GACrB,MAAMqM,EAAO1I,GAAW,CAAEE,UAAW7D,EAAK6D,YACpCyI,EAAO,CAAC,KACVtM,EAAKuM,OACLD,EAAK9H,KAAK,IAEVxE,EAAKwM,QACLF,EAAK9H,KAAK,qCACd,MAAMiI,EAAY,GAAGJ,OAAUC,EAAKpE,KAAK,QACzC,OAAO,IAAInF,OAAO,IAAIU,SAAiBgJ,MAC3C,CIyMkCC,CAAiB/T,IAC/CkR,GAAiBpR,KAAKC,EAAMC,KAEnBgU,GAA4B1I,EAAkB,cAAe,CAACvL,EAAMC,KAC7EA,EAAIiN,UAAYjN,EAAIiN,QAAUgH,IAC9B/C,GAAiBpR,KAAKC,EAAMC,KAEnBkU,GAA4B5I,EAAkB,cAAe,CAACvL,EAAMC,KAC7EA,EAAIiN,UAAYjN,EAAIiN,QJ9Nb,IAAI7C,OAAO,IAAIY,GI8NqBhL,QAC3CkR,GAAiBpR,KAAKC,EAAMC,KAEnBmU,GAAgC7I,EAAkB,kBAAmB,CAACvL,EAAMC,KACrFA,EAAIiN,UAAYjN,EAAIiN,QAAUmH,IAC9BlD,GAAiBpR,KAAKC,EAAMC,KAEnBqU,GAAyB/I,EAAkB,WAAY,CAACvL,EAAMC,KACvEA,EAAIiN,UAAYjN,EAAIiN,QAAUqH,IAC9BpD,GAAiBpR,KAAKC,EAAMC,GAC5BD,EAAKM,KAAKkL,SAASM,KAAM9L,IACTA,EAAKM,KAAK0L,IAClBiB,OAAS,WAGRuH,GAAyBjJ,EAAkB,WAAY,CAACvL,EAAMC,KACvEA,EAAIiN,UAAYjN,EAAIiN,QAAUuH,IAC9BtD,GAAiBpR,KAAKC,EAAMC,GAC5BD,EAAKM,KAAKkL,SAASM,KAAM9L,IACTA,EAAKM,KAAK0L,IAClBiB,OAAS,SAEjBjN,EAAKM,KAAK8L,MAAST,IACf,IAEI,IAAI4G,IAAI,WAAW5G,EAAQtL,SAE/B,CACA,MACIsL,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,iBACN0F,OAAQ,OACR5K,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,OAEvB,KAGKkI,GAA2BnJ,EAAkB,aAAc,CAACvL,EAAMC,KAC3EA,EAAIiN,UAAYjN,EAAIiN,QAAUyH,IAC9BxD,GAAiBpR,KAAKC,EAAMC,KAEnB2U,GAA2BrJ,EAAkB,aAAc,CAACvL,EAAMC,KAC3EA,EAAIiN,UAAYjN,EAAIiN,QAAU2H,IAC9B1D,GAAiBpR,KAAKC,EAAMC,GAC5BD,EAAKM,KAAK8L,MAAST,IACf,MAAMmJ,EAAQnJ,EAAQtL,MAAMwO,MAAM,KAClC,IACI,GAAqB,IAAjBiG,EAAMlS,OACN,MAAM,IAAInB,MACd,MAAOsT,EAAS/G,GAAU8G,EAC1B,IAAK9G,EACD,MAAM,IAAIvM,MACd,MAAMuT,EAAY9I,OAAO8B,GACzB,GAAI,GAAGgH,MAAgBhH,EACnB,MAAM,IAAIvM,MACd,GAAIuT,EAAY,GAAKA,EAAY,IAC7B,MAAM,IAAIvT,MAEd,IAAI8Q,IAAI,WAAWwC,KACvB,CACA,MACIpJ,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,iBACN0F,OAAQ,SACR5K,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,OAEvB,KAID,SAASyI,GAAcxQ,GAC1B,GAAa,KAATA,EACA,OAAO,EACX,GAAIA,EAAK7B,OAAS,GAAM,EACpB,OAAO,EACX,IAGI,OADAsS,KAAKzQ,IACE,CACX,CACA,MACI,OAAO,CACX,CACJ,CACO,MAAM0Q,GAA2B5J,EAAkB,aAAc,CAACvL,EAAMC,KAC3EA,EAAIiN,UAAYjN,EAAIiN,QAAUkI,IAC9BjE,GAAiBpR,KAAKC,EAAMC,GAC5BD,EAAKM,KAAKkL,SAASM,KAAM9L,IACrBA,EAAKM,KAAK0L,IAAIqJ,gBAAkB,WAEpCrV,EAAKM,KAAK8L,MAAST,IACXsJ,GAActJ,EAAQtL,QAE1BsL,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,iBACN0F,OAAQ,SACR5K,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,WAYpB,MAAM8I,GAA8B/J,EAAkB,gBAAiB,CAACvL,EAAMC,KACjFA,EAAIiN,UAAYjN,EAAIiN,QAAUqI,IAC9BpE,GAAiBpR,KAAKC,EAAMC,GAC5BD,EAAKM,KAAKkL,SAASM,KAAM9L,IACrBA,EAAKM,KAAK0L,IAAIqJ,gBAAkB,cAEpCrV,EAAKM,KAAK8L,MAAST,KAbhB,SAA0BlH,GAC7B,IAAK8Q,GAAkBlI,KAAK5I,GACxB,OAAO,EACX,MAAMkG,EAASlG,EAAKiB,QAAQ,QAAU8P,GAAa,MAANA,EAAY,IAAM,KAE/D,OAAOP,GADQtK,EAAO8K,OAAsC,EAA/BzG,KAAK0G,KAAK/K,EAAO/H,OAAS,GAAQ,KAEnE,EAQY+S,CAAiBhK,EAAQtL,QAE7BsL,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,iBACN0F,OAAQ,YACR5K,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,WAIdoJ,GAAyBrK,EAAkB,WAAY,CAACvL,EAAMC,KACvEA,EAAIiN,UAAYjN,EAAIiN,QAAU2I,IAC9B1E,GAAiBpR,KAAKC,EAAMC,KAyBzB,MAAM6V,GAAwBvK,EAAkB,UAAW,CAACvL,EAAMC,KACrEkR,GAAiBpR,KAAKC,EAAMC,GAC5BD,EAAKM,KAAK8L,MAAST,KAxBhB,SAAoBoK,EAAOC,EAAY,MAC1C,IACI,MAAMC,EAAcF,EAAMlH,MAAM,KAChC,GAA2B,IAAvBoH,EAAYrT,OACZ,OAAO,EACX,MAAOsT,GAAUD,EACjB,IAAKC,EACD,OAAO,EAEX,MAAMC,EAAe/R,KAAK2L,MAAMmF,KAAKgB,IACrC,QAAI,QAASC,GAAsC,QAAtBA,GAAcC,MAEtCD,EAAaE,KAEdL,MAAgB,QAASG,IAAiBA,EAAaE,MAAQL,GAGvE,CACA,MACI,OAAO,CACX,CACJ,EAIYM,CAAW3K,EAAQtL,MAAOJ,EAAIoW,MAElC1K,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,iBACN0F,OAAQ,MACR5K,MAAOsJ,EAAQtL,MACfL,OACAuG,UAAWtG,EAAIuM,WAwJd+J,GAA4BhL,EAAkB,cAAe,CAACvL,EAAMC,KAC7E2P,GAAS7P,KAAKC,EAAMC,GACpBD,EAAKM,KAAKyP,MAASpE,GAAYA,IAEtB6K,GAA0BjL,EAAkB,YAAa,CAACvL,EAAMC,KACzE2P,GAAS7P,KAAKC,EAAMC,GACpBD,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS7D,KACxB6D,EAAQrF,OAAOwF,KAAK,CAChBoF,SAAU,QACV3J,KAAM,eACNlF,MAAOsJ,EAAQtL,MACfL,SAEG2L,KA0Cf,SAAS8K,GAAkBzO,EAAQ0O,EAAOC,GAClC3O,EAAO1B,OAAO1D,QACd8T,EAAMpQ,OAAOwF,QAAQ8K,GAAkBD,EAAO3O,EAAO1B,SAEzDoQ,EAAMrW,MAAMsW,GAAS3O,EAAO3H,KAChC,CACO,MAAMwW,GAA0BtL,EAAkB,YAAa,CAACvL,EAAMC,KACzE2P,GAAS7P,KAAKC,EAAMC,GACpBD,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB,MAAM1E,EAAQsJ,EAAQtL,MACtB,IAAKqE,MAAMC,QAAQtC,GAOf,OANAsJ,EAAQrF,OAAOwF,KAAK,CAChBoF,SAAU,QACV3J,KAAM,eACNlF,QACArC,SAEG2L,EAEXA,EAAQtL,MAAQqE,MAAMrC,EAAMO,QAC5B,MAAMkU,EAAQ,GACd,IAAK,IAAIzQ,EAAI,EAAGA,EAAIhE,EAAMO,OAAQyD,IAAK,CACnC,MAAM0Q,EAAO1U,EAAMgE,GACb2B,EAAS/H,EAAI+W,QAAQ1W,KAAK2H,IAAI,CAChC5H,MAAO0W,EACPzQ,OAAQ,IACTS,GACCiB,aAAkBE,QAClB4O,EAAMhL,KAAK9D,EAAOsI,KAAMtI,GAAWyO,GAAkBzO,EAAQ2D,EAAStF,KAGtEoQ,GAAkBzO,EAAQ2D,EAAStF,EAE3C,CACA,OAAIyQ,EAAMlU,OACCsF,QAAQ+O,IAAIH,GAAOxG,KAAK,IAAM3E,GAElCA,KAGf,SAASuL,GAAqBlP,EAAQ0O,EAAOzT,EAAKZ,GAC1C2F,EAAO1B,OAAO1D,QACd8T,EAAMpQ,OAAOwF,QAAQ8K,GAAkB3T,EAAK+E,EAAO1B,cAElCnD,IAAjB6E,EAAO3H,MACH4C,KAAOZ,IACPqU,EAAMrW,MAAM4C,QAAOE,GAIvBuT,EAAMrW,MAAM4C,GAAO+E,EAAO3H,KAElC,CACA,SAAS8W,GAAalX,GAClB,MAAMmX,EAAOjX,OAAOiX,KAAKnX,EAAIoX,OAC7B,IAAK,MAAM1W,KAAKyW,EACZ,IAAKnX,EAAIoX,QAAQ1W,IAAIL,MAAME,QAAQe,IAAI,YACnC,MAAM,IAAIE,MAAM,2BAA2Bd,6BAGnD,MAAM2W,GPvamBD,EOuaOpX,EAAIoX,MPta7BlX,OAAOiX,KAAKC,GAAOvI,OAAQnO,GACC,aAAxB0W,EAAM1W,GAAGL,KAAKiX,OAAiD,aAAzBF,EAAM1W,GAAGL,KAAKkX,SAF5D,IAAsBH,EOwazB,MAAO,IACApX,EACHmX,OACAK,OAAQ,IAAIhX,IAAI2W,GAChBM,QAASN,EAAKxU,OACd+U,aAAc,IAAIlX,IAAI6W,GAE9B,CACA,SAASM,GAAed,EAAOzU,EAAOsJ,EAAS5E,EAAK9G,EAAKD,GACrD,MAAM6X,EAAe,GAEfJ,EAASxX,EAAIwX,OACbK,EAAY7X,EAAI8X,SAASzX,KACzB0X,EAAIF,EAAU7X,IAAIgY,KACxB,IAAK,MAAMhV,KAAO9C,OAAOiX,KAAK/U,GAAQ,CAClC,GAAIoV,EAAOlW,IAAI0B,GACX,SACJ,GAAU,UAAN+U,EAAe,CACfH,EAAa/L,KAAK7I,GAClB,QACJ,CACA,MAAM2N,EAAIkH,EAAU7P,IAAI,CAAE5H,MAAOgC,EAAMY,GAAMqD,OAAQ,IAAMS,GACvD6J,aAAa1I,QACb4O,EAAMhL,KAAK8E,EAAEN,KAAMM,GAAMsG,GAAqBtG,EAAGjF,EAAS1I,EAAKZ,KAG/D6U,GAAqBtG,EAAGjF,EAAS1I,EAAKZ,EAE9C,CASA,OARIwV,EAAajV,QACb+I,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,oBACN6P,KAAMS,EACNxV,QACArC,SAGH8W,EAAMlU,OAEJsF,QAAQ+O,IAAIH,GAAOxG,KAAK,IACpB3E,GAFAA,CAIf,CACO,MAAMuM,GAA2B3M,EAAkB,aAAc,CAACvL,EAAMC,KAE3E2P,GAAS7P,KAAKC,EAAMC,GAEpB,MAAMkY,EAAOhY,OAAOiY,yBAAyBnY,EAAK,SAClD,IAAKkY,GAAMjV,IAAK,CACZ,MAAMmV,EAAKpY,EAAIoX,MACflX,OAAOC,eAAeH,EAAK,QAAS,CAChCiD,IAAK,KACD,MAAMoV,EAAQ,IAAKD,GAInB,OAHAlY,OAAOC,eAAeH,EAAK,QAAS,CAChCI,MAAOiY,IAEJA,IAGnB,CACA,MAAMC,EAAcC,GAAY,IAAMrB,GAAalX,IACnDwY,GAAgBzY,EAAKM,KAAM,aAAc,KACrC,MAAM+W,EAAQpX,EAAIoX,MACZqB,EAAa,GACnB,IAAK,MAAMzV,KAAOoU,EAAO,CACrB,MAAMsB,EAAQtB,EAAMpU,GAAK3C,KACzB,GAAIqY,EAAMC,OAAQ,CACdF,EAAWzV,KAASyV,EAAWzV,GAAO,IAAIxC,KAC1C,IAAK,MAAM4C,KAAKsV,EAAMC,OAClBF,EAAWzV,GAAKvC,IAAI2C,EAC5B,CACJ,CACA,OAAOqV,IAEX,MAAMlU,EAAWqU,GACXd,EAAW9X,EAAI8X,SACrB,IAAI1X,EACJL,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB1G,IAAUA,EAAQkY,EAAYlY,OAC9B,MAAMgC,EAAQsJ,EAAQtL,MACtB,IAAKmE,EAASnC,GAOV,OANAsJ,EAAQrF,OAAOwF,KAAK,CAChBoF,SAAU,SACV3J,KAAM,eACNlF,QACArC,SAEG2L,EAEXA,EAAQtL,MAAQ,GAChB,MAAMyW,EAAQ,GACRO,EAAQhX,EAAMgX,MACpB,IAAK,MAAMpU,KAAO5C,EAAM+W,KAAM,CAC1B,MACMxG,EADKyG,EAAMpU,GACJ3C,KAAK2H,IAAI,CAAE5H,MAAOgC,EAAMY,GAAMqD,OAAQ,IAAMS,GACrD6J,aAAa1I,QACb4O,EAAMhL,KAAK8E,EAAEN,KAAMM,GAAMsG,GAAqBtG,EAAGjF,EAAS1I,EAAKZ,KAG/D6U,GAAqBtG,EAAGjF,EAAS1I,EAAKZ,EAE9C,CACA,OAAK0V,EAGEH,GAAed,EAAOzU,EAAOsJ,EAAS5E,EAAKwR,EAAYlY,MAAOL,GAF1D8W,EAAMlU,OAASsF,QAAQ+O,IAAIH,GAAOxG,KAAK,IAAM3E,GAAWA,KAK9DmN,GAA8BvN,EAAkB,gBAAiB,CAACvL,EAAMC,KAEjFiY,GAAWnY,KAAKC,EAAMC,GACtB,MAAM8Y,EAAa/Y,EAAKM,KAAKyP,MACvBwI,EAAcC,GAAY,IAAMrB,GAAalX,IA4CnD,IAAI+Y,EACJ,MAAMxU,EAAWqU,GACXI,GAAOC,GAAkBC,QAEzBC,EAAcH,GADDI,GACmBhZ,MAChC0X,EAAW9X,EAAI8X,SACrB,IAAI1X,EACJL,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB1G,IAAUA,EAAQkY,EAAYlY,OAC9B,MAAMgC,EAAQsJ,EAAQtL,MACtB,OAAKmE,EAASnC,GASV4W,GAAOG,IAA8B,IAAfrS,GAAKgB,QAAmC,IAAhBhB,EAAIoS,SAE7CH,IACDA,EAjEa,CAAC3B,IACtB,MAAMiC,EAAM,IAAIjL,GAAI,CAAC,QAAS,UAAW,QACnCkL,EAAahB,EAAYlY,MACzBmZ,EAAYvW,IACd,MAAMtC,EAAI8Y,GAASxW,GACnB,MAAO,SAAStC,8BAA8BA,0BAElD2Y,EAAI7K,MAAM,gCACV,MAAMiL,EAAMvZ,OAAOwZ,OAAO,MAC1B,IAAIC,EAAU,EACd,IAAK,MAAM3W,KAAOsW,EAAWnC,KACzBsC,EAAIzW,GAAO,OAAO2W,IAGtBN,EAAI7K,MAAM,yBACV,IAAK,MAAMxL,KAAOsW,EAAWnC,KAAM,CAC/B,MAAMyC,EAAKH,EAAIzW,GACTtC,EAAI8Y,GAASxW,GACnBqW,EAAI7K,MAAM,SAASoL,OAAQL,EAASvW,OACpCqW,EAAI7K,MAAM,iBACRoL,wEACqCA,8EAEnBlZ,sBAAsBA,mEAKxCkZ,2CACElZ,wCACQA,uEAGFA,QAAQkZ,wCAItB,CACAP,EAAI7K,MAAM,8BACV6K,EAAI7K,MAAM,mBACV,MAAMrN,EAAKkY,EAAIhK,UACf,MAAO,CAAC3D,EAAS5E,IAAQ3F,EAAGiW,EAAO1L,EAAS5E,IAwBzB+S,CAAiB7Z,EAAIoX,QACpC1L,EAAUqN,EAASrN,EAAS5E,GACvBgR,EAEEH,GAAe,GAAIvV,EAAOsJ,EAAS5E,EAAK1G,EAAOL,GAD3C2L,GAGRoN,EAAWpN,EAAS5E,IAjBvB4E,EAAQrF,OAAOwF,KAAK,CAChBoF,SAAU,SACV3J,KAAM,eACNlF,QACArC,SAEG2L,MAcnB,SAASoO,GAAmBC,EAAStD,EAAO1W,EAAM+G,GAC9C,IAAK,MAAMiB,KAAUgS,EACjB,GAA6B,IAAzBhS,EAAO1B,OAAO1D,OAEd,OADA8T,EAAMrW,MAAQ2H,EAAO3H,MACdqW,EAGf,MAAMuD,EAAaD,EAAQlL,OAAQ8B,IAAOT,GAAaS,IACvD,OAA0B,IAAtBqJ,EAAWrX,QACX8T,EAAMrW,MAAQ4Z,EAAW,GAAG5Z,MACrB4Z,EAAW,KAEtBvD,EAAMpQ,OAAOwF,KAAK,CACdvE,KAAM,gBACNlF,MAAOqU,EAAMrW,MACbL,OACAka,OAAQF,EAAQtT,IAAKsB,GAAWA,EAAO1B,OAAOI,IAAKC,GAAQ2B,GAAmB3B,EAAKI,EAAKwB,UAErFmO,EACX,CACO,MAAMyD,GAA0B5O,EAAkB,YAAa,CAACvL,EAAMC,KACzE2P,GAAS7P,KAAKC,EAAMC,GACpBwY,GAAgBzY,EAAKM,KAAM,QAAS,IAAML,EAAIma,QAAQC,KAAMnV,GAAuB,aAAjBA,EAAE5E,KAAKiX,OAAwB,gBAAapU,GAC9GsV,GAAgBzY,EAAKM,KAAM,SAAU,IAAML,EAAIma,QAAQC,KAAMnV,GAAwB,aAAlBA,EAAE5E,KAAKkX,QAAyB,gBAAarU,GAChHsV,GAAgBzY,EAAKM,KAAM,SAAU,KACjC,GAAIL,EAAIma,QAAQE,MAAOpV,GAAMA,EAAE5E,KAAKsY,QAChC,OAAO,IAAInY,IAAIR,EAAIma,QAAQG,QAASC,GAAW9V,MAAM+V,KAAKD,EAAOla,KAAKsY,YAI9EH,GAAgBzY,EAAKM,KAAM,UAAW,KAClC,GAAIL,EAAIma,QAAQE,MAAOpV,GAAMA,EAAE5E,KAAK4M,SAAU,CAC1C,MAAMC,EAAWlN,EAAIma,QAAQ1T,IAAKxB,GAAMA,EAAE5E,KAAK4M,SAC/C,OAAO,IAAI7C,OAAO,KAAK8C,EAASzG,IAAKgU,GAAMC,GAAgBD,EAAEnY,SAASiN,KAAK,SAC/E,IAGJ,MAAMoL,EAAgC,IAAvB3a,EAAIma,QAAQxX,OACrBiY,EAAQ5a,EAAIma,QAAQ,GAAG9Z,KAAK2H,IAClCjI,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB,GAAI6T,EACA,OAAOC,EAAMlP,EAAS5E,GAE1B,IAAIgB,GAAQ,EACZ,MAAMiS,EAAU,GAChB,IAAK,MAAMQ,KAAUva,EAAIma,QAAS,CAC9B,MAAMpS,EAASwS,EAAOla,KAAK2H,IAAI,CAC3B5H,MAAOsL,EAAQtL,MACfiG,OAAQ,IACTS,GACH,GAAIiB,aAAkBE,QAClB8R,EAAQlO,KAAK9D,GACbD,GAAQ,MAEP,CACD,GAA6B,IAAzBC,EAAO1B,OAAO1D,OACd,OAAOoF,EACXgS,EAAQlO,KAAK9D,EACjB,CACJ,CACA,OAAKD,EAEEG,QAAQ+O,IAAI+C,GAAS1J,KAAM0J,GACvBD,GAAmBC,EAASrO,EAAS3L,EAAM+G,IAF3CgT,GAAmBC,EAASrO,EAAS3L,EAAM+G,MA0EjD+T,GAAiCvP,EAAkB,mBAAoB,CAACvL,EAAMC,KACvF2P,GAAS7P,KAAKC,EAAMC,GACpBD,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB,MAAM1E,EAAQsJ,EAAQtL,MAChB0a,EAAO9a,EAAI8a,KAAKza,KAAK2H,IAAI,CAAE5H,MAAOgC,EAAOiE,OAAQ,IAAMS,GACvDiU,EAAQ/a,EAAI+a,MAAM1a,KAAK2H,IAAI,CAAE5H,MAAOgC,EAAOiE,OAAQ,IAAMS,GAE/D,OADcgU,aAAgB7S,SAAW8S,aAAiB9S,QAE/CA,QAAQ+O,IAAI,CAAC8D,EAAMC,IAAQ1K,KAAK,EAAEyK,EAAMC,KACpCC,GAA0BtP,EAASoP,EAAMC,IAGjDC,GAA0BtP,EAASoP,EAAMC,MAGxD,SAASE,GAAYC,EAAGC,GAGpB,GAAID,IAAMC,EACN,MAAO,CAAEC,OAAO,EAAM5W,KAAM0W,GAEhC,GAAIA,aAAaG,MAAQF,aAAaE,OAASH,KAAOC,EAClD,MAAO,CAAEC,OAAO,EAAM5W,KAAM0W,GAEhC,GAAII,GAAmBJ,IAAMI,GAAmBH,GAAI,CAChD,MAAMI,EAAQrb,OAAOiX,KAAKgE,GACpBK,EAAatb,OAAOiX,KAAK+D,GAAGrM,OAAQ7L,IAA+B,IAAvBuY,EAAME,QAAQzY,IAC1D0Y,EAAS,IAAKR,KAAMC,GAC1B,IAAK,MAAMnY,KAAOwY,EAAY,CAC1B,MAAMG,EAAcV,GAAYC,EAAElY,GAAMmY,EAAEnY,IAC1C,IAAK2Y,EAAYP,MACb,MAAO,CACHA,OAAO,EACPQ,eAAgB,CAAC5Y,KAAQ2Y,EAAYC,iBAG7CF,EAAO1Y,GAAO2Y,EAAYnX,IAC9B,CACA,MAAO,CAAE4W,OAAO,EAAM5W,KAAMkX,EAChC,CACA,GAAIjX,MAAMC,QAAQwW,IAAMzW,MAAMC,QAAQyW,GAAI,CACtC,GAAID,EAAEvY,SAAWwY,EAAExY,OACf,MAAO,CAAEyY,OAAO,EAAOQ,eAAgB,IAE3C,MAAMC,EAAW,GACjB,IAAK,IAAInF,EAAQ,EAAGA,EAAQwE,EAAEvY,OAAQ+T,IAAS,CAC3C,MAEMiF,EAAcV,GAFNC,EAAExE,GACFyE,EAAEzE,IAEhB,IAAKiF,EAAYP,MACb,MAAO,CACHA,OAAO,EACPQ,eAAgB,CAAClF,KAAUiF,EAAYC,iBAG/CC,EAAShQ,KAAK8P,EAAYnX,KAC9B,CACA,MAAO,CAAE4W,OAAO,EAAM5W,KAAMqX,EAChC,CACA,MAAO,CAAET,OAAO,EAAOQ,eAAgB,GAC3C,CACA,SAASZ,GAA0BjT,EAAQ+S,EAAMC,GAO7C,GANID,EAAKzU,OAAO1D,QACZoF,EAAO1B,OAAOwF,QAAQiP,EAAKzU,QAE3B0U,EAAM1U,OAAO1D,QACboF,EAAO1B,OAAOwF,QAAQkP,EAAM1U,QAE5B6J,GAAanI,GACb,OAAOA,EACX,MAAM+T,EAASb,GAAYH,EAAK1a,MAAO2a,EAAM3a,OAC7C,IAAK0b,EAAOV,MACR,MAAM,IAAI5Z,MAAgD,wCAAG2C,KAAKC,UAAU0X,EAAOF,mBAGvF,OADA7T,EAAO3H,MAAQ0b,EAAOtX,KACfuD,CACX,CA6QO,MAAMgU,GAAyBzQ,EAAkB,WAAY,CAACvL,EAAMC,KACvE2P,GAAS7P,KAAKC,EAAMC,GACpB,MAAM2Y,EPt2CH,SAAuBqD,GAC1B,MAAMC,EAAgB/b,OAAOyY,OAAOqD,GAASnN,OAAQzL,GAAmB,iBAANA,GAIlE,OAHelD,OAAO8b,QAAQA,GACzBnN,OAAO,EAAEnO,EAAGC,MAAqC,IAA9Bsb,EAAcR,SAAS/a,IAC1C+F,IAAI,EAAE9F,EAAGyC,KAAOA,EAEzB,COg2CmB8Y,CAAmBlc,EAAIgc,SAChCG,EAAY,IAAI3b,IAAImY,GAC1B5Y,EAAKM,KAAKsY,OAASwD,EACnBpc,EAAKM,KAAK4M,QAAU,IAAI7C,OAAO,KAAKuO,EAC/B9J,OAAQnO,GAAM0b,GAAsB9a,WAAWZ,IAC/C+F,IAAKxB,GAAoB,iBAANA,EAAiB2I,GAAiB3I,GAAKA,EAAEjD,YAC5DuN,KAAK,UACVxP,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS7D,KACxB,MAAMzF,EAAQsJ,EAAQtL,MACtB,OAAI+b,EAAU7a,IAAIc,IAGlBsJ,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,gBACNqR,SACAvW,QACArC,SANO2L,KAkDN2Q,GAA8B/Q,EAAkB,gBAAiB,CAACvL,EAAMC,KACjF2P,GAAS7P,KAAKC,EAAMC,GACpBD,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB,GAAsB,aAAlBA,EAAIoC,UACJ,MAAM,IAAIoT,EAAqBvc,EAAK0B,YAAY9B,MAEpD,MAAM4c,EAAOvc,EAAIwc,UAAU9Q,EAAQtL,MAAOsL,GAC1C,GAAI5E,EAAIgB,MAAO,CAEX,OADeyU,aAAgBtU,QAAUsU,EAAOtU,QAAQmI,QAAQmM,IAClDlM,KAAMoM,IAChB/Q,EAAQtL,MAAQqc,EACT/Q,GAEf,CACA,GAAI6Q,aAAgBtU,QAChB,MAAM,IAAIC,EAGd,OADAwD,EAAQtL,MAAQmc,EACT7Q,KAGf,SAASgR,GAAqB3U,EAAQ3F,GAClC,OAAI2F,EAAO1B,OAAO1D,aAAoBO,IAAVd,EACjB,CAAEiE,OAAQ,GAAIjG,WAAO8C,GAEzB6E,CACX,CACO,MAAM4U,GAA6BrR,EAAkB,eAAgB,CAACvL,EAAMC,KAC/E2P,GAAS7P,KAAKC,EAAMC,GACpBD,EAAKM,KAAKiX,MAAQ,WAClBvX,EAAKM,KAAKkX,OAAS,WACnBiB,GAAgBzY,EAAKM,KAAM,SAAU,IAC1BL,EAAI4c,UAAUvc,KAAKsY,OAAS,IAAInY,IAAI,IAAIR,EAAI4c,UAAUvc,KAAKsY,YAAQzV,SAAcA,GAE5FsV,GAAgBzY,EAAKM,KAAM,UAAW,KAClC,MAAM4M,EAAUjN,EAAI4c,UAAUvc,KAAK4M,QACnC,OAAOA,EAAU,IAAI7C,OAAO,KAAKsQ,GAAgBzN,EAAQ3K,mBAAgBY,IAE7EnD,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB,GAAiC,aAA7B9G,EAAI4c,UAAUvc,KAAKiX,MAAsB,CACzC,MAAMvP,EAAS/H,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,GAC/C,OAAIiB,aAAkBE,QACXF,EAAOsI,KAAMM,GAAM+L,GAAqB/L,EAAGjF,EAAQtL,QACvDsc,GAAqB3U,EAAQ2D,EAAQtL,MAChD,CACA,YAAsB8C,IAAlBwI,EAAQtL,MACDsL,EAEJ1L,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,MAGlC+V,GAA6BvR,EAAkB,eAAgB,CAACvL,EAAMC,KAC/E2P,GAAS7P,KAAKC,EAAMC,GACpBwY,GAAgBzY,EAAKM,KAAM,QAAS,IAAML,EAAI4c,UAAUvc,KAAKiX,OAC7DkB,GAAgBzY,EAAKM,KAAM,SAAU,IAAML,EAAI4c,UAAUvc,KAAKkX,QAC9DiB,GAAgBzY,EAAKM,KAAM,UAAW,KAClC,MAAM4M,EAAUjN,EAAI4c,UAAUvc,KAAK4M,QACnC,OAAOA,EAAU,IAAI7C,OAAO,KAAKsQ,GAAgBzN,EAAQ3K,uBAAoBY,IAEjFsV,GAAgBzY,EAAKM,KAAM,SAAU,IAC1BL,EAAI4c,UAAUvc,KAAKsY,OAAS,IAAInY,IAAI,IAAIR,EAAI4c,UAAUvc,KAAKsY,OAAQ,YAASzV,GAEvFnD,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,IAEF,OAAlB4E,EAAQtL,MACDsL,EACJ1L,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,KAGlCgW,GAA4BxR,EAAkB,cAAe,CAACvL,EAAMC,KAC7E2P,GAAS7P,KAAKC,EAAMC,GAEpBD,EAAKM,KAAKiX,MAAQ,WAClBkB,GAAgBzY,EAAKM,KAAM,SAAU,IAAML,EAAI4c,UAAUvc,KAAKsY,QAC9D5Y,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB,GAAsB,aAAlBA,EAAIoC,UACJ,OAAOlJ,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,GAG3C,QAAsB5D,IAAlBwI,EAAQtL,MAKR,OAJAsL,EAAQtL,MAAQJ,EAAI+c,aAIbrR,EAGX,MAAM3D,EAAS/H,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,GAC/C,OAAIiB,aAAkBE,QACXF,EAAOsI,KAAMtI,GAAWiV,GAAoBjV,EAAQ/H,IAExDgd,GAAoBjV,EAAQ/H,MAG3C,SAASgd,GAAoBtR,EAAS1L,GAIlC,YAHsBkD,IAAlBwI,EAAQtL,QACRsL,EAAQtL,MAAQJ,EAAI+c,cAEjBrR,CACX,CACO,MAAMuR,GAA6B3R,EAAkB,eAAgB,CAACvL,EAAMC,KAC/E2P,GAAS7P,KAAKC,EAAMC,GACpBD,EAAKM,KAAKiX,MAAQ,WAClBkB,GAAgBzY,EAAKM,KAAM,SAAU,IAAML,EAAI4c,UAAUvc,KAAKsY,QAC9D5Y,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACF,aAAlBA,EAAIoC,gBAIchG,IAAlBwI,EAAQtL,QACRsL,EAAQtL,MAAQJ,EAAI+c,cAJb/c,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,MAStCoW,GAAgC5R,EAAkB,kBAAmB,CAACvL,EAAMC,KACrF2P,GAAS7P,KAAKC,EAAMC,GACpBwY,GAAgBzY,EAAKM,KAAM,SAAU,KACjC,MAAM+C,EAAIpD,EAAI4c,UAAUvc,KAAKsY,OAC7B,OAAOvV,EAAI,IAAI5C,IAAI,IAAI4C,GAAGyL,OAAQ3I,QAAYhD,IAANgD,SAAoBhD,IAEhEnD,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB,MAAMiB,EAAS/H,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,GAC/C,OAAIiB,aAAkBE,QACXF,EAAOsI,KAAMtI,GAAWoV,GAAwBpV,EAAQhI,IAE5Dod,GAAwBpV,EAAQhI,MAG/C,SAASod,GAAwBzR,EAAS3L,GAStC,OARK2L,EAAQrF,OAAO1D,aAA4BO,IAAlBwI,EAAQtL,OAClCsL,EAAQrF,OAAOwF,KAAK,CAChBvE,KAAM,eACN2J,SAAU,cACV7O,MAAOsJ,EAAQtL,MACfL,SAGD2L,CACX,CAkBO,MAAM0R,GAA0B9R,EAAkB,YAAa,CAACvL,EAAMC,KACzE2P,GAAS7P,KAAKC,EAAMC,GACpBwY,GAAgBzY,EAAKM,KAAM,QAAS,IAAML,EAAI4c,UAAUvc,KAAKiX,OAC7DkB,GAAgBzY,EAAKM,KAAM,SAAU,IAAML,EAAI4c,UAAUvc,KAAKkX,QAC9DiB,GAAgBzY,EAAKM,KAAM,SAAU,IAAML,EAAI4c,UAAUvc,KAAKsY,QAC9D5Y,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB,GAAsB,aAAlBA,EAAIoC,UACJ,OAAOlJ,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,GAG3C,MAAMiB,EAAS/H,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,GAC/C,OAAIiB,aAAkBE,QACXF,EAAOsI,KAAMtI,IAChB2D,EAAQtL,MAAQ2H,EAAO3H,MACnB2H,EAAO1B,OAAO1D,SACd+I,EAAQtL,MAAQJ,EAAIqd,WAAW,IACxB3R,EACH3F,MAAO,CACHM,OAAQ0B,EAAO1B,OAAOI,IAAKC,GAAQ2B,GAAmB3B,EAAKI,EAAKwB,QAEpElG,MAAOsJ,EAAQtL,QAEnBsL,EAAQrF,OAAS,IAEdqF,KAGfA,EAAQtL,MAAQ2H,EAAO3H,MACnB2H,EAAO1B,OAAO1D,SACd+I,EAAQtL,MAAQJ,EAAIqd,WAAW,IACxB3R,EACH3F,MAAO,CACHM,OAAQ0B,EAAO1B,OAAOI,IAAKC,GAAQ2B,GAAmB3B,EAAKI,EAAKwB,QAEpElG,MAAOsJ,EAAQtL,QAEnBsL,EAAQrF,OAAS,IAEdqF,MAkBF4R,GAAyBhS,EAAkB,WAAY,CAACvL,EAAMC,KACvE2P,GAAS7P,KAAKC,EAAMC,GACpBwY,GAAgBzY,EAAKM,KAAM,SAAU,IAAML,EAAIud,GAAGld,KAAKsY,QACvDH,GAAgBzY,EAAKM,KAAM,QAAS,IAAML,EAAIud,GAAGld,KAAKiX,OACtDkB,GAAgBzY,EAAKM,KAAM,SAAU,IAAML,EAAIwd,IAAInd,KAAKkX,QACxDiB,GAAgBzY,EAAKM,KAAM,aAAc,IAAML,EAAIud,GAAGld,KAAKoY,YAC3D1Y,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB,GAAsB,aAAlBA,EAAIoC,UAA0B,CAC9B,MAAM6R,EAAQ/a,EAAIwd,IAAInd,KAAK2H,IAAI0D,EAAS5E,GACxC,OAAIiU,aAAiB9S,QACV8S,EAAM1K,KAAM0K,GAAU0C,GAAiB1C,EAAO/a,EAAIud,GAAIzW,IAE1D2W,GAAiB1C,EAAO/a,EAAIud,GAAIzW,EAC3C,CACA,MAAMgU,EAAO9a,EAAIud,GAAGld,KAAK2H,IAAI0D,EAAS5E,GACtC,OAAIgU,aAAgB7S,QACT6S,EAAKzK,KAAMyK,GAAS2C,GAAiB3C,EAAM9a,EAAIwd,IAAK1W,IAExD2W,GAAiB3C,EAAM9a,EAAIwd,IAAK1W,MAG/C,SAAS2W,GAAiB3C,EAAM4C,EAAM5W,GAClC,OAAIgU,EAAKzU,OAAO1D,QAEZmY,EAAK7U,SAAU,EACR6U,GAEJ4C,EAAKrd,KAAK2H,IAAI,CAAE5H,MAAO0a,EAAK1a,MAAOiG,OAAQyU,EAAKzU,QAAUS,EACrE,CAuDO,MAAM6W,GAA6BrS,EAAkB,eAAgB,CAACvL,EAAMC,KAC/E2P,GAAS7P,KAAKC,EAAMC,GACpBwY,GAAgBzY,EAAKM,KAAM,aAAc,IAAML,EAAI4c,UAAUvc,KAAKoY,YAClED,GAAgBzY,EAAKM,KAAM,SAAU,IAAML,EAAI4c,UAAUvc,KAAKsY,QAC9DH,GAAgBzY,EAAKM,KAAM,QAAS,IAAML,EAAI4c,UAAUvc,KAAKiX,OAC7DkB,GAAgBzY,EAAKM,KAAM,SAAU,IAAML,EAAI4c,UAAUvc,KAAKkX,QAC9DxX,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS5E,KACxB,GAAsB,aAAlBA,EAAIoC,UACJ,OAAOlJ,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,GAE3C,MAAMiB,EAAS/H,EAAI4c,UAAUvc,KAAK2H,IAAI0D,EAAS5E,GAC/C,OAAIiB,aAAkBE,QACXF,EAAOsI,KAAKuN,IAEhBA,GAAqB7V,MAGpC,SAAS6V,GAAqBlS,GAE1B,OADAA,EAAQtL,MAAQF,OAAO2d,OAAOnS,EAAQtL,OAC/BsL,CACX,CA0JO,MAAMoS,GAA2BxS,EAAkB,aAAc,CAACvL,EAAMC,KAC3E+d,GAAiBje,KAAKC,EAAMC,GAC5B2P,GAAS7P,KAAKC,EAAMC,GACpBD,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS/K,IACjB+K,EAEX3L,EAAKM,KAAK8L,MAAST,IACf,MAAMtJ,EAAQsJ,EAAQtL,MAChBuQ,EAAI3Q,EAAImB,GAAGiB,GACjB,GAAIuO,aAAa1I,QACb,OAAO0I,EAAEN,KAAMM,GAAMqN,GAAmBrN,EAAGjF,EAAStJ,EAAOrC,IAE/Die,GAAmBrN,EAAGjF,EAAStJ,EAAOrC,MAI9C,SAASie,GAAmBjW,EAAQ2D,EAAStJ,EAAOrC,GAChD,IAAKgI,EAAQ,CACT,MAAMkW,EAAO,CACT3W,KAAM,SACNlF,QACArC,OACAyG,KAAM,IAAKzG,EAAKM,KAAKL,IAAIwG,MAAQ,IACjCF,UAAWvG,EAAKM,KAAKL,IAAIuM,OAGzBxM,EAAKM,KAAKL,IAAIH,SACdoe,EAAKpe,OAASE,EAAKM,KAAKL,IAAIH,QAChC6L,EAAQrF,OAAOwF,KAAKqS,GAAWD,GACnC,CACJ,CCh6DO,MAAME,GACT,WAAA1c,GACIR,KAAKmd,KAAO,IAAIC,QAChBpd,KAAKqd,OAAS,IAAIC,GACtB,CACA,GAAA9d,CAAImH,KAAW4W,GACX,MAAMC,EAAOD,EAAM,GAEnB,GADAvd,KAAKmd,KAAKjb,IAAIyE,EAAQ6W,GAClBA,GAAwB,iBAATA,GAAqB,OAAQA,EAAM,CAClD,GAAIxd,KAAKqd,OAAOhd,IAAImd,EAAK7E,IACrB,MAAM,IAAIpY,MAAM,MAAMid,EAAK7E,qCAE/B3Y,KAAKqd,OAAOnb,IAAIsb,EAAK7E,GAAIhS,EAC7B,CACA,OAAO3G,IACX,CACA,KAAAyd,GAGI,OAFAzd,KAAKmd,KAAO,IAAIC,QAChBpd,KAAKqd,OAAS,IAAIC,IACXtd,IACX,CACA,MAAA0d,CAAO/W,GACH,MAAM6W,EAAOxd,KAAKmd,KAAKnb,IAAI2E,GAK3B,OAJI6W,GAAwB,iBAATA,GAAqB,OAAQA,GAC5Cxd,KAAKqd,OAAOM,OAAOH,EAAK7E,IAE5B3Y,KAAKmd,KAAKQ,OAAOhX,GACV3G,IACX,CACA,GAAAgC,CAAI2E,GAGA,MAAM6S,EAAI7S,EAAOvH,KAAKuF,OACtB,GAAI6U,EAAG,CACH,MAAMoE,EAAK,IAAM5d,KAAKgC,IAAIwX,IAAM,WACzBoE,EAAGjF,GACV,MAAMkF,EAAI,IAAKD,KAAO5d,KAAKmd,KAAKnb,IAAI2E,IACpC,OAAO1H,OAAOiX,KAAK2H,GAAGnc,OAASmc,OAAI5b,CACvC,CACA,OAAOjC,KAAKmd,KAAKnb,IAAI2E,EACzB,CACA,GAAAtG,CAAIsG,GACA,OAAO3G,KAAKmd,KAAK9c,IAAIsG,EACzB,EAGG,SAASmX,KACZ,OAAO,IAAIZ,EACf,CACO,MAAMa,GAA+BD,KC1BrC,SAASE,GAAMC,EAAOrf,GACzB,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CAudO,SAASuf,GAAWpT,EAASnM,GAMhC,OALW,IAAIwf,GAA0B,CACrClT,MAAO,gBACJgT,GAAqBtf,GACxBmM,WAGR,CACO,SAASsT,GAAW7S,EAAS5M,GAChC,OAAO,IAAI0f,GAA0B,CACjCpT,MAAO,gBACJgT,GAAqBtf,GACxB4M,WAER,CACO,SAAS+S,GAAQ7c,EAAQ9C,GAC5B,OAAO,IAAI4f,GAA6B,CACpCtT,MAAO,mBACJgT,GAAqBtf,GACxB8C,UAER,CA8DO,SAAS+c,GAAWvR,GACvB,OAAO,IAAIwR,GAA0B,CACjCxT,MAAO,YACPgC,MAER,CA0OO,SAASyR,GAAaze,GACzB,MAAM0O,EAqBH,SAAgB1O,EAAItB,GACvB,MAAMgQ,EAAK,IAAIkO,GAAiB,CAC5B5R,MAAO,YACJgT,GAAqBtf,KAG5B,OADAgQ,EAAGxP,KAAK8L,MAAQhL,EACT0O,CACX,CA5BegQ,CAAQnU,IACfA,EAAQoU,SAAY1Y,IAChB,GAAqB,iBAAVA,EACPsE,EAAQrF,OAAOwF,KAAKqS,GAAW9W,EAAOsE,EAAQtL,MAAOyP,EAAGxP,KAAKL,UAE5D,CAED,MAAM+f,EAAS3Y,EACX2Y,EAAOC,QACPD,EAAOzZ,UAAW,GACtByZ,EAAOzY,OAASyY,EAAOzY,KAAO,UAC9ByY,EAAO3d,QAAU2d,EAAO3d,MAAQsJ,EAAQtL,OACxC2f,EAAOhgB,OAASggB,EAAOhgB,KAAO8P,GAC9BkQ,EAAOzZ,WAAayZ,EAAOzZ,UAAYuJ,EAAGxP,KAAKL,IAAIuM,OACnDb,EAAQrF,OAAOwF,KAAKqS,GAAW6B,GACnC,GAEG5e,EAAGuK,EAAQtL,MAAOsL,KAE7B,OAAOmE,CACX,CC70BO,MAAMoQ,GAA+B3U,EAAkB,iBAAkB,CAACvL,EAAMC,KACnFkgB,GAAqBpgB,KAAKC,EAAMC,GAChCmgB,GAAwBrgB,KAAKC,EAAMC,KAEhC,SAASogB,GAASvgB,GACrB,ODyNG,SAAsBqf,EAAOrf,GAChC,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,WACRb,MAAO,gBACP0H,QAAQ,EACRD,OAAO,EACP1I,UAAW,QACRiU,GAAqBtf,IAEhC,CCnOWwgB,CAAkBJ,GAAgBpgB,EAC7C,CACO,MAAMygB,GAA2BhV,EAAkB,aAAc,CAACvL,EAAMC,KAC3EugB,GAAiBzgB,KAAKC,EAAMC,GAC5BmgB,GAAwBrgB,KAAKC,EAAMC,KAEhC,SAAS+K,GAAKlL,GACjB,OD6NG,SAAkBqf,EAAOrf,GAC5B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,mBACJgT,GAAqBtf,IAEhC,CCpOW2gB,CAAcF,GAAYzgB,EACrC,CACO,MAAM4gB,GAA2BnV,EAAkB,aAAc,CAACvL,EAAMC,KAC3E0gB,GAAiB5gB,KAAKC,EAAMC,GAC5BmgB,GAAwBrgB,KAAKC,EAAMC,KAEhC,SAAS0T,GAAK7T,GACjB,OD8NG,SAAkBqf,EAAOrf,GAC5B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPjB,UAAW,QACRiU,GAAqBtf,IAEhC,CCtOW8gB,CAAcF,GAAY5gB,EACrC,CACO,MAAM+gB,GAA+BtV,EAAkB,iBAAkB,CAACvL,EAAMC,KACnF6gB,GAAqB/gB,KAAKC,EAAMC,GAChCmgB,GAAwBrgB,KAAKC,EAAMC,KAEhC,SAASgK,GAASnK,GACrB,ODgOG,SAAsBqf,EAAOrf,GAChC,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,WACRb,MAAO,mBACJgT,GAAqBtf,IAEhC,CCvOWihB,CAAkBF,GAAgB/gB,EAC7C,CC1BA,MAwCakhB,GAAezV,EAAkB,WAxC1B,CAACvL,EAAMsG,KACvBmB,GAAU1H,KAAKC,EAAMsG,GACrBtG,EAAKJ,KAAO,WACZO,OAAO8D,iBAAiBjE,EAAM,CAC1BiN,OAAQ,CACJ5M,MAAQ4gB,GV0Bb,SAAqBjb,EAAOib,EAAU5Z,GAAUA,EAAMpB,SACzD,MAAMib,EAAc,CAAEC,QAAS,IACzBC,EAAgBpb,IAClB,IAAK,MAAMqB,KAASrB,EAAMM,OACtB,GAAmB,kBAAfe,EAAME,MAA4BF,EAAM6S,OAAOtX,OAC/CyE,EAAM6S,OAAOxT,IAAKJ,GAAW8a,EAAa,CAAE9a,iBAE3C,GAAmB,gBAAfe,EAAME,KACX6Z,EAAa,CAAE9a,OAAQe,EAAMf,cAE5B,GAAmB,oBAAfe,EAAME,KACX6Z,EAAa,CAAE9a,OAAQe,EAAMf,cAE5B,GAA0B,IAAtBe,EAAMZ,KAAK7D,OAChBse,EAAYC,QAAQrV,KAAKmV,EAAO5Z,QAE/B,CACD,IAAI0E,EAAOmV,EACP7a,EAAI,EACR,KAAOA,EAAIgB,EAAMZ,KAAK7D,QAAQ,CAC1B,MAAMye,EAAKha,EAAMZ,KAAKJ,GACLA,IAAMgB,EAAMZ,KAAK7D,OAAS,GAKvCmJ,EAAKsV,GAAMtV,EAAKsV,IAAO,CAAEF,QAAS,IAClCpV,EAAKsV,GAAIF,QAAQrV,KAAKmV,EAAO5Z,KAJ7B0E,EAAKsV,GAAMtV,EAAKsV,IAAO,CAAEF,QAAS,IAMtCpV,EAAOA,EAAKsV,GACZhb,GACJ,CACJ,GAIR,OADA+a,EAAapb,GACNkb,CACX,CU/D+BI,CAAiBthB,EAAMihB,IAG9CM,QAAS,CACLlhB,MAAQ4gB,GVQb,SAAsBjb,EAAOib,EAAU5Z,GAAUA,EAAMpB,SAC1D,MAAMib,EAAc,GACdM,EAAa,GACnB,IAAK,MAAMC,KAAOzb,EAAMM,OAChBmb,EAAIhb,KAAK7D,OAAS,GAClBse,EAAYO,EAAIhb,KAAK,IAAMya,EAAYO,EAAIhb,KAAK,KAAO,GACvDya,EAAYO,EAAIhb,KAAK,IAAIqF,KAAKmV,EAAOQ,KAGrCD,EAAW1V,KAAKmV,EAAOQ,IAG/B,MAAO,CAAED,aAAYN,cACzB,CUrB+BQ,CAAkB1hB,EAAMihB,IAG/ClB,SAAU,CACN1f,MAAQgH,IACJrH,EAAKsG,OAAOwF,KAAKzE,GACjBrH,EAAKiG,QAAU7B,KAAKC,UAAUrE,EAAKsG,OAAQkB,GAA4B,KAI/Ema,UAAW,CACPthB,MAAQiG,IACJtG,EAAKsG,OAAOwF,QAAQxF,GACpBtG,EAAKiG,QAAU7B,KAAKC,UAAUrE,EAAKsG,OAAQkB,GAA4B,KAI/Eoa,QAAS,CACL1e,IAAG,IAC+B,IAAvBlD,EAAKsG,OAAO1D,WAYoC,CACnE5B,OAAQS,QC1CCsO,GAAwB8R,GAAYb,IACpCc,GAA6BC,GAAiBf,IAC9ClY,GAA4BkZ,GAAgBhB,IAC5C/X,GAAiCgZ,GAAqBjB,IAEtDkB,GAAyBC,GAAanB,IACtCoB,GAAyBC,GAAarB,IACtCsB,GAA8BC,GAAkBvB,IAChDwB,GAA8BC,GAAkBzB,IAChD0B,GAA6BC,GAAiB3B,IAC9C4B,GAA6BC,GAAiB7B,IAC9C8B,GAAkCC,GAAsB/B,IACxDgC,GAAkCC,GAAsBjC,ICTxDkC,GAAwB3X,EAAkB,UAAW,CAACvL,EAAMC,KACrEkjB,GAAcpjB,KAAKC,EAAMC,GACzBD,EAAKC,IAAMA,EACXD,EAAKiY,KAAOhY,EAAIgY,KAChB9X,OAAOC,eAAeJ,EAAM,OAAQ,CAAEK,MAAOJ,IAE7CD,EAAKoM,MAAQ,IAAIyD,IACN7P,EAAK2F,MAAMyd,GAAenjB,EAAK,CAClC4P,OAAQ,IACA5P,EAAI4P,QAAU,MACfA,EAAOnJ,IAAKoJ,GAAqB,mBAAPA,EAAoB,CAAExP,KAAM,CAAE8L,MAAO0D,EAAI7P,IAAK,CAAEmM,MAAO,UAAYZ,SAAU,KAASsE,OAI/H9P,EAAK2F,MAAQ,CAAC1F,EAAKH,IAAWujB,GAAWrjB,EAAMC,EAAKH,GACpDE,EAAKsjB,MAAQ,IAAMtjB,EACnBA,EAAKujB,SAAQ,CAAKC,EAAK9E,KACnB8E,EAAI9iB,IAAIV,EAAM0e,GACP1e,GAGXA,EAAK+P,MAAQ,CAACtL,EAAM3E,IAAW2jB,GAAYzjB,EAAMyE,EAAM3E,EAAQ,CAAE2I,OAAQzI,EAAK+P,QAC9E/P,EAAK8I,UAAY,CAACrE,EAAM3E,IAAW4jB,GAAgB1jB,EAAMyE,EAAM3E,GAC/DE,EAAK8hB,WAAa/Z,MAAOtD,EAAM3E,IAAW6jB,GAAiB3jB,EAAMyE,EAAM3E,EAAQ,CAAE2I,OAAQzI,EAAK8hB,aAC9F9hB,EAAKiJ,eAAiBlB,MAAOtD,EAAM3E,IAAW8jB,GAAqB5jB,EAAMyE,EAAM3E,GAC/EE,EAAK6jB,IAAM7jB,EAAKiJ,eAEhBjJ,EAAKkiB,OAAS,CAACzd,EAAM3E,IAAWgkB,GAAa9jB,EAAMyE,EAAM3E,GACzDE,EAAKoiB,OAAS,CAAC3d,EAAM3E,IAAWikB,GAAa/jB,EAAMyE,EAAM3E,GACzDE,EAAKsiB,YAAcva,MAAOtD,EAAM3E,IAAWkkB,GAAkBhkB,EAAMyE,EAAM3E,GACzEE,EAAKwiB,YAAcza,MAAOtD,EAAM3E,IAAWmkB,GAAkBjkB,EAAMyE,EAAM3E,GACzEE,EAAK0iB,WAAa,CAACje,EAAM3E,IAAWokB,GAAiBlkB,EAAMyE,EAAM3E,GACjEE,EAAK4iB,WAAa,CAACne,EAAM3E,IAAWqkB,GAAiBnkB,EAAMyE,EAAM3E,GACjEE,EAAK8iB,gBAAkB/a,MAAOtD,EAAM3E,IAAWskB,GAAsBpkB,EAAMyE,EAAM3E,GACjFE,EAAKgjB,gBAAkBjb,MAAOtD,EAAM3E,IAAWukB,GAAsBrkB,EAAMyE,EAAM3E,GAEjFE,EAAKskB,OAAS,CAAClY,EAAOtM,IAAWE,EAAKoM,MAi8BnC,SAAgBhL,EAAI2E,EAAU,IACjC,OJ1LG,SAAiBoZ,EAAO/d,EAAI2E,GAO/B,OANe,IAAIoZ,EAAM,CACrBlH,KAAM,SACN7L,MAAO,SACPhL,GAAIA,KACDge,GAAqBrZ,IAGhC,CIkLWwe,CAAaC,GAAWpjB,EAAI2E,EACvC,CAn8BgDue,CAAOlY,EAAOtM,IAC1DE,EAAKykB,YAAeC,GAAe1kB,EAAKoM,MAq8BjCuY,GAr8BmDD,IAC1D1kB,EAAK4kB,UAAaxjB,GAAOpB,EAAKoM,MAAMyY,GAAiBzjB,IAErDpB,EAAK8kB,SAAW,IAAMA,GAAS9kB,GAC/BA,EAAK+kB,SAAW,IAAMA,GAAS/kB,GAC/BA,EAAKoC,QAAU,IAAM0iB,GAASC,GAAS/kB,IACvCA,EAAKglB,YAAellB,GAgzBjB,SAAqB+c,EAAW/c,GACnC,OAAO,IAAImlB,GAAe,CACtBhN,KAAM,cACN4E,UAAWA,KACRuC,GAAqBtf,IAEhC,CAtzBmCklB,CAAYhlB,EAAMF,GACjDE,EAAKklB,MAAQ,KAAMA,OJgjBhB,SAAgB/F,EAAOnI,EAASlX,GACnC,OAAO,IAAIqf,EAAM,CACblH,KAAM,QACNjB,aAIGoI,GAAqBtf,IAEhC,CIhHWqlB,CAAYC,GAzcMplB,EAycaF,GADnC,IAAwBA,GAvc3BE,EAAKqlB,GAAM3W,IAAQ4W,OAugBZ,IAAIC,GAAS,CAChBtN,KAAM,QACNmC,QAzgBqB,CAACpa,EAAM0O,MA0gBzB0Q,GAAqBtf,KAJzB,IAAwBA,GArgB3BE,EAAKwlB,IAAO9W,GA8hBL,IAAI+W,GAAgB,CACvBxN,KAAM,eACN8C,KAhiB6B/a,EAiiB7Bgb,MAjiBmCtM,IACvC1O,EAAKyc,UAAarO,GAAOsX,GAAK1lB,EA2uBvB,IAAI2lB,GAAa,CACpB1N,KAAM,YACNwE,UA7uB0CrO,KAC9CpO,EAAK4lB,QAAW3lB,IAAQ4lB,OA+wBQ7I,EA/wBO/c,EAgxBhC,IAAI6lB,GAAW,CAClB7N,KAAM,UACN4E,UAlxB6B7c,EAmxB7B,gBAAIgd,GACA,MAA+B,mBAAjBA,EAA8BA,IAAiB+I,GAAkB/I,EACnF,IAND,IAA6BA,GA9wBhChd,EAAKgmB,SAAY/lB,IAAQ+lB,OA4xBOhJ,EA5xBQ/c,EA6xBjC,IAAIgmB,GAAY,CACnBhO,KAAM,WACN4E,UA/xB8B7c,EAgyB9B,gBAAIgd,GACA,MAA+B,mBAAjBA,EAA8BA,IAAiB+I,GAAkB/I,EACnF,IAND,IAA6BA,GA1xBhChd,EAAKkmB,MAASpmB,IAAWqmB,OAi0BlB,IAAIC,GAAS,CAChBnO,KAAM,QACN4E,UAn0B4B7c,EAo0B5Bsd,WAAmC,mBAJhBA,EAh0Bexd,GAo0Bcwd,EAAa,IAAMA,IAJ3E,IAA2BA,GA/zBvBtd,EAAK0lB,KAAQliB,GAAWkiB,GAAK1lB,EAAMwD,GACnCxD,EAAKqmB,SAAW,IA82BT,IAAIC,GAAY,CACnBrO,KAAM,WACN4E,UAh3B2B7c,IAE/BA,EAAKumB,SAAYC,IACb,MAAM5gB,EAAK5F,EAAK2F,QAEhB,OADA8gB,GAAoB/lB,IAAIkF,EAAI,CAAE4gB,gBACvB5gB,GAEXzF,OAAOC,eAAeJ,EAAM,cAAe,CACvCkD,IAAG,IACQujB,GAAoBvjB,IAAIlD,IAAOwmB,YAE1CljB,cAAc,IAElBtD,EAAK0e,KAAO,IAAIpX,KACZ,GAAoB,IAAhBA,EAAK1E,OACL,OAAO6jB,GAAoBvjB,IAAIlD,GAEnC,MAAM4F,EAAK5F,EAAK2F,QAEhB,OADA8gB,GAAoB/lB,IAAIkF,EAAI0B,EAAK,IAC1B1B,GAGX5F,EAAK0mB,WAAa,IAAM1mB,EAAK8I,eAAU3F,GAAWyF,QAClD5I,EAAK2mB,WAAa,IAAM3mB,EAAK8I,UAAU,MAAMF,QACtC5I,IAGE4mB,GAA2Brb,EAAkB,aAAc,CAACvL,EAAMC,KAC3E4mB,GAAgB9mB,KAAKC,EAAMC,GAC3BijB,GAAQnjB,KAAKC,EAAMC,GACnB,MAAM+L,EAAMhM,EAAKM,KAAK0L,IACtBhM,EAAKiN,OAASjB,EAAIiB,QAAU,KAC5BjN,EAAK8mB,UAAY9a,EAAIU,SAAW,KAChC1M,EAAK+mB,UAAY/a,EAAIC,SAAW,KAEhCjM,EAAKgnB,MAAQ,IAAI1f,IAAStH,EAAKoM,MJib5B,SAAgBc,EAASpN,GAC5B,OAAO,IAAImnB,GAAsB,CAC7B7a,MAAO,gBACPa,OAAQ,WACLmS,GAAqBtf,GACxBoN,WAER,CIxbyCga,IAAgB5f,IACrDtH,EAAK+E,SAAW,IAAIuC,IAAStH,EAAKoM,MJsc/B,SAAmBrH,EAAUjF,GAChC,OAAO,IAAIqnB,GAAyB,CAChC/a,MAAO,gBACPa,OAAQ,cACLmS,GAAqBtf,GACxBiF,YAER,CI7c4CqiB,IAAmB9f,IAC3DtH,EAAKyC,WAAa,IAAI6E,IAAStH,EAAKoM,MJ6cjC,SAAqB4B,EAAQlO,GAChC,OAAO,IAAIunB,GAA2B,CAClCjb,MAAO,gBACPa,OAAQ,iBACLmS,GAAqBtf,GACxBkO,UAER,CIpd8CsZ,IAAqBhgB,IAC/DtH,EAAK2C,SAAW,IAAI2E,IAAStH,EAAKoM,MJod/B,SAAmB8B,EAAQpO,GAC9B,OAAO,IAAIynB,GAAyB,CAChCnb,MAAO,gBACPa,OAAQ,eACLmS,GAAqBtf,GACxBoO,UAER,CI3d4CsZ,IAAmBlgB,IAC3DtH,EAAKiP,IAAM,IAAI3H,IAAStH,EAAKoM,MAAMqb,MAAoBngB,IACvDtH,EAAK0nB,IAAM,IAAIpgB,IAAStH,EAAKoM,MAAMub,MAAoBrgB,IACvDtH,EAAK4C,OAAS,IAAI0E,IAAStH,EAAKoM,MAAMwb,MAAiBtgB,IACvDtH,EAAK6nB,SAAW,IAAIvgB,IAAStH,EAAKoM,MAAMqb,GAAiB,KAAMngB,IAC/DtH,EAAKoL,UAAatL,GAAWE,EAAKoM,MJib/B,SAAoBtM,GACvB,OAAO,IAAIgoB,GAA0B,CACjC1b,MAAO,gBACPa,OAAQ,eACLmS,GAAqBtf,IAEhC,CIvb4CioB,CAAiBjoB,IACzDE,EAAKqL,UAAavL,GAAWE,EAAKoM,MJub/B,SAAoBtM,GACvB,OAAO,IAAIkoB,GAA0B,CACjC5b,MAAO,gBACPa,OAAQ,eACLmS,GAAqBtf,IAEhC,CI7b4CmoB,CAAiBnoB,IAEzDE,EAAKqS,KAAO,IAAMrS,EAAKoM,MJ+ehBuT,GAAYtd,GAAUA,EAAMgQ,SI9enCrS,EAAK2S,UAAY,IAAIrL,IAAStH,EAAKoM,MJyehC,SAAoB8b,GACvB,OAAOvI,GAAYtd,GAAUA,EAAMsQ,UAAUuV,GACjD,CI3e6CC,IAAoB7gB,IAC7DtH,EAAKooB,YAAc,IAAMpoB,EAAKoM,MJifvBuT,GAAYtd,GAAUA,EAAM+lB,gBIhfnCpoB,EAAKqoB,YAAc,IAAMroB,EAAKoM,MJofvBuT,GAAYtd,GAAUA,EAAMgmB,kBIlf1BC,GAA0B/c,EAAkB,YAAa,CAACvL,EAAMC,KACzE4mB,GAAgB9mB,KAAKC,EAAMC,GAC3B2mB,GAAW7mB,KAAKC,EAAMC,GACtBD,EAAKsK,MAASxK,GAAWE,EAAKoM,MJhG3B,SAAgB+S,EAAOrf,GAC1B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,QACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIwFwCyoB,CAAYC,GAAU1oB,IAC1DE,EAAKsS,IAAOxS,GAAWE,EAAKoM,MJxCzB,SAAc+S,EAAOrf,GACxB,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,MACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIgCsC2oB,CAAUC,GAAQ5oB,IACpDE,EAAK2oB,IAAO7oB,GAAWE,EAAKoM,MJ8FzB,SAAc+S,EAAOrf,GACxB,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,MACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CItGsC8oB,CAAUC,GAAQ/oB,IACpDE,EAAK8oB,MAAShpB,GAAWE,EAAKoM,MJjC3B,SAAgB+S,EAAOrf,GAC1B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,QACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIyBwCipB,CAAYC,GAAUlpB,IAC1DE,EAAKkK,KAAQpK,GAAWE,EAAKoM,MAAM6c,GAAWC,GAASppB,IACvDE,EAAKmK,KAAQrK,GAAWE,EAAKoM,MJnF1B,SAAe+S,EAAOrf,GACzB,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CI2EuCqpB,CAAWC,GAAStpB,IACvDE,EAAKqpB,OAAUvpB,GAAWE,EAAKoM,MJ3E5B,SAAiB+S,EAAOrf,GAC3B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPI,OAAO,EACPpC,QAAS,QACNgV,GAAqBtf,IAEhC,CIkEyCwpB,CAAaF,GAAStpB,IAC3DE,EAAKupB,OAAUzpB,GAAWE,EAAKoM,MJlE5B,SAAiB+S,EAAOrf,GAC3B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPI,OAAO,EACPpC,QAAS,QACNgV,GAAqBtf,IAEhC,CIyDyC0pB,CAAaJ,GAAStpB,IAC3DE,EAAKypB,OAAU3pB,GAAWE,EAAKoM,MJzD5B,SAAiB+S,EAAOrf,GAC3B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPI,OAAO,EACPpC,QAAS,QACNgV,GAAqBtf,IAEhC,CIgDyC4pB,CAAaN,GAAStpB,IAC3DE,EAAKgK,OAAUlK,GAAWE,EAAKoM,MJ9B5B,SAAiB+S,EAAOrf,GAC3B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,SACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIsByC6pB,CAAaC,GAAW9pB,IAC7DE,EAAKkK,KAAQpK,GAAWE,EAAKoM,MAAM6c,GAAWC,GAASppB,IACvDE,EAAK2J,KAAQ7J,GAAWE,EAAKoM,MJvB1B,SAAe+S,EAAOrf,GACzB,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIeuC+pB,CAAWC,GAAShqB,IACvDE,EAAK4J,MAAS9J,GAAWE,EAAKoM,MJf3B,SAAgB+S,EAAOrf,GAC1B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,QACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIOwCiqB,CAAYC,GAAUlqB,IAC1DE,EAAK6J,KAAQ/J,GAAWE,EAAKoM,MJP1B,SAAe+S,EAAOrf,GACzB,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIDuCmqB,CAAWC,GAASpqB,IACvDE,EAAK2K,OAAU7K,GAAWE,EAAKoM,MJuD5B,SAAiB+S,EAAOrf,GAC3B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,SACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CI/DyCqqB,CAAaC,GAAWtqB,IAC7DE,EAAK4K,UAAa9K,GAAWE,EAAKoM,MJ+D/B,SAAoB+S,EAAOrf,GAC9B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,YACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIvE4CuqB,CAAgBC,GAAcxqB,IACtEE,EAAK8J,IAAOhK,GAAWE,EAAKoM,MJDzB,SAAc+S,EAAOrf,GACxB,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,MACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIPsCyqB,CAAUC,GAAQ1qB,IACpDE,EAAK+J,MAASjK,GAAWE,EAAKoM,MJO3B,SAAgB+S,EAAOrf,GAC1B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,QACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIfwC2qB,CAAYC,GAAU5qB,IAC1DE,EAAKuK,KAAQzK,GAAWE,EAAKoM,MJe1B,SAAe+S,EAAOrf,GACzB,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIvBuC6qB,CAAWC,GAAS9qB,IACvDE,EAAKwK,KAAQ1K,GAAWE,EAAKoM,MJuB1B,SAAe+S,EAAOrf,GACzB,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CI/BuC+qB,CAAWC,GAAShrB,IACvDE,EAAKyK,OAAU3K,GAAWE,EAAKoM,MJ+B5B,SAAiB+S,EAAOrf,GAC3B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,SACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIvCyCirB,CAAaC,GAAWlrB,IAC7DE,EAAK0K,OAAU5K,GAAWE,EAAKoM,MJuC5B,SAAiB+S,EAAOrf,GAC3B,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,SACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CI/CyCmrB,CAAaC,GAAWprB,IAC7DE,EAAK8K,KAAQhL,GAAWE,EAAKoM,MJiE1B,SAAe+S,EAAOrf,GACzB,OAAO,IAAIqf,EAAM,CACblH,KAAM,SACNhL,OAAQ,OACRb,MAAO,gBACPI,OAAO,KACJ4S,GAAqBtf,IAEhC,CIzEuCqrB,CAAWC,GAAStrB,IAEvDE,EAAKqgB,SAAYvgB,GAAWE,EAAKoM,MAAMif,GAAavrB,IACpDE,EAAKgL,KAAQlL,GAAWE,EAAKoM,MAAMkf,GAASxrB,IAC5CE,EAAK2T,KAAQ7T,GAAWE,EAAKoM,MAAMmf,GAASzrB,IAC5CE,EAAKiK,SAAYnK,GAAWE,EAAKoM,MAAMof,GAAa1rB,MAEjD,SAAS2rB,GAAO3rB,GACnB,OJ3IG,SAAiBqf,EAAOrf,GAC3B,OAAO,IAAIqf,EAAM,CACblH,KAAM,YACHmH,GAAqBtf,IAEhC,CIsIW4rB,CAAapD,GAAWxoB,EACnC,CACO,MAAM6rB,GAAgCpgB,EAAkB,kBAAmB,CAACvL,EAAMC,KACrF2rB,GAAsB7rB,KAAKC,EAAMC,GACjC2mB,GAAW7mB,KAAKC,EAAMC,KAEbuoB,GAAyBjd,EAAkB,WAAY,CAACvL,EAAMC,KAEvE4rB,GAAe9rB,KAAKC,EAAMC,GAC1B0rB,GAAgB5rB,KAAKC,EAAMC,KAKlBipB,GAAwB3d,EAAkB,UAAW,CAACvL,EAAMC,KAErE6rB,GAAc/rB,KAAKC,EAAMC,GACzB0rB,GAAgB5rB,KAAKC,EAAMC,KAKlBmpB,GAAwB7d,EAAkB,UAAW,CAACvL,EAAMC,KAErE8rB,GAAchsB,KAAKC,EAAMC,GACzB0rB,GAAgB5rB,KAAKC,EAAMC,KAgBlByoB,GAAuBnd,EAAkB,SAAU,CAACvL,EAAMC,KAEnE+rB,GAAajsB,KAAKC,EAAMC,GACxB0rB,GAAgB5rB,KAAKC,EAAMC,KAYlB+oB,GAAyBzd,EAAkB,WAAY,CAACvL,EAAMC,KAEvEgsB,GAAelsB,KAAKC,EAAMC,GAC1B0rB,GAAgB5rB,KAAKC,EAAMC,KAKlB2pB,GAA0Bre,EAAkB,YAAa,CAACvL,EAAMC,KAEzEisB,GAAgBnsB,KAAKC,EAAMC,GAC3B0rB,GAAgB5rB,KAAKC,EAAMC,KAKlB6pB,GAAwBve,EAAkB,UAAW,CAACvL,EAAMC,KAErEksB,GAAcpsB,KAAKC,EAAMC,GACzB0rB,GAAgB5rB,KAAKC,EAAMC,KAKlB+pB,GAAyBze,EAAkB,WAAY,CAACvL,EAAMC,KAEvEmsB,GAAersB,KAAKC,EAAMC,GAC1B0rB,GAAgB5rB,KAAKC,EAAMC,KAKlBiqB,GAAwB3e,EAAkB,UAAW,CAACvL,EAAMC,KAErEosB,GAActsB,KAAKC,EAAMC,GACzB0rB,GAAgB5rB,KAAKC,EAAMC,KAKlBuqB,GAAuBjf,EAAkB,SAAU,CAACvL,EAAMC,KAEnEqsB,GAAavsB,KAAKC,EAAMC,GACxB0rB,GAAgB5rB,KAAKC,EAAMC,KAKlByqB,GAAyBnf,EAAkB,WAAY,CAACvL,EAAMC,KAEvEssB,GAAexsB,KAAKC,EAAMC,GAC1B0rB,GAAgB5rB,KAAKC,EAAMC,KAKlB2qB,GAAwBrf,EAAkB,UAAW,CAACvL,EAAMC,KAErEusB,GAAczsB,KAAKC,EAAMC,GACzB0rB,GAAgB5rB,KAAKC,EAAMC,KAKlB6qB,GAAwBvf,EAAkB,UAAW,CAACvL,EAAMC,KAErEwsB,GAAc1sB,KAAKC,EAAMC,GACzB0rB,GAAgB5rB,KAAKC,EAAMC,KAKlB+qB,GAA0Bzf,EAAkB,YAAa,CAACvL,EAAMC,KACzEysB,GAAgB3sB,KAAKC,EAAMC,GAC3B0rB,GAAgB5rB,KAAKC,EAAMC,KAKlBirB,GAA0B3f,EAAkB,YAAa,CAACvL,EAAMC,KACzE0sB,GAAgB5sB,KAAKC,EAAMC,GAC3B0rB,GAAgB5rB,KAAKC,EAAMC,KAKlBmqB,GAA0B7e,EAAkB,YAAa,CAACvL,EAAMC,KAEzE2sB,GAAgB7sB,KAAKC,EAAMC,GAC3B0rB,GAAgB5rB,KAAKC,EAAMC,KAKlBqqB,GAA6B/e,EAAkB,eAAgB,CAACvL,EAAMC,KAE/E4sB,GAAmB9sB,KAAKC,EAAMC,GAC9B0rB,GAAgB5rB,KAAKC,EAAMC,KAKlBmrB,GAAwB7f,EAAkB,UAAW,CAACvL,EAAMC,KAErE6sB,GAAc/sB,KAAKC,EAAMC,GACzB0rB,GAAgB5rB,KAAKC,EAAMC,KAKlB4oB,GAAuBtd,EAAkB,SAAU,CAACvL,EAAMC,KAEnE8sB,GAAahtB,KAAKC,EAAMC,GACxB0rB,GAAgB5rB,KAAKC,EAAMC,KAsJlB+sB,GAA2BzhB,EAAkB,aAAc,CAACvL,EAAMC,KAC3EgtB,GAAiBltB,KAAKC,EAAMC,GAC5BijB,GAAQnjB,KAAKC,EAAMC,KAEhB,SAASitB,KACZ,OJ9EO,II8EcF,GJ9EJ,CACb/U,KAAM,WI8Ed,CACO,MAAMkV,GAAyB5hB,EAAkB,WAAY,CAACvL,EAAMC,KACvEmtB,GAAertB,KAAKC,EAAMC,GAC1BijB,GAAQnjB,KAAKC,EAAMC,KAEhB,SAASotB,GAAMvtB,GAClB,OJjFG,SAAgBqf,EAAOrf,GAC1B,OAAO,IAAIqf,EAAM,CACblH,KAAM,WACHmH,GAAqBtf,IAEhC,CI4EWwtB,CAAYH,GAAUrtB,EACjC,CAqBO,MAAMslB,GAAyB7Z,EAAkB,WAAY,CAACvL,EAAMC,KACvEstB,GAAextB,KAAKC,EAAMC,GAC1BijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKgX,QAAU/W,EAAI+W,QACnBhX,EAAKiP,IAAM,CAAC6X,EAAWhnB,IAAWE,EAAKoM,MAAMqb,GAAiBX,EAAWhnB,IACzEE,EAAK6nB,SAAY/nB,GAAWE,EAAKoM,MAAMqb,GAAiB,EAAG3nB,IAC3DE,EAAK0nB,IAAM,CAACX,EAAWjnB,IAAWE,EAAKoM,MAAMub,GAAiBZ,EAAWjnB,IACzEE,EAAK4C,OAAS,CAAC4qB,EAAK1tB,IAAWE,EAAKoM,MAAMwb,GAAc4F,EAAK1tB,IAC7DE,EAAKytB,OAAS,IAAMztB,EAAKgX,UAUtB,MAAM0W,GAA0BniB,EAAkB,YAAa,CAACvL,EAAMC,KACzE0tB,GAAmB5tB,KAAKC,EAAMC,GAC9BijB,GAAQnjB,KAAKC,EAAMC,GACnBwY,GAAgBzY,EAAM,QAAS,IACpBC,EAAIoX,OAEfrX,EAAK4tB,MAAQ,IAgMjB,SAAehV,EAAQ9Y,GACnB,MAAMmc,EAAUvX,MAAMC,QAAQiU,GAAUzY,OAAO0tB,YAAYjV,EAAOlS,IAAKrD,GAAM,CAACA,EAAGA,KAAOuV,EACxF,OAAO,IAAIkV,GAAQ,CACf7V,KAAM,OACNgE,aACGmD,GAAqBtf,IAEhC,CAvMuBiuB,CAAM5tB,OAAOiX,KAAKpX,EAAKM,KAAKL,IAAIoX,QACnDrX,EAAK+X,SAAYA,GAAa/X,EAAK2F,MAAM,IAAK3F,EAAKM,KAAKL,IAAK8X,SAAUA,IACvE/X,EAAKguB,YAAc,IAAMhuB,EAAK2F,MAAM,IAAK3F,EAAKM,KAAKL,IAAK8X,SAAUmV,OAClEltB,EAAKiuB,MAAQ,IAAMjuB,EAAK2F,MAAM,IAAK3F,EAAKM,KAAKL,IAAK8X,SAAUmV,OAC5DltB,EAAKkuB,OAAS,IAAMluB,EAAK2F,MAAM,IAAK3F,EAAKM,KAAKL,IAAK8X,SAAUsV,OAC7DrtB,EAAKmuB,MAAQ,IAAMnuB,EAAK2F,MAAM,IAAK3F,EAAKM,KAAKL,IAAK8X,cAAU5U,IAC5DnD,EAAKouB,OAAUC,GbxKZ,SAAgBxmB,EAAQwP,GAC3B,IAAKpS,GAAcoS,GACf,MAAM,IAAI5V,MAAM,oDAEpB,MAAMoO,EAAShI,EAAOvH,KAAKL,IAAI4P,OAE/B,GADkBA,GAAUA,EAAOjN,OAAS,EAExC,MAAM,IAAInB,MAAM,0FAEpB,MAAMxB,EAAM0D,GAAUkE,EAAOvH,KAAKL,IAAK,CACnC,SAAIoX,GACA,MAAMiX,EAAS,IAAKzmB,EAAOvH,KAAKL,IAAIoX,SAAUA,GAE9C,OADA9T,GAAWrC,KAAM,QAASotB,GACnBA,CACX,EACAze,OAAQ,KAEZ,OAAOlK,GAAMkC,EAAQ5H,EACzB,CauJesuB,CAAYvuB,EAAMquB,GAE7BruB,EAAKwuB,WAAcH,GbxJhB,SAAoBxmB,EAAQwP,GAC/B,IAAKpS,GAAcoS,GACf,MAAM,IAAI5V,MAAM,wDAEpB,MAAMxB,EAAM,IACL4H,EAAOvH,KAAKL,IACf,SAAIoX,GACA,MAAMiX,EAAS,IAAKzmB,EAAOvH,KAAKL,IAAIoX,SAAUA,GAE9C,OADA9T,GAAWrC,KAAM,QAASotB,GACnBA,CACX,EACAze,OAAQhI,EAAOvH,KAAKL,IAAI4P,QAE5B,OAAOlK,GAAMkC,EAAQ5H,EACzB,Ca2IewuB,CAAgBzuB,EAAMquB,GAEjCruB,EAAK0uB,MAASC,Gb5IX,SAAexT,EAAGC,GACrB,MAAMnb,EAAM0D,GAAUwX,EAAE7a,KAAKL,IAAK,CAC9B,SAAIoX,GACA,MAAMiX,EAAS,IAAKnT,EAAE7a,KAAKL,IAAIoX,SAAU+D,EAAE9a,KAAKL,IAAIoX,OAEpD,OADA9T,GAAWrC,KAAM,QAASotB,GACnBA,CACX,EACA,YAAIvW,GACA,OAAOqD,EAAE9a,KAAKL,IAAI8X,QACtB,EACAlI,OAAQ,KAEZ,OAAOlK,GAAMwV,EAAGlb,EACpB,Ca+H4B2uB,CAAW5uB,EAAM2uB,GACzC3uB,EAAK6uB,KAAQC,GbvNV,SAAcjnB,EAAQinB,GACzB,MAAMC,EAAUlnB,EAAOvH,KAAKL,IAiB5B,OAAO0F,GAAMkC,EAhBDlE,GAAUkE,EAAOvH,KAAKL,IAAK,CACnC,SAAIoX,GACA,MAAM2X,EAAW,GACjB,IAAK,MAAM/rB,KAAO6rB,EAAM,CACpB,KAAM7rB,KAAO8rB,EAAQ1X,OACjB,MAAM,IAAI5V,MAAM,sBAAsBwB,MAErC6rB,EAAK7rB,KAEV+rB,EAAS/rB,GAAO8rB,EAAQ1X,MAAMpU,GAClC,CAEA,OADAM,GAAWrC,KAAM,QAAS8tB,GACnBA,CACX,EACAnf,OAAQ,KAGhB,CaoM0Bof,CAAUjvB,EAAM8uB,GACtC9uB,EAAKkvB,KAAQJ,GbpMV,SAAcjnB,EAAQinB,GACzB,MAAMC,EAAUlnB,EAAOvH,KAAKL,IACtBA,EAAM0D,GAAUkE,EAAOvH,KAAKL,IAAK,CACnC,SAAIoX,GACA,MAAM2X,EAAW,IAAKnnB,EAAOvH,KAAKL,IAAIoX,OACtC,IAAK,MAAMpU,KAAO6rB,EAAM,CACpB,KAAM7rB,KAAO8rB,EAAQ1X,OACjB,MAAM,IAAI5V,MAAM,sBAAsBwB,MAErC6rB,EAAK7rB,WAEH+rB,EAAS/rB,EACpB,CAEA,OADAM,GAAWrC,KAAM,QAAS8tB,GACnBA,CACX,EACAnf,OAAQ,KAEZ,OAAOlK,GAAMkC,EAAQ5H,EACzB,CaiL0BkvB,CAAUnvB,EAAM8uB,GACtC9uB,EAAKovB,QAAU,IAAI9nB,IbjIhB,SAAiB6X,EAAOtX,EAAQinB,GACnC,MAAM7uB,EAAM0D,GAAUkE,EAAOvH,KAAKL,IAAK,CACnC,SAAIoX,GACA,MAAMgY,EAAWxnB,EAAOvH,KAAKL,IAAIoX,MAC3BA,EAAQ,IAAKgY,GACnB,GAAIP,EACA,IAAK,MAAM7rB,KAAO6rB,EAAM,CACpB,KAAM7rB,KAAOosB,GACT,MAAM,IAAI5tB,MAAM,sBAAsBwB,MAErC6rB,EAAK7rB,KAGVoU,EAAMpU,GAAOkc,EACP,IAAIA,EAAM,CACRlH,KAAM,WACN4E,UAAWwS,EAASpsB,KAEtBosB,EAASpsB,GACnB,MAGA,IAAK,MAAMA,KAAOosB,EAEdhY,EAAMpU,GAAOkc,EACP,IAAIA,EAAM,CACRlH,KAAM,WACN4E,UAAWwS,EAASpsB,KAEtBosB,EAASpsB,GAIvB,OADAM,GAAWrC,KAAM,QAASmW,GACnBA,CACX,EACAxH,OAAQ,KAEZ,OAAOlK,GAAMkC,EAAQ5H,EACzB,Ca2FgCqvB,CAAaC,GAAavvB,EAAMsH,EAAK,IACjEtH,EAAKwvB,SAAW,IAAIloB,Ib3FjB,SAAkB6X,EAAOtX,EAAQinB,GACpC,MAAM7uB,EAAM0D,GAAUkE,EAAOvH,KAAKL,IAAK,CACnC,SAAIoX,GACA,MAAMgY,EAAWxnB,EAAOvH,KAAKL,IAAIoX,MAC3BA,EAAQ,IAAKgY,GACnB,GAAIP,EACA,IAAK,MAAM7rB,KAAO6rB,EAAM,CACpB,KAAM7rB,KAAOoU,GACT,MAAM,IAAI5V,MAAM,sBAAsBwB,MAErC6rB,EAAK7rB,KAGVoU,EAAMpU,GAAO,IAAIkc,EAAM,CACnBlH,KAAM,cACN4E,UAAWwS,EAASpsB,KAE5B,MAGA,IAAK,MAAMA,KAAOosB,EAEdhY,EAAMpU,GAAO,IAAIkc,EAAM,CACnBlH,KAAM,cACN4E,UAAWwS,EAASpsB,KAKhC,OADAM,GAAWrC,KAAM,QAASmW,GACnBA,CACX,EACAxH,OAAQ,KAEZ,OAAOlK,GAAMkC,EAAQ5H,EACzB,CayDiCwvB,CAAcxK,GAAgBjlB,EAAMsH,EAAK,MAEnE,SAAStE,GAAOqU,EAAOvX,GAC1B,MAAMG,EAAM,CACRgY,KAAM,SACNZ,MAAOA,GAAS,MACb+H,GAAqBtf,IAE5B,OAAO,IAAI4tB,GAAUztB,EACzB,CAmBO,MAAMslB,GAAyBha,EAAkB,WAAY,CAACvL,EAAMC,KACvEyvB,GAAe3vB,KAAKC,EAAMC,GAC1BijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKoa,QAAUna,EAAIma,UAsBhB,MAAMqL,GAAgCla,EAAkB,kBAAmB,CAACvL,EAAMC,KACrF0vB,GAAsB5vB,KAAKC,EAAMC,GACjCijB,GAAQnjB,KAAKC,EAAMC,KAkFhB,MAAM6tB,GAAwBviB,EAAkB,UAAW,CAACvL,EAAMC,KACrE2vB,GAAc7vB,KAAKC,EAAMC,GACzBijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAK6vB,KAAO5vB,EAAIgc,QAChBjc,EAAKoa,QAAUja,OAAOyY,OAAO3Y,EAAIgc,SACjC,MAAM7E,EAAO,IAAI3W,IAAIN,OAAOiX,KAAKnX,EAAIgc,UACrCjc,EAAK8vB,QAAU,CAAClX,EAAQ9Y,KACpB,MAAMiwB,EAAa,GACnB,IAAK,MAAM1vB,KAASuY,EAAQ,CACxB,IAAIxB,EAAK7V,IAAIlB,GAIT,MAAM,IAAIoB,MAAM,OAAOpB,uBAHvB0vB,EAAW1vB,GAASJ,EAAIgc,QAAQ5b,EAIxC,CACA,OAAO,IAAIytB,GAAQ,IACZ7tB,EACH4P,OAAQ,MACLuP,GAAqBtf,GACxBmc,QAAS8T,KAGjB/vB,EAAKgwB,QAAU,CAACpX,EAAQ9Y,KACpB,MAAMiwB,EAAa,IAAK9vB,EAAIgc,SAC5B,IAAK,MAAM5b,KAASuY,EAAQ,CACxB,IAAIxB,EAAK7V,IAAIlB,GAIT,MAAM,IAAIoB,MAAM,OAAOpB,8BAHhB0vB,EAAW1vB,EAI1B,CACA,OAAO,IAAIytB,GAAQ,IACZ7tB,EACH4P,OAAQ,MACLuP,GAAqBtf,GACxBmc,QAAS8T,OAyDd,MAAMpK,GAA6Bpa,EAAkB,eAAgB,CAACvL,EAAMC,KAC/EgwB,GAAmBlwB,KAAKC,EAAMC,GAC9BijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKM,KAAKyP,MAAQ,CAACpE,EAAS7D,KACxB,GAAuB,aAAnBA,EAAKqB,UACL,MAAM,IAAIoT,EAAqBvc,EAAK0B,YAAY9B,MAEpD+L,EAAQoU,SAAY1Y,IAChB,GAAqB,iBAAVA,EACPsE,EAAQrF,OAAOwF,KAAKqS,GAAW9W,EAAOsE,EAAQtL,MAAOJ,QAEpD,CAED,MAAM+f,EAAS3Y,EACX2Y,EAAOC,QACPD,EAAOzZ,UAAW,GACtByZ,EAAOzY,OAASyY,EAAOzY,KAAO,UAC9ByY,EAAO3d,QAAU2d,EAAO3d,MAAQsJ,EAAQtL,OACxC2f,EAAOhgB,OAASggB,EAAOhgB,KAAOA,GAE9B2L,EAAQrF,OAAOwF,KAAKqS,GAAW6B,GACnC,GAEJ,MAAMtD,EAASzc,EAAIwc,UAAU9Q,EAAQtL,MAAOsL,GAC5C,OAAI+Q,aAAkBxU,QACXwU,EAAOpM,KAAMoM,IAChB/Q,EAAQtL,MAAQqc,EACT/Q,KAGfA,EAAQtL,MAAQqc,EACT/Q,MASR,MAAM4jB,GAA4BhkB,EAAkB,cAAe,CAACvL,EAAMC,KAC7EiwB,GAAkBnwB,KAAKC,EAAMC,GAC7BijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKytB,OAAS,IAAMztB,EAAKM,KAAKL,IAAI4c,YAE/B,SAASiI,GAASjI,GACrB,OAAO,IAAI0S,GAAY,CACnBtX,KAAM,WACN4E,UAAWA,GAEnB,CACO,MAAMsT,GAA4B5kB,EAAkB,cAAe,CAACvL,EAAMC,KAC7EmwB,GAAkBrwB,KAAKC,EAAMC,GAC7BijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKytB,OAAS,IAAMztB,EAAKM,KAAKL,IAAI4c,YAE/B,SAASkI,GAASlI,GACrB,OAAO,IAAIsT,GAAY,CACnBlY,KAAM,WACN4E,UAAWA,GAEnB,CAKO,MAAMiJ,GAA2Bva,EAAkB,aAAc,CAACvL,EAAMC,KAC3EowB,GAAiBtwB,KAAKC,EAAMC,GAC5BijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKytB,OAAS,IAAMztB,EAAKM,KAAKL,IAAI4c,UAClC7c,EAAKswB,cAAgBtwB,EAAKytB,SAWvB,MAAMxH,GAA4B1a,EAAkB,cAAe,CAACvL,EAAMC,KAC7EswB,GAAkBxwB,KAAKC,EAAMC,GAC7BijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKytB,OAAS,IAAMztB,EAAKM,KAAKL,IAAI4c,YAW/B,MAAMoI,GAA+B1Z,EAAkB,iBAAkB,CAACvL,EAAMC,KACnFuwB,GAAqBzwB,KAAKC,EAAMC,GAChCijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKytB,OAAS,IAAMztB,EAAKM,KAAKL,IAAI4c,YAoB/B,MAAMuJ,GAAyB7a,EAAkB,WAAY,CAACvL,EAAMC,KACvEwwB,GAAe1wB,KAAKC,EAAMC,GAC1BijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKytB,OAAS,IAAMztB,EAAKM,KAAKL,IAAI4c,UAClC7c,EAAK0wB,YAAc1wB,EAAKytB,SAiBrB,MAAMkD,GAAwBplB,EAAkB,UAAW,CAACvL,EAAMC,KACrE2wB,GAAc7wB,KAAKC,EAAMC,GACzBijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKwd,GAAKvd,EAAIud,GACdxd,EAAKyd,IAAMxd,EAAIwd,MAEZ,SAASiI,GAAKmL,EAAKpT,GACtB,OAAO,IAAIkT,GAAQ,CACf1Y,KAAM,OACNuF,GAAIqT,EACJpT,IAAKA,GAGb,CAcO,MAAM6I,GAA4B/a,EAAkB,cAAe,CAACvL,EAAMC,KAC7E6wB,GAAkB/wB,KAAKC,EAAMC,GAC7BijB,GAAQnjB,KAAKC,EAAMC,GACnBD,EAAKytB,OAAS,IAAMztB,EAAKM,KAAKL,IAAI4c,YAqD/B,MAAM2H,GAA0BjZ,EAAkB,YAAa,CAACvL,EAAMC,KACzE8wB,GAAgBhxB,KAAKC,EAAMC,GAC3BijB,GAAQnjB,KAAKC,EAAMC,wOCtuBvB,MAAM+wB,EAAQC,EAURC,EAAOC,EAKPC,EAAaC,EAAI,IAGvBC,EACE,IAAMN,EAAMO,KACZC,IACMA,IACFJ,EAAW/wB,MAAQ,MAKzB,mDAAsB,KACf2wB,EAAMS,eACLT,EAAMU,UACRR,EAAK,UAAWE,EAAW/wB,OAE3B6wB,EAAK,yBAKS,KACbF,EAAMS,cACTP,EAAK,+FA/PCS,MAAA,CAAAC,MAAA,UAAAC,OAAA,mBAIDF,MAAA,CAAAC,MAAA,OAAAC,OAAA,gEAyBsBF,MAAA,oCA4FrBA,MAAA,qBAAAG,QAAA,OAAAC,WAAA,gCAAAC,OAAA,uBAEKL,MAAA,CAAAM,QAAA,6FACGN,MAAA,CAAAC,MAAA,uDAGAD,MAAA,CAAAC,MAAA,uDAGND,MAAA,CAAAO,MAAA,OAAAC,OAAA,MAAAJ,WAAA,6BAAAK,SAAA,sCAmBGT,MAAA,CAAAM,QAAA,sEACGN,MAAA,CAAAC,MAAA,sCAC4BD,MAAA,CAAAC,MAAA,gCAOnCD,MAAA,CAAAM,QAAA,OAAAI,IAAA,wFA1LD,OAAAC,EAAAf,MAAAgB,IADRC,EAsOM,OAAAvvB,IAAA,EApOHwvB,QAAKC,EAAOC,EAAAC,YAAW,UACxBjB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,yCAAAE,QAAA,yDAAAH,QAAA,UAcAiB,EAoNM,OAnNJpB,MAAA,CAAAI,WAAA,UAAAC,OAAA,2CAAAF,QAAA,2BAAAI,MAAA,8BASCO,QAAKO,EAAA,KAAAA,EAAA,GAAAN,EAAN,OAAW,aAEXK,EAGK,KAHLE,GAGK,CAAAD,EAAA,KAAAA,EAAA,GAFHD,EAA+C,KAA5CG,MAAM,mCAAiC,UAAAC,EAAK,IAC/CC,EAAGd,EAAAe,OAAK,cAEVN,EAEI,IAFJO,GAEIF,EADCd,EAAA9L,aAAW,qBAKR8L,mBADRE,EAiBY,YAAAvvB,IAAA,uCAfD0vB,EAAAvB,WAAUmC,GAClBC,YAAalB,EAAAkB,aAAW,YACzB7B,MAAA,CAAAO,MAAA,4BAAAH,WAAA,UAAAH,MAAA,UAAAI,OAAA,uCAAAF,QAAA,iDAAA2B,OAAA,8CAAAC,KAAA,IAFSf,EAAAvB,cAAUuC,EAAA,OAkBVrB,EAAAb,cAAAc,IAAXC,EA+HM,MA/HNoB,GA+HM,CAAAZ,EAAA,KAAAA,EAAA,GAAAa,EAAA,4kDApCIvB,EAAAwB,UAAAvB,IADRC,EAoCM,MApCNuB,GAoCM,CAhCJhB,EAKM,MALNiB,GAKM,CAJJjB,EAEO,OAFPkB,GAAgE,OAC3Db,EAAGd,WAAS4B,MAAO,IAACd,EAAGd,WAAS6B,OAAQ,KAAEf,EAAGd,WAAS8B,UAAQ,GAEnErB,EAAmG,OAAnGsB,GAAmGjB,EAA/Bd,EAAAwB,SAASQ,YAAa,KAAE,KAE9FvB,EAmBM,MAnBNwB,GAmBM,CATJxB,EAQO,OAPLpB,MAKC6C,EAAA,CALD,CAAArC,OAAA,OAAAJ,WAAA,mDAAA0C,WAAA,oEAKC,CAAAvC,MACgBI,WAASgC,WAAU,kBAGxCvB,EAKM,MALN2B,GAKM,CAJJ3B,EAAwE,OAAxE4B,GAAwEvB,EAA1Bd,WAASrsB,SAAO,GAClDqsB,EAAAwB,SAASc,aAAArC,IAArBC,EAEO,OAFPqC,GAAuE,SAChEzB,EAAGd,EAAAwB,SAASc,aAAc,KACjC,IAAAjB,EAAA,iCAKNZ,EAyCM,MAzCN+B,GAyCM,CAvCKxC,eAmBTqB,EAAA,YApBAnB,EAoBS,UAAAvvB,IAAA,EAlBNwvB,QAAOE,EAAAoC,cACPC,SAAU1C,cAAcK,EAAAvB,WACzBO,MAWC6C,EAAA,CAXD,CAAAS,KAAA,IAAAlD,WAAA,UAAAH,MAAA,QAAAI,OAAA,OAAAF,QAAA,mCAAAoD,OAAA,iDAAAT,WAAA,YAWC,CAAAU,QACkB7C,EAAAZ,YAAciB,EAAAvB,WAAU,aAAA4B,EAAA,KAAAA,EAAA,IAE3CD,EAAiC,KAA9BG,MAAM,qBAAmB,SAAAC,EAAK,UAEnC,SAAAiC,KACArC,EAkBS,UAjBNN,QAAOE,EAAAC,YACPoC,SAAU1C,EAAAb,aACXE,MAWC6C,EAAA,CAXD,CAAAS,KAAA,IAAAlD,WAAA,OAAAH,MAAA,QAAAI,OAAA,OAAAF,QAAA,mCAAAoD,OAAA,iDAAAT,WAAA,YAWC,CAAAU,QACkB7C,EAAAb,aAAY,SAAA2B,EAE5Bd,EAAAb,aAAY,kBAAA4D,uSCtDzB,MAAMrE,EAAQC,EAURC,EAAOC,EAKPmE,EAAmBjE,EAAI,IAG7BC,EACE,IAAMN,EAAMO,KACZC,IACMA,IACF8D,EAAiBj1B,MAAQ,MAK/B,yDAAsB,KAChBi1B,EAAiBj1B,QAAU2wB,EAAMuE,aACnCrE,EAAK,UAAWoE,EAAiBj1B,6FA3K3BsxB,MAAA,CAAAC,MAAA,UAAAC,OAAA,mBAIDF,MAAA,CAAAC,MAAA,OAAAC,OAAA,6CAKDF,MAAA,CAAAC,MAAA,OAAAC,OAAA,sFAwBAF,MAAA,wBAAAI,WAAA,gCAAAD,QAAA,OAAAE,OAAA,uBAYOL,MAAA,CAAAM,QAAA,4FACGN,MAAA,CAAAC,MAAA,uDAGAD,MAAA,CAAAC,MAAA,uDAGND,MAAA,CAAAO,MAAA,OAAAC,OAAA,MAAAJ,WAAA,6BAAAK,SAAA,qCAYGT,MAAA,CAAAM,QAAA,sEACGN,MAAA,CAAAC,MAAA,sCAC4BD,MAAA,CAAAC,MAAA,gCAiBnCD,MAAA,CAAAM,QAAA,OAAAI,IAAA,wFAhHD,OAAAC,EAAAf,MAAAgB,IADRC,EA6JM,OAAAvvB,IAAA,EA3JHwvB,QAAKO,iBAAOlrB,EAAA0tB,MAAK,oBAClB7D,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,yCAAAE,QAAA,yDAAAH,QAAA,UAcAiB,EA2IM,OA1IJpB,MAAA,CAAAI,WAAA,UAAAC,OAAA,2CAAAF,QAAA,2BAAAI,MAAA,gDAUCO,QAAKO,EAAA,KAAAA,EAAA,GAAAN,EAAN,OAAW,aAEXK,EAGK,KAHLE,GAGK,CAAAD,EAAA,KAAAA,EAAA,GAFHD,EAAgC,KAA7BG,MAAM,oBAAkB,UAAAC,EAAK,IAChCC,EAAGd,EAAAe,OAAK,cAEVN,EAEI,IAFJO,GAEIF,EADCd,EAAA9L,aAAW,iCAGR8L,YAAYA,EAAAmD,SAAS7yB,OAAM,GAAA2vB,IADnCC,EAKK,KALLkB,GAKK,EAAAnB,GAAA,GADHC,EAAwEkD,EAAA,KAAAC,EAAzCrD,EAAAmD,SAAQ,CAA3BG,EAASjf,KAArB4b,IAAAC,EAAwE,MAA9BvvB,IAAK0T,GAAKyc,EAAKwC,GAAO,yBAElE7C,EAgBY,kCAAAC,EAAA,KAAAA,EAAA,GAAAO,GAfDZ,EAAA2C,iBAAgB/B,GACxBC,YAAalB,EAAAkB,aAAW,YACzB7B,MAAA,CAAAO,MAAA,4BAAAH,WAAA,UAAAH,MAAA,UAAAI,OAAA,uCAAAF,QAAA,iDAAA2B,OAAA,8CAAAG,IAAA,IAFSjB,EAAA2C,oBAkBHhD,EAAAiD,aAAAhD,IADRC,EAkDM,MAlDNuB,GAkDM,CAAAf,EAAA,KAAAA,EAAA,GA9CJD,EAMM,OANDpB,MAAA,CAAAM,QAAA,8BAAAI,IAAA,gCAA0E,CAC7EU,EAGK,KAFHG,MAAM,kCACNvB,MAAA,CAAAC,MAAA,6BAAAiE,UAAA,yBAEF9C,EAAkF,QAA5EpB,MAAA,CAAAC,MAAA,mDAA0D,iBAAW,IAI7DU,EAAAwB,UAAAvB,IAAhBC,EA0BWkD,EAAA,CAAAzyB,IAAA,IAzBT8vB,EAKM,MALNiB,GAKM,CAJJjB,EAEO,OAFPkB,GAAgE,OAC3Db,EAAGd,WAAS4B,MAAO,IAACd,EAAGd,WAAS6B,OAAQ,KAAEf,EAAGd,WAAS8B,UAAQ,GAEnErB,EAAmG,OAAnGsB,GAAmGjB,EAA/Bd,EAAAwB,SAASQ,YAAa,KAAE,KAE9FvB,EAYM,MAZNwB,GAYM,CATJxB,EAQO,OAPLpB,MAKC6C,EAAA,CALD,CAAArC,OAAA,OAAAJ,WAAA,mDAAA0C,WAAA,kEAKC,CAAAvC,MACgBI,WAASgC,WAAU,kBAGxCvB,EAKM,MALN2B,GAKM,CAJJ3B,EAAwE,OAAxE4B,GAAwEvB,EAA1Bd,WAASrsB,SAAO,GAClDqsB,EAAAwB,SAASc,aAAArC,IAArBC,EAEO,OAFPqC,GAAuE,SAChEzB,EAAGd,EAAAwB,SAASc,aAAc,KACjC,IAAAjB,EAAA,oBAKJnB,EAOWkD,EAAA,CAAAzyB,IAAA,IAAA+vB,EAAA,KAAAA,EAAA,GANTD,EAIM,OAHJpB,MAAA,CAAAO,MAAA,OAAAC,OAAA,MAAAJ,WAAA,6BAAAK,SAAA,SAAAtkB,SAAA,aAA4G,CAE5GilB,EAAgC,OAA3BG,MAAM,mBAAc,gBAE3BH,EAA+F,KAA5FpB,MAAA,CAAAC,MAAA,0BAAAC,OAAA,oCAA4E,qBAAY,iBAI/FkB,EA0CM,MA1CN+B,GA0CM,CAzCJ/B,EAqBS,UApBNN,QAAOE,EAAAoC,cACPC,UAAWrC,EAAA2C,kBAAoBhD,EAAAiD,YAChC5D,MAaC6C,EAAA,CAbD,CAAAS,KAAA,IAAAlD,WAAA,UAAAH,MAAA,OAAAI,OAAA,OAAAF,QAAA,mCAAAoD,OAAA,iDAAAT,WAAA,WAAA3mB,SAAA,WAAAskB,SAAA,UAaC,CAAA+C,SACmBxC,oBAAoBL,EAAAiD,YAAW,UAEnDxC,EAAqF,KAAlFG,MAAK4C,EAAA,CAAC,kCAAiC,aAAwBxD,EAAAiD,gBAAW,QAAQpC,EAAA,IACrFC,EAAGd,EAAAiD,YAAW,wBAAAH,IAEhBrC,EAkBS,UAjBNN,QAAKO,eAAElrB,EAAA0tB,MAAK,UACZR,SAAU1C,EAAAiD,YACX5D,MAWC6C,EAAA,CAXD,CAAAS,KAAA,IAAAlD,WAAA,OAAAH,MAAA,QAAAI,OAAA,OAAAF,QAAA,mCAAAoD,OAAA,iDAAAT,WAAA,YAWC,CAAAU,QACkB7C,EAAAiD,YAAW,SAC/B,OAED,GAAAF,4FCzJJnC,MAAM,gBACNvB,MAAA,CAAAM,QAAA,iCAAAE,OAAA,OAAAJ,WAAA,2BAIEmB,MAAM,iBACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,iEAsBKoB,MAAM,iBAAiBvB,MAAA,CAAAM,QAAA,8BAAAI,IAAA,mBAGxBa,MAAM,cACNvB,MAAA,CAAAI,WAAA,UAAAH,MAAA,QAAAE,QAAA,0DA6FDH,MAAA,CAAAsD,KAAA,IAAAhD,QAAA,OAAAI,IAAA,OAAAP,QAAA,OAAAM,SAAA,eAEET,MAAA,CAAAsD,KAAA,2DAIDtD,MAAA,CAAAM,QAAA,mFAAAH,QAAA,kCAAAF,MAAA,mBAoBAD,MAAA,CAAAI,WAAA,UAAAC,OAAA,0CAAAF,QAAA,oCAEKH,MAAA,CAAAM,QAAA,mGAgCKN,MAAA,CAAAM,QAAA,iCAAAI,IAAA,aAeNV,MAAA,CAAAM,QAAA,8BAAAI,IAAA,gGAUEV,MAAA,CAAAI,WAAA,UAAAH,MAAA,QAAAE,QAAA,0QA6JNH,MAAA,CAAA7jB,SAAA,SAAAglB,OAAA,IAAAhB,QAAA,OAAAC,WAAA,qFAAAE,QAAA,kCAAAI,IAAA,iCA2EFV,MAAA,CAAAsD,KAAA,IAAAhD,QAAA,iCAAAF,WAAA,iCAAAK,SAAA,SAAAJ,OAAA,uEAYEL,MAAA,CAAAG,QAAA,YAAAC,WAAA,wFAAAE,QAAA,sEA6CGN,MAAA,CAAAsD,KAAA,IAAAnnB,SAAA,WAAAskB,SAAA,SAAAL,WAAA,oCASDJ,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAF,QAAA,yDAAAL,MAAA,0BAAAE,QAAA,uDAiGCH,MAAA,CAAAM,QAAA,6FAyBHN,MAAA,CAAAI,WAAA,gCAAAD,QAAA,OAAAF,MAAA,qEAAAqD,KAAA,4DAiBGtD,MAAA,CAAAM,QAAA,8DAkFAN,MAAA,CAAAG,QAAA,2BAAAmD,KAAA,UAuBDtD,MAAA,CAAAI,WAAA,UAAAC,OAAA,0CAAAF,QAAA,6EAWEH,MAAA,CAAAE,OAAA,4DACKF,MAAA,CAAAC,MAAA,mKA2CnB,MAAMmE,EAAiBC,GAAS,CAC9BC,KAAMC,KAAWtQ,QAAQ,IACzByN,MAAO6C,KAAWtQ,QAAQ,IAC1BY,YAAa0P,KAAWtQ,QAAQ,MAM5BuQ,EAAWH,GAAS,CACxBI,WAAYF,KAAWtQ,QAAQ,MAM3ByQ,EAAgBC,KAChBC,SAAEA,GAAaC,EAAYH,GAG3BI,EAAYC,IAGZC,EAAYtF,EAAsB,IAClCuF,EAAWvF,EAAc8E,EAASpmB,MAAM,KACxC8mB,EAAiBxF,GAAI,GACrByF,EAAgBzF,EAAI,IACpB0F,EAAiB1F,EAAI,QACrB2F,EAAuB3F,GAAI,GAC3B4F,EAAmB5F,GAAI,GACvB6F,EAAiB7F,GAAI,GACrB8F,EAAc9F,GAAI,GAClB+F,EAAsB/F,MACtBgG,EAAWhG,GAAI,GACfiG,EAAcjG,EAAI,IAClBkG,EAAmBlG,EAAS,MAC5BmG,EAAqBnG,GAAI,GACzBoG,EAA0BpG,EAAI,IAC9BqG,EAAoBrG,GAAI,GACxBsG,EAAoBtG,GAAI,GAYxBuG,EAAavG,EAAgB,CACjC6C,KAAM,EACNC,MAAO,EACPC,SAAU,GACVE,WAAY,EACZruB,QAAS,GACT4xB,UAAW,IAIb,IAAIC,EAAsC,KAG1C,SAASC,EAAe7D,EAAcE,EAAkBnuB,GACtD2xB,EAAWv3B,MAAM6zB,KAAOA,EACxB0D,EAAWv3B,MAAM+zB,SAAWA,EAC5BwD,EAAWv3B,MAAM4F,QAAUA,EAC3B2xB,EAAWv3B,MAAMi0B,WAAatlB,KAAKgpB,MAAO9D,EAAO0D,EAAWv3B,MAAM8zB,MAAS,KAE3E8D,QAAQC,IAAI,UAAUN,EAAWv3B,MAAMi0B,gBAAgBF,MAAanuB,IACtE,CAGA,SAASkyB,IACHL,GACFM,cAAcN,GAEhBF,EAAWv3B,MAAMw3B,UAAYvc,KAAK+c,MAClCP,EAAeQ,YAAY,KACTtpB,KAAKgpB,OAAO1c,KAAK+c,MAAQT,EAAWv3B,MAAMw3B,WAAa,KAEvED,EAAWv3B,MAAQ,IAAKu3B,EAAWv3B,QAClC,IACL,CAGA,SAASk4B,IACHT,IACFM,cAAcN,GACdA,EAAe,KAEnB,CAGA,MAAMU,EAA0BC,EAAS,KACvC,MAAMC,EAAU1pB,KAAKgpB,OAAO1c,KAAK+c,MAAQT,EAAWv3B,MAAMw3B,WAAa,KACvE,MAAO,IACFD,EAAWv3B,MACdu0B,YAAa8D,KAKjB,SAASC,IACP,IAEE,QAA4C,IAAhCC,OAAeC,aAA8B,CACvD,MAAMC,EAAQF,OAAeC,aAAaE,YAAY,WACtD,GAAID,EAEF,OADAb,QAAQC,IAAI,wBAAyBY,EAAKl5B,MACnCk5B,CAEX,CAGA,GAA2B,oBAAhBE,YAA6B,CACtC,MAAMC,EAAYD,YAAoBE,gBAAgBC,aAAa,GACnE,GAAIF,EAEF,OADAhB,QAAQC,IAAI,uBAAwBe,EAASr5B,MACtCq5B,CAEX,CAGA,OADAhB,QAAQC,IAAI,UACL,IACT,OAASlyB,GAEP,OADAiyB,QAAQjyB,MAAM,WAAYA,GACnB,IACT,CACF,CAGA+B,eAAeqxB,IACb,IACE,MAAMC,EAAYV,IAClB,IAAKU,EAGH,OAFA1C,EAAUt2B,MAAQ,QAClB43B,QAAQC,IAAI,UAIdD,QAAQC,IAAI,SAAUmB,EAAUz5B,MAGhC,MAAM05B,EAAe,CAACD,EAAUE,aAAeF,EAAU50B,MAAM+0B,qBAAuB,IACtFvB,QAAQC,IAAI,KAAMoB,EAAa12B,OAAQ,QAGvC,MACM62B,EAAa,GADFC,iBAC2BL,EAAUM,SAEtD,IAAIC,EAAU,GACVC,EAAgB,KAEpB,MAAMC,EAAYC,aAAaC,QAAQP,GACvC,GAAIK,EACF,IACE,MAAMG,EAAc71B,KAAK2L,MAAM+pB,GAC/BF,EAAUK,GAAaC,kBAAoB,GAC3CL,EAAgBI,GAAaE,UAC7BlC,QAAQC,IAAI,2BACd,OAAS9vB,GACP6vB,QAAQjyB,MAAM,aAAcoC,EAC9B,CAIFuuB,EAAUt2B,MAAQi5B,EAAa5yB,IAAI,CAAC9F,EAAG+V,KACrC,MAAMyjB,EAAQR,EAAQjjB,GACtB,IACE,OAAOof,EAAehmB,MAAMqqB,GAAS,GACvC,OAASp0B,GAEP,OADAiyB,QAAQoC,KAAK,mBAAoBr0B,GAC1B+vB,EAAehmB,MAAM,GAC9B,IAIF,IACE,MAAMuqB,EAAeT,GAAiB,GACtCjD,EAASv2B,MAAQ81B,EAASpmB,MAAMuqB,EAClC,OAASt0B,GACPiyB,QAAQoC,KAAK,kBAAmBr0B,GAChC4wB,EAASv2B,MAAQ81B,EAASpmB,MAAM,GAClC,CAEAkoB,QAAQC,IAAI,YAAavB,EAAUt2B,MAAMuC,OAAQ,KACjDq1B,QAAQC,IAAI,sBAAuBtB,EAASv2B,MAAM+1B,WAAWxzB,QAC7D20B,EAAiBl3B,MAAQg5B,EACzBkB,GACF,OAASv0B,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzBtG,EAAOsG,MAAM,WAAcA,EAAgBC,QAC7C,CACF,CAGA,SAASu0B,IACP,IACE,MAAMnB,EAAYV,IAClB,IAAKU,EAEH,YADApB,QAAQoC,KAAK,eAIf,MACMZ,EAAa,GADFC,iBAC2BL,EAAUM,SAEhDc,EAAa,CACjBP,iBAAkBQ,EAAM/D,EAAUt2B,OAClC85B,UAAWO,EAAM9D,EAASv2B,QAG5B05B,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAUo2B,IAChDxC,QAAQC,IAAI,4BACZqC,GACF,OAASv0B,GACPiyB,QAAQjyB,MAAM,UAAWA,EAC3B,CACF,CAksBA+B,eAAe6yB,IAEb,GADkBjC,IAOlB,OAAI/B,EAASv2B,MAAM+1B,YAAcQ,EAASv2B,MAAM+1B,WAAW/jB,QACzDykB,EAAcz2B,MAAQu2B,EAASv2B,MAAM+1B,gBACrCS,EAAex2B,OAAQ,SAKzBX,EAAOm7B,QAAQ,6BAZbn7B,EAAOm7B,QAAQ,SAanB,CAcA,SAASN,IACP,GAA+B,IAA3B5D,EAAUt2B,MAAMuC,OAMpB,GAAIg0B,EAASv2B,MAAM+1B,YAAcQ,EAASv2B,MAAM+1B,WAAW/jB,OAA3D,CACE4lB,QAAQC,IAAI,uBAEZ,IAEE,MAAM4C,EAAYnE,EAAUt2B,MACzBqG,IAAI,CAACq0B,EAAGpkB,KACP,MAAMsf,EAAO8E,EAAE9E,MAAQ,KACjB5C,EAAQ0H,EAAE1H,QAAoB,IAAV1c,EAAc,QAAU,OAAOA,KACnDwB,EAAO4iB,EAAEvU,aAAe,SAG9B,MAAO,iEAC6C7P,gDAH5B,IAAVA,EAAc,KAAO1F,OAAO0F,GAAOqkB,SAAS,EAAG,qDAKhC/E,iDACA5C,8CACFlb,wCAEzB9F,SAEH7C,KAAK,gBAGR,IAAIyrB,EAAOrE,EAASv2B,MAAM+1B,WAC1B6E,EAAOA,EAAKv1B,QACV,2CACA,wCAAwCo1B,qBAG1CxD,EAAYj3B,MAAQ46B,EACpBhD,QAAQC,IAAI,WACd,OAASlyB,GACPiyB,QAAQjyB,MAAM,YAAaA,GAC3BsxB,EAAYj3B,MAAQ,EACtB,CAEF,MAGAi3B,EAAYj3B,MAAQ,QA7ClBi3B,EAAYj3B,MAAQ,EA8CxB,CA0FA66B,EAAU,KACR9B,ilBAx2BF,WACE,GACG+B,QACC,2BAA2BxE,EAAUt2B,MAAMuC,oEAM/C,IAEE+zB,EAAUt2B,MAAQs2B,EAAUt2B,MAAMqG,IAAI,IAC7BqvB,EAAehmB,MAAM,CAC1BkmB,KAAM,GACN5C,MAAO,GACP7M,YAAa,MAKjBoQ,EAASv2B,MAAM+1B,WAAa,GAG5BoE,IAGAD,IAEA76B,EAAOkJ,QAAQ,uBACjB,OAAS5C,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzBtG,EAAOsG,MAAM,SAAYA,EAAgBC,QAC3C,CACF,uBAGA,SAA8B0Q,GAC5B,IACE,MAAM0iB,EAAYV,IAClB,IAAKU,EAEH,YADA35B,EAAOsG,MAAM,UAIf,MACMo1B,EADe,CAAC/B,EAAUE,aAAeF,EAAU50B,MAAM+0B,qBAAuB,IACjD7iB,IAAU,GAE/C,IAAKykB,EAAgB/oB,OAEnB,YADA3S,EAAOm7B,QAAQ,YAIjBpD,EAAwBp3B,MAAQ+6B,EAChC5D,EAAmBn3B,OAAQ,CAC7B,OAAS2F,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1BtG,EAAOsG,MAAM,YAAeA,EAAgBC,QAC9C,CACF,wBAGA,WACOixB,EAAe72B,QAClB22B,EAAqB32B,OAAQ,EAEjC,sBAIA0H,eAAmC4O,GACjCygB,EAAoB/2B,MAAQsW,EAG5B,MAAM0kB,EAAS5E,EAAU6E,WAAW,cAAe,SAAS3kB,OAG5DihB,EAAWv3B,MAAMw3B,UAAYvc,KAAK+c,MAClCT,EAAWv3B,MAAM8zB,MAAQ,EACzB4D,EAAe,EAAG,MAAO,oBACzBI,IAGAnB,EAAqB32B,OAAQ,EAC7B62B,EAAe72B,OAAQ,EAEvB,MAAMk7B,EAAM5kB,EACZ,GAAI4kB,EAAM,GAAKA,GAAO5E,EAAUt2B,MAAMuC,OAIpC,OAHAs0B,EAAe72B,OAAQ,EACvB22B,EAAqB32B,OAAQ,OAC7Bo2B,EAAU+E,SAASH,EAAQ,YAI7B,IAKE,GAJAtD,EAAe,EAAG,OAAQ,qBAC1BtB,EAAUgF,mBAAmBJ,EAAQ,GAAI,SAGpC9E,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAKlD,OAJAj8B,EAAOsG,MAAM,6BACbgxB,EAAqB32B,OAAQ,EAC7B62B,EAAe72B,OAAQ,OACvBo2B,EAAU+E,SAASH,EAAQ,WAI7BtD,EAAe,EAAG,OAAQ,YAAYwD,YACtC9E,EAAUgF,mBAAmBJ,EAAQ,GAAI,WAGzC,MAAMhC,EAAYV,IAClB,IAAKU,EAKH,OAJA35B,EAAOsG,MAAM,UACbgxB,EAAqB32B,OAAQ,EAC7B62B,EAAe72B,OAAQ,OACvBo2B,EAAU+E,SAASH,EAAQ,UAI7B,MACMD,EADe,CAAC/B,EAAUE,aAAeF,EAAU50B,MAAM+0B,qBAAuB,IACjD+B,IAAQ,GAE7C,IAAKH,EAAgB/oB,OAKnB,OAJA3S,EAAOm7B,QAAQ,YACf7D,EAAqB32B,OAAQ,EAC7B62B,EAAe72B,OAAQ,OACvBo2B,EAAU+E,SAASH,EAAQ,WAI7BtD,EAAe,EAAG,QAAS,QAAQxB,EAASl2B,MAAMu7B,iBAClDnF,EAAUgF,mBAAmBJ,EAAQ,GAAI,UAAU9E,EAASl2B,MAAMu7B,UAGlE,MAAMC,EAAe,mLASfC,EAAa,6BAErBV,iBAIEnD,QAAQC,IAAI,4BAGZ,MAAM6D,gBAAEA,SAAoBC,EAAAj0B,UAAA,MAAAg0B,yBAAME,OAAO,cAAa3rB,KAAA4rB,KAAAC,GAAA,OAAAJ,oBAAAK,wBAgBhDC,EAAiBN,EAdD,CACpBH,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,YAAajG,EAASl2B,MAAMm8B,YAC5BC,WAAYlG,EAASl2B,MAAMo8B,WAC3BC,MAAOnG,EAASl2B,MAAMq8B,MACtBC,iBAAkBpG,EAASl2B,MAAMs8B,iBACjCC,kBAAmBrG,EAASl2B,MAAMu8B,mBAIkBrG,EAASl2B,MAAMq7B,cAG/DmB,QAAiBC,MAAMvG,EAASl2B,MAAMq7B,aAAe,oBAAqB,CAC9EqB,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUg4B,KAGvB,IAAKQ,EAASM,GACZ,MAAM,IAAI17B,MAAM,aAAao7B,EAASO,UAAUP,EAASQ,cAG3D,MAAM54B,QAAao4B,EAASS,OAC5B,IAAIC,EAAgB94B,EAAK+4B,UAAU,IAAIv3B,SAASqI,QAIhD,GAFA2pB,QAAQC,IAAI,mBAAoBqF,IAE3BA,IAAkBA,EAAclrB,OACnC,MAAM,IAAI5Q,MAAM,wDAYlB,GATAs2B,EAAe,EAAG,OAAQ,mBAC1BtB,EAAUgF,mBAAmBJ,EAAQ,GAAI,QAIzCkC,EAAgBA,EAAc73B,QAAQ,eAAgB,IAEtD63B,EAAgBA,EAAc73B,QAAQ,mBAAoB,IAAI2M,QAEzDkrB,EACH,MAAM,IAAI97B,MAAM,gBAGlBw2B,QAAQC,IAAI,oBAAqBqF,GAGjC5G,EAAUt2B,MAAMk7B,GAAK/U,YAAc+W,EACnC/C,IAGA,MAAM9B,IAAYpd,KAAK+c,MAAQT,EAAWv3B,MAAMw3B,WAAa,KAAM4F,QAAQ,GAC3E/9B,EAAOkJ,QAAQ,aAAa8vB,MAAa,GAAI,CAAEgF,QAAS,MAGxDjH,EAAUkH,aAAatC,EAAQ,CAAE7U,YAAa+W,IAG9CK,WAAW,KACT5G,EAAqB32B,OAAQ,GAC5B,IACL,OAAS2F,GACPiyB,QAAQjyB,MAAM,kBAAmBA,GACjC,MAAM63B,EAAW,SAAY73B,EAAgBC,QAC7CvG,EAAOsG,MAAM63B,GACbpH,EAAU+E,SAASH,EAAQwC,GAE3BD,WAAW,OAAU,IACvB,SACErF,IACArB,EAAe72B,OAAQ,CACzB,CACF,kBAGA,SAAyBsW,GACvBygB,EAAoB/2B,MAAQsW,EAC5BsgB,EAAiB52B,OAAQ,CAC3B,yBAGA0H,eAAsC+1B,GACpC,MAAMnnB,EAAQygB,EAAoB/2B,MAClC,GAAIsW,EAAQ,GAAKA,GAASggB,EAAUt2B,MAAMuC,OAAQ,OAGlD,MAAMy4B,EAAS5E,EAAU6E,WAAW,YAAa,SAAS3kB,OAG1DihB,EAAWv3B,MAAMw3B,UAAYvc,KAAK+c,MAClCT,EAAWv3B,MAAM8zB,MAAQ,EACzB4D,EAAe,EAAG,MAAO,oBACzBI,IAEAhB,EAAY92B,OAAQ,EAEpB,IAKE,GAJA03B,EAAe,EAAG,OAAQ,qBAC1BtB,EAAUgF,mBAAmBJ,EAAQ,GAAI,SAGpC9E,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAMlD,OALAj8B,EAAOsG,MAAM,6BACbixB,EAAiB52B,OAAQ,EACzB82B,EAAY92B,OAAQ,EACpBk4B,SACA9B,EAAU+E,SAASH,EAAQ,WAI7BtD,EAAe,EAAG,OAAQ,iBAC1BtB,EAAUgF,mBAAmBJ,EAAQ,GAAI,UAEzC,MAAM0C,EAAcpH,EAAUt2B,MAAMsW,GAAO6P,YAE3C,IAAKuX,EAAY1rB,OAMf,OALA3S,EAAOm7B,QAAQ,qBACf5D,EAAiB52B,OAAQ,EACzB82B,EAAY92B,OAAQ,EACpBk4B,SACA9B,EAAU+E,SAASH,EAAQ,UAI7BtD,EAAe,EAAG,QAAS,QAAQxB,EAASl2B,MAAMu7B,iBAClDnF,EAAUgF,mBAAmBJ,EAAQ,GAAI,UAAU9E,EAASl2B,MAAMu7B,UAGlE,MAAMC,EAAe,uIAQfC,EAAa,UACrBiC,eAGAD,kBAIE7F,QAAQC,IAAI,4BAGZ,MAAQ6D,gBAAiBiC,SAAqBhC,EAAAj0B,UAAA,MAAAg0B,gBAAAiC,SAAM/B,OAAO,cAAa3rB,KAAA4rB,KAAAC,GAAA,OAAAJ,gBAAAiC,IAAA5B,wBAgBlE6B,EAAkBD,EAdD,CACrBpC,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,YAAajG,EAASl2B,MAAMm8B,YAC5BC,WAAYlG,EAASl2B,MAAMo8B,WAC3BC,MAAOnG,EAASl2B,MAAMq8B,MACtBC,iBAAkBpG,EAASl2B,MAAMs8B,iBACjCC,kBAAmBrG,EAASl2B,MAAMu8B,mBAIqBrG,EAASl2B,MAAMq7B,cAGlEmB,QAAiBC,MAAMvG,EAASl2B,MAAMq7B,aAAe,oBAAqB,CAC9EqB,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU45B,KAGvB,IAAKpB,EAASM,GACZ,MAAM,IAAI17B,MAAM,aAAao7B,EAASO,UAAUP,EAASQ,cAG3D,MAAM54B,QAAao4B,EAASS,OAC5B,IAAIC,EAAgB94B,EAAK+4B,UAAU,IAAIv3B,SAASqI,QAIhD,GAFA2pB,QAAQC,IAAI,mBAAoBqF,IAE3BA,IAAkBA,EAAclrB,OACnC,MAAM,IAAI5Q,MAAM,wDAYlB,GATAs2B,EAAe,EAAG,OAAQ,oBAC1BtB,EAAUgF,mBAAmBJ,EAAQ,GAAI,QAIzCkC,EAAgBA,EAAc73B,QAAQ,eAAgB,IAEtD63B,EAAgBA,EAAc73B,QAAQ,mBAAoB,IAAI2M,QAEzDkrB,EACH,MAAM,IAAI97B,MAAM,gBAGlBw2B,QAAQC,IAAI,oBAAqBqF,GAGjC5G,EAAUt2B,MAAMsW,GAAO6P,YAAc+W,EACrC/C,IAGA,MAAM9B,IAAYpd,KAAK+c,MAAQT,EAAWv3B,MAAMw3B,WAAa,KAAM4F,QAAQ,GAC3E/9B,EAAOkJ,QAAQ,aAAa8vB,MAAa,GAAI,CAAEgF,QAAS,MAGxDjH,EAAUkH,aAAatC,EAAQ,CAAE7U,YAAa+W,IAG9CK,WAAW,KACT3G,EAAiB52B,OAAQ,GACxB,IACL,OAAS2F,GACPiyB,QAAQjyB,MAAM,kBAAmBA,GACjC,MAAM63B,EAAW,SAAY73B,EAAgBC,QAC7CvG,EAAOsG,MAAM63B,GACbpH,EAAU+E,SAASH,EAAQwC,EAC7B,SACEtF,IACApB,EAAY92B,OAAQ,CACtB,CACF,sBAGA0H,eAAmCm2B,GACjC,IAAKA,EAAiB7rB,OAEpB,YADA3S,EAAOm7B,QAAQ,aAKjB,MAAMQ,EAAS5E,EAAU6E,WAAW,cAAe,aASnD,GANA1D,EAAWv3B,MAAMw3B,UAAYvc,KAAK+c,MAClCT,EAAWv3B,MAAM8zB,MAAQ,EACzB4D,EAAe,EAAG,MAAO,oBACzBI,KAGK5B,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAKlD,OAJAj8B,EAAOsG,MAAM,6BACb0xB,EAAkBr3B,OAAQ,EAC1Bk4B,SACA9B,EAAU+E,SAASH,EAAQ,WAI7B1D,EAAkBt3B,OAAQ,EAE1B,IACE03B,EAAe,EAAG,OAAQ,kBAC1BtB,EAAUgF,mBAAmBJ,EAAQ,GAAI,QAGzC,MAAM8C,EAAQxH,EAAUt2B,MACrBqG,IAAI,CAACq0B,EAAGpkB,KACP,MAAMsf,EAAO8E,EAAE9E,MAAQ,KACjB5C,EAAQ0H,EAAE1H,QAAoB,IAAV1c,EAAc,QAAU,OAAOA,KACnDwB,EAAO4iB,EAAEvU,aAAe,SAE9B,MACE,yDAEA7P,EACA,+BALsB,IAAVA,EAAc,KAAO1F,OAAO0F,GAAOqkB,SAAS,EAAG,MAS3D,gCAIA/E,EACA,iCAIA5C,EACA,gCAIAlb,EACA,iBAMH3I,KAAK,MAEFqsB,EACJ,+uCA8GIC,EACJ,QAAQoC,iEAGZC,wDA7D6B,whFA8F3BpG,EAAe,EAAG,OAAQ,uBAC1BtB,EAAUgF,mBAAmBJ,EAAQ,GAAI,QAEzCpD,QAAQC,IAAI,4BAEZH,EAAe,EAAG,QAAS,QAAQxB,EAASl2B,MAAMu7B,mBAClDnF,EAAUgF,mBAAmBJ,EAAQ,GAAI,UAAU9E,EAASl2B,MAAMu7B,UAGlE,MAAQG,gBAAiBqC,SAAqBpC,EAAAj0B,UAAA,MAAAg0B,gBAAAqC,SAAMnC,OAAO,cAAa3rB,KAAA4rB,KAAAC,GAAA,OAAAJ,gBAAAqC,IAAAhC,wBAgBlEiC,EAAkBD,EAdD,CACrBxC,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,YAAajG,EAASl2B,MAAMm8B,YAC5BC,WAAYlG,EAASl2B,MAAMo8B,WAC3BC,MAAOnG,EAASl2B,MAAMq8B,MACtBC,iBAAkBpG,EAASl2B,MAAMs8B,iBACjCC,kBAAmBrG,EAASl2B,MAAMu8B,mBAIqBrG,EAASl2B,MAAMq7B,cAGlEmB,QAAiBC,MAAMvG,EAASl2B,MAAMq7B,aAAe,oBAAqB,CAC9EqB,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUg6B,KAGvB,IAAKxB,EAASM,GACZ,MAAM,IAAI17B,MAAM,aAAao7B,EAASO,UAAUP,EAASQ,cAG3D,MAAM54B,QAAao4B,EAASS,OAC5B,IAAIgB,EAAgB75B,EAAK+4B,UAAU,IAAIv3B,SAASqI,QAIhD,GAFA2pB,QAAQC,IAAI,qBAAsBoG,EAAgBA,EAAcC,UAAU,EAAG,KAAO,QAE/ED,IAAkBA,EAAcjsB,OACnC,MAAM,IAAI5Q,MAAM,mCAUlB,GAPAs2B,EAAe,EAAG,OAAQ,mBAC1BtB,EAAUgF,mBAAmBJ,EAAQ,GAAI,QAIzCiD,EAAgBA,EAAc54B,QAAQ,6BAA8B,IAAI2M,QAEnEisB,EACH,MAAM,IAAI78B,MAAM,gBAGlBw2B,QAAQC,IAAI,0BAA2BoG,EAAc17B,QAErDm1B,EAAe,EAAG,OAAQ,kBAC1BtB,EAAUgF,mBAAmBJ,EAAQ,GAAI,QAGzCzE,EAASv2B,MAAM+1B,WAAakI,EAC5B9D,IAGAD,IAGA,MAAM7B,IAAYpd,KAAK+c,MAAQT,EAAWv3B,MAAMw3B,WAAa,KAAM4F,QAAQ,GAC3E/9B,EAAOkJ,QAAQ,eAAe8vB,MAAa,GAAI,CAAEgF,QAAS,MAG1DjH,EAAUkH,aAAatC,EAAQ,CAAEmD,WAAYF,EAAc17B,SAG3Dg7B,WAAW,KACTlG,EAAkBr3B,OAAQ,GACzB,IACL,OAAS2F,GACPiyB,QAAQjyB,MAAM,oBAAqBA,GACnCtG,EAAOsG,MAAM,SAAYA,EAAgBC,QAAS,GAAI,CAAEy3B,QAAS,MACjEjH,EAAU+E,SAASH,EAASr1B,EAAgBC,QAC9C,SACEsyB,IACAZ,EAAkBt3B,OAAQ,CAC5B,CACF,kCAsBA0H,uBACwB02B,EAAgB3H,EAAcz2B,MAAO,iBAEzD02B,EAAe12B,MAAQ,QACvBu9B,WAAW,KACT7G,EAAe12B,MAAQ,QACtB,KAEP,kCAsDA,WACEw2B,EAAex2B,OAAQ,CACzB,yBAGA,WACE,IAAKi3B,EAAYj3B,MAEf,YADAX,EAAOsG,MAAM,YAIf,MAAMqzB,EAAYV,IACZ+F,EAAcrF,EAAY,GAAGA,EAAUz5B,eAAiB,QAGxD++B,EAAY/F,OAAOgG,KAAK,GAAI,SAAU,qEACxCD,GACFA,EAAUE,SAASpwB,MAAM6oB,EAAYj3B,OACrCs+B,EAAUE,SAASC,QACnBH,EAAUE,SAASxL,MAAQqL,EAC3Bh/B,EAAOkJ,QAAQ,cAEflJ,EAAOsG,MAAM,qBAEjB,iBAGA+B,iBACE,IAGE,SAFM6yB,KAED9D,EAAcz2B,MAEjB,YADAX,EAAOsG,MAAM,UAIf,MAAMqzB,EAAYV,IACZoG,EAAgB1F,GAAWz5B,MAAQ,KAMnCo/B,EAAe,CACnBnlB,GAJWolB,OAAOC,aAKlBC,WAAY,GAAGJ,UACf/J,UAAU,EACVoK,WAAW,EACXC,UAAW,WACXC,cAAe,YAAcxI,EAAcz2B,MAAQ,QACnDk/B,YAAa,GACbC,UAAW,CAAC,EAAG,GACfC,gBAAiB,EACjBC,SAAU,KACVC,SAAU,KACVC,cAAc,EACdC,YAAY,GAIRC,EAAa17B,KAAKC,UAAU26B,EAAc,KAAM,GAGhDe,EAAO,IAAIC,KAAK,CAACF,GAAa,CAAE7nB,KAAM,qBAGtC3F,EAAMC,IAAI0tB,gBAAgBF,GAC1BG,EAAOrB,SAASsB,cAAc,KACpCD,EAAKttB,KAAON,EACZ4tB,EAAKE,SAAW,GAAGrB,eAGnBF,SAAS3B,KAAKmD,YAAYH,GAC1BA,EAAKI,QAGLzB,SAAS3B,KAAKqD,YAAYL,GAC1B3tB,IAAIiuB,gBAAgBluB,GAEpB5S,EAAOkJ,QAAQ,eACjB,OAAS5C,GACPiyB,QAAQjyB,MAAM,QAASA,GACvBtG,EAAOsG,MAAM,SAAYA,EAAgBC,QAC3C,CACF,0JA32DE,OAAAssB,IAAAC,EAwxBM,MAxxBNS,GAwxBM,CAnxBJF,EAsHM,MAtHNO,GAsHM,CAAAN,EAAA,MAAAA,EAAA,IA5GJD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,0DAAAK,QAAA,8BAAAI,IAAA,QAQC,CAEDU,EAA2D,KAAxDG,MAAM,uBAAuBvB,MAAA,CAAAC,MAAA,eAA2B,cAE7D,IACAmB,EA6FM,MA7FNW,GA6FM,CA3FIf,EAAAgE,UAAU/zB,OAAM,GAAA2vB,IADxBC,EAMO,OANPoB,GAMOR,EADFT,EAAAgE,UAAU/zB,QAAS,SACxB,IAAA+wB,EAAA,OAEQhB,EAAAgE,UAAU/zB,OAAM,OADxB4vB,EAmBS,UAAAvvB,IAAA,EAjBPiwB,MAAM,cACNvB,MAWC6C,EAAA,CAXD,CAAA1C,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAkD,OAAA,6BAAAT,WAAA,WAAAxC,QAAA,8BAAAI,IAAA,OAWC,CAAAT,MACgBe,EAAA0E,SAAQ,gCAAuC1E,EAAA0E,SAAQ,uBACvE5E,QAAKO,EAAA,KAAAA,EAAA,GAAAO,GAAEZ,EAAA0E,UAAY1E,EAAA0E,WAAA,eAEpBtE,EAA2C,KAAxCG,MAAM,+BAA6B,UAAAC,EAAK,IAACC,EAAGT,EAAA0E,SAAQ,uBAAA1D,EAAA,OAGjDhB,EAAAgE,UAAU/zB,OAAM,OADxB4vB,EAsBS,UAAAvvB,IAAA,EApBPiwB,MAAM,cACNvB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,QAAAsD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,8BAAAI,IAAA,OAcCI,QAAOE,EAAA8N,eACPC,aAAU1N,EAAA,KAAAA,EAAA,GAAAO,GAAGA,EAAOoN,cAA8BhP,MAAMlV,UAAS,oBACjEmkB,aAAU5N,EAAA,KAAAA,EAAA,GAAAO,GAAGA,EAAOoN,cAA8BhP,MAAMlV,UAAS,sBAAAuW,EAAA,MAAAA,EAAA,KAElED,EAAkC,KAA/BG,MAAM,sBAAoB,SAAAC,EAAK,UACpC,WAAAQ,EAAA,OAEQhB,EAAAgE,UAAU/zB,OAAM,OADxB4vB,EAsBS,UAAAvvB,IAAA,EApBPiwB,MAAM,cACNvB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,QAAAsD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,8BAAAI,IAAA,OAcCI,QAAKO,eAAEL,EAAA+E,mBAAiB,GACxBgJ,aAAU1N,EAAA,KAAAA,EAAA,GAAAO,GAAGA,EAAOoN,cAA8BhP,MAAMlV,UAAS,oBACjEmkB,aAAU5N,EAAA,KAAAA,EAAA,GAAAO,GAAGA,EAAOoN,cAA8BhP,MAAMlV,UAAS,sBAAAuW,EAAA,MAAAA,EAAA,KAElED,EAA+C,KAA5CG,MAAM,mCAAiC,SAAAC,EAAK,cACjD,WAAAQ,EAAA,OACAZ,EAkBS,UAjBPG,MAAM,6BACNvB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,UAAAsD,OAAA,6BAAAT,WAAA,WAAAxC,QAAA,8BAAAI,IAAA,OAaCI,QAAOE,EAAAyG,YAAA,IAAApG,EAAA,MAAAA,EAAA,KAERD,EAAmC,KAAhCG,MAAM,uBAAqB,SAAAC,EAAK,QACrC,WAKJJ,EAmZM,MAnZNgB,GAmZM,CAjZJhB,EAuTM,MAvTNiB,GAuTM,CApToB,IAAhBrB,EAAAgE,UAAU/zB,QAAM2vB,IADxBC,EAiBM,MAjBNyB,GAiBM,IAAAjB,EAAA,MAAAA,EAAA,KALJD,EAAmG,KAAhGG,MAAM,2BAA2BvB,MAAA,2CAAAwD,QAAA,iBACpCpC,EAA+F,OAA1FpB,MAAA,wCAAAC,MAAA,mCAA+E,YACpFmB,EAEM,OAFDpB,MAAA,oBAAAC,MAAA,iDAAyE,kCAE9E,QAKWe,EAAA0E,UAAA9E,IADbC,EAiCM,MAjCN6B,GAiCM,CA7BJtB,EAWM,MAXNwB,GAWM,CAAAvB,EAAA,MAAAA,EAAA,IAVJD,EAGK,MAHDpB,MAAA,CAAAC,MAAA,UAAAC,OAAA,IAAAI,QAAA,8BAAAI,IAAA,QAA+E,CACjFU,EAAuC,KAApCG,MAAM,4BAAyBC,EAAK,YAEzC,IACAJ,EAKS,UAJPpB,MAAA,CAAAI,WAAA,cAAAC,OAAA,OAAAJ,MAAA,OAAAsD,OAAA,6BAAApD,QAAA,OACCW,QAAKO,eAAEL,EAAA0E,UAAQ,QAAArE,EAAA,MAAAA,EAAA,KAEhBD,EAAiC,KAA9BG,MAAM,qBAAmB,g4BAuBlCX,IAAAC,EAiLM,MAjLNkC,GAiLM,EAAAnC,GAAA,GAhLJC,EA+KMkD,EAAA,KAAAC,EA9KwBhD,EAAAgE,UAAS,CAA7BkK,EAAUlqB,SADpB6b,EA+KM,OA7KHvvB,IAAK0T,EACNuc,MAAM,gBACNvB,MAAA,CAAAI,WAAA,UAAAC,OAAA,0CAAAF,QAAA,OAAA2C,WAAA,mBASA1B,EAmHM,MAnHN4B,GAmHM,CAzGJ5B,EAaO,OAbP8B,GAWC,KACEzB,EAAGzc,GAAK,GAAAmqB,EAEX/N,EAeE,+BAAAQ,GAdSsN,EAAS5K,KAAI1C,EACtB5B,MAAA,CAAAO,MAAA,gDAAAH,WAAA,UAAAC,OAAA,0CAAAF,QAAA,MAAAF,MAAA,WAUA4B,YAAY,KACZuN,UAAU,IACTC,QAAOrO,EAAA6H,YAAA,QAAA1F,IAAA,CAbC,CAAAmM,EAAAJ,EAAS5K,UAepBlD,EAaE,+BAAAQ,GAZSsN,EAASxN,MAAKE,EACvB5B,MAAA,CAAAsD,KAAA,IAAAlD,WAAA,UAAAC,OAAA,0CAAAF,QAAA,WAAAF,MAAA,8BASC4B,YAAkB,IAAL7c,EAAK,eAA4BA,EAC9CqqB,QAAOrO,EAAA6H,YAAA,QAAApF,IAAA,CAXC,CAAA6L,EAAAJ,EAASxN,SAapBN,EA6BS,UA5BPpB,MAAA,CAAAI,WAAA,oDAAAC,OAAA,OAAAJ,MAAA,QAAAE,QAAA,iCAAAoD,OAAA,UAAAT,WAAA,gBAAAxC,QAAA,8BAAAI,IAAA,+FAeAgB,MAAM,gBACLZ,QAAKc,GAAEZ,EAAAuO,oBAAoBvqB,GAC3B+pB,aAAU1N,EAAA,KAAAA,EAAA,GAAAO,IAAsBA,EAAOoN,cAA8BhP,MAAMlV,UAAS,mBAA0C8W,EAAOoN,cAA8BhP,MAAMwP,UAAS,uCAIlLP,aAAU5N,EAAA,KAAAA,EAAA,GAAAO,IAAsBA,EAAOoN,cAA8BhP,MAAMlV,UAAS,gBAAuC8W,EAAOoN,cAA8BhP,MAAMwP,UAAS,0DAKhLpO,EAA+C,KAA5CG,MAAM,mCAAiC,SAC1CH,EAAoB,YAAd,WAAO,SAAAsC,IAGPwL,EAASra,iBADjBgM,EA8BS,UAAAvvB,IAAA,EA5BP0uB,MAAA,CAAAI,WAAA,oDAAAC,OAAA,OAAAJ,MAAA,QAAAE,QAAA,iCAAAoD,OAAA,UAAAT,WAAA,gBAAAxC,QAAA,8BAAAI,IAAA,+FAeAgB,MAAM,aACLZ,QAAKc,GAAEZ,EAAAyO,gBAAgBzqB,GACvB+pB,aAAU1N,EAAA,KAAAA,EAAA,GAAAO,IAAsBA,EAAOoN,cAA8BhP,MAAMlV,UAAS,mBAA0C8W,EAAOoN,cAA8BhP,MAAMwP,UAAS,uCAIlLP,aAAU5N,EAAA,MAAAA,EAAA,IAAAO,IAAsBA,EAAOoN,cAA8BhP,MAAMlV,UAAS,gBAAuC8W,EAAOoN,cAA8BhP,MAAMwP,UAAS,0DAKhLpO,EAAgC,KAA7BG,MAAM,oBAAkB,SAC3BH,EAAoB,YAAd,WAAO,SAAAsO,KAAA1N,EAAA,WAKjBZ,EAiBW,kCAAAQ,GAhBAsN,EAASra,YAAW+M,EAC7B5B,MAAA,CAAAO,MAAA,OAAAH,WAAA,UAAAC,OAAA,0CAAAF,QAAA,OAAAF,MAAA,qDAAA6B,OAAA,gCAYAD,YAAY,YACXwN,QAAOrO,EAAA6H,YACT,eACD,GAAA8G,IAAA,EAAAL,EAhBWJ,EAASra,eAmBpBuM,EAuBS,UAtBPpB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,cAAAC,OAAA,0CAAAJ,MAAA,6BAAAsD,OAAA,UAAAT,WAAA,gBAAAxC,QAAA,yDAAAI,IAAA,2BAgBCI,QAAKc,GAAEZ,EAAA4O,qBAAqB5qB,GAC5B+pB,aAAU1N,EAAA,MAAAA,EAAA,IAAAO,GAAGA,EAAOoN,cAA8BhP,MAAMI,WAAU,4BAClE6O,aAAU5N,EAAA,MAAAA,EAAA,IAAAO,GAAGA,EAAOoN,cAA8BhP,MAAMI,WAAU,oBAAAiB,EAAA,MAAAA,EAAA,KAEnED,EAAsC,KAAnCG,MAAM,0BAAwB,SACjCH,EAAyB,YAAnB,gBAAY,SAAAyO,iBAOhB7O,EAAAgE,UAAU/zB,OAAM,GAAA2vB,IADxBC,EAwEM,MAxENiP,GAwEM,CA1DJ1O,EA4BS,UA3BPpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,gBAAAxC,QAAA,8BAAAI,IAAA,2DAeCI,QAAOE,EAAAiI,qBACP8F,aAAU1N,EAAA,MAAAA,EAAA,IAAAO,IAAkBA,EAAOoN,cAA8BhP,MAAMlV,UAAS,mBAAsC8W,EAAOoN,cAA8BhP,MAAMwP,UAAS,wCAI1KP,aAAU5N,EAAA,MAAAA,EAAA,IAAAO,IAAkBA,EAAOoN,cAA8BhP,MAAMlV,UAAS,gBAAmC8W,EAAOoN,cAA8BhP,MAAMwP,UAAS,4DAKxKpO,EAAwD,KAArDG,MAAM,mBAAmBvB,MAAA,iCAA4B,cAE1D,UACAoB,EA4BS,UA3BPpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,gBAAAxC,QAAA,8BAAAI,IAAA,0DAeCI,QAAOE,EAAA+O,eACPhB,aAAU1N,EAAA,MAAAA,EAAA,IAAAO,IAAkBA,EAAOoN,cAA8BhP,MAAMlV,UAAS,mBAAsC8W,EAAOoN,cAA8BhP,MAAMwP,UAAS,uCAI1KP,aAAU5N,EAAA,MAAAA,EAAA,IAAAO,IAAkBA,EAAOoN,cAA8BhP,MAAMlV,UAAS,gBAAmC8W,EAAOoN,cAA8BhP,MAAMwP,UAAS,2DAKxKpO,EAA4D,KAAzDG,MAAM,uBAAuBvB,MAAA,iCAA4B,sBAE9D,wBAKJoB,EAsFM,MAtFN4O,GAsFM,CA1EJ5O,EA6CM,MA7CN6O,GA6CM,CAAA5O,EAAA,MAAAA,EAAA,IAnCJD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,+CAAAK,QAAA,8BAAAI,IAAA,QAQC,CAEDU,EAA+B,KAA5BG,MAAM,oBAAiBC,EAAK,YAEjC,IAEQR,EAAA2E,aAAA/E,IADRC,EAoBS,UAAAvvB,IAAA,EAlBPowB,MAAM,QACN1B,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,2BAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,UAAAT,WAAA,WAAAxC,QAAA,0DAcCQ,QAAOE,EAAAkP,wBAAA,IAAA7O,EAAA,MAAAA,EAAA,KAERD,EAA6C,KAA1CG,MAAM,iCAA+B,cAAAS,EAAA,SAG5CZ,EA2BM,MA3BN+O,GA2BM,CAzBInP,mBADRH,EAKU,UAAAvvB,IAAA,EAHP8+B,OAAQpP,EAAA2E,YACT0K,QAAQ,2DACRrQ,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAH,OAAA,OAAAD,WAAA,iBAAAkQ,MAAA1P,IAEFC,EAmBM,MAnBN0P,GAmBM,IAAAlP,EAAA,MAAAA,EAAA,KAJJD,EAGM,YAFJA,EAAgG,KAA7FG,MAAM,wBAAwBvB,MAAA,2CAAAwD,QAAA,SACjCpC,EAAoC,KAAjCpB,MAAA,CAAAE,OAAA,MAAkB,iBAAW,cAQ1CsQ,EASExP,EAAA,kBARCpB,KAAMoB,EAAAqE,qBACN,gBAAerE,EAAAuE,eAChB7D,MAAM,YACN7M,YAAY,yCACX,cAAY,EACZsN,SAAUnB,iBAAiBA,EAAA6F,6BAA0B,EACrD4J,QAAOzP,EAAA0P,sBACPC,UAAS,oDAIZH,EASExP,EAAA,gBARCpB,KAAMoB,EAAAsE,iBACN,eAActE,EAAAwE,YACf9D,MAAM,YACN7M,YAAY,qDACXsN,SAAUnB,cAAcA,EAAA6F,6BAA0B,EAClD/C,SAAU,mCACV2M,QAAKpP,iBAAEL,EAAAsE,kBAAgB,GACvBqL,UAAS3P,EAAA4P,wBAAA,2CAIZJ,EAeExP,EAAA,gBAdCpB,KAAMoB,EAAA+E,kBACN,eAAc/E,EAAAgF,kBACftE,MAAM,eACN7M,YAAY,oDACXsN,SAAUnB,oBAAoBA,EAAA6F,6BAA0B,EACxD/C,SAAU,mFAOV2M,QAAKpP,iBAAEL,EAAA+E,mBAAiB,GACxB4K,UAAS3P,EAAA6P,qBAAA,2CAKJ7P,EAAA6E,oBAAAjF,IADRC,EA+FM,OAAAvvB,IAAA,EA7FJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,2EAAAH,QAAA,QAaCW,QAAKO,mBAAOL,EAAA6E,oBAAkB,eAE/BzE,EA6EM,OA5EJpB,MAAA,CAAAI,WAAA,2EAAAD,QAAA,2BAAAI,MAAA,2BAAAD,QAAA,+EAWCQ,QAAKO,EAAA,MAAAA,EAAA,IAAAN,EAAN,OAAW,aAGXK,EAqBM,MArBN0P,GAqBM,CAAAzP,EAAA,MAAAA,EAAA,IApBJD,EAGK,MAHDpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,QAAAK,QAAA,8BAAAI,IAAA,QAA6E,CAC/EU,EAAsC,KAAnCG,MAAM,2BACTH,EAAkB,YAAZ,WAAK,IAEbA,EAeS,UAdPpB,MAAA,CAAAI,WAAA,cAAAC,OAAA,OAAAJ,MAAA,2BAAAsD,OAAA,6BAAApD,QAAA,UAAA2C,WAAA,YASChC,QAAKO,iBAAEL,EAAA6E,oBAAkB,GACzBkJ,aAAU1N,EAAA,MAAAA,EAAA,IAAAO,GAAGA,EAAOoN,cAA8BhP,MAAMC,MAAK,SAC7DgP,aAAU5N,EAAA,MAAAA,EAAA,IAAAO,GAAGA,EAAOoN,cAA8BhP,MAAMC,MAAK,iCAAAoB,EAAA,MAAAA,EAAA,KAE9DD,EAAiC,KAA9BG,MAAM,qBAAmB,kBAKhCH,EAeM,MAfN2P,GAeMtP,EADDT,EAAA8E,yBAAuB,GAI5B1E,EAmBM,MAnBN4P,GAmBM,CAlBJ5P,EAiBS,UAhBPpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,QAAAC,OAAA,6BAAAJ,MAAA,iDAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAKO,iBAAEL,EAAA6E,oBAAkB,GACzBkJ,aAAU1N,EAAA,MAAAA,EAAA,IAAAO,GAAGA,EAAOoN,cAA8BhP,MAAMlV,UAAS,oBACjEmkB,aAAU5N,EAAA,MAAAA,EAAA,IAAAO,GAAGA,EAAOoN,cAA8BhP,MAAMlV,UAAS,kBACnE,OAED,oBAOEkW,EAAAkE,gBAAAtE,IADRC,EAuHM,OAAAvvB,IAAA,EArHJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,0GAaCQ,QAAOE,EAAAiQ,iBAAA,CAER7P,EAqGM,OApGJpB,MAAA,CAAAI,WAAA,qDAAAG,MAAA,0BAAAD,QAAA,gFAUCQ,QAAKO,EAAA,MAAAA,EAAA,IAAAN,EAAN,OAAW,aAEXK,EA2BM,OA1BJpB,MAAA,CAAAG,QAAA,2CAAAG,QAAA,kEAMC,CAAAe,EAAA,MAAAA,EAAA,IAEDD,EAGK,MAHDpB,MAAA,CAAAC,MAAA,6BAAAC,OAAA,IAAAI,QAAA,8BAAAI,IAAA,SAAiG,CACnGU,EAAgC,KAA7BG,MAAM,qBAAkBC,EAAK,eAElC,IACAJ,EAaS,UAZPpB,MAAA,CAAAI,WAAA,cAAAC,OAAA,OAAAJ,MAAA,0BAAAsD,OAAA,UAAApD,QAAA,WAAA2C,WAAA,mBASChC,QAAOE,EAAAiQ,iBAAA,IAAA5P,EAAA,MAAAA,EAAA,KAERD,EAAiC,KAA9BG,MAAM,qBAAmB,eAGhCH,EA2DM,MA3DN8P,GA2DM,CAAA7P,EAAA,MAAAA,EAAA,IA1DJD,EAoBM,OAnBJpB,MAAA,CAAAI,WAAA,UAAAC,OAAA,0CAAAF,QAAA,8BAAAF,MAAA,YAOC,CAEDmB,EAA2E,KAAxEpB,MAAA,8CAA6C,CAACoB,EAAsB,cAAd,WACzDA,EAQK,MARDpB,MAAA,sBAAAC,MAAA,6BAAwD,CAC1DmB,EAAgB,UAAZ,WACJA,EAIK,WAAAI,EAJD,iBAEFJ,EACC,QADKpB,MAAA,CAAAI,WAAA,UAAAD,QAAA,gCAAAF,MAAA,YAAkF,SAAKuB,EAC5F,QAEHJ,EAA0B,UAAtB,6BAGRA,EAcM,MAdN+P,GAcM,CAHJ/P,EAE+I,MAF/IgQ,GAE+I,CAA9IhQ,EAAwI,OAAxIiQ,GAAwI5P,EAAvBT,EAAAmE,eAAa,OAEjI/D,EAqBS,UApBPpB,MAAA,CAAAO,MAAA,OAAAH,WAAA,oDAAAH,MAAA,QAAAI,OAAA,OAAAF,QAAA,oEAAAoD,OAAA,UAAAT,WAAA,gBAAAxC,QAAA,yDAAAI,IAAA,OAgBCI,QAAOE,EAAAsQ,UAAA,eAERlQ,EAAgC,KAA7BG,MAAM,oBAAkB,UAAAC,EAAK,IAChCC,EAAGT,EAAAoE,gBAAc,6FCnxBtB7D,MAAM,WAAWvB,MAAA,CAAAG,QAAA,kBAAAC,WAAA,2BAsElBJ,MAAA,CAAAI,WAAA,oDAAAD,QAAA,wGAiCEH,MAAA,CAAAC,MAAA,iDAAAiE,UAAA,4BA6CFlE,MAAA,CAAAI,WAAA,oDAAAD,QAAA,wGAiCEH,MAAA,CAAAC,MAAA,iDAAAiE,UAAA,+EA6LR,MAAMqN,EAAmBC,EAAS,CAChCC,YAAY,EACZC,WAAW,wCAGUC,IACrBJ,EAAiBI,IAAYJ,EAAiBI,sHAxX9C,OAAA/Q,IAAAC,EA4WM,MA5WNS,GA4WM,CAAAD,EAAA,KAAAA,EAAA,GAAAa,EAAA,wtDAvSJd,EA2EM,MA3ENO,GA2EM,CAlEJP,EAqBK,MApBFN,QAAKO,eAAEL,EAAA4Q,cAAa,eACrB5R,MAAA,CAAAE,OAAA,aAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,OAAA6C,OAAA,8CAYAnC,EAAwE,KAArEG,MAAM,mBAAmBvB,MAAA,CAAAC,MAAA,uDAA4C,UAExE,IAAAmB,EAIK,KAHFG,MAAK4C,EAAA,CAAEnD,EAAAuQ,iBAAiBE,WAAU,kCAC7B,aACNzR,MAAA,yCAAA8C,WAAA,iBAAA7C,MAAA,mBAIJkP,EAAA/N,EA0CM,MA1CNW,GA0CM,IAAAV,EAAA,KAAAA,EAAA,IAAAa,EAAA,i1DAzCI,CAAA2P,EAAA7Q,EAAAuQ,iBAAiBE,gBA6C7BrQ,EAwMM,MAxMNa,GAwMM,CA/LJb,EAqBK,MApBFN,QAAKO,eAAEL,EAAA4Q,cAAa,cACrB5R,MAAA,CAAAE,OAAA,aAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,OAAA6C,OAAA,8CAYAnC,EAAqF,KAAlFG,MAAM,gCAAgCvB,MAAA,CAAAC,MAAA,uDAA4C,UAErF,IAAAmB,EAIK,KAHFG,MAAK4C,EAAA,CAAEnD,EAAAuQ,iBAAiBG,UAAS,kCAC5B,aACN1R,MAAA,yCAAA8C,WAAA,iBAAA7C,MAAA,mBAIJkP,EAAA/N,EAuKM,MAvKNgB,GAuKM,IAAAf,EAAA,KAAAA,EAAA,IAAAa,EAAA,0sKAtKI,CAAA2P,EAAA7Q,EAAAuQ,iBAAiBG,eA0K7BrQ,EAAA,KAAAA,EAAA,GAAAD,EAaM,OAZJpB,MAAA,CAAAI,WAAA,oDAAAD,QAAA,mGAMC,CAEDiB,EAGM,OAHDpB,MAAA,CAAAC,MAAA,gDAAsD,CACzDmB,EAAwD,KAArDpB,MAAA,CAAAE,OAAA,cAA0B,2BAC7BkB,EAAuC,KAApCpB,MAAA,CAAAE,OAAA,MAAkB,2ICgZ7B,MAAMwE,EAAgBC,KAChBC,SAAEA,GAAaC,EAAYH,GAE3BoN,EAAWpS,EAAI,CACnBqS,WAAW,EACXC,QAAQ,IAQV,MAAMC,EAAoBvS,EAAI,IACxBwS,EAAiBxS,GAAI,GACrByS,EAAsBzS,EAAI,IAC1B0S,EAAqB1S,GAAI,GAGzB2S,EAA0B3S,EAAI,IAC9B4S,EAA4B5S,EAAI,IAGhC6S,EAA4B7S,GAAI,GAChC8S,EAAuB9S,GAAI,GAC3B+S,EAAyB/S,GAAI,GAC7BgT,EAAoBhT,GAAI,GAGxBiT,EAAUjT,EAAI,IACdkT,EAAYlT,EAAI,IAChBmT,EAAqBnT,EAAI,IACzBoT,EAAqBpT,EAAI,IACzBqT,EAAkBrT,EAAI,IAE5B,SAASoN,EAAgBkG,GACvB9/B,UAAU+/B,UAAUC,UAAUF,GAAMr0B,KAAK,KACvCsoB,OAAOl5B,OAAOkJ,QAAQ,YAE1B,CAmBA,SAASk8B,IACP,MAAMl2B,EAAQ21B,EAAUlkC,MAAMwO,MAAM,MAAMC,OAAOi2B,GAAKA,EAAE1yB,QAClD2yB,EAAW,GAuBjB,OArBAp2B,EAAMq2B,QAAQ51B,IACZ,MAAMyF,EAAQzF,EAAKR,MAAM,KAAKnI,IAAIw+B,GAAKA,EAAE7yB,QACnCzS,EAAOkV,EAAM,GACbmD,EAAOnD,EAAM,IAAM,SACnBqD,EAAOrD,EAAM,IAAM,QAEpBlV,IAGHolC,EAAIplC,GADO,WAATqY,EACU,CAAC,EAAGE,GACE,WAATF,EACG,CAAC,GAAIE,GACC,UAATF,EACG,CAAC,GAAIE,GACC,WAATF,EACG,CAAC,GAAIE,GAEL,CAAC,KAAMA,MAIhB6sB,CACT,CAyWA,SAASG,IACP,GAAKX,EAAmBnkC,MAKxB,IACE,MAAMqjC,EAAYt/B,KAAK2L,MAAMy0B,EAAmBnkC,OAC1C+kC,EAAgBjlC,OAAOiX,KAAKssB,GAAW2B,KAAK1kC,GAAW,UAANA,IAAkB,QAEnE2kC,EAAU5B,EAAU0B,IAAkB,GAC5C,IAAIG,EAAa,EAEjB,UAAWtiC,KAAOqiC,EACJ,UAARriC,GACJsiC,IAGFd,EAAmBpkC,MAAQ,GAAG+kC,OAAmBG,WACjD9B,EAASpjC,MAAMsjC,QAAS,EACxB6B,IACA5M,OAAOl5B,OAAOkJ,QAAQ,qBAEtBg1B,WAAW,KACT,MAAM6H,EAAgB5G,SAAS6G,cAAc,8BAC7CD,GAAeE,eAAe,CAAEC,SAAU,SAAUC,MAAO,aAC1D,IACL,OAAS7/B,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1B4yB,OAAOl5B,OAAOsG,MAAM,iBACtB,MA5BE4yB,OAAOl5B,OAAOsG,MAAM,oBA6BxB,CAEA,SAASw/B,IACP,MAEMM,EAAiB,26DAFJrB,EAAmBpkC,MAAMgS,QAAU,wiGAkJtDqyB,EAAgBrkC,MAAQylC,CAC1B,CAueA,SAASC,IACP,IAAKvB,EAAmBnkC,QAAUqkC,EAAgBrkC,MAEhD,YADAu4B,OAAOl5B,OAAOsG,MAAM,8BAItB,IAAIo/B,EAAgB,QACpB,IACE,MAAM1B,EAAYt/B,KAAK2L,MAAMy0B,EAAmBnkC,OAChD+kC,EAAgBjlC,OAAOiX,KAAKssB,GAAW2B,KAAK1kC,GAAW,UAANA,IAAkB,OACrE,OAASyH,GACP6vB,QAAQjyB,MAAM,WAAYoC,EAC5B,CAEA,MAAM49B,EAAmB,CACvB,CACEC,IAAKC,IACLjjC,IAAK,GACLkjC,aAAc,GACdC,QAAS,YACT93B,QAASk2B,EAAmBnkC,MAC5BgmC,UAAU,EACVC,YAAY,EACZC,WAAW,EACXC,eAAgB,EAChBC,SAAS,EACTC,MAAO,IACP54B,SAAU,EACV64B,SAAS,EACTC,kBAAkB,EAClBC,qBAAqB,EACrBC,YAAa,IACbC,gBAAgB,EAChBC,MAAO,EACPC,MAAO,GACPC,eAAe,EACfC,YAAa,IACbC,UAAW,KACXC,cAAe,KACfC,gBAAiB,KACjBC,iBAAiB,EACjBC,aAAc,GACdjL,KAAM,EACNkL,OAAQ,EACRC,SAAU,EACVC,MAAO,GAET,CACE1B,IAAKC,IACLjjC,IAAK,GACLkjC,aAAc,GACdC,QAAS,KACT93B,QAASo2B,EAAgBrkC,MACzBgmC,UAAU,EACVC,YAAY,EACZC,WAAW,EACXC,eAAgB,EAChBC,SAAS,EACTC,MAAO,IACP54B,SAAU,EACV64B,SAAS,EACTC,kBAAkB,EAClBC,qBAAqB,EACrBC,YAAa,IACbC,gBAAgB,EAChBC,MAAO,EACPC,MAAO,GACPC,eAAe,EACfC,YAAa,IACbC,UAAW,KACXC,cAAe,KACfC,gBAAiB,KACjBC,iBAAiB,EACjBC,aAAc,GACdjL,KAAM,EACNkL,OAAQ,EACRC,SAAU,EACVC,MAAO,IAILC,EAAUxjC,KAAKC,UAAU2hC,EAAkB,KAAM,GACjDjG,EAAO,IAAIC,KAAK,CAAC4H,GAAU,CAAE3vB,KAAM,qBACnC3F,EAAMC,IAAI0tB,gBAAgBF,GAC1B5kB,EAAI0jB,SAASsB,cAAc,KACjChlB,EAAEvI,KAAON,EACT6I,EAAEilB,SAAW,GAAGgF,uBAChBvG,SAAS3B,KAAKmD,YAAYllB,GAC1BA,EAAEmlB,QACFzB,SAAS3B,KAAKqD,YAAYplB,GAC1B5I,IAAIiuB,gBAAgBluB,GAEpBsmB,OAAOl5B,OAAOkJ,QAAQ,iCACxB,CAEA,SAASs9B,IACP,OAAO5qB,KAAK+c,MAAQrpB,KAAK64B,MAAsB,IAAhB74B,KAAK84B,SACtC,CAKA,SAASC,IACP,IACE,MAAMC,EAAWtO,IACjB,IAAKsO,EAEH,YADA/P,QAAQoC,KAAK,4BAKf,MAAMZ,EAAa,GAAGuO,oBAChBC,EAAelO,aAAaC,QAAQP,GAE1C,GAAIwO,EAAc,CAChB,MAAMnO,EAAY11B,KAAK2L,MAAMk4B,GACzBnO,EAAUwK,UAASA,EAAQjkC,MAAQy5B,EAAUwK,SAC7CxK,EAAUyK,YAAWA,EAAUlkC,MAAQy5B,EAAUyK,WACjDzK,EAAU0K,qBAAoBA,EAAmBnkC,MAAQy5B,EAAU0K,oBACnE1K,EAAU2K,qBAAoBA,EAAmBpkC,MAAQy5B,EAAU2K,oBACnE3K,EAAU4K,kBAAiBA,EAAgBrkC,MAAQy5B,EAAU4K,iBACjEzM,QAAQC,IAAI,uBACd,CACF,OAASlyB,GACPiyB,QAAQjyB,MAAM,oBAAqBA,EACrC,CACF,CAGA,SAASkiC,IACP,IACE,MAAMF,EAAWtO,IACjB,IAAKsO,EAEH,YADA/P,QAAQoC,KAAK,4BAKf,MAAMZ,EAAa,GAAGuO,oBAChBG,EAAa,CACjB7D,QAASA,EAAQjkC,MACjBkkC,UAAWA,EAAUlkC,MACrBmkC,mBAAoBA,EAAmBnkC,MACvCokC,mBAAoBA,EAAmBpkC,MACvCqkC,gBAAiBA,EAAgBrkC,OAEnC05B,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAU8jC,GAClD,OAASniC,GACPiyB,QAAQjyB,MAAM,oBAAqBA,EACrC,CACF,CAGAk1B,EAAU,KACR6M,MAIF,IAAIK,EAA2B,KAC/B9W,EAAM,CAACgT,EAASC,EAAWC,EAAoBC,EAAoBC,GAAkB,KAC/E0D,gBAAwBA,GAC5BA,EAAYxP,OAAOgF,WAAW,KAC5BsK,KACC,qEApvCL,SAAwBjlC,GACtBwgC,EAASpjC,MAAM4C,IAAQwgC,EAASpjC,MAAM4C,EACxC,8VA+BA,WACE,IAAKqhC,EAAQjkC,MAAMgS,OAEjB,YADAumB,OAAOl5B,OAAOsG,MAAM,WAItB,MAAMgC,EAAc,CAClBqgC,MAAO,CACLC,YAAY,EACZC,WAAW,IAIfvgC,EAAOs8B,EAAQjkC,OAASykC,IACxBN,EAAmBnkC,MAAQ+D,KAAKC,UAAU2D,EAAQ,KAAM,EAC1D,iCA8BA,WACEy2B,EAAgB+F,EAAmBnkC,MACrC,4BAGA0H,iBACE,GAAK67B,EAAkBvjC,MAAMgS,OAK7B,GAAKkkB,EAASl2B,MAAMq7B,cAAiBnF,EAASl2B,MAAMs7B,QAApD,CAMAqI,EAAwB3jC,MAAQujC,EAAkBvjC,MAElDwjC,EAAexjC,OAAQ,EAEvB,IACE,MAAMw7B,EAAe,k+EA4Jf2M,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAAS,MAAMs1B,EAAkBvjC,iCAEnDm8B,YAAajG,EAASl2B,MAAMm8B,aAAe,GAC3CC,WAAYlG,EAASl2B,MAAMo8B,YAAc,QAKvCiM,QAAqB7L,EAAS8H,OAEpC,IAAK9H,EAASM,GAAI,CAEhB,IAAIwL,EAAe,WAAW9L,EAASO,SACvC,IACE,MAAMwL,EAAYxkC,KAAK2L,MAAM24B,GAE3BC,EADEC,EAAU5iC,MACG,GAAG2iC,OAAkBC,EAAU5iC,MAAMC,SAAW7B,KAAKC,UAAUukC,EAAU5iC,SAC/E4iC,EAAU3iC,QACJ,GAAG0iC,OAAkBC,EAAU3iC,UAE/B,GAAG0iC,OAAkBvkC,KAAKC,UAAUukC,IAEvD,OAASxgC,GACPugC,EAAe,GAAGA,OAAkBD,EAAa7lC,MAAM,EAAG,MAC5D,CAmBA,MAlBAo1B,QAAQjyB,MAAM,YAAa2iC,GAC3B1Q,QAAQjyB,MAAM,UAAWuwB,EAASl2B,MAAMq7B,cACxCzD,QAAQjyB,MACN,OACA5B,KAAKC,UACH,CACEu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,EAAa0C,UAAU,EAAG,KAAO,OAC5D,CAAEhC,KAAM,OAAQjuB,QAAS,MAAMs1B,EAAkBvjC,MAAMk+B,UAAU,EAAG,YAEtE/B,YAAajG,EAASl2B,MAAMm8B,aAAe,GAC3CC,WAAYlG,EAASl2B,MAAMo8B,YAAc,KAE3C,KACA,IAGE,IAAIh7B,MAAMknC,EAClB,CAGA,MAAMlkC,EAAOL,KAAK2L,MAAM24B,GAExB,IAAI1gC,EAAS,GACTvD,EAAK+4B,SAAW/4B,EAAK+4B,QAAQ,IAAM/4B,EAAK+4B,QAAQ,GAAGv3B,QACrD+B,EAASvD,EAAK+4B,QAAQ,GAAGv3B,QAAQqI,SAAW,GACnC7J,EAAKA,MAAQA,EAAKA,KAAK+4B,SAAW/4B,EAAKA,KAAK+4B,QAAQ,GAE7Dx1B,EAASvD,EAAKA,KAAK+4B,QAAQ,GAAGv3B,SAASqI,SAAW,GACzC7J,EAAK6J,UACdtG,EAAiC,iBAAjBvD,EAAK6J,QAAuB7J,EAAK6J,QAAUlK,KAAKC,UAAUI,EAAK6J,UAGjF2pB,QAAQC,IAAI,WAAYlwB,GAGxB,IAAI6gC,EAAW7gC,EAGf6gC,EAAWA,EAASnjC,QAAQ,eAAgB,IAAIA,QAAQ,WAAY,IAGpE,MAAMojC,EAAYD,EAASE,MAAM,cACjC,IAAKD,EACH,MAAM,IAAIrnC,MAAM,eAGlBonC,EAAWC,EAAU,GAGrB,IAoDIE,EApDAC,EAAe,EACfC,GAAW,EACXC,GAAa,EACbC,EAAeP,EAASjmC,OAE5B,QAASyD,EAAI,EAAGA,EAAIwiC,EAASjmC,OAAQyD,IAAK,CACxC,MAAMyyB,EAAO+P,EAASxiC,GAEtB,GAAI8iC,EACFA,GAAa,OAIf,GAAa,OAATrQ,EAKJ,GAAa,MAATA,GAAiBoQ,GAGrB,GAAoB,MAATpQ,GAAgBoQ,EACzBA,GAAW,OAIb,IAAIA,IAES,MAATpQ,EAAcmQ,IACA,MAATnQ,GAAcmQ,IAEF,IAAjBA,GAAoB,CACtBG,EAAe/iC,EAAI,EACnB,KACF,OAfE6iC,GAAW,OALXC,GAAa,CAqBjB,CAEAN,EAAWA,EAAStK,UAAU,EAAG6K,GAG7BH,EAAe,IACjBhR,QAAQoC,KAAK,eAAe4O,mBAC5BJ,GAAY,IAAIz5B,OAAO65B,IAKzBJ,EAAWA,EAASnjC,QAAQ,eAAgB,MAE5CmjC,EAAWA,EAASnjC,QAAQ,cAAe,IAC3CmjC,EAAWA,EAASnjC,QAAQ,oBAAqB,IAGjD,IACEsjC,EAAS5kC,KAAK2L,MAAM84B,EACtB,OAASzgC,GAEP,MADA6vB,QAAQjyB,MAAM,kBAAmB6iC,GAC3B,IAAIpnC,MAAM,cAAe2G,EAAYnC,0CAC7C,CACA,MAAMm/B,EAAgBjlC,OAAOiX,KAAK4xB,GAAQ3D,KAAK1kC,GAAW,UAANA,IAAkB,QACtE2jC,EAAQjkC,MAAQ+kC,EAEhB,MAAME,EAAU0D,EAAO5D,IAAkB,GACnCiE,EAAmB,GAEzB,UAAWpmC,KAAOqiC,EAAS,CACzB,GAAY,UAARriC,EAAiB,SACrB,MAAM5C,EAAQilC,EAAQriC,GACtB,GAAIyB,MAAMC,QAAQtE,IAA2B,IAAjBA,EAAMuC,OAAc,CAC9C,MAAMgJ,EAAMvL,EAAM,GACZ4X,EACW,iBAARrM,EACH,SACe,iBAARA,EACL,SACAlH,MAAMC,QAAQiH,GACZ,QACA,SACJuM,EAAO9X,EAAM,IAAM,QACzBgpC,EAAOv9B,KAAK,GAAG7I,KAAOgV,KAAQE,IAChC,CACF,CAEAosB,EAAUlkC,MAAQgpC,EAAO75B,KAAK,MAC9Bg1B,EAAmBnkC,MAAQ+D,KAAKC,UAAU2kC,EAAQ,KAAM,GACxDpQ,OAAOl5B,OAAOkJ,QAAQ,WACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,WAAWA,EAAMC,UACvC,SACE49B,EAAexjC,OAAQ,CACzB,CAtVA,MAFEu4B,OAAOl5B,OAAOsG,MAAM,kCALpB4yB,OAAOl5B,OAAOsG,MAAM,UA8VxB,mDAyLA,WACEy4B,EAAgBiG,EAAgBrkC,MAClC,yBAGA0H,iBACE,GAAK+7B,EAAoBzjC,MAAMgS,OAK/B,GAAKkkB,EAASl2B,MAAMq7B,cAAiBnF,EAASl2B,MAAMs7B,QAApD,CAMAsI,EAA0B5jC,MAAQyjC,EAAoBzjC,MAEtD0jC,EAAmB1jC,OAAQ,EAE3B,IACE,MAAMw7B,EAAe,2jIAkIf2M,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAAS,MAAMw1B,EAAoBzjC,0BAErDm8B,YAAajG,EAASl2B,MAAMm8B,aAAe,GAC3CC,WAAYlG,EAASl2B,MAAMo8B,YAAc,QAKvC6M,QAAsBzM,EAAS8H,OAErC,IAAK9H,EAASM,GAAI,CAEhB,IAAIwL,EAAe,WAAW9L,EAASO,SACvC,IACE,MAAMwL,EAAYxkC,KAAK2L,MAAMu5B,GAE3BX,EADEC,EAAU5iC,MACG,GAAG2iC,OAAkBC,EAAU5iC,MAAMC,SAAW7B,KAAKC,UAAUukC,EAAU5iC,SAC/E4iC,EAAU3iC,QACJ,GAAG0iC,OAAkBC,EAAU3iC,UAE/B,GAAG0iC,OAAkBvkC,KAAKC,UAAUukC,IAEvD,OAASxgC,GACPugC,EAAe,GAAGA,OAAkBW,EAAczmC,MAAM,EAAG,MAC7D,CAmBA,MAlBAo1B,QAAQjyB,MAAM,YAAa2iC,GAC3B1Q,QAAQjyB,MAAM,UAAWuwB,EAASl2B,MAAMq7B,cACxCzD,QAAQjyB,MACN,OACA5B,KAAKC,UACH,CACEu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,EAAa0C,UAAU,EAAG,KAAO,OAC5D,CAAEhC,KAAM,OAAQjuB,QAAS,MAAMw1B,EAAoBzjC,MAAMk+B,UAAU,EAAG,YAExE/B,YAAajG,EAASl2B,MAAMm8B,aAAe,GAC3CC,WAAYlG,EAASl2B,MAAMo8B,YAAc,KAE3C,KACA,IAGE,IAAIh7B,MAAMknC,EAClB,CAGA,MAAMlkC,EAAOL,KAAK2L,MAAMu5B,GAExB,IAAIthC,EAAS,GACTvD,EAAK+4B,SAAW/4B,EAAK+4B,QAAQ,IAAM/4B,EAAK+4B,QAAQ,GAAGv3B,QACrD+B,EAASvD,EAAK+4B,QAAQ,GAAGv3B,QAAQqI,SAAW,GACnC7J,EAAKA,MAAQA,EAAKA,KAAK+4B,SAAW/4B,EAAKA,KAAK+4B,QAAQ,GAE7Dx1B,EAASvD,EAAKA,KAAK+4B,QAAQ,GAAGv3B,SAASqI,SAAW,GACzC7J,EAAK6J,UACdtG,EAAiC,iBAAjBvD,EAAK6J,QAAuB7J,EAAK6J,QAAUlK,KAAKC,UAAUI,EAAK6J,UAGjFo2B,EAAgBrkC,MAAQ2H,EAAOqK,OAC/BumB,OAAOl5B,OAAOkJ,QAAQ,WACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,WAAWA,EAAMC,UACvC,SACE89B,EAAmB1jC,OAAQ,CAC7B,CAvNA,MAFEu4B,OAAOl5B,OAAOsG,MAAM,kCALpB4yB,OAAOl5B,OAAOsG,MAAM,UA+NxB,wBAGA+B,eAAqCwhC,GACnC,GAAKvF,EAAwB3jC,MAA7B,CAKA8jC,EAAqB9jC,OAAQ,EAE7B,IACEu4B,OAAOl5B,OAAO8pC,KAAK,eAEnB,MAAM3N,EAAe,yjBAyCfC,EAAa,YACrBkI,EAAwB3jC,qBAGxBkpC,yCAIQf,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,YAAajG,EAASl2B,MAAMm8B,aAAe,GAC3CC,WAAYlG,EAASl2B,MAAMo8B,YAAc,QAI7C,IAAKI,EAASM,GACZ,MAAM,IAAI17B,MAAM,WAAWo7B,EAASO,UAGtC,MAAM34B,QAAao4B,EAASS,OAC5B,IAGIuL,GAHSpkC,EAAK+4B,UAAU,IAAIv3B,SAASqI,SAAW,IAG9B5I,QAAQ,eAAgB,IAAIA,QAAQ,WAAY,IACtE,MAAMojC,EAAYD,EAASE,MAAM,cAC7BD,IACFD,EAAWC,EAAU,IAIvBD,EAAWA,EAASnjC,QAAQ,eAAgB,MAC5C,MAAMsjC,EAAS5kC,KAAK2L,MAAM84B,GAEpBzD,EAAgBjlC,OAAOiX,KAAK4xB,GAAQ3D,KAAK1kC,GAAW,UAANA,IAAkB,QACtE2jC,EAAQjkC,MAAQ+kC,EAEhB,MAAME,EAAU0D,EAAO5D,IAAkB,GACnCiE,EAAmB,GAEzB,UAAWpmC,KAAOqiC,EAAS,CACzB,GAAY,UAARriC,EAAiB,SACrB,MAAM5C,EAAQilC,EAAQriC,GACtB,GAAIyB,MAAMC,QAAQtE,IAA2B,IAAjBA,EAAMuC,OAAc,CAC9C,MAAMgJ,EAAMvL,EAAM,GACZ4X,EACW,iBAARrM,EACH,SACe,iBAARA,EACL,SACAlH,MAAMC,QAAQiH,GACZ,QACA,SACJuM,EAAO9X,EAAM,IAAM,QACzBgpC,EAAOv9B,KAAK,GAAG7I,KAAOgV,KAAQE,IAChC,CACF,CAEAosB,EAAUlkC,MAAQgpC,EAAO75B,KAAK,MAC9Bg1B,EAAmBnkC,MAAQ+D,KAAKC,UAAU2kC,EAAQ,KAAM,GAGxDhF,EAAwB3jC,OAAS,gBAAgBkpC,IAEjD3Q,OAAOl5B,OAAOkJ,QAAQ,cACtBs7B,EAA0B7jC,OAAQ,CACpC,OAAS2F,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1B4yB,OAAOl5B,OAAOsG,MAAM,YAAcA,EAAMC,QAC1C,SACEk+B,EAAqB9jC,OAAQ,CAC/B,CAjIA,MAFEu4B,OAAOl5B,OAAOm7B,QAAQ,SAoI1B,qBAGA9yB,eAAkCwhC,GAChC,GAAKtF,EAA0B5jC,MAA/B,CAKAgkC,EAAkBhkC,OAAQ,EAE1B,IACEu4B,OAAOl5B,OAAO8pC,KAAK,eAEnB,MAAM3N,EAAe,olBAyCfC,EAAa,cACrBmI,EAA0B5jC,qBAG1BkpC,oCAIQf,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,YAAajG,EAASl2B,MAAMm8B,aAAe,GAC3CC,WAAYlG,EAASl2B,MAAMo8B,YAAc,QAI7C,IAAKI,EAASM,GACZ,MAAM,IAAI17B,MAAM,WAAWo7B,EAASO,UAGtC,MAAM34B,QAAao4B,EAASS,OAC5B,IAAIt1B,EAASvD,EAAK+4B,UAAU,IAAIv3B,SAASqI,SAAW,GAEpDo2B,EAAgBrkC,MAAQ2H,EAAOqK,OAG/B4xB,EAA0B5jC,OAAS,gBAAgBkpC,IAEnD3Q,OAAOl5B,OAAOkJ,QAAQ,cACtBw7B,EAAuB/jC,OAAQ,CACjC,OAAS2F,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1B4yB,OAAOl5B,OAAOsG,MAAM,YAAcA,EAAMC,QAC1C,SACEo+B,EAAkBhkC,OAAQ,CAC5B,CA7FA,MAFEu4B,OAAOl5B,OAAOm7B,QAAQ,UAgG1B,kBAEA,WACO2J,EAAmBnkC,OAKnBqkC,EAAgBrkC,OACnB8kC,IAGFvH,WAAW,KACTmI,KACC,MAVDnN,OAAOl5B,OAAOsG,MAAM,oBAWxB,sNAh1DOktB,MAAM,YAAYvB,MAAA,CAAAG,QAAA,kBAAAC,WAAA,uBAEhBuB,GAAA,CAAAJ,MAAM,0BAiDsBA,MAAM,oBAuBjCvB,MAAA,CAAAI,WAAA,+EAAAC,OAAA,2DAAAF,QAAA,oCAaKoB,MAAM,aAAavB,MAAA,CAAAE,OAAA,mCA8EhBF,MAAA,CAAA7jB,SAAA,+BAkELolB,MAAM,aAAavB,MAAA,CAAAE,OAAA,eAuBnBqB,MAAM,aAAavB,MAAA,CAAAE,OAAA,qBA0EOqB,MAAM,kBAE9ByB,GAAA,CAAAzB,MAAM,mBASTvB,MAAA,qBAAAG,QAAA,OAAAC,WAAA,2BAAAC,OAAA,gEAWKL,MAAA,CAAAM,QAAA,OAAAI,IAAA,4BAkER+C,GAAA,CAAAlC,MAAM,0BAiDmBA,MAAM,oBAU9BvB,MAAA,CAAAI,WAAA,8EAAAC,OAAA,0DAAAF,QAAA,oCAaKoB,MAAM,aAAavB,MAAA,CAAAE,OAAA,mCA8EhBF,MAAA,CAAA7jB,SAAA,qCAoEqBolB,MAAM,aAAavB,MAAA,CAAAE,OAAA,qBA0EtBqB,MAAM,kBAE3B4O,GAAA,CAAA5O,MAAM,mFAtsBnBH,EA+sBM,MA/sBNE,GA+sBM,CA7sBJF,EA2ZM,MA3ZNO,GA2ZM,CA1ZJP,EA8CM,OA7CJG,MAAM,iBACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAkD,OAAA,UAAAT,WAAA,iBAsBChC,QAAKO,eAAEL,EAAA8W,eAAc,cACrB/I,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,oBACxDmkB,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAEzDuW,EAAA,MAAAA,EAAA,IAAAD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAA4E,KAAzEG,MAAM,uBAAuBvB,MAAA,CAAAC,MAAA,kCAA4C,yBAE9E,IACAmB,EAGK,KAFFG,MAAK4C,EAAEnD,EAAA8Q,SAASC,UAAS,qDAC1B/R,MAAA,CAAAC,MAAA,OAAA6C,WAAA,wDAIO9B,EAAA8Q,SAASC,WAAAnR,IAApBC,EAyWM,MAzWNkB,GAyWM,CAAAV,EAAA,MAAAA,EAAA,IAAAa,EAAA,glBAnVJd,EA0IM,MA1INa,GA0IM,CAAAZ,EAAA,MAAAA,EAAA,IAjIJD,EAGK,MAHDpB,MAAA,CAAAC,MAAA,6BAAAC,OAAA,aAAAI,QAAA,8BAAAI,IAAA,QAAyG,CAC3GU,EAA+C,KAA5CG,MAAM,oCAAiCC,EAAK,mBAEjD,IAEAJ,EAuBM,MAvBNgB,GAuBM,CAAAf,EAAA,MAAAA,EAAA,IAtBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,eAElG,IAAAkP,EACA/N,EAkBY,kCAAAC,EAAA,KAAAA,EAAA,GAAAO,GAjBDZ,EAAAiR,kBAAiBrQ,GAC1BC,YAAY,6EACZkW,KAAK,IACL/X,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,+BAAAgB,WAAA,iBAYCkV,QAAK3W,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,WAC9CC,OAAI7W,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,0BAhBrCjX,EAAAiR,uBAoBb7Q,EAsDS,UArDPG,MAAM,kBACL8B,SAAUrC,EAAAkR,iBAAmBlR,EAAAiR,kBAAkBvxB,OAChDsf,MAaC6C,GAbD,CAAA1C,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,mEAAA3mB,SAAA,WAAAskB,SAAA,UAaC,CAAA+C,QACgCxC,EAAAkR,iBAAmBlR,EAAAiR,kBAAkBvxB,OAAI,KAAA6iB,OAAoCvC,EAAAkR,iBAAmBlR,EAAAiR,kBAAkBvxB,OAAI,2BAItJogB,QAAOE,EAAAmX,0BACPpJ,aAAU1N,YAAkB5qB,KAAkCuqB,EAAAkR,gBAAkBlR,oBAAkBtgB,SAA4BjK,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAAyCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,yCAQrOP,aAAU5N,YAAkB5qB,IAA6BA,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAoCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,wDAO5JpO,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,0CAERH,EAGK,KAFHG,MAAM,kCACNvB,MAAA,yCAAA7jB,SAAA,qCAEFilB,EAAkG,OAAlGkB,GAAkGb,EAAlDT,EAAAkR,eAAc,8BAAA7P,IAKxDrB,EAAA6R,oBAAsB7R,+BAD9BH,EAqCS,UAAAvvB,IAAA,EAnCP0uB,MAAA,sBAAAG,QAAA,YAAAC,WAAA,4EAAAC,OAAA,0DAAAJ,MAAA,iDAAAsD,OAAA,UAAAT,WAAA,kEAaChC,QAAKO,eAAEL,EAAAuR,2BAAyB,GAChCxD,aAAU1N,YAAkB5qB,IAA6BA,EAAEu4B,cAAchP,MAAMI,WAAA,8EAA8H3pB,EAAEu4B,cAAchP,MAAMiY,YAAW,0BAA8CxhC,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAAuCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,wCASjYP,aAAU5N,cAAkB5qB,IAA6BA,EAAEu4B,cAAchP,MAAMI,WAAA,4EAA4H3pB,EAAEu4B,cAAchP,MAAMiY,YAAW,0BAA8CxhC,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAoCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,0DAU7XpO,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,mCAA8B,WAE5D,WAAAgC,EAAA,qBAEAZ,EAEI,KAFDpB,MAAA,CAAAC,MAAA,0BAAAC,OAAA,cAAwD,6CAK7DmB,EAAA,MAAAA,EAAA,IAAAD,EAgBM,OAhBDpB,MAAA,uBAAAE,OAAA,SAAA/jB,SAAA,aAA8D,CACjEilB,EAGC,QAFCpB,MAAA,CAAAI,WAAA,UAAAD,QAAA,SAAAF,MAAA,0BAAA9jB,SAAA,2BACC,SAEHilB,EAUO,OATLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,MAAA9X,KAAA,IAAAC,MAAA,IAAAmX,OAAA,MAAAJ,WAAA,8CAQC,IAILgB,EAqBM,MArBNsB,GAqBM,CAAArB,EAAA,MAAAA,EAAA,IApBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,WAElG,IAAAkP,EACA/N,EAgBE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAfSZ,EAAA2R,QAAO/Q,GAChBtb,KAAK,OACLub,YAAY,cACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,iBAUCkV,QAAK3W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,WAC9CC,OAAI7W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,0BAdrCjX,EAAA2R,aAkBbvR,EA0BM,MA1BNwB,GA0BM,CAAAvB,EAAA,MAAAA,EAAA,IAzBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,6BAElG,IAAAkP,EACA/N,EAoBY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAnBDZ,EAAA4R,UAAShR,GAClBC,YAAY,4EACZkW,KAAK,IACL/X,MAAA,CAAAO,MAAA,OAAAC,OAAA,QAAAL,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,0EAAAgB,WAAA,iBAcCkV,QAAK3W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,WAC9CC,OAAI7W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,0BAlBrCjX,EAAA4R,2BAoBXxR,EAAiG,KAA9FpB,MAAA,CAAAC,MAAA,0BAAAC,OAAA,cAAwD,4CAG7DkB,EA4CS,UA3CPG,MAAM,eACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,mEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAAoX,kBACPrJ,aAAU1N,cAAgB5qB,IAA2BA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAAqCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,wCAMxJP,aAAU5N,cAAgB5qB,IAA2BA,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAkCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,4DAOtJpO,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAA4G,KAAzGG,MAAM,oBAAoBvB,MAAA,yCAAA7jB,SAAA,oCAC7BilB,EAAmE,QAA7DpB,MAAA,CAAA7jB,SAAA,2BAAuC,mBAAe,UAGnD6kB,EAAA6R,oBAAAjS,IAAXC,EAmFM,MAnFNkC,GAmFM,CAAA1B,EAAA,MAAAA,EAAA,IAlFJD,EAAuF,MAAnFpB,MAAA,CAAAC,MAAA,sDAA6D,qBAAiB,IAClFmB,EAKM,MALN4B,GAKM,CAJJ5B,EAAmC,aAA3BJ,EAAA6R,oBAAkB,GAC1BzR,EAES,UAFDG,MAAM,eAAgBT,QAAOE,EAAAqX,eAAA,IAAAhX,EAAA,MAAAA,EAAA,KACnCD,EAAgC,KAA7BG,MAAM,oBAAkB,eAK/BH,EAwEM,MAxEN8B,GAwEM,CAAA7B,EAAA,MAAAA,EAAA,IA/DJD,EAEI,KAFDpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,mDAA6E,CAC9EmB,EAAgC,KAA7BG,MAAM,qBAAkBC,EAAK,kBAClC,IACAJ,EA2DM,MA3DN+B,GA2DM,CA1DJ/B,EA4BS,UA3BPpB,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,WAAAC,WAAA,2EAAAH,MAAA,UAAAI,OAAA,6EAAAkD,OAAA,UAAAT,WAAA,YAYChC,QAAOE,EAAAwS,mBACPzE,aAAU1N,cAAsB5qB,IAAiCA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAA2CrU,EAAEu4B,cAAchP,MAAMwP,UAAS,uCAM1KP,aAAU5N,cAAsB5qB,IAAiCA,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAwCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,6BAOxKpO,EAAoC,KAAjCG,MAAM,wBAAsB,SAAAC,EAAK,gBACtC,UACAJ,EA4BS,UA3BPpB,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,WAAAC,WAAA,2EAAAH,MAAA,UAAAI,OAAA,6EAAAkD,OAAA,UAAAT,WAAA,YAYChC,QAAOE,EAAAsX,gBACPvJ,aAAU1N,cAAsB5qB,IAAiCA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAA2CrU,EAAEu4B,cAAchP,MAAMwP,UAAS,uCAM1KP,aAAU5N,cAAsB5qB,IAAiCA,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAwCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,6BAOxKpO,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,gBAClC,wCAQVJ,EA8SM,MA9SNqC,GA8SM,CA7SJrC,EA8CM,OA7CJG,MAAM,iBACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAkD,OAAA,UAAAT,WAAA,iBAsBChC,QAAKO,iBAAEL,EAAA8W,eAAc,WACrB/I,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,oBACxDmkB,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAEzDuW,EAAA,MAAAA,EAAA,IAAAD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAA6E,KAA1EG,MAAM,wBAAwBvB,MAAA,CAAAC,MAAA,kCAA4C,0BAE/E,IACAmB,EAGK,KAFFG,MAAK4C,EAAEnD,EAAA8Q,SAASE,OAAM,qDACvBhS,MAAA,CAAAC,MAAA,OAAA6C,WAAA,wDAIO9B,EAAA8Q,SAASE,QAAApR,IAApBC,EA4PM,MA5PN6C,GA4PM,CAAArC,EAAA,MAAAA,EAAA,IA3PJD,EAKM,OALDG,MAAM,oBAAoBvB,MAAA,2BAC7BoB,EAGI,KAHDpB,MAAA,CAAAE,OAAA,YAAAD,MAAA,4BAAuD,CACxDmB,EAAiF,KAA9EG,MAAM,0BAA0BvB,MAAA,sBAAAC,MAAA,eAA8C,sBAChEmB,EAAqD,UAA7CpB,MAAA,CAAAC,MAAA,YAAuB,iBAAauB,EAAS,yBAK1EJ,EA4IM,MA5INsO,GA4IM,CAAArO,EAAA,MAAAA,EAAA,IAnIJD,EAGK,MAHDpB,MAAA,CAAAC,MAAA,6BAAAC,OAAA,aAAAI,QAAA,8BAAAI,IAAA,QAAyG,CAC3GU,EAA+C,KAA5CG,MAAM,oCAAiCC,EAAK,mBAEjD,IAEAJ,EAuBM,MAvBNuO,GAuBM,CAAAtO,EAAA,MAAAA,EAAA,IAtBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,oBAElG,IAAAkP,EACA/N,EAkBY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAjBDZ,EAAAmR,oBAAmBvQ,GAC5BC,YAAY,6CACZkW,KAAK,IACL/X,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,+BAAAgB,WAAA,iBAYCkV,QAAK3W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,WAC9CC,OAAI7W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,0BAhBrCjX,EAAAmR,yBAoBb/Q,EAwDS,UAvDPG,MAAM,kBACL8B,SAAUrC,EAAAoR,qBAAuBpR,EAAAmR,oBAAoBzxB,OACtDsf,MAaC6C,GAbD,CAAA1C,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,kEAAA3mB,SAAA,WAAAskB,SAAA,UAaC,CAAA+C,QACgCxC,EAAAoR,qBAAuBpR,EAAAmR,oBAAoBzxB,OAAI,KAAA6iB,OAAoCvC,EAAAoR,qBAAuBpR,EAAAmR,oBAAoBzxB,OAAI,2BAIlKogB,QAAOE,EAAAuX,uBACPxJ,aAAU1N,cAAkB5qB,KAAkCuqB,EAAAoR,oBAAsBpR,sBAAoBtgB,SAA4BjK,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAAyCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,wCAQ3OP,aAAU5N,cAAkB5qB,IAA6BA,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAoCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,uDAO5JpO,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,0CAERH,EAGK,KAFHG,MAAM,kCACNvB,MAAA,yCAAA7jB,SAAA,qCAEFilB,EAES,OAFT0O,GAESrO,EADPT,EAAAoR,mBAAkB,8BAAAvC,IAMd7O,EAAA+R,iBAAmB/R,iCAD3BH,EAqCS,UAAAvvB,IAAA,EAnCP0uB,MAAA,sBAAAG,QAAA,YAAAC,WAAA,4EAAAC,OAAA,0DAAAJ,MAAA,iDAAAsD,OAAA,UAAAT,WAAA,kEAaChC,QAAKO,iBAAEL,EAAAyR,wBAAsB,GAC7B1D,aAAU1N,cAAkB5qB,IAA6BA,EAAEu4B,cAAchP,MAAMI,WAAA,8EAA8H3pB,EAAEu4B,cAAchP,MAAMiY,YAAW,0BAA8CxhC,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAAuCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,wCASjYP,aAAU5N,cAAkB5qB,IAA6BA,EAAEu4B,cAAchP,MAAMI,WAAA,4EAA4H3pB,EAAEu4B,cAAchP,MAAMiY,YAAW,0BAA8CxhC,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAoCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,0DAU7XpO,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,mCAA8B,WAE5D,WAAAgC,EAAA,qBAEAZ,EAEI,KAFDpB,MAAA,CAAAC,MAAA,0BAAAC,OAAA,cAAwD,4CAK7DmB,EAAA,MAAAA,EAAA,IAAAD,EAgBM,OAhBDpB,MAAA,uBAAAE,OAAA,SAAA/jB,SAAA,aAA8D,CACjEilB,EAGC,QAFCpB,MAAA,CAAAI,WAAA,UAAAD,QAAA,SAAAF,MAAA,0BAAA9jB,SAAA,2BACC,SAEHilB,EAUO,OATLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,MAAA9X,KAAA,IAAAC,MAAA,IAAAmX,OAAA,MAAAJ,WAAA,8CAQC,IAIMY,EAAA6R,oBAAAjS,IAAXC,EAyBM,MAzBNmP,GAyBM,CAAA3O,EAAA,MAAAA,EAAA,IAxBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,6BAElG,IAAAkP,EACA/N,EAmBY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAlBDZ,EAAA8R,mBAAkBlR,GAC3BC,YAAY,wDACZkW,KAAK,IACL/X,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,0EAAAgB,WAAA,iBAaCkV,QAAK3W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,WAC9CC,OAAI7W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,0BAjBrCjX,EAAA8R,oCAmBX1R,EAA4F,KAAzFpB,MAAA,CAAAC,MAAA,0BAAAC,OAAA,cAAwD,wCAA6B8B,EAAA,OAG1FZ,EA6CS,UA5CPG,MAAM,eACNvB,MAAA,qBAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,mEAAA3mB,SAAA,WAAAskB,SAAA,UAeCK,QAAOE,EAAA6S,eACP9E,aAAU1N,cAAgB5qB,IAA2BA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAAqCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,wCAMxJP,aAAU5N,cAAgB5qB,IAA2BA,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAkCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,4DAOtJpO,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAA4G,KAAzGG,MAAM,oBAAoBvB,MAAA,yCAAA7jB,SAAA,oCAC7BilB,EAA8D,QAAxDpB,MAAA,CAAA7jB,SAAA,2BAAuC,cAAU,UAG9C6kB,EAAA+R,iBAAAnS,IAAXC,EAQM,MARNoP,GAQM,CAAA5O,EAAA,MAAAA,EAAA,IAPJD,EAAkF,MAA9EpB,MAAA,CAAAC,MAAA,sDAA6D,gBAAY,IAC7EmB,EAKM,MALN+O,GAKM,CAJJ/O,EAAgC,aAAxBJ,EAAA+R,iBAAe,GACvB3R,EAES,UAFDG,MAAM,eAAgBT,QAAOE,EAAAwX,YAAA,IAAAnX,EAAA,MAAAA,EAAA,KACnCD,EAAgC,KAA7BG,MAAM,oBAAkB,2CASvCiP,EAaExP,EAAA,gBAZCpB,KAAMoB,EAAAuR,0BACN,eAAcvR,EAAAwR,qBACf9Q,MAAM,qBACN7M,YAAY,yBACXiP,SAAU,8EAMV2M,QAAKpP,iBAAEL,EAAAuR,2BAAyB,GAChC5B,UAAS3P,EAAAyX,uBAAA,gCAIZjI,EAaExP,EAAA,gBAZCpB,KAAMoB,EAAAyR,uBACN,eAAczR,EAAA0R,kBACfhR,MAAM,gBACN7M,YAAY,qBACXiP,SAAU,wEAMV2M,QAAKpP,iBAAEL,EAAAyR,wBAAsB,GAC7B9B,UAAS3P,EAAA0X,oBAAA,uSC9lBd,MAAMrZ,EAAQC,EAWR6C,EAAWzC,EAAI,GACfiZ,EAAkBjZ,EAAI,GACtBkZ,EAAiBlZ,EAAIL,EAAMwZ,gBAC3BC,EAAUpZ,EAAc,IACxBwG,EAAYxG,EAAI,GAChBqZ,EAAiBrZ,EAAI,GAE3B,IAAIsZ,EAAiC,KACjCC,EAAwC,KAoE5C,SAASC,EAAYC,GACnBhX,EAASzzB,MAAQ2O,KAAKC,IAAI,IAAKD,KAAK0Y,IAAI,EAAGojB,GAC7C,CAEA,SAASC,EAAW9kC,GAClBskC,EAAelqC,MAAQ4F,CACzB,CAEA,SAAS+kC,EAAUC,GACjBR,EAAQpqC,MAAMyL,KAAKm/B,GAEnBrN,WAAW,KACT,MAAMsN,EAAcrM,SAAS6G,cAAc,iBACvCwF,IACFA,EAAYC,UAAYD,EAAYE,eAErC,GACL,CAEA,SAASC,IACPZ,EAAQpqC,MAAQ,EAClB,CAEA,SAASirC,IACPxX,EAASzzB,MAAQ,IACjBkqC,EAAelqC,MAAQ,KACzB,CA3FAixB,EACE,IAAMN,EAAMO,KACZC,IACMA,GAEFsC,EAASzzB,MAAQ,EACjBiqC,EAAgBjqC,MAAQ,EACxBkqC,EAAelqC,MAAQ2wB,EAAMwZ,eAC7BC,EAAQpqC,MAAQ,GAChBw3B,EAAUx3B,MAAQib,KAAK+c,MACvBqS,EAAerqC,MAAQ,EAGnBsqC,GACFvS,cAAcuS,GAEhBA,EAAkB/R,OAAON,YAAY,KACnCoS,EAAerqC,MAAQ2O,KAAK64B,OAAOvsB,KAAK+c,MAAQR,EAAUx3B,OAAS,MAClE,KAGCuqC,GACFxS,cAAcwS,GAEhBA,EAAyBhS,OAAON,YAAY,KAE1C,GAAIgS,EAAgBjqC,MAAQyzB,EAASzzB,MAAO,CAC1C,MAAMkrC,EAAOzX,EAASzzB,MAAQiqC,EAAgBjqC,MAC9CiqC,EAAgBjqC,OAAS2O,KAAK0Y,IAAI,GAAY,GAAP6jB,GACnCjB,EAAgBjqC,MAAQyzB,EAASzzB,QACnCiqC,EAAgBjqC,MAAQyzB,EAASzzB,MAErC,MAESyzB,EAASzzB,MAAQ,IAAMiqC,EAAgBjqC,OAASyzB,EAASzzB,MAAQ,KACxEiqC,EAAgBjqC,OAAS,GACrBiqC,EAAgBjqC,MAAQyzB,EAASzzB,MAAQ,IAC3CiqC,EAAgBjqC,MAAQyzB,EAASzzB,MAAQ,KAG5C,OAGCsqC,IACFvS,cAAcuS,GACdA,EAAkB,MAEhBC,IACFxS,cAAcwS,GACdA,EAAyB,SAMjCY,EAAY,KACNb,GACFvS,cAAcuS,GAEZC,GACFxS,cAAcwS,KAiClBa,EAAa,CACXZ,cACAE,aACAC,YACAK,eACAC,qZAtQEpY,MAAM,mBACNvB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,sBAAAE,QAAA,4EAAA4D,UAAA,yBAeE3C,MAAM,gBACNvB,MAAA,CAAAI,WAAA,mEAAAD,QAAA,OAAAI,MAAA,yEAAAF,OAAA,oBAAA6D,UAAA,0BAYKlE,MAAA,CAAAM,QAAA,8BAAAI,IAAA,oCAYCV,MAAA,CAAAE,OAAA,IAAAD,MAAA,oDAOJsB,MAAM,yBACNvB,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,8CAAAK,SAAA,wFAuBGc,MAAM,gBAAgBvB,MAAA,CAAAC,MAAA,oFAOzBsB,MAAM,eACNvB,MAAA,0CAAAI,WAAA,8CAAAD,QAAA,qGAAAF,MAAA,oCAmBGD,MAAA,CAAAM,QAAA,sEACEiB,MAAM,mBAAmBvB,MAAA,CAAAC,MAAA,uDAIzBsB,MAAM,eAAevB,MAAA,CAAAC,MAAA,kFAzGxBU,EAAAf,MAAAgB,IADRC,EAmIM,MAnINS,GAmIM,CAlHJF,EAiHM,MAjHNO,GAiHM,CAnGJP,EAeM,MAfNW,GAeM,CAAAV,EAAA,KAAAA,EAAA,GAdJD,EAUO,OATLG,MAAM,UACNvB,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAH,OAAA,uEAAA6D,UAAA,wCASF9C,EAEK,KAFLa,GAEKR,EADAd,EAAAe,OAAK,KAKZN,EAsBM,MAtBNgB,GAsBM,CAVJhB,EASO,OARLG,MAAM,eACLvB,MAAK6C,EAAA,CAAAtC,MAAuBS,EAAA2X,gBAAe,IAAAnY,OAAA,uHAWhDY,EAEM,MAFNiB,GAEMZ,EADDT,EAAA4X,gBAAc,GAKX5X,EAAA8X,QAAQ7nC,OAAM,GAAA2vB,IADtBC,EAmBM,MAnBNyB,GAmBM,EAAA1B,GAAA,GAHJC,EAEMkD,EAAA,KAAAC,EAFqBhD,EAAA8X,QAAO,CAArBQ,EAAQ5kC,SAArBmsB,EAEM,OAF+BvvB,IAAKoD,EAAGsrB,MAAA,sCAC3CoB,EAAqC,QAA/BpB,MAAA,CAAAC,MAAA,YAAuB,KAAC,IAAAuB,EAAO,IAACC,EAAG6X,GAAM,yBAKnDlY,EAMM,MANNsB,GAMM,CALJtB,EAEM,MAFNwB,GAEMnB,EADDpkB,KAAKgpB,MAAMrF,EAAA2X,kBAAmB,KACnC,GAEAvX,EAA+F,MAA/F2B,GAA+D,QAAKtB,EAAGT,EAAA+X,gBAAiB,IAAC,KAKnFpY,EAAAoZ,aAAAnZ,IADRC,EAmBS,UAAAvvB,IAAA,EAjBP0uB,MAAA,CAAAO,MAAA,2BAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAAsD,OAAA,UAAAT,WAAA,YAYCiM,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzDU,QAAKO,eAAElrB,EAAA0tB,MAAK,YACd,OAED,KAAA7B,EAAA,+ICg9CN,MAAMgY,EAAWta,EAAe,IAC1Bua,EAAYva,EAAI,IAChBwa,EAAcxa,EAAI,IAClB9pB,EAAO8pB,EAAI,IACXiG,EAAcjG,EAAI,IAClBya,EAASza,GAAI,GACb0a,EAAW1a,EAAI,IACf2a,EAAe3a,GAAI,GACnB4a,EAAe5a,GAAI,GACnB6a,EAAgB7a,EAAI,IACpB8a,EAAiB9a,GAAI,GACrB+a,EAAY/a,EAAgB,IAC5Bgb,EAAchb,EAAwB,SACtCib,EAAcjb,GAAI,GAClBkb,EAAYlb,EAAuC,IAenDmb,EAAenb,GAAI,GACnBob,EAAoBpb,EAAgD,MAGpEoF,EAAYC,IAGZgW,EAAsBrb,GAAI,GAG1Bsb,EAAatb,GAAI,GACjBub,EAAiBvb,EAAI,IACrBwb,EAAexb,EAAI,IACnByb,EAAUzb,EAAI,IAGd0b,EAAiB1b,EAA6B,MAE9C2b,EAAiBvU,EAAS,IACvBkT,EAAStrC,MAAMglC,QAAU3qB,EAAEb,KAAO+xB,EAAUvrC,QAG/C4sC,EAAwBxU,EAAS,IAC9B8T,EAAUlsC,MAAMurC,EAAUvrC,QAAU,IAGvC6sC,EAAwBzU,EAAS,KACrC,GAA+B,IAA3B2T,EAAU/rC,MAAMuC,OAAc,MAAO,GAEzC,MAAMuqC,EAAOH,EAAe3sC,MAC5B,IAAK8sC,EAAM,MAAO,GAWlB,OAAOC,EAR0BD,EAAKE,MAAM3mC,IAAIqY,IAC9C,MAAMuuB,EAASlB,EAAU/rC,MAAMglC,QAAU7vB,EAAE/O,OAASsY,EAAEtY,MACtD,MAAO,IACFsY,EACHzQ,QAASg/B,EAAgC,UAAtBjB,EAAYhsC,MAAoBitC,EAAOC,WAAaD,EAAOE,WAAczuB,EAAEzQ,cAQ9Fm/B,EAAmB,CACvB,SAAQ,CACN7tC,KAAM,SACN4mB,YAAa,iBACbyP,KAAM,KACNrE,MAAO,UACPyb,MAAO,CACL,aAAc,upBAsBd,YAAa,2rCA8Eb,YAAa,+hFAuGjB,QAAO,CACLztC,KAAM,QACN4mB,YAAa,kBACbyP,KAAM,KACNrE,MAAO,UACPyb,MAAO,CACL,aAAc,wiCAsCd,YAAa,4kCAqEb,YAAa,+xBA4BjB,QAAO,CACLztC,KAAM,QACN4mB,YAAa,mBACbyP,KAAM,KACNrE,MAAO,UACPyb,MAAO,CACL,aAAc,kcAkBd,YAAa,0rCAuEb,YAAa,47BAmmBnB,SAASD,EAAsBC,GAC7B,MAAMK,EAAWL,EAAMhI,KAAKtmB,GAAKA,EAAEtY,KAAK9D,SAAS,UAC3CgrC,EAAUN,EAAMhI,KAAKtmB,GAAKA,EAAEtY,KAAK9D,SAAS,SAC1CirC,EAASP,EAAMhI,KAAKtmB,GAAKA,EAAEtY,KAAK9D,SAAS,QAE/C,IAAK+qC,EAAU,MAAO,GAEtB,MAAMzS,EAAOyS,EAASp/B,QAChBu/B,EAAU,OACVC,EAAU,OACVC,EAAY9S,EAAK8N,MAAM,IAAI1+B,OAAO,IAAIwjC,wBAA8BA,KAAY,MAChFG,EAAY/S,EAAK8N,MAAM,IAAI1+B,OAAO,IAAIyjC,wBAA8BA,KAAY,MAEtF,IAAIG,EAAcF,EAAYA,EAAU,GAAK,GACzCG,EAAcF,EAAYA,EAAU,GAAK/S,EAE7C,MACMkT,EAAiB,IAAI9jC,OAAO,0BAAoC,MACtE4jC,EAAcA,EAAYvoC,QAFL,2CAE2B,IAChDwoC,EAAcA,EAAYxoC,QAAQyoC,EAAgB,IAElD,MAAMC,EAAY,SACZC,EAAW,QACjB,MAAO,0IAKLJ,SACCI,wOASCV,GAASr/B,SAAW,WACpB+/B,UACDD,yDAAiEA,mHAEjEA,mFAA2FA,UAC3FA,4EAAoFA,UACpFA,oFAA4FA,0BAG7FF,SACCE,KAAaR,GAAQt/B,SAAW,OAAO8/B,sBAG5C,CAEA,SAAS7T,IACP,MAAM4S,EAAOH,EAAe3sC,MAK5Bi3B,EAAYj3B,MAJP8sC,EAIeC,EAAsBD,EAAKE,OAHzB,EAIxB,CAEA,SAASiB,IACP,IAEE,MAAMC,EAASvV,YAAYuV,OAC3BtW,QAAQC,IAAI,4BAA6BqW,GAEzC,MAAMpG,EAAa,CACjBqG,wBAAyB7C,EAAStrC,MAClCouC,oBAAqBlC,EAAUlsC,OAI3B2nC,EAAWtO,IACXD,EAAa8U,EAAS,GAAGvG,uBAA8BuG,IAAW,GAAGvG,6BAE3EjO,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAU8jC,IAChDlQ,QAAQC,IAAI,sBAAuBiQ,EAAWqG,wBAAwB5rC,OAAQ,MAChF,OAASwF,GACP6vB,QAAQjyB,MAAM,QAASoC,EACzB,CACF,CAEA,SAASsmC,IACP,IAEE,MAAMH,EAASI,IACf1W,QAAQC,IAAI,+BAAgCqW,GAG5C,MAAMvG,EAAWtO,IACXD,EAAa8U,EAAS,GAAGvG,uBAA8BuG,IAAW,GAAGvG,6BAErElO,EAAYC,aAAaC,QAAQP,GACvC,IAAIh1B,EAAO,KAEX,GAAIq1B,EACF,IACEr1B,EAAOL,KAAK2L,MAAM+pB,GAClB7B,QAAQC,IAAI,yBAA0BzzB,EACxC,OAASmqC,GACP3W,QAAQjyB,MAAM,wBAAyB4oC,EACzC,CAGEnqC,GAAM+pC,yBAA2B9pC,MAAMC,QAAQF,EAAK+pC,0BACtD7C,EAAStrC,MAAQoE,EAAK+pC,wBACtBvW,QAAQC,IAAI,UAAWyT,EAAStrC,MAAMuC,OAAQ,OAE9Cq1B,QAAQC,IAAI,gBACZyT,EAAStrC,MAAQ,IAGfoE,GAAMgqC,qBACRlC,EAAUlsC,MAAQoE,EAAKgqC,oBACvBxW,QAAQC,IAAI,aAEZqU,EAAUlsC,MAAQ,EAEtB,OAAS+H,GACP6vB,QAAQjyB,MAAM,QAASoC,EACzB,CACF,CAGAsmC,IAGApd,EACE,IAAMqd,IACN,KACED,IACA9C,EAAUvrC,MAAQ,GAClBwrC,EAAYxrC,MAAQ,GACpBkH,EAAKlH,MAAQ,GACbi3B,EAAYj3B,MAAQ,KAKxB,IAAIwuC,EAAsD,KAC1DC,EAAY,KAEV,GAAIjD,EAAYxrC,YAAwB,IAAfkH,EAAKlH,MAAqB,CACjD,MAAM8sC,EAAOH,EAAe3sC,MAC5B,GAAI8sC,EAAM,CACR,MAAM4B,EAAO5B,EAAKE,MAAMhI,QAAUtmB,EAAEtY,OAASolC,EAAYxrC,OACrD0uC,GAAQA,EAAKzgC,UAAY/G,EAAKlH,QAEhC0uC,EAAKzgC,QAAU/G,EAAKlH,MAGhBwuC,GACFG,aAAaH,GAIfA,EAAgBjR,WAAW,KACzB0Q,IACArW,QAAQC,IAAI,QAAS2T,EAAYxrC,QAChC,KAEP,CACF,IAIF,IAAI4uC,EAAqD,KA6CzD,SAASC,IACPpD,EAAOzrC,OAAQ,EACf0rC,EAAS1rC,MAAQ,EACnB,CAgiGA,SAAS8uC,IACP7C,EAAYjsC,OAAQ,CACtB,CAjlGAixB,EACE,IAAM,CAACua,EAAYxrC,MAAOkH,EAAKlH,OAC/B,KACM4uC,GACFD,aAAaC,GAEfA,EAAerR,WAAWrD,EAAe,MAE3C,CAAE6U,MAAM,IAIVC,EAAgB,KAYd,GAXApX,QAAQC,IAAI,gBAGR2W,GACFG,aAAaH,GAEXI,GACFD,aAAaC,GAIXpD,EAAYxrC,YAAwB,IAAfkH,EAAKlH,MAAqB,CACjD,MAAM8sC,EAAOH,EAAe3sC,MAC5B,GAAI8sC,EAAM,CACR,MAAM4B,EAAO5B,EAAKE,MAAMhI,QAAUtmB,EAAEtY,OAASolC,EAAYxrC,OACrD0uC,IACFA,EAAKzgC,QAAU/G,EAAKlH,MAExB,CACF,CAGAiuC,IACArW,QAAQC,IAAI,sOAvyCW,CACvB,oBACA,gBACA,iBACA,aACA,cACA,gBACA,YACA,4QAihBF,WACEwU,EAAoBrsC,OAAQ,CAC9B,4BAGA,SAAmCivC,GACjC,MAAMC,EAAW9B,EAAiB6B,GAClC,IAAKC,EAAU,OAEf,MAAM3vC,EAAO+jC,OAAO,QAAS4L,EAAS3vC,MACtC,IAAKA,IAASA,EAAKyS,OAAQ,OAE3B,MAAMm9B,EAAmB,CACvB31B,GAAIyB,KAAK+c,MAAMp2B,WACfrC,KAAMA,EAAKyS,OACXg7B,MAAOltC,OAAO8b,QAAQszB,EAASlC,OAAO3mC,IAAI,EAAE+oC,EAAUnhC,MAAO,CAC3D7H,KAAMgpC,EACN7vC,KAAM6vC,EACNnhC,cAIJq9B,EAAStrC,MAAMyL,KAAK0jC,GACpB5D,EAAUvrC,MAAQmvC,EAAQ31B,GAC1BgyB,EAAYxrC,MAAQmvC,EAAQnC,MAAM,IAAIztC,MAAQ,GAC9C2H,EAAKlH,MAAQmvC,EAAQnC,MAAM,IAAI/+B,SAAW,GAC1CggC,IAEA5B,EAAoBrsC,OAAQ,EAC5Bu4B,OAAOl5B,OAAOkJ,QAAQ,QAAUhJ,EAAKyS,OAAS,SAChD,sBAGA,WACM06B,EAAe1sC,QACjB0sC,EAAe1sC,MAAMA,MAAQ,GAC7B0sC,EAAe1sC,MAAMigC,QAEzB,qBAEAv4B,eAAkC2nC,GAChC,MACMrC,EADQqC,EAAMlsC,OACA6pC,MAEpB,GAAKA,GAA0B,IAAjBA,EAAMzqC,OAIpB,IAEE,MAAM+sC,EAAYtC,EAAM,GAElBuC,EADYD,EAAUE,mBAAmBhhC,MAAM,KACxB,IAAM,QAG7BihC,EAAcnM,OAAO,QAASiM,GACpC,IAAKE,IAAgBA,EAAYz9B,OAC/B,OAIF,MAAM09B,EAAsB,CAAC,QAAS,OAAQ,MAAO,MAAO,QAAS,QAAS,QAAS,OAAQ,OAGzFC,EAA8B,GAC9BC,EAAoC,GAE1C,QAAS5pC,EAAI,EAAGA,EAAIgnC,EAAMzqC,OAAQyD,IAAK,CACrC,MAAM0oC,EAAO1B,EAAMhnC,GACb6pC,EAAenB,EAAKc,mBAAmBhhC,MAAM,KAAKhM,MAAM,GAAG2M,KAAK,KAGtE,IAAK0gC,GAAgBA,EAAaztC,WAAW,MAAQytC,EAAanrC,SAAS,MACzE,SAIF,GACEmrC,EAAanrC,SAAS,kBACtBmrC,EAAanrC,SAAS,UACtBmrC,EAAanrC,SAAS,UACtBmrC,EAAanrC,SAAS,UAEtB,SAIF,MAAMorC,EAAY,IAAMD,EAAarhC,MAAM,KAAKkC,OAAOqX,cACvD,IAAK2nB,EAAoBhrC,SAASorC,GAChC,SAIF,MAAMC,EAAc,IAAIloC,QAAc,CAACmI,EAASggC,KAC9C,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,OAASpoC,IACd,MAAMkG,EAAUlG,EAAE5E,QAAQwE,OACpByoC,EAAWP,EAAarhC,MAAM,KAAKkC,OAASm/B,EAClDF,EAAalkC,KAAK,CAChBrF,KAAMypC,EACNtwC,KAAM6wC,EACNniC,QAASA,GAAW,KAEtB+B,KAEFigC,EAAOI,QAAU,IAAML,EAAO,IAAI5uC,MAAM,WAAWyuC,MACnDI,EAAOK,WAAW5B,KAGpBkB,EAAiBnkC,KAAKskC,EACxB,CAKA,SAFMloC,QAAQ+O,IAAIg5B,GAEU,IAAxBD,EAAaptC,OAEf,YADAg2B,OAAOl5B,OAAOm7B,QAAQ,0CAKxB,MAAM2U,EAAmB,CACvB31B,GAAIyB,KAAK+c,MAAMp2B,WACfrC,KAAMkwC,EAAYz9B,OAClBg7B,MAAO2C,GAGTrE,EAAStrC,MAAMyL,KAAK0jC,GACpB5D,EAAUvrC,MAAQmvC,EAAQ31B,GAC1BgyB,EAAYxrC,MAAQmvC,EAAQnC,MAAM,IAAI5mC,MAAQ,GAC9Cc,EAAKlH,MAAQmvC,EAAQnC,MAAM,IAAI/+B,SAAW,GAE1CggC,IACA/T,IAEA3B,OAAOl5B,OAAOkJ,QAAQ,UAAUknC,QAAkBE,EAAaptC,aACjE,OAASoD,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1B4yB,OAAOl5B,OAAOsG,MAAM,YAAeA,EAAgBC,QACrD,CACF,gBAEA,WACE,MAAMrG,EAAO+jC,OAAO,SACpB,IAAK/jC,IAASA,EAAKyS,OAAQ,OAE3B,MAAMu+B,EAAc,8JAKXhxC,EAAKyS,wHAKDzS,EAAKyS,sGAyGZm9B,EAAmB,CACvB31B,GAAIyB,KAAK+c,MAAMp2B,WACfrC,KAAMA,EAAKyS,OACXg7B,MAAO,CACL,CAAE5mC,KAAM,aAAc7G,KAAM,aAAc0O,QAASsiC,GACnD,CAAEnqC,KAAM,YAAa7G,KAAM,YAAa0O,QAvGzB,koBAwGf,CAAE7H,KAAM,YAAa7G,KAAM,YAAa0O,QAnE1B,q6CAuElBq9B,EAAStrC,MAAMyL,KAAK0jC,GACpBvX,QAAQC,IAAI,QAASsX,EAAQ5vC,KAAM,QAAS+rC,EAAStrC,MAAMuC,QAG3D0rC,IAEA1C,EAAUvrC,MAAQmvC,EAAQ31B,GAC1BgyB,EAAYxrC,MAAQ,aACpBkH,EAAKlH,MAAQuwC,EACbrW,IACA76B,OAAOkJ,QAAQ,OAAO4mC,EAAQ5vC,eAChC,gBAEA,SAAuBia,GACrB+xB,EAAUvrC,MAAQwZ,EAClB,MAAMszB,EAAOH,EAAe3sC,MACxB8sC,GAAQA,EAAKE,MAAMzqC,OAAS,GAC9BipC,EAAYxrC,MAAQ8sC,EAAKE,MAAM,GAAG5mC,KAClCc,EAAKlH,MAAQ8sC,EAAKE,MAAM,GAAG/+B,QAC3BisB,MAEAsR,EAAYxrC,MAAQ,GACpBkH,EAAKlH,MAAQ,GACbi3B,EAAYj3B,MAAQ,GAExB,aAEA,SAAoBoG,GAClBolC,EAAYxrC,MAAQoG,EACpB,MAAM0mC,EAAOH,EAAe3sC,MAC5B,GAAI8sC,EAAM,CACR,MAAM4B,EAAO5B,EAAKE,MAAMhI,KAAKtmB,GAAKA,EAAEtY,OAASA,GACzCsoC,IACFxnC,EAAKlH,MAAQ0uC,EAAKzgC,QAEtB,CACF,WAEA,WACE,MAAM6+B,EAAOH,EAAe3sC,MAC5B,IAAK8sC,IAAStB,EAAYxrC,MAExB,YADAX,OAAOsG,MAAM,YAIf,MAAM+oC,EAAO5B,EAAKE,MAAMhI,QAAUtmB,EAAEtY,OAASolC,EAAYxrC,OACrD0uC,IACFA,EAAKzgC,QAAU/G,EAAKlH,MAGhBwuC,IACFG,aAAaH,GACbA,EAAgB,MAGlBP,IACA/T,IACA76B,OAAOkJ,QAAQ,OAEnB,gBAEA,SAAuBiR,GACrB,MAAMszB,EAAOxB,EAAStrC,MAAMglC,KAAK3qB,GAAKA,EAAEb,KAAOA,GAC1CszB,GAEAhS,QAAQ,WAAWgS,EAAKvtC,cAE7B+rC,EAAStrC,MAAQsrC,EAAStrC,MAAMyO,OAAO4L,GAAKA,EAAEb,KAAOA,GACrDoe,QAAQC,IAAI,eAAgByT,EAAStrC,MAAMuC,QAEvCgpC,EAAUvrC,QAAUwZ,IACtB+xB,EAAUvrC,MAAQ,GAClBwrC,EAAYxrC,MAAQ,GACpBkH,EAAKlH,MAAQ,GACbi3B,EAAYj3B,MAAQ,IAItBiuC,IACA5uC,OAAOkJ,QAAQ,OAAOukC,EAAKvtC,aAC7B,kBAGA,WACE,MAAMutC,EAAOH,EAAe3sC,MAC5B,IAAK8sC,EAAM,OAEX,MAAM0D,EAAalN,OAAO,+BAAgC,IAC1D,IAAKkN,IAAeA,EAAWx+B,OAAQ,OAEvC,MAAMy+B,EAAcD,EAAWx+B,OAAO3M,QAAQ,MAAO,IAG/CqrC,EAAc,GAAGD,aAGvB,GAAI3D,EAAKE,MAAMhzB,KAAK0E,GAAKA,EAAEtY,KAAKhE,WAAW,GAAGquC,OAE5C,YADAlY,OAAOl5B,OAAOm7B,QAAQ,QAAQiW,gBAKhC,MAAME,EAAuB,CAC3BvqC,KAAMsqC,EACNnxC,KAAM,WACN0O,QAAS,oBAGX6+B,EAAKE,MAAMvhC,KAAKklC,GAChB1C,IAEA1V,OAAOl5B,OAAOkJ,QAAQ,QAAQkoC,SAChC,oBAGA,WACE,MAAM3D,EAAOH,EAAe3sC,MAC5B,IAAK8sC,EAAM,OAGX,MAAM8D,MAAcxwC,IACpBwwC,EAAQvwC,IAAI,IAEZysC,EAAKE,MAAMpI,QAAQ8J,IACjB,MAAMj6B,EAAQi6B,EAAKtoC,KAAKoI,MAAM,KAC9B,GAAIiG,EAAMlS,OAAS,EAEjB,QAASyD,EAAI,EAAGA,EAAIyO,EAAMlS,OAAQyD,IAAK,CACrC,MAAMwqC,EAAa/7B,EAAMjS,MAAM,EAAGwD,GAAGmJ,KAAK,KACtCqhC,GAAYI,EAAQvwC,IAAImwC,EAC9B,IAIJ,MAAMK,EAAaxsC,MAAM+V,KAAKw2B,GAASE,OAGjCC,EAAY,CAChB,CAAExxC,KAAM,UAAWyxC,IAAK,QAASpb,KAAM,MACvC,CAAEr2B,KAAM,SAAUyxC,IAAK,OAAQpb,KAAM,MACrC,CAAEr2B,KAAM,gBAAiByxC,IAAK,MAAOpb,KAAM,KAC3C,CAAEr2B,KAAM,gBAAiByxC,IAAK,MAAOpb,KAAM,MAC3C,CAAEr2B,KAAM,UAAWyxC,IAAK,QAASpb,KAAM,MACvC,CAAEr2B,KAAM,cAAeyxC,IAAK,MAAOpb,KAAM,MACzC,CAAEr2B,KAAM,OAAQyxC,IAAK,GAAIpb,KAAM,OAG3Bqb,EAAcF,EAAU1qC,IAAI,CAACsR,EAAG3R,IAAM,GAAGA,EAAI,MAAM2R,EAAEie,QAAQje,EAAEpY,SAASoY,EAAEq5B,KAAO,UAAU7hC,KAAK,MAChG+hC,EAAa5N,OAAO,kBAAkByN,EAAUxuC,eAAe0uC,IAAe,KAEpF,IAAKC,EAAY,OAEjB,MAAMC,EAAYC,SAASF,GAAc,EACzC,GAAIC,EAAY,GAAKA,GAAaJ,EAAUxuC,OAE1C,YADAg2B,OAAOl5B,OAAOsG,MAAM,SAItB,MAAM0rC,EAAeN,EAAUI,GAG/B,IAAIG,EAAe,GACnB,GAAIT,EAAWtuC,OAAS,EAAG,CACzB,MAAMgvC,EACJV,EAAWtuC,OAAS,EAChB,mBACA,sBAAsBsuC,EAAWxqC,IAAI,CAACqY,EAAG1Y,IAAM,GAAGA,EAAI,MAAM0Y,GAAK,SAASvP,KAAK,uBAE/EqiC,EAAelO,OAAOiO,EAAe,KAC3C,IAAKC,EAAc,OAGnB,MAAMC,EAAcL,SAASI,GAAgB,EAE3CF,EADEG,GAAe,GAAKA,EAAcZ,EAAWtuC,OAChCsuC,EAAWY,GAGXD,EAAax/B,OAAO3M,QAAQ,MAAO,GAEtD,CAGA,MAAM+qC,EAAW9M,OACf,SAAS+N,EAAaL,IAAM,UAAUK,EAAaL,OAAS,cAC5DK,EAAaL,IAAM,WAAa,eAGlC,IAAKZ,IAAaA,EAASp+B,OAAQ,OAEnC,IAAI0/B,EAActB,EAASp+B,OAGvBq/B,EAAaL,MAAQU,EAAYpvC,SAAS+uC,EAAaL,OACzDU,GAAeL,EAAaL,KAI9B,MAAMW,EAAWL,EAAe,GAAGA,KAAgBI,IAAgBA,EAGnE,GAAI5E,EAAKE,MAAMhzB,QAAU0E,EAAEtY,OAASurC,GAElC,YADApZ,OAAOl5B,OAAOsG,MAAM,OAAOgsC,WAK7B,MAAM7B,EAAY4B,EAAYljC,MAAM,KAAKkC,OAAOqX,cAChD,IAAI6pB,EAAiB,GAErB,OAAQ9B,GACN,IAAK,OACH8B,EACE,8JAMAF,EAAYrsC,QAAQ,QAAS,IAC7B,sLAYF,MACF,IAAK,MACL,IAAK,OACL,IAAK,OACHusC,EAAiB,MAAMF,2EACvB,MACF,IAAK,KACL,IAAK,KACHE,EACE,MAAMF,qBAA+BA,kDACvC,MACF,IAAK,OACHE,EAAiB,iBAAiBF,EAAYrsC,QAAQ,QAAS,iCAC/D,MACF,IAAK,KACHusC,EAAiB,KAAKF,EAAYrsC,QAAQ,QAAS,UACnD,MACF,QACEusC,EAAiB,GAIrB,MAAMjB,EAAuB,CAC3BvqC,KAAMurC,EACNpyC,KAAMmyC,EACNzjC,QAAS2jC,GAGX9E,EAAKE,MAAMvhC,KAAKklC,GAChBnF,EAAYxrC,MAAQ2xC,EACpBzqC,EAAKlH,MAAQ4xC,EAEb3D,IACA/T,IAEA3B,OAAOl5B,OAAOkJ,QAAQ,OAAOopC,SAC/B,aAGA,SAAoBE,GAClB,MAAM/E,EAAOH,EAAe3sC,MAC5B,IAAK8sC,EAAM,OAEX,MAAM4B,EAAO5B,EAAKE,MAAMhI,KAAKtmB,GAAKA,EAAEtY,OAASyrC,GACxCnD,GAEA5T,QAAQ,WAAW4T,EAAKtoC,cAE7B0mC,EAAKE,MAAQF,EAAKE,MAAMv+B,OAAOiQ,GAAKA,EAAEtY,OAASyrC,GAG3CrG,EAAYxrC,QAAU6xC,IACpB/E,EAAKE,MAAMzqC,OAAS,GACtBipC,EAAYxrC,MAAQ8sC,EAAKE,MAAM,GAAG5mC,KAClCc,EAAKlH,MAAQ8sC,EAAKE,MAAM,GAAG/+B,UAE3Bu9B,EAAYxrC,MAAQ,GACpBkH,EAAKlH,MAAQ,KAIjBiuC,IACA/T,IAEA3B,OAAOl5B,OAAOkJ,QAAQ,OAAOmmC,EAAKtoC,aACpC,cAEA,SAAqBA,GACnB,MAAM4qC,EAAM5qC,EAAKoI,MAAM,KAAKkC,OAAOqX,cACnC,MAAY,SAARipB,EAAuB,qBACf,QAARA,EAAsB,wBACd,OAARA,EAAqB,kBAClB,uBACT,uMAkNA,WACEvF,EAAOzrC,OAAQ,EACf0rC,EAAS1rC,MAAQ,EACnB,mCAQA,WACEssC,EAAWtsC,OAAQ,EACnBusC,EAAevsC,MAAQ,GACvBwsC,EAAaxsC,MAAQ,GACrBysC,EAAQzsC,MAAQ,EAClB,oBAEA,WACEssC,EAAWtsC,OAAQ,EACnBusC,EAAevsC,MAAQ,GACvBwsC,EAAaxsC,MAAQ,GACrBysC,EAAQzsC,MAAQ,EAClB,eAEA0H,iBACE,MAAMolC,EAAOH,EAAe3sC,MAC5B,IAAK8sC,EAEH,YADAvU,OAAOl5B,OAAOsG,MAAM,UAItB,IAAK4mC,EAAevsC,MAAMgS,OAExB,YADAumB,OAAOl5B,OAAOsG,MAAM,SAItBgmC,EAAa3rC,OAAQ,EACrBmsC,EAAansC,OAAQ,EACrB,IAAI8xC,EAAqB,GAGzB,MAAM9W,EAAS5E,EAAU6E,WAAW,YAAa,cAAcsR,EAAevsC,MAAMwC,MAAM,EAAG,UAE7F,IAEE4pC,EAAkBpsC,OAAOwqC,YAAY,GACrC4B,EAAkBpsC,OAAO0qC,WAAW,oBACpCtU,EAAUgF,mBAAmBJ,EAAQ,EAAG,0BAClC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAIrC,IADiB8oB,IAEf,MAAM,IAAIj4B,MAAM,aAIlB,MAAM80B,EAAWD,IAAmBC,SAC9B6b,EAAc7b,EAASmF,aACvB2W,EAAS9b,EAASoF,QAClBC,EAAQrF,EAASqF,OAAS,cAEhC,IAAKwW,IAAgBC,EACnB,MAAM,IAAI5wC,MAAM,oBAGlB0wC,EAAqB1J,EAAqB2J,GAE1C3F,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,qBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,2BACnC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAGrC,MAAMirB,EAAe,gmBA6CfC,EAAa,cAFEqR,EAAKE,MAAM3mC,IAAIqY,GAAK,OAAOA,EAAEtY,aAAasY,EAAEzQ,WAAWkB,KAAK,yBAMnFo9B,EAAevsC,YAGfwsC,EAAaxsC,MAAMgS,OACf,4BAEJw6B,EAAaxsC,kBAGT,SAIJysC,EAAQzsC,MACJ,eACJysC,EAAQzsC,UAEJ,wHAWFosC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,qBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,2BACnC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAGrC67B,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,mBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,yBACnC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAErC,MAAMisB,QAAiBC,MAAMqV,EAAoB,CAC/CpV,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAUoV,KAE3BnV,KAAM94B,KAAKC,UAAU,CACnBu3B,QACAU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,YAAa,OAIjB,IAAKK,EAASM,GAAI,CAChB,MAAMmV,QAAkBzV,EAAS8H,OACjC,MAAM,IAAIljC,MAAM,aAAao7B,EAASO,YAAYkV,IACpD,CAEA7F,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,mBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,yBACnC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAErC,MAAMnM,QAAao4B,EAASS,OACtBiV,EAAa9tC,EAAK+4B,UAAU,IAAIv3B,SAASqI,SAAW,GAE1D,IAAKikC,EACH,MAAM,IAAI9wC,MAAM,cAGlBgrC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,qBACnC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAGrC,MAAM4hC,EAAY,gDACZC,EAAsB,GAC5B,IAAI1J,EAEJ,KAAgD,QAAxCA,EAAQyJ,EAAUE,KAAKH,KAAuB,CACpD,MAAM9rC,EAAOsiC,EAAM,GAAG12B,OAChBk7B,EAAaxE,EAAM,GAAG12B,OACtBsgC,EAAexF,EAAKE,MAAMhI,KAAKtmB,GAAKA,EAAEtY,OAASA,GAEjDksC,GACFF,EAAQ3mC,KAAK,CACXrF,OACA+mC,WAAYmF,EAAarkC,QACzBi/B,cAGN,CAEA,GAAuB,IAAnBkF,EAAQ7vC,OACV,MAAM,IAAInB,MAAM,iBAGlBgrC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,qBACnC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAGhC27B,EAAUlsC,MAAM8sC,EAAKtzB,MACxB0yB,EAAUlsC,MAAM8sC,EAAKtzB,IAAM,IAE7B0yB,EAAUlsC,MAAM8sC,EAAKtzB,IAAIjT,QAAQ,CAC/BgsC,WAAA,IAAet3B,MAAOu3B,cACtBlP,OAAQ,WAAWiJ,EAAevsC,QAClCoyC,QAAS/X,EAAM+X,KAIjBrG,EAAU/rC,MAAQoyC,EAClBtG,EAAe9rC,OAAQ,EACvBgsC,EAAYhsC,MAAQ,QAEpBosC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,gBAAgB0H,EAAQ7vC,eAC5D6zB,EAAUgF,mBAAmBJ,EAAQ,GAAI,gBAAgBoX,EAAQ7vC,qBAC3D,IAAIsF,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAGrC67B,EAAkBpsC,OAAOwqC,YAAY,KACrC4B,EAAkBpsC,OAAO0qC,WAAW,gBACpCtU,EAAUgF,mBAAmBJ,EAAQ,IAAK,gBAC1C5E,EAAUkH,aAAatC,EAAQ,CAAEyX,aAAcL,EAAQ7vC,SACvDg7B,WAAW,KACT4O,EAAansC,OAAQ,EACrBssC,EAAWtsC,OAAQ,EACnBu4B,OAAOl5B,OAAOkJ,QAAQ,yBACrB,IACL,OAAS5C,GACPiyB,QAAQjyB,MAAM,YAAaA,GAC3B,MAAM63B,EAAW73B,GAAOC,SAAWgL,OAAOjL,GAC1C4yB,OAAOl5B,OAAOsG,MAAM,aAAa63B,KACjCpH,EAAU+E,SAASH,EAAQwC,GAC3B2O,EAAansC,OAAQ,CACvB,SACE2rC,EAAa3rC,OAAQ,CACvB,CACF,iBAEA0H,iBACE,IAAKgkC,EAAS1rC,MAAMgS,QAAU25B,EAAa3rC,MAAO,OAElD,MAAM8sC,EAAOH,EAAe3sC,MAC5B,IAAK8sC,EAEH,YADAztC,OAAOsG,MAAM,YAKf,MACM29B,EAASoI,EAAS1rC,MAAMgS,OAM9B,GAPqB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAE7BgI,KAAK04B,GAClB,IAAI1oC,OAAO,IAAI0oC,qBAA2B,KAC3C1lC,KAAKs2B,IAalB,YATAjkC,OAAOm7B,QACL,qFAKA,SACA,CAAE6C,QAAS,MAKfsO,EAAa3rC,OAAQ,EACrBmsC,EAAansC,OAAQ,EACrB,IAAI8xC,EAAqB,GAGzB,MAAM9W,EAAS5E,EAAU6E,WAAW,cAAe,aAAayQ,EAAS1rC,MAAMwC,MAAM,EAAG,UAExF,IAEE4pC,EAAkBpsC,OAAOwqC,YAAY,GACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpCtU,EAAUgF,mBAAmBJ,EAAQ,EAAG,uBAClC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAGrC,IADiB8oB,IAKf,OAHAh6B,OAAOsG,MAAM,aACbgmC,EAAa3rC,OAAQ,OACrBmsC,EAAansC,OAAQ,GAKvB,MAAMk2B,EAAWD,IAAmBC,SAC9B6b,EAAc7b,EAASmF,aACvB2W,EAAS9b,EAASoF,QAClBC,EAAQrF,EAASqF,OAAS,cAC1BY,EAAcjG,EAASiG,aAAe,GACtCwW,EAAYzc,EAASkG,YAAc,IAEzC,IAAK2V,IAAgBC,EAInB,OAHA3yC,OAAOsG,MAAM,oBACbgmC,EAAa3rC,OAAQ,OACrBmsC,EAAansC,OAAQ,GAKvB,IACE8xC,EAAqB1J,EAAqB2J,GAC1Cna,QAAQC,IAAI,WAAYka,GACxBna,QAAQC,IAAI,cAAeia,EAC7B,OAAS/pC,GAIP,OAHA1I,OAAOsG,MAAM,eAAkBoC,EAAYnC,SAC3C+lC,EAAa3rC,OAAQ,OACrBmsC,EAAansC,OAAQ,EAEvB,CAGI2yC,EAAY,KACdtzC,OAAOm7B,QAAQ,qBAAqBmY,oCAGtCvG,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,cACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,oBACnC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAErC,MAAMirB,EAAe,8DAGvBsR,EAAKE,MAAM3mC,IAAIqY,GAAK,KAAKA,EAAEtY,QAAQ+I,KAAK,msmEAg2EhCssB,EAAa,cADEqR,EAAKE,MAAM3mC,IAAIqY,GAAK,OAAOA,EAAEtY,aAAasY,EAAEzQ,WAAWkB,KAAK,uBAKnFu8B,EAAS1rC,sNAWP6rC,EAAc7rC,MAAQ,GACtB,IAAIkyC,EAAa,GAOjB,GALA9F,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,qBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,2BACnC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAEjCq7B,EAAa5rC,MAAO,CAEtBosC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,uBACnC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAErC,MAAMisB,QAAiBC,MAAMqV,EAAoB,CAC/CpV,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAUoV,KAE3BnV,KAAM94B,KAAKC,UAAU,CACnBu3B,QACAU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,cACAC,WAAYuW,EACZC,QAAQ,MAIZ,IAAKpW,EAASM,GAAI,CAChB,IAAIU,EAAW,aAAahB,EAASO,UAAUP,EAASQ,aACxD,IACE,MAAMuL,QAAkB/L,EAASS,OACjCrF,QAAQjyB,MAAM,YAAa4iC,GAC3B/K,GAAY,KAAKz5B,KAAKC,UAAUukC,EAAW,KAAM,IACnD,OAASxgC,GACP6vB,QAAQjyB,MAAM,WAChB,CACA,MAAM,IAAIvE,MAAMo8B,EAClB,CAGA,MAAMyS,EAASzT,EAASK,MAAMgW,YACxBC,EAAU,IAAIC,YAEpB,IAAK9C,EACH,MAAM,IAAI7uC,MAAM,WAGlB,IAAI4xC,EAAa,EACjB,OAAa,CACX,MAAMC,KAAEA,EAAAjzC,MAAMA,SAAgBiwC,EAAOiD,OACrC,GAAID,EAAM,MAEV,MACM1kC,EADQukC,EAAQ/wB,OAAO/hB,EAAO,CAAE4yC,QAAQ,IAC1BpkC,MAAM,MAE1B,UAAWQ,KAAQT,EACjB,GAAIS,EAAK5M,WAAW,UAAW,CAC7B,MAAMgC,EAAO4K,EAAKxM,MAAM,GACxB,GAAa,WAAT4B,EAAmB,SAEvB,IACE,MAAM64B,EAAOl5B,KAAK2L,MAAMtL,GAClB6J,EAAUgvB,EAAKE,UAAU,IAAIgW,OAAOllC,SAAW,GACrD,GAAIA,EAAS,CACXikC,GAAcjkC,EACd49B,EAAc7rC,OAASiO,EACvB+kC,IAGA,MAAMvf,EAAW9kB,KAAKC,IAAI,GAAI,GAAKokC,EAAa,IAChD5G,EAAkBpsC,OAAOwqC,YAAY/W,GAGjCuf,EAAa,IAAO,GACtB5G,EAAkBpsC,OAAO0qC,WAAW,kBAAkBwH,EAAW3vC,aAErE,CACF,OAASwF,GAET,CACF,CAEJ,CACF,KAAO,CAELqkC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,qBACnC,IAAInzB,QAAQ0I,GAAKgtB,WAAWhtB,EAAG,MAErC,MAAMisB,QAAiBC,MAAMqV,EAAoB,CAC/CpV,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAUoV,KAE3BnV,KAAM94B,KAAKC,UAAU,CACnBu3B,QACAU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,cACAC,WAAYuW,MAIhB,IAAKnW,EAASM,GAAI,CAChB,IAAIU,EAAW,aAAahB,EAASO,UAAUP,EAASQ,aACxD,IACE,MAAMuL,QAAkB/L,EAASS,OACjCrF,QAAQjyB,MAAM,YAAa4iC,GAC3B/K,GAAY,KAAKz5B,KAAKC,UAAUukC,EAAW,KAAM,IACnD,OAASxgC,GACP6vB,QAAQjyB,MAAM,WAChB,CACA,MAAM,IAAIvE,MAAMo8B,EAClB,CAEA4O,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,iBAEzC,MAAM52B,QAAao4B,EAASS,OAC5BiV,EAAa9tC,EAAK+4B,UAAU,IAAIv3B,SAASqI,SAAW,EACtD,CASA,GAPAm+B,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,oBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,oBAEzCpD,QAAQC,IAAI,WAAYqa,GACxBta,QAAQC,IAAI,WAAYqa,EAAW3vC,SAE9B2vC,GAA2C,IAA7BA,EAAWlgC,OAAOzP,OACnC,MAAM,IAAInB,MAAM,2BAIlB,MAAMgxC,EAAsB,GAEtBD,EAAY,iDAClB,IAAIzJ,EAEJ9Q,QAAQC,IAAI,mBAGZ,MAAMub,EAAoBlB,EAAWxJ,MAAM,6DAC3C,GAAI0K,EAAmB,CACrB,MAAMC,EAAeD,EAAkB,GAAGphC,OAc1C,OAbA4lB,QAAQC,IAAI,uBAGZgX,IAGAxvC,OAAO8pC,KAAK,YAAa,GAAI,CAAE9L,QAAS,MAGxCiW,MAAMD,QAGN1H,EAAa3rC,OAAQ,EAEvB,CAEA,KAAgD,QAAxC0oC,EAAQyJ,EAAUE,KAAKH,KAAuB,CACpD,MAAM9rC,EAAOsiC,EAAM,GAAG12B,OAChB/D,EAAUy6B,EAAM,GAAG12B,OAEzB4lB,QAAQC,IAAI,SAASzxB,YAAe6H,EAAQ1L,UAE5C,MAAMmsC,EAAO5B,EAAKE,MAAMhI,KAAKtmB,GAAKA,EAAEtY,OAASA,GACzCsoC,EACF0D,EAAQ3mC,KAAK,CACXrF,OACA+mC,WAAYuB,EAAKzgC,QACjBi/B,WAAYj/B,IAGd2pB,QAAQoC,KAAK,MAAM5zB,gBAEvB,CAEA,GAAuB,IAAnBgsC,EAAQ7vC,OAAc,CAKxB,GAJAq1B,QAAQjyB,MAAM,qBACdiyB,QAAQjyB,MAAM,aAAcusC,EAAWhU,UAAU,EAAG,MAGhDgU,EAAW3vC,OAAS,MAAQ2vC,EAAWxtC,SAAS,YAClD,MAAM,IAAItD,MACR,gBAAgB8wC,EAAW3vC,qDAI/B,MAAM,IAAInB,MAAM,2DAClB,CAEAw2B,QAAQC,IAAI,UAAWua,EAAQ7vC,OAAQ,OAEvC6pC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,eAGlB,IAAnBoX,EAAQ7vC,QAAoC,eAApB6vC,EAAQ,GAAGhsC,MACrC/G,OAAOm7B,QAAQ,sCAIA0X,EAAWlgC,OAAOxD,MAAM,cAAckC,OAAS,IAClDhM,SAAS,aACrBrF,OAAOsG,MAAM,wBAGf,MAAMgC,EAAS,CAAEyqC,WAEjB,IAAKzqC,EAAOyqC,UAAY/tC,MAAMC,QAAQqD,EAAOyqC,SAC3C,MAAM,IAAIhxC,MAAM,aAIlB2qC,EAAU/rC,MAAQ2H,EAAOyqC,QAEzBhG,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,cAAc0H,EAAQ7vC,eAC1D6zB,EAAUgF,mBAAmBJ,EAAQ,GAAI,cAAcoX,EAAQ7vC,eAE/DssC,IACA/C,EAAe9rC,OAAQ,EACvBgsC,EAAYhsC,MAAQ,QAGpBosC,EAAkBpsC,OAAOwqC,YAAY,KACrC4B,EAAkBpsC,OAAO0qC,WAAW,cACpCtU,EAAUgF,mBAAmBJ,EAAQ,IAAK,cAC1C5E,EAAUkH,aAAatC,EAAQ,CAAEyX,aAAcL,EAAQ7vC,SAEvDg7B,WAAW,KACT4O,EAAansC,OAAQ,EACrBX,OAAOkJ,QAAQ,iBAAiB6pC,EAAQ7vC,eACvC,IACL,OAASoD,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1B,MAAM2iC,EAAe3iC,EAAMC,SAAWgL,OAAOjL,GAC7CywB,EAAU+E,SAASH,EAAQsN,GAC3B6D,EAAansC,OAAQ,EAInBsoC,EAAa5jC,SAAS,SACtB4jC,EAAa5jC,SAAS,oBACtB4jC,EAAa5jC,SAAS,+BAEtBrF,OAAOsG,MACL,qCACgB,IAAIuM,IAAI4/B,GAAoB9lC,iGAMrCs8B,EAAa5jC,SAAS,QAAU4jC,EAAa5jC,SAAS,sBAC/DrF,OAAOsG,MACL,sBACQmsC,qDAKVzyC,OAAOsG,MAAM,YAAY2iC,IAE7B,SACEqD,EAAa3rC,OAAQ,CACvB,CACF,gBAEA,WACE,MAAM8sC,EAAOH,EAAe3sC,MAC5B,IAAK8sC,EAAM,OAGX,MAAMyG,EAAiC,CACrChB,WAAA,IAAet3B,MAAOu3B,cACtBlP,OAAQoI,EAAS1rC,MACjBoyC,QAASrG,EAAU/rC,OAsBrB,GAnBKksC,EAAUlsC,MAAMurC,EAAUvrC,SAC7BksC,EAAUlsC,MAAMurC,EAAUvrC,OAAS,IAErCksC,EAAUlsC,MAAMurC,EAAUvrC,OAAOuG,QAAQgtC,GACzC3b,QAAQC,IAAI,sBAAuBqU,EAAUlsC,MAAMurC,EAAUvrC,OAAOuC,QAGpEwpC,EAAU/rC,MAAM4kC,QAAQqI,IACtB,MAAMyB,EAAO5B,EAAKE,MAAMhI,QAAUtmB,EAAEtY,OAAS6mC,EAAO7mC,MAChDsoC,IACFA,EAAKzgC,QAAUg/B,EAAOC,cAK1Be,IACA/T,IAGIsR,EAAYxrC,MAAO,CACrB,MAAM0uC,EAAO5B,EAAKE,MAAMhI,QAAUtmB,EAAEtY,OAASolC,EAAYxrC,OACrD0uC,IACFxnC,EAAKlH,MAAQ0uC,EAAKzgC,QAEtB,CAEA69B,EAAe9rC,OAAQ,EACvB+rC,EAAU/rC,MAAQ,GAClBX,OAAOkJ,QAAQ,QACjB,gBAEA,WACEujC,EAAe9rC,OAAQ,EACvB+rC,EAAU/rC,MAAQ,GAClBX,OAAO8pC,KAAK,QACd,oBAEA,WACE8C,EAAYjsC,OAAQ,CACtB,sCAMA,SAAwBwzC,GACtB,IAAK1Y,QAAQ,sBAAsB0Y,EAAOlQ,yBACxC,OAGF,MAAMwJ,EAAOH,EAAe3sC,MAC5B,GAAK8sC,EAAL,CAiBA,GAdA0G,EAAOpB,QAAQxN,QAAQqI,IACrB,MAAMyB,EAAO5B,EAAKE,MAAMhI,QAAUtmB,EAAEtY,OAAS6mC,EAAO7mC,MAChDsoC,IACFA,EAAKzgC,QAAUg/B,EAAOC,cAI1BtV,QAAQC,IAAI,UAAW2b,EAAOlQ,QAG9B2K,IACA/T,IAGIsR,EAAYxrC,MAAO,CACrB,MAAM0uC,EAAO5B,EAAKE,MAAMhI,QAAUtmB,EAAEtY,OAASolC,EAAYxrC,OACrD0uC,IACFxnC,EAAKlH,MAAQ0uC,EAAKzgC,QAEtB,CAEA6gC,IACAzvC,OAAOkJ,QAAQ,WAzBJ,CA0Bb,gBAEA,WACE,MAAMukC,EAAOH,EAAe3sC,MAC5B,IAAK8sC,EAEH,YADAztC,OAAOsG,MAAM,YAKf,MAAM8tC,EAAU3G,EAAKE,MAAMhI,QAAUtmB,EAAEnf,OAASisC,EAAYxrC,OAC5D,GAAIyzC,GAAWvsC,EAAKlH,QAAUyzC,EAAQxlC,QAAS,CAE7C,IADuB6sB,QAAQ,8CAE7B,MAEJ,CAGA,MAAM4Y,EAAcpQ,OAClB,UAAUwJ,EAAKvtC,4CACf,IAAIutC,EAAKvtC,SAEX,GAAKm0C,EAKL,IAEE,MAAMC,EAAW5G,EAAsBD,EAAKE,OAGtCljC,EAAO,uCAAuCzE,QAAQ,QAAS,SAAU8P,GAC7E,MAAM5E,EAAqB,GAAhB5B,KAAK84B,SAAiB,EAEjC,OADgB,MAANtyB,EAAY5E,EAAS,EAAJA,EAAW,GAC7B3O,SAAS,GACpB,GAMA,IAAIgyC,EAAYD,EAAStuC,QAAQ,MAAO,IACxCuuC,EAAYA,EAAUvuC,QAAQ,qBAAsB,IAEpD,MAAMwuC,EAAY,CAChBr6B,GAAI1P,EACJg1B,WAAYgO,EAAKvtC,KACjBy/B,UAAW0U,EAAYtxC,WAAW,KAAOsxC,EAAc,IAAIA,MAC3DzU,cAAe,cAAgB2U,EAAY,QAC3C1U,YAAa,GACbC,UAAW,CAAC,EAAG,GACfxK,UAAU,EACV4K,cAAc,EACdC,YAAY,EACZT,WAAW,EACXK,gBAAiB,EACjBC,SAAU,KACVC,SAAU,MAINwU,EAAU/vC,KAAKC,UAAU6vC,EAAW,KAAM,GAC1CE,EAAW,IAAIpU,KAAK,CAACmU,GAAU,CAAEl8B,KAAM,qBACvC3F,EAAMC,IAAI0tB,gBAAgBmU,GAE1BlU,EAAOrB,SAASsB,cAAc,KACpCD,EAAKttB,KAAON,EACZ4tB,EAAKE,SAAW,GAAG+M,EAAKvtC,kBACxBi/B,SAAS3B,KAAKmD,YAAYH,GAC1BA,EAAKI,QACLzB,SAAS3B,KAAKqD,YAAYL,GAC1B3tB,IAAIiuB,gBAAgBluB,GAEpB2lB,QAAQC,IAAI,cAAegc,GAC3Bx0C,OAAOkJ,QAAQ,OAAOukC,EAAKvtC,oBAC7B,OAASoG,GACPiyB,QAAQjyB,MAAM,QAASA,GACvBtG,OAAOsG,MAAM,SAASA,EAAMC,UAC9B,MAxDEvG,OAAO8pC,KAAK,QAyDhB,kBAEA,WACE,IAAKlS,EAAYj3B,MAEf,YADAX,OAAOsG,MAAM,YAIf,MAAMmnC,EAAOH,EAAe3sC,MACtBq+B,EAAcyO,EAAOA,EAAKvtC,KAAO,KAGjC++B,EAAY/F,OAAOgG,KAAK,GAAI,SAAU,qEAExCD,GACFA,EAAUE,SAASpwB,MAAM6oB,EAAYj3B,OACrCs+B,EAAUE,SAASC,QACnBH,EAAUE,SAASxL,MAAQqL,EAC3Bh/B,OAAOkJ,QAAQ,cAEflJ,OAAOsG,MAAM,qBAEjB,qGA/jMOitB,GAAA,CAAAC,MAAM,mBAGPA,MAAM,iBACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,YAAAC,WAAA,uFAAAC,OAAA,mEA6BKkB,MAAM,yBAAyBvB,MAAA,CAAAM,QAAA,OAAAI,IAAA,aAyJjCV,MAAA,CAAAM,QAAA,iDAAAI,IAAA,kCAGDV,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAE,OAAA,oBAAAC,QAAA,6CAUkCN,MAAA,uBAAAC,MAAA,0BAAAE,QAAA,+DAuB1BH,MAAA,oBAAAsD,KAAA,+BAsCNtD,MAAA,iFAEKA,MAAA,CAAAM,QAAA,6FAEEN,MAAA,CAAAM,QAAA,OAAAI,IAAA,wEA4GTV,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAE,OAAA,oBAAAC,QAAA,6CAWEN,MAAA,CAAAsD,KAAA,IAAAhD,QAAA,yDAAAL,MAAA,sCAMAD,MAAA,CAAAsD,KAAA,IAAAhD,QAAA,yDAAAL,MAAA,sCAIUD,MAAA,CAAAM,QAAA,iCAAAE,OAAA,aACLR,MAAA,wBAAAM,QAAA,sEACEN,MAAA,CAAAM,QAAA,8BAAAI,IAAA,YAEGV,MAAA,CAAAC,MAAA,oDAEHD,MAAA,CAAAM,QAAA,8BAAAI,IAAA,gCAiDTV,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAE,OAAA,oBAAAC,QAAA,uCASKN,MAAA,CAAAM,QAAA,6FAKEN,MAAA,CAAAM,QAAA,OAAAI,IAAA,YA2BLV,MAAA,CAAAsD,KAAA,IAAAlD,WAAA,gCAAAK,SAAA,OAAAtkB,SAAA,0DAiBE6jB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,MAAA9X,KAAA,MAAA0B,UAAA,wBAAAmV,MAAA,sDAkCJD,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAI,MAAA,0BAAAF,OAAA,wEAyBKL,MAAA,8BAuCEA,MAAA,2BAKEA,MAAA,CAAAM,QAAA,0BAAAI,IAAA,2BA0BPV,MAAA,CAAAM,QAAA,8BAAAI,IAAA,8BAAAP,QAAA,OAAAC,WAAA,sCAWEJ,MAAA,CAAAM,QAAA,8BAAAI,IAAA,MAAA6C,OAAA,UAAAtD,MAAA,2DAoBFD,MAAA,wBAAAG,QAAA,OAAAC,WAAA,UAAAC,OAAA,8IAAAJ,MAAA,6DAmBGD,MAAA,CAAAM,QAAA,OAAAI,IAAA,gEAqCuBa,MAAM,kCAAkCvB,MAAA,kCACtDuB,MAAM,8BAA8BvB,MAAA,4BAyBlDA,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAI,MAAA,0BAAAF,OAAA,wEA0BKL,MAAA,8BAyBAA,MAAA,8BA0BAA,MAAA,8BA2CAA,MAAA,CAAAM,QAAA,OAAAI,IAAA,gEAqCuBa,MAAM,qBAAqBvB,MAAA,kCACzCuB,MAAM,8BAA8BvB,MAAA,kCAUpDA,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,2EAAAH,QAAA,aAeEH,MAAA,CAAAI,WAAA,iCAAAG,MAAA,MAAAC,OAAA,MAAAH,OAAA,kEAAAC,QAAA,uCAaEN,MAAA,CAAAG,QAAA,gDAAAG,QAAA,sEAsBKN,MAAA,CAAAM,QAAA,OAAAI,IAAA,aA2CLV,MAAA,CAAAsD,KAAA,IAAAhD,QAAA,+CAAAI,IAAA,OAAAP,QAAA,OAAAM,SAAA,eAUKT,MAAA,CAAAM,QAAA,iCAAAF,WAAA,gCAAAK,SAAA,eAOET,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,aAGCH,MAAA,CAAAC,MAAA,uEAAAK,QAAA,8BAAAI,IAAA,YAcAV,MAAA,CAAAE,OAAA,IAAAC,QAAA,OAAAC,WAAA,gCAAAH,MAAA,yHAAAI,OAAA,0BAmBHL,MAAA,CAAAM,QAAA,iCAAAF,WAAA,gCAAAK,SAAA,eAOET,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,aAGCH,MAAA,CAAAC,MAAA,uEAAAK,QAAA,8BAAAI,IAAA,YAcAV,MAAA,CAAAE,OAAA,IAAAC,QAAA,OAAAC,WAAA,gCAAAH,MAAA,yHAAAI,OAAA,0BAmBHL,MAAA,CAAAM,QAAA,iCAAAF,WAAA,gCAAAK,SAAA,eAEDT,MAAA,CAAAG,QAAA,YAAAC,WAAA,8CAAAE,QAAA,sEAaKN,MAAA,CAAAM,QAAA,OAAAI,IAAA,YAiCFV,MAAA,CAAAsD,KAAA,IAAAlD,WAAA,QAAAK,SAAA,6BA+BTT,MAAA,CAAAI,WAAA,iCAAAG,MAAA,6CAAAF,OAAA,kEAAAC,QAAA,uCAaEN,MAAA,CAAAG,QAAA,gDAAAG,QAAA,sEAwCGN,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,mBAC4CH,MAAA,uBAAAC,MAAA,OAAAE,QAAA,kBAexCH,MAAA,CAAAM,QAAA,4FAEIN,MAAA,CAAAC,MAAA,0EAGAD,MAAA,CAAAC,MAAA,+CAwBJD,MAAA,CAAAC,MAAA,oDAEED,MAAA,oBAAAM,QAAA,0BAAAI,IAAA,YA2CXV,MAAA,CAAAI,WAAA,qDAAAG,MAAA,6FAAAF,OAAA,uBAaEL,MAAA,CAAAG,QAAA,gDAAAG,QAAA,sEAqEGN,MAAA,CAAAG,QAAA,aACEH,MAAA,CAAAM,QAAA,sEAAAI,IAAA,wDAl4Cb,OAAAE,IAAAC,EA+iDM,MA/iDNS,GA+iDM,CA7iDJF,EA0KM,MA1KNO,GA0KM,CAAAN,EAAA,MAAAA,EAAA,IA3JJD,EAeK,MAdHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,yDAAAK,QAAA,8BAAAI,IAAA,+EAUC,CAEDU,EAA+E,KAA5EG,MAAM,0BAA0BvB,MAAA,CAAAC,MAAA,kCAA4C,eAEjF,IACAmB,EA0IM,MA1INW,GA0IM,CAxIIf,iBADRH,EAmBS,UAAAvvB,IAAA,EAjBP0uB,MAAA,CAAAG,QAAA,WAAAC,WAAA,OAAAC,OAAA,6BAAAJ,MAAA,iDAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAOE,EAAA0hB,cACP3T,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,QACzD6O,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,aAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAA8D,KAA3DG,MAAM,uBAAuBvB,MAAA,mCAA8B,WAEhE,WAAAgC,EAAA,OAEQhB,EAAAiZ,WAAArZ,IADRC,EAmBS,UAAAvvB,IAAA,EAjBP0uB,MAAA,CAAAG,QAAA,WAAAC,WAAA,OAAAC,OAAA,6BAAAJ,MAAA,iDAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAOE,EAAA2hB,kBACP5T,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,QACzD6O,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,aAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAA6D,KAA1DG,MAAM,sBAAsBvB,MAAA,mCAA8B,UAE/D,WAAAgC,EAAA,OAEQhB,EAAAiZ,WAAArZ,IADRC,EAmBS,UAAAvvB,IAAA,EAjBP0uB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAOE,EAAA4hB,aACP7T,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,gBAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAAyE,KAAtEG,MAAM,kCAAkCvB,MAAA,mCAA8B,aAE3E,WAAAgC,EAAA,OAEQhB,EAAAiZ,WAAArZ,IADRC,EAmBS,UAAAvvB,IAAA,EAjBP0uB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAOE,EAAA6hB,iBACP9T,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,gBAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAAyD,KAAtDG,MAAM,kBAAkBvB,MAAA,mCAA8B,YAE3D,WAAAgC,EAAA,OACAZ,EAkBS,UAjBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,OAAAC,OAAA,6BAAAJ,MAAA,iDAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAOE,EAAA8hB,0BACP/T,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,QACzD6O,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,aAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAAgE,KAA7DG,MAAM,yBAAyBvB,MAAA,mCAA8B,UAElE,UACAoB,EAkBS,UAjBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,OAAAC,OAAA,6BAAAJ,MAAA,iDAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAOE,EAAA+hB,oBACPhU,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,QACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,aAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAAiE,KAA9DG,MAAM,0BAA0BvB,MAAA,mCAA8B,WAEnE,UACAoB,EAkBS,UAjBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAOE,EAAAgiB,cACPjU,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,gBAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,mCAA8B,UAE5D,cAKJoB,EAQE,SAPA1B,IAAI,iBACJpZ,KAAK,OACL28B,gBAAA,GACAC,UAAA,GACAC,SAAA,GACAnjB,MAAA,CAAAM,QAAA,QACC8iB,SAAQpiB,EAAAqiB,oBAAA,UAIXjiB,EA8UM,MA9UNa,GA8UM,CA5UJb,EAoLM,MApLNgB,GAoLM,CAAAf,EAAA,MAAAA,EAAA,IA1KJD,EAAwF,MAApFpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,gDAA2E,QAAI,IACzD,IAAfe,EAAAgZ,SAAS/oC,QAAM2vB,IAA1BC,EAGM,MAHNwB,GAGM,IAAAhB,EAAA,MAAAA,EAAA,KAAAG,EAHyG,YACzGJ,EAAM,mBAAAI,EAAA,gBAEZ,QAAAQ,EAAA,cACAnB,EAoDMkD,EAAA,KAAAC,EAnDWhD,EAAAgZ,SAARwB,QADT3a,EAoDM,OAlDHvvB,IAAKkqC,EAAKtzB,GACV8X,MAAK6C,EAAA,CAAA1C,QAAA,+BAA+FC,WAAAY,EAAAiZ,YAAcuB,EAAKtzB,GAAE,oBAAAo7B,aAAA,oHAAkQrjB,MAAAe,EAAAiZ,YAAcuB,EAAKtzB,GAAE,mBAYhZ4Y,QAAKc,GAAEZ,EAAAuiB,cAAc/H,EAAKtzB,IAC1B6mB,aAAat4B,GAAWuqB,EAAAiZ,YAAcuB,EAAKtzB,KAAOzR,EAAEu4B,cAAchP,MAAMI,WAAU,WAClF6O,aAAax4B,GAAWuqB,EAAAiZ,YAAcuB,EAAKtzB,KAAOzR,EAAEu4B,cAAchP,MAAMI,WAAU,aAEnFgB,EAA6D,OAA7DsB,GAA6DjB,EAAnB+Z,EAAKvtC,MAAI,GACnDmzB,EA+BS,UA9BPpB,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,yBAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAC,QAAA,MAAAV,WAAA,iBAaChC,QAAKC,EAAAa,GAAOZ,EAAAwiB,cAAchI,EAAKtzB,IAAE,UACjC6mB,aAAU1N,EAAA,MAAAA,EAAA,IAAkB5qB,IAA8BA,EAAEu4B,cAAchP,MAAMwD,QAAO,IAA0B/sB,EAAEu4B,cAAchP,MAAMI,WAAU,UAAgC3pB,EAAEu4B,cAAchP,MAAMC,MAAK,SAO5MgP,aAAU5N,EAAA,MAAAA,EAAA,IAAkB5qB,IAA8BA,EAAEu4B,cAAchP,MAAMwD,QAAO,MAA4B/sB,EAAEu4B,cAAchP,MAAMI,WAAU,yBAA+C3pB,EAAEu4B,cAAchP,MAAMC,MAAK,aAO/N,MAED,GAAA2C,KAAA,GAAAN,YAKMtB,EAAAiZ,WAAajZ,EAAAqa,gBAAAza,IADrBC,EA6GM,MA7GNkC,GA6GM,CAzGJ3B,EA8CM,MA9CN4B,GA8CM,CAAA3B,EAAA,MAAAA,EAAA,IA7CJD,EAA6E,MAAzEpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,gDAAkE,MAAE,IACxEmB,EA2CM,MA3CN8B,GA2CM,CA1CJ9B,EAoBS,UAnBPpB,MAAA,CAAAG,QAAA,UAAAC,WAAA,OAAAC,OAAA,6BAAAJ,MAAA,6BAAAsD,OAAA,UAAAT,WAAA,WAAAxC,QAAA,8BAAAI,IAAA,OAaAgB,MAAM,QACLZ,QAAOE,EAAAyiB,gBACP1U,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,QACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,aAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAA+D,KAA5DG,MAAM,0BAA0BvB,MAAA,sCAErCoB,EAoBS,UAnBPpB,MAAA,CAAAG,QAAA,UAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,UAAAT,WAAA,WAAAxC,QAAA,8BAAAI,IAAA,OAaAgB,MAAM,OACLZ,QAAOE,EAAA0iB,kBACP3U,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,gBAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAAwD,KAArDG,MAAM,mBAAmBvB,MAAA,2CAIlCY,GAAA,GAAAC,EAyDMkD,EAAA,KAAAC,EAxDWhD,EAAAqa,eAAeK,MAAvB0B,QADTvc,EAyDM,OAvDHvvB,IAAK8rC,EAAKtoC,KACVkrB,MAAK6C,EAAA,CAAA1C,QAAA,8BAAoGC,WAAAY,EAAAkZ,cAAgBkD,EAAKtoC,KAAI,oBAAAwuC,aAAA,kDAA8JrjB,MAAAe,EAAAkZ,cAAgBkD,EAAKtoC,KAAI,iBAAA6uC,SAAA,2EAazT7iB,QAAKc,GAAEZ,EAAA4iB,WAAWxG,EAAKtoC,MACvBi6B,aAAat4B,GAAWuqB,EAAAkZ,cAAgBkD,EAAKtoC,OAAS2B,EAAEu4B,cAAchP,MAAMI,WAAU,WACtF6O,aAAax4B,GAAWuqB,EAAAkZ,cAAgBkD,EAAKtoC,OAAS2B,EAAEu4B,cAAchP,MAAMI,WAAU,aAEvFgB,EAGO,aAFLA,EAAiE,KAA7DG,MAAK4C,EAAEnD,EAAA6iB,YAAYzG,EAAKtoC,OAAOkrB,MAAA,kCAA8B,IACjEyB,EAAG2b,EAAKnvC,MAAI,KAEdmzB,EAgCS,UA/BPpB,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,yBAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAC,QAAA,IAAAV,WAAA,iBAaApB,MAAM,OACLZ,QAAKC,EAAAa,GAAOZ,EAAA8iB,WAAW1G,EAAKtoC,MAAI,UAChCi6B,aAAU1N,EAAA,MAAAA,EAAA,IAAoB5qB,IAAgCA,EAAEu4B,cAAchP,MAAMwD,QAAO,IAA4B/sB,EAAEu4B,cAAchP,MAAMI,WAAU,UAAkC3pB,EAAEu4B,cAAchP,MAAMC,MAAK,SAOpNgP,aAAU5N,EAAA,MAAAA,EAAA,IAAoB5qB,IAAgCA,EAAEu4B,cAAchP,MAAMwD,QAAO,MAA8B/sB,EAAEu4B,cAAchP,MAAMI,WAAU,yBAAiD3pB,EAAEu4B,cAAchP,MAAMC,MAAK,aAOvO,MAED,GAAAwD,KAAA,GAAAN,0BAMN/B,EAyEM,MAzENsC,GAyEM,CA9DK1C,EAAAiZ,UAMKjZ,EAAAkZ,aAIdtZ,IACAC,EAkDM,MAlDNgP,GAkDM,CAjDJzO,EA8BM,MA9BN0O,GA8BM,CA7BJ1O,EAGM,MAHN4O,GAGM,CAFJ5O,EAAgE,KAA5DG,MAAK4C,EAAEnD,EAAA6iB,YAAY7iB,EAAAkZ,cAAcla,MAAA,CAAAC,MAAA,oBACrCmB,EAAqF,OAArF6O,GAAqFxO,EAArBT,EAAAkZ,aAAW,KAE7E9Y,EAwBM,MAxBN+O,GAwBM,CAAA9O,EAAA,MAAAA,EAAA,IAvBJD,EAGO,QAHDpB,MAAA,CAAAC,MAAA,4BAAoC,CACxCmB,EAAkF,KAA/EG,MAAM,2BAA2BvB,MAAA,CAAAC,MAAA,oCAA8C,YAEpF,IACAmB,EAkBS,UAjBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,iBAWChC,QAAOE,EAAA+iB,SACPhV,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,oBACxDmkB,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,sBAAAuW,EAAA,MAAAA,EAAA,KAEzDD,EAAiE,KAA9DG,MAAM,0BAA0BvB,MAAA,mCAA8B,UAEnE,gBAGJoB,EAiBY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAhBDZ,EAAAprB,KAAIgsB,GACZC,YAAW,SAAWb,EAAAkZ,YAAYh9B,MAAK,KAAMkC,OAAOsX,sBACrDsJ,MAAA,CAAAsD,KAAA,IAAAlD,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,qGAAAE,QAAA,OAAA2B,OAAA,OAAAkiB,QAAA,qCAAA1T,IAAA,IAFStP,EAAAprB,YAtCCgrB,IADdC,EAKM,MALN8O,GAGC,iBARQ/O,IADTC,EAKM,MALN6O,GAGC,kBA+DHtO,EAwEM,MAxENmP,GAwEM,CA9DJnP,EA8BM,MA9BN0P,GA8BM,CAAAzP,EAAA,MAAAA,EAAA,IA7BJD,EAGK,MAHDpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,gDAAiE,CACnEmB,EAAyE,KAAtEG,MAAM,kBAAkBvB,MAAA,sBAAAC,MAAA,eAA8C,YAE3E,IACAmB,EAwBM,MAxBN2P,GAwBM,CAtBI/P,mBADRH,EAsBS,UAAAvvB,IAAA,EApBPowB,MAAM,QACN1B,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAL,QAAA,IAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,UAAAsD,OAAA,UAAAjD,QAAA,yDAAAwC,WAAA,iBAcChC,QAAOE,EAAAijB,gBACPlV,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,gBAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAAqE,KAAlEG,MAAM,gCAAgCvB,MAAA,oDAI/CoB,EA8BM,MA9BN4P,GA8BM,CAnBIhQ,mBADRH,EAKU,UAAAvvB,IAAA,EAHP8+B,OAAQpP,EAAA2E,YACT0K,QAAQ,2DACRrQ,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAH,OAAA,OAAAD,WAAA,iBAAA8Q,MAAAtQ,IAEFC,EAaM,MAbNsQ,GAWC,uBASCnQ,EAAAmZ,QAAAvZ,IADRC,EA6MM,OAAAvvB,IAAA,EA3MJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,4EAYCQ,QAAKC,EAAOC,EAAAuc,cAAa,YAE1Bnc,EA4LM,MA5LNgQ,GA4LM,CAAA/P,EAAA,MAAAA,EAAA,IAjLJD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAAsE,KAAnEG,MAAM,kCAAkCvB,MAAA,CAAAC,MAAA,eAA2B,eAExE,IAEAmB,EAkEM,MAlENiQ,GAkEM,CAAAhQ,EAAA,MAAAA,EAAA,IAjEJD,EAGQ,SAHDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAwE,CAC7EmB,EAA4E,KAAzEG,MAAM,qBAAqBvB,MAAA,CAAAC,MAAA,oCAA8C,0BAE9E,IACAoB,EAAA,MAAAA,EAAA,IAAAD,EAcM,OAbJpB,MAAA,wBAAAG,QAAA,YAAAC,WAAA,qGAAAH,MAAA,6BASC,CAEDmB,EAA8C,UAAtCpB,MAAA,CAAAC,MAAA,YAAuB,UAAMuB,EAAS,6CAEhD,MACAJ,EAgBY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAfDZ,EAAAoZ,SAAQxY,GACjBC,YAAY,0CACZ7B,MAAA,CAAAO,MAAA,OAAAC,OAAA,QAAAJ,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,iDAAAE,QAAA,OAAA2B,OAAA,OAAAkiB,QAAA,uBAFShjB,EAAAoZ,YAkBXhZ,EA0BM,MA1BN8iB,GA0BM,CAAA7iB,EAAA,MAAAA,EAAA,IAzBJD,EAGM,OAHDpB,MAAA,CAAAC,MAAA,kDAAwD,CAC3DmB,EAA+E,KAA5EG,MAAM,wBAAwBvB,MAAA,CAAAC,MAAA,oCAA8C,mBAEjF,IACAmB,EAoBM,MApBN+iB,GAoBM,EAAAvjB,IAnBJC,EAkBSkD,EAAA,KAAAC,EAjBchD,EAAAojB,iBAAdC,GADTjjB,EAkBS,UAhBN9vB,IAAK+yC,EACNrkB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,0BAAAsD,OAAA,UAAAT,WAAA,YAUChC,WAAOE,EAAAoZ,SAAWiK,EAClBtV,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,YAAAqB,EAEvD4iB,GAAU,GAAAC,KAAA,WAOrBljB,EA2BM,MA3BNmjB,GA2BM,CAhBJnjB,EAcQ,QAdRojB,GAcQ,CAAArV,EAHN/N,EAAmG,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAAnFZ,EAAAsZ,aAAY1Y,GAAEtb,KAAK,WAAW0Z,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAA+C,OAAA,0BAA9BvC,EAAAsZ,8BAChBlZ,EAAwD,KAArDG,MAAM,oBAAoBvB,MAAA,CAAAC,MAAA,sCAA2B,gCAG1DmB,EAAoE,QAA9DpB,MAAA,CAAAC,MAAA,4BAAqC,4BAKrCe,EAAAqZ,cAAgBrZ,EAAAsZ,cAAgBtZ,EAAAuZ,eAAA3Z,IADxCC,EAmBM,MAnBN4jB,GAmBM,CAAAjjB,EAAAC,EAFDT,EAAAuZ,eAAgB,IACnB,GAAAlZ,EAAA,MAAAA,EAAA,IAAAD,EAAmD,QAA7CpB,MAAA,CAAAkE,UAAA,sBAAqC,KAAC,OAAAlC,EAAA,OAG9CZ,EAyCM,MAzCNsjB,GAyCM,CAxCJtjB,EAgBS,UAfPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,6BAAAsD,OAAA,UAAAT,WAAA,iBAUChC,QAAOE,EAAAuc,cACPxO,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,YAC3D,OAED,IACAgB,EAsBS,UArBNiC,SAAUrC,EAAAqZ,eAAiBrZ,EAAAoZ,SAAS15B,OACrCsf,MAUC6C,GAVD,CAAA1C,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,iBAUC,CAAAU,QACgCxC,EAAAqZ,eAAiBrZ,EAAAoZ,SAAS15B,OAAI,KAAA6iB,OAAoCvC,EAAAqZ,eAAiBrZ,EAAAoZ,SAAS15B,OAAI,2BAIhIogB,QAAOE,EAAA2jB,gBAAA,CAEE3jB,EAAAqZ,cAAoFzZ,IAC9FC,EAA4E,IAA5E+jB,MADUhkB,IAAVC,EAA8F,IAA9FgkB,KAC4ErjB,EAAA,IAC5EC,EAAGT,EAAAqZ,aAAY,wBAAAyK,oBAQf9jB,EAAAga,YAAApa,IADRC,EAoLM,OAAAvvB,IAAA,EAlLJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,4EAYCQ,QAAKC,EAAOC,EAAA+jB,kBAAiB,YAE9B3jB,EAmKM,MAnKN4jB,GAmKM,CAAA3jB,EAAA,MAAAA,EAAA,IAxJJD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAAsD,KAAnDG,MAAM,kBAAkBvB,MAAA,CAAAC,MAAA,eAA2B,gBAExD,IAGAmB,EAsBM,MAtBN6jB,GAsBM,CAAA5jB,EAAA,MAAAA,EAAA,IArBJD,EAGQ,SAHDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA0F,CAC/FmB,EAAwF,KAArFG,MAAM,iCAAiCvB,MAAA,CAAAC,MAAA,oCAA8C,kBAE1F,MACAmB,EAgBY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAfDZ,EAAAia,eAAcrZ,GACvBC,YAAY,+CACZ7B,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,iDAAAE,QAAA,OAAA2B,OAAA,OAAAkiB,QAAA,uBAFShjB,EAAAia,oBAmBb7Z,EAuBM,MAvBN8jB,GAuBM,CAAA7jB,EAAA,MAAAA,EAAA,IAtBJD,EAGQ,SAHDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA0F,CAC/FmB,EAA8E,KAA3EG,MAAM,uBAAuBvB,MAAA,CAAAC,MAAA,oCAA8C,kCAEhF,MACAmB,EAiBY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAhBDZ,EAAAka,aAAYtZ,GACrBC,YAAY,6FACZ7B,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,yFAAAE,QAAA,OAAA2B,OAAA,OAAAkiB,QAAA,uBAFShjB,EAAAka,kBAoBb9Z,EAwBM,MAxBN+jB,GAwBM,CAAA9jB,EAAA,MAAAA,EAAA,IAvBJD,EAGQ,SAHDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA0F,CAC/FmB,EAA+E,KAA5EG,MAAM,wBAAwBvB,MAAA,CAAAC,MAAA,oCAA8C,kBAEjF,MACAmB,EAkBS,gCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAjBEZ,EAAAma,QAAOvZ,GAChB5B,MAAA,CAAAO,MAAA,OAAAH,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAAE,QAAA,YAAA6jB,QAAA,OAAAzgB,OAAA,gBAAAlC,EAAA,MAAAA,EAAA,KAYAD,EAAmC,UAA3B1yB,MAAM,IAAG,gBACjB0yB,EAAuD,UAA/C1yB,MAAM,cAAa,0BAC3B0yB,EAAoD,UAA5C1yB,MAAM,aAAY,wBAC1B0yB,EAA2D,UAAnD1yB,MAAM,aAAY,4BAAwB,eAhBzCsyB,EAAAma,aAqBb9Z,EAAA,MAAAA,EAAA,IAAAD,EAcM,OAbJpB,MAAA,CAAAG,QAAA,OAAAC,WAAA,0BAAAC,OAAA,mFAMC,CAEDe,EAII,KAJDpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,mDAAoE,CACrEmB,EAA+D,KAA5DG,MAAM,wBAAwBvB,MAAA,yBACjCoB,EAAoB,cAAZ,OAAGI,EAAS,mEAKxBJ,EAyCM,MAzCNgkB,GAyCM,CAxCJhkB,EAgBS,UAfPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,6BAAAsD,OAAA,UAAAT,WAAA,iBAUChC,QAAOE,EAAA+jB,kBACPhW,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,YAC3D,OAED,IACAgB,EAsBS,UArBNiC,SAAUrC,EAAAqZ,eAAiBrZ,EAAAia,eAAev6B,OAC3Csf,MAUC6C,GAVD,CAAA1C,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,iBAUC,CAAAU,QACgCxC,EAAAqZ,eAAiBrZ,EAAAia,eAAev6B,OAAI,KAAA6iB,OAAoCvC,EAAAqZ,eAAiBrZ,EAAAia,eAAev6B,OAAI,2BAI5IogB,QAAOE,EAAAqkB,cAAA,CAEErkB,EAAAqZ,cAAuEzZ,IACjFC,EAA4E,IAA5EykB,MADU1kB,IAAVC,EAAiF,IAAjF0kB,KAC4E/jB,EAAA,IAC5EC,EAAGT,EAAAqZ,aAAY,wBAAAmL,oBAQfxkB,EAAAwZ,gBAAA5Z,IADRC,EAyPM,MAzPN4kB,GAyPM,CAzOJrkB,EAwOM,MAxONskB,GAwOM,CA3NJtkB,EA8DM,MA9DNukB,GA8DM,CAAAtkB,EAAA,MAAAA,EAAA,IArDJD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAA+D,KAA5DG,MAAM,2BAA2BvB,MAAA,CAAAC,MAAA,eAA2B,iBAEjE,IACAmB,EAsCM,MAtCNwkB,GAsCM,CArCJxkB,EAiBS,UAhBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,UAAAT,WAAA,iBAUChC,QAAOE,EAAA6kB,cACP9W,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,gBAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAA2D,KAAxDG,MAAM,oBAAoBvB,MAAA,mCAA8B,QAE7D,UACAoB,EAkBS,UAjBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAOE,EAAA8kB,cACP/W,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,gBAAAiB,EAAA,MAAAA,EAAA,KAE1DD,EAA2D,KAAxDG,MAAM,oBAAoBvB,MAAA,mCAA8B,UAE7D,cAKJoB,EAyJM,MAzJN2kB,GAyJM,CA9IJ3kB,EAwCM,MAxCN4kB,GAwCM,CAAA3kB,EAAA,MAAAA,EAAA,IAvCJD,EAKM,OALDpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,gDAAiF,CACpFgB,EAGK,MAHDpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,gDAAiE,CACnEmB,EAA+E,KAA5EG,MAAM,wBAAwBvB,MAAA,sBAAAC,MAAA,eAA8C,iBAInFmB,EAgCM,MAhCN6kB,GAgCM,EAAArlB,GAAA,GA/BJC,EA8BMkD,EAAA,KAAAC,EA9BgBhD,EAAAyZ,UAAVkB,QAAZ9a,EA8BM,OA9B4BvvB,IAAKqqC,EAAO7mC,KAAMkrB,MAAA,2BAClDoB,EAaM,MAbN8kB,GAaM,CAFJ9kB,EAAyC,KAArCG,MAAK4C,EAAEnD,EAAA6iB,YAAYlI,EAAO7mC,QAAI,UAAO,IACzC2sB,EAAGka,EAAO7mC,MAAI,KAEhBssB,EAcC,MAdD+kB,GAcC1kB,EADKka,EAAOE,YAAU,iBAO7Bza,EAwCM,MAxCNglB,GAwCM,CAAA/kB,EAAA,MAAAA,EAAA,IAvCJD,EAKM,OALDpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,gDAAiF,CACpFgB,EAGK,MAHDpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,gDAAiE,CACnEmB,EAA+E,KAA5EG,MAAM,wBAAwBvB,MAAA,sBAAAC,MAAA,eAA8C,iBAInFmB,EAgCM,MAhCNilB,GAgCM,EAAAzlB,GAAA,GA/BJC,EA8BMkD,EAAA,KAAAC,EA9BgBhD,EAAAyZ,UAAVkB,QAAZ9a,EA8BM,OA9B4BvvB,IAAKqqC,EAAO7mC,KAAMkrB,MAAA,2BAClDoB,EAaM,MAbNklB,GAaM,CAFJllB,EAAyC,KAArCG,MAAK4C,EAAEnD,EAAA6iB,YAAYlI,EAAO7mC,QAAI,UAAO,IACzC2sB,EAAGka,EAAO7mC,MAAI,KAEhBssB,EAcC,MAdDmlB,GAcC9kB,EADKka,EAAOC,YAAU,iBAO7Bxa,EAuDM,MAvDNolB,GAuDM,CAtDJplB,EA8CM,MA9CNqlB,GA8CM,CAAAplB,EAAA,MAAAA,EAAA,IApCJD,EAGK,MAHDpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,gDAAiE,CACnEmB,EAAyE,KAAtEG,MAAM,kBAAkBvB,MAAA,sBAAAC,MAAA,eAA8C,YAE3E,IACAmB,EA+BM,MA/BNslB,GA+BM,CA9BJtlB,EAcS,UAbNpB,MAAK6C,EAAA,CAAA1C,QAAA,sBAAwF,WAAXa,EAAA0Z,YAAW,oBAAAra,OAAA,sGAU7FS,QAAKO,iBAAEL,EAAA0Z,YAAW,WACpB,QAED,GACAtZ,EAcS,UAbNpB,MAAK6C,EAAA,CAAA1C,QAAA,sBAAwF,UAAXa,EAAA0Z,YAAW,oBAAAra,OAAA,sGAU7FS,QAAKO,iBAAEL,EAAA0Z,YAAW,UACpB,QAED,OAGJtZ,EAMM,MANNulB,GAMM,CALJvlB,EAIU,UAHPgP,OAAQpP,EAAAua,sBACTlL,QAAQ,2DACRrQ,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAH,OAAA,gBAAAumB,wBAUJ5lB,EAAA2Z,aAAA/Z,IADRC,EA4IM,OAAAvvB,IAAA,EA1IJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,2EAAAH,QAAA,QAaCW,QAAKC,EAAOC,EAAAwc,mBAAkB,YAE/Bpc,EA0HM,MA1HNylB,GA0HM,CA7GJzlB,EAwCM,MAxCN0lB,GAwCM,CAAAzlB,EAAA,MAAAA,EAAA,IA/BJD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAA0D,KAAvDG,MAAM,sBAAsBvB,MAAA,CAAAC,MAAA,eAA2B,eAE5D,IACAmB,EAgBS,UAfPpB,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,UAAAsD,OAAA,UAAAT,WAAA,iBAUChC,QAAOE,EAAAwc,mBACPzO,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,YAC3D,MAED,MAEFgB,EAmEM,MAnEN2lB,GAmEM,CAlEmC,IAA5B/lB,EAAAsa,sBAAsBrqC,QAAM2vB,IAAvCC,EAGM,MAHNmmB,GAGM,IAAA3lB,EAAA,MAAAA,EAAA,KAFJD,EAA4F,KAAzFG,MAAM,oBAAoBvB,MAAA,2CAAAwD,QAAA,iBAC7BpC,EAAa,SAAV,UAAM,QAAAY,EAAA,QAEXpB,GAAA,GAAAC,EA6DMkD,EAAA,KAAAC,EA5DsBhD,EAAAsa,sBAAqB,CAAvC4G,EAAQl9B,SADlB6b,EA6DM,OA3DHvvB,IAAK0T,EACNgb,MAAA,CAAAI,WAAA,gCAAAD,QAAA,8BAAAE,OAAA,uBAQAe,EA4BM,MA5BN6lB,GA4BM,CA3BJ7lB,EAOM,YANJA,EAEM,MAFN8lB,GAEMzlB,EADDygB,EAAOlQ,QAAM,GAElB5Q,EAEM,MAFN+lB,GAEM1lB,EAAA,IADG9X,KAAKu4B,EAAOjB,WAAWmG,eAAc,eAGhDhmB,EAkBS,UAjBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAKc,GAAEZ,EAAAqmB,eAAenF,GACtBnT,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,WACzD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMI,WAAU,gBAAAiB,EAAA,OAAAA,EAAA,MAE1DD,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,mCAA8B,QAE5D,SAAAsnB,MAEFlmB,EAoBM,MApBNmmB,GAoBM,CAAAlmB,EAAA,OAAAA,EAAA,KAnBJD,EAAuB,cAAf,UAAM,IACdA,EAiBM,MAjBNomB,GAiBM,EAAA5mB,GAAA,GAhBJC,EAeOkD,EAAA,KAAAC,EAdYke,EAAOpB,QAAjBnF,QADT9a,EAeO,QAbJvvB,IAAKqqC,EAAO7mC,KACbkrB,MAAA,CAAAI,WAAA,UAAAD,QAAA,oDAAAG,QAAA,qCAAAI,IAAA,SAUAU,EAAyC,KAArCG,MAAK4C,EAAEnD,EAAA6iB,YAAYlI,EAAO7mC,QAAI,UAAO,IACzC2sB,EAAGka,EAAO7mC,MAAI,2CAWpBksB,EAAA+Z,qBAAAna,IADRC,EA8QM,OAAAvvB,IAAA,EA5QJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,2EAAAH,QAAA,QAaCW,QAAKO,mBAAOL,EAAA+Z,qBAAmB,eAEhC3Z,EA4PM,MA5PNqmB,GA4PM,CA/OJrmB,EAmEM,MAnENsmB,GAmEM,CAAArmB,EAAA,OAAAA,EAAA,KA1DJD,EA0BK,MAzBHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAaO,QAZLpB,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,iCAAAE,QAAA,8EAUD,QAEDkB,EAAO,cAET,IACAJ,EA8BS,UA7BPpB,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,0BAAAsD,OAAA,UAAAT,WAAA,WAAAxC,QAAA,0DAcCQ,QAAKO,iBAAEL,EAAA+Z,qBAAmB,GAC1BhM,aAAU1N,cAAkB5qB,IAA6BA,EAAEu4B,cAAchP,MAAMI,WAAU,OAA2B3pB,EAAEu4B,cAAchP,MAAMC,MAAK,SAM/IgP,aAAU5N,cAAkB5qB,IAA6BA,EAAEu4B,cAAchP,MAAMI,WAAU,UAA8B3pB,EAAEu4B,cAAchP,MAAMC,MAAK,+BAOnJmB,EAAiC,KAA9BG,MAAM,qBAAmB,kBAKhCH,EAwKM,MAxKNumB,GAwKM,CAvKJvmB,EA0IM,MA1INwmB,GA0IM,CAxIJxmB,EA2CM,OA1CJpB,MAAA,CAAAI,WAAA,UAAAC,OAAA,+CAAAF,QAAA,OAAAoD,OAAA,UAAAT,WAAA,sFASChC,QAAKO,iBAAEL,EAAA6mB,0BAAyB,WAChC9Y,aAAU1N,cAAoB5qB,IAA+BA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAAyCrU,EAAEu4B,cAAchP,MAAMiY,YAAW,OAA6BxhC,EAAEu4B,cAAchP,MAAMwP,UAAS,kCAOlOP,aAAU5N,cAAoB5qB,IAA+BA,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAsCrU,EAAEu4B,cAAchP,MAAMiY,YAAW,cAAoCxhC,EAAEu4B,cAAchP,MAAMwP,UAAS,uDAQvOpO,EAcM,OAbJpB,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,iCAAAE,QAAA,qGAWD,QAED,GACAc,EAAyF,MAArFpB,MAAA,CAAAE,OAAA,YAAAD,MAAA,gDAA0E,aAC9EmB,EAAuF,KAApFpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,gDAAkE,kBAAc,UAIrFmB,EA2CM,OA1CJpB,MAAA,CAAAI,WAAA,UAAAC,OAAA,+CAAAF,QAAA,OAAAoD,OAAA,UAAAT,WAAA,sFASChC,QAAKO,iBAAEL,EAAA6mB,0BAAyB,UAChC9Y,aAAU1N,cAAoB5qB,IAA+BA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAAyCrU,EAAEu4B,cAAchP,MAAMiY,YAAW,OAA6BxhC,EAAEu4B,cAAchP,MAAMwP,UAAS,kCAOlOP,aAAU5N,cAAoB5qB,IAA+BA,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAsCrU,EAAEu4B,cAAchP,MAAMiY,YAAW,cAAoCxhC,EAAEu4B,cAAchP,MAAMwP,UAAS,uDAQvOpO,EAcM,OAbJpB,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,iCAAAE,QAAA,qGAWD,QAED,GACAc,EAAwF,MAApFpB,MAAA,CAAAE,OAAA,YAAAD,MAAA,gDAA0E,YAC9EmB,EAAwF,KAArFpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,gDAAkE,mBAAe,UAItFmB,EA2CM,OA1CJpB,MAAA,CAAAI,WAAA,UAAAC,OAAA,+CAAAF,QAAA,OAAAoD,OAAA,UAAAT,WAAA,sFASChC,QAAKO,iBAAEL,EAAA6mB,0BAAyB,UAChC9Y,aAAU1N,cAAoB5qB,IAA+BA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAAyCrU,EAAEu4B,cAAchP,MAAMiY,YAAW,OAA6BxhC,EAAEu4B,cAAchP,MAAMwP,UAAS,kCAOlOP,aAAU5N,cAAoB5qB,IAA+BA,EAAEu4B,cAAchP,MAAMlV,UAAS,gBAAsCrU,EAAEu4B,cAAchP,MAAMiY,YAAW,cAAoCxhC,EAAEu4B,cAAchP,MAAMwP,UAAS,uDAQvOpO,EAcM,OAbJpB,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAJ,WAAA,iCAAAE,QAAA,qGAWD,QAED,GACAc,EAAwF,MAApFpB,MAAA,CAAAE,OAAA,YAAAD,MAAA,gDAA0E,YAC9EmB,EAAmF,KAAhFpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,gDAAkE,cAAU,YAInFoB,EAAA,OAAAA,EAAA,KAAAD,EA0BM,OAzBJpB,MAAA,qBAAAG,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAMC,CAEDe,EAaM,OAZJpB,MAAA,CAAAC,MAAA,oEAAAK,QAAA,8BAAAI,IAAA,QAQC,CAEDU,EAAuD,QAAjDpB,MAAA,CAAAC,MAAA,+BAAwC,MAAEuB,EAAO,YAGzDJ,EAEI,KAFDpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,gDAAkE,2DAS7EuQ,EAA+ExP,EAAA,gBAA/DtB,IAAI,oBAAqBE,KAAMoB,EAAA6Z,aAAcnZ,MAAM,kGCtwCzB,oBAAtBomB,oBAAqCC,WAAsBD,mBAYnF,MAAME,GAAO,OA8Db,MAAMC,GAAgBC,GACbA,IAET,SAASC,GAAeC,EAAI3/B,EAAU,IACpC,IAAI4/B,EACAC,EACAC,EAAeP,GACnB,MAAMQ,EAAiBC,IACrBpL,aAAaoL,GACbF,IACAA,EAAeP,IAEjB,IAAIU,EAgCJ,OA/BgBR,IACd,MAAM5vC,EAAWqwC,EAAUP,GACrBQ,EAAcD,EAAUlgC,EAAQogC,SAGtC,OAFIR,GACFG,EAAcH,GACZ/vC,GAAY,QAAqB,IAAhBswC,GAA0BA,GAAe,GACxDN,IACFE,EAAcF,GACdA,OAAW,GAEN/xC,QAAQmI,QAAQwpC,MAElB,IAAI3xC,QAAQ,CAACmI,EAASggC,KAC3B6J,EAAe9/B,EAAQqgC,eAAiBpK,EAAShgC,EACjDgqC,EAAcR,EACVU,IAAgBN,IAClBA,EAAWrc,WAAW,KAChBoc,GACFG,EAAcH,GAChBC,OAAW,EACX5pC,EAAQgqC,MACPE,IAELP,EAAQpc,WAAW,KACbqc,GACFE,EAAcF,GAChBA,OAAW,EACX5pC,EAAQwpC,MACP5vC,KAIT,CA+QA,SAASywC,GAAgBn4C,EAAQo4C,EAAIvgC,EAAU,IAC7C,MAAMwgC,YACJA,EAAchB,MACXiB,GACDzgC,EACJ,OAAOkX,EACL/uB,GA1UyBuM,EA4UvB8rC,EA5U+Bx5C,EA6U/Bu5C,EA5UJ,YAAoBrzC,GAClB,OAAO,IAAIY,QAAQ,CAACmI,EAASggC,KAC3BnoC,QAAQmI,QAAQvB,EAAO,IAAM1N,EAAG05C,MAAM55C,KAAMoG,GAAO,CAAElG,KAAI25C,QAAS75C,KAAMoG,UAASgJ,KAAKD,GAAS6V,MAAMmqB,IAEzG,GA0UEwK,GA/UJ,IAA6B/rC,EAAQ1N,CAiVrC,WC3rBO8xB,MAAM,qBAAqBvB,MAAA,CAAAG,QAAA,kBAAAC,WAAA,2BAqDzBJ,MAAA,CAAAM,QAAA,yCAAAI,IAAA,oCAEEV,MAAA,CAAAM,QAAA,iCAAAI,IAAA,aAEEV,MAAA,CAAAI,WAAA,UAAAD,QAAA,mCAuBHH,MAAA,CAAAI,WAAA,UAAAD,QAAA,6BAAAmD,KAAA,IAAAhD,QAAA,uCA6BKN,MAAA,CAAAM,QAAA,OAAAI,IAAA,iEA+CJV,MAAA,CAAAI,WAAA,UAAAD,QAAA,6BAAAG,QAAA,uCACCN,MAAA,CAAAC,MAAA,UAAAC,OAAA,gCAAAI,QAAA,8BAAAI,IAAA,kBAKAV,MAAA,sBAAAI,WAAA,UAAAH,MAAA,QAAAE,QAAA,2DAYFH,MAAA,CAAAsD,KAAA,IAAAlD,WAAA,UAAAC,OAAA,uCAAAI,SAAA,SAAAH,QAAA,0FAY2BN,MAAA,uBAAAC,MAAA,OAAAE,QAAA,iCAqCNH,MAAA,CAAAI,WAAA,UAAAD,QAAA,yCAgBvBH,MAAA,CAAAI,WAAA,UAAAD,QAAA,6BAAAE,OAAA,gEAUEL,MAAA,CAAAE,OAAA,IAAAD,MAAA,6HAuEGD,MAAA,CAAAM,QAAA,OAAAI,IAAA,yFAmDb,MAAMgE,EAAgBC,KAChBC,SAAEA,GAAaC,EAAYH,GAC3BI,EAAYC,IAEZskB,EAAiB3pB,EAAI,SACrB4pB,EAAuB5pB,EAAI,IAC3ByF,EAAgBzF,EAAI,IACpB6pB,EAAiB7pB,EAAI,IACrBI,EAAeJ,GAAI,GACnBkE,EAAclE,GAAI,GAClB8pB,EAAW9pB,GAAI,GACf+pB,EAAa/pB,GAAI,GACjBkY,EAAoBlY,EAAI,IACxBgqB,EAAehqB,EAA8B,MAG7CiqB,EAAW,KACf,IACE,MAAMtT,EAAWtO,IACjB,IAAKsO,EAAU,OAEf,MAAMvO,EAAa,GAAGuO,uBAChBuT,EAAkBxhB,aAAaC,QAAQP,GAE7C,GAAI8hB,EACF,IACE,MAAMzhB,EAAY11B,KAAK2L,MAAMwrC,GAC7BP,EAAe36C,MAAQy5B,EAAUkhB,gBAAkB,QACnDC,EAAqB56C,MAAQy5B,EAAUmhB,sBAAwB,GAC/DnkB,EAAcz2B,MAAQy5B,EAAUhD,eAAiB,GACjDokB,EAAe76C,MAAQy5B,EAAUohB,gBAAkB,GACnDjjB,QAAQC,IAAI,iCACd,OAAS0W,GACP3W,QAAQjyB,MAAM,oBAAqB4oC,EACrC,CAEJ,OAAS5oC,GACPiyB,QAAQjyB,MAAM,oBAAqBA,EACrC,GAIIkiC,EAAW,KACf,IACE,MAAMF,EAAWtO,IACjB,IAAKsO,EAAU,OAEf,MAAMG,EAAa,CACjB6S,eAAgBA,EAAe36C,MAC/B46C,qBAAsBA,EAAqB56C,MAC3Cy2B,cAAeA,EAAcz2B,MAC7B66C,eAAgBA,EAAe76C,OAG3Bo5B,EAAa,GAAGuO,uBACtBjO,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAU8jC,IAChDlQ,QAAQC,IAAI,iCACd,OAASlyB,GACPiyB,QAAQjyB,MAAM,oBAAqBA,EACrC,GAIFk1B,EAAU,KACRogB,MDg/BF,SAAwB/4C,EAAQo4C,EAAIvgC,EAAU,IAC5C,MAAMohC,SACJA,EAAW,EAAChB,QACZA,KACGK,GACDzgC,EACGsgC,GACLn4C,EACAo4C,EACA,IACKE,EACHD,YAAad,GAAe0B,EAAU,CAAEhB,aAG9C,CCz/BAiB,CACE,CAACT,EAAgBC,EAAsBnkB,EAAeokB,GACtD,KACEhT,KAEF,CAAEsT,SAAU,MAId,sPAAuBzzC,UACrB,IAAKizC,EAAe36C,QAAU46C,EAAqB56C,MAEjD,YADAu4B,OAAOl5B,OAAOm7B,QAAQ,iBAKxB,MAAMQ,EAAS5E,EAAU6E,WAAW,cAAe,QAAQ0f,EAAe36C,SAC1EoxB,EAAapxB,OAAQ,EAErB,IACEo2B,EAAUgF,mBAAmBJ,EAAQ,GAAI,cAEzC,MAAMQ,EAAe,klBA2BfC,EAAa,aAAakf,EAAe36C,uBAGjD46C,EAAqB56C,6EAMf46C,EAAqB56C,MAAM0E,SAAS,MAAQ,QAAU,6DAM1D0xB,EAAUgF,mBAAmBJ,EAAQ,GAAI,qBACzC5E,EAAUilB,cAAcrgB,EAAQ,QAAQ2f,EAAe36C,SAEvD,MAAMmoC,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAE7CigB,EAAgB,CACpB/f,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CACEC,KAAM,SACNjuB,QAASutB,GAEX,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,YAAajG,EAASl2B,MAAMm8B,aAAe,GAC3CC,WAAYlG,EAASl2B,MAAMo8B,YAAc,KACzCC,MAAOnG,EAASl2B,MAAMq8B,MACtBC,iBAAkBpG,EAASl2B,MAAMs8B,iBACjCC,kBAAmBrG,EAASl2B,MAAMu8B,oBAI9Bb,gBAAEA,SAAoBC,EAAAj0B,UAAA,MAAAg0B,yBAAME,OAAO,cAAa3rB,KAAA4rB,KAAAC,GAAA,OAAAJ,oBAAAK,wBAChDC,EAAiBN,EAAgB4f,EAAeplB,EAASl2B,MAAMq7B,cAE/DmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUg4B,KAKvB,GAFA5F,EAAUgF,mBAAmBJ,EAAQ,GAAI,cAEpCwB,EAASM,GACZ,MAAM,IAAI17B,MAAM,aAAao7B,EAASO,UAGxC3G,EAAUgF,mBAAmBJ,EAAQ,GAAI,mBACzC5E,EAAUilB,cAAcrgB,EAAQ,0BAEhC,MAAM52B,QAAao4B,EAASS,OAC5B,IAAIt1B,EAASvD,EAAK+4B,UAAU,IAAIv3B,SAASqI,SAAW,GAEpDmoB,EAAUgF,mBAAmBJ,EAAQ,GAAI,oBAEzCpD,QAAQC,IAAI,uBAAwBlwB,EAAOpF,QAC3Cq1B,QAAQC,IAAI,2BAA4BlwB,EAAOu2B,UAAU,EAAG,MAG5Dv2B,EAASA,EACNtC,QAAQ,cAAe,IACvBA,QAAQ,UAAW,IACnB2M,OAIH,MAAMupC,EAAe5zC,EAAO+gC,MAAM,2BAClC,GAAI6S,EACF5zC,EAAS4zC,EAAa,GAAGvpC,OACzB4lB,QAAQC,IAAI,uCACP,CAEL,MAAM2jB,EAAY7zC,EAAO+gC,MAAM,iBAC/B,GAAI8S,EACF7zC,EAAS6zC,EAAU,GAAGxpC,OACtB4lB,QAAQC,IAAI,qCACd,KAAWlwB,EAAOjD,SAAS,OAAQiD,EAAOjD,SAAS,KAqBjD,MAFAkzB,QAAQjyB,MAAM,2BACdiyB,QAAQjyB,MAAM,UAAWgC,GACnB,IAAIvG,MAAM,mCAnBhBw2B,QAAQC,IAAI,iCAEPlwB,EAAOjD,SAAS,WACnBiD,EAAS,yJAOjBA,sBAGQiwB,QAAQC,IAAI,2BAOhB,CACF,CAEAD,QAAQC,IAAI,sBAAuBlwB,EAAOpF,QAE1C6zB,EAAUgF,mBAAmBJ,EAAQ,GAAI,eAEzCvE,EAAcz2B,MAAQ2H,EAGtB,MAAMq3B,EAAY2b,EAAe36C,MAAMqF,QAAQ,sBAAuB,QAChEwuC,EAAY,CAChBr6B,GAAI,YAAYyB,KAAK+c,QACrB8G,WAAY,MAAM6b,EAAe36C,QACjCg/B,YACAC,cAAet3B,EACfu3B,YAAa,GACbC,UAAW,CAAC,GACZxK,UAAU,EACV4K,cAAc,EACdC,YAAY,EACZT,WAAW,EACXK,gBAAiB,EACjBC,SAAU,KACVC,SAAU,MAEZub,EAAe76C,MAAQ+D,KAAKC,UAAU6vC,EAAW,KAAM,GAEvDzd,EAAUilB,cAAcrgB,EAAQ,eAAerzB,EAAOpF,aACtD6zB,EAAUkH,aAAatC,EAAQ,CAAE9zB,KAAMS,EAAQgf,MAAOk0B,EAAe76C,QAErEu4B,OAAOl5B,OAAOkJ,QAAQ,WACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1BywB,EAAU+E,SAASH,EAASr1B,EAAgBC,SAC5C2yB,OAAOl5B,OAAOsG,MAAM,YAAeA,EAAgBC,QACrD,SACEwrB,EAAapxB,OAAQ,CACvB,oBAIuB,KACvBkpC,EAAkBlpC,MAAQ,GAC1B+6C,EAAW/6C,OAAQ,gBAIA0H,UACnB,IAAKwhC,EAAkBlpC,MAErB,YADAu4B,OAAOl5B,OAAOm7B,QAAQ,WAKxB,MAAMQ,EAAS5E,EAAU6E,WAAW,YAAa,QAAQ0f,EAAe36C,SACxEk1B,EAAYl1B,OAAQ,EAEpB,IACEo2B,EAAUgF,mBAAmBJ,EAAQ,GAAI,gBAEzC,MAAMQ,EAAe,sVAoBfC,EAAa,aAAakf,EAAe36C,yBAGjD46C,EAAqB56C,yBAGrBkpC,EAAkBlpC,2GAWhBo2B,EAAUgF,mBAAmBJ,EAAQ,GAAI,eACzC5E,EAAUilB,cAAcrgB,EAAQ,SAASkO,EAAkBlpC,SAE3D,MAAMmoC,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAE7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CACEC,KAAM,SACNjuB,QAASutB,GAEX,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,YAAajG,EAASl2B,MAAMm8B,aAAe,GAC3CC,WAAYlG,EAASl2B,MAAMo8B,YAAc,KACzCC,MAAOnG,EAASl2B,MAAMq8B,MACtBC,iBAAkBpG,EAASl2B,MAAMs8B,iBACjCC,kBAAmBrG,EAASl2B,MAAMu8B,sBAMtC,GAFAnG,EAAUgF,mBAAmBJ,EAAQ,GAAI,cAEpCwB,EAASM,GACZ,MAAM,IAAI17B,MAAM,aAAao7B,EAASO,UAGxC3G,EAAUgF,mBAAmBJ,EAAQ,GAAI,mBACzC5E,EAAUilB,cAAcrgB,EAAQ,wBAEhC,MAAM52B,QAAao4B,EAASS,OAC5B,IAAIt1B,EAASvD,EAAK+4B,UAAU,IAAIv3B,SAASqI,SAAW,GAEpDmoB,EAAUgF,mBAAmBJ,EAAQ,GAAI,iBAEzCpD,QAAQC,IAAI,uBAAwBlwB,EAAOpF,QAC3Cq1B,QAAQC,IAAI,2BAA4BlwB,EAAOu2B,UAAU,EAAG,MAG5Dv2B,EAASA,EACNtC,QAAQ,cAAe,IACvBA,QAAQ,UAAW,IACnB2M,OAIH,MAAMupC,EAAe5zC,EAAO+gC,MAAM,2BAClC,GAAI6S,EACF5zC,EAAS4zC,EAAa,GAAGvpC,OACzB4lB,QAAQC,IAAI,uCACP,CAEL,MAAM2jB,EAAY7zC,EAAO+gC,MAAM,iBAC/B,GAAI8S,EACF7zC,EAAS6zC,EAAU,GAAGxpC,OACtB4lB,QAAQC,IAAI,qCACd,KAAWlwB,EAAOjD,SAAS,OAAQiD,EAAOjD,SAAS,KAqBjD,MAFAkzB,QAAQjyB,MAAM,2BACdiyB,QAAQjyB,MAAM,UAAWgC,GACnB,IAAIvG,MAAM,mCAnBhBw2B,QAAQC,IAAI,iCAEPlwB,EAAOjD,SAAS,WACnBiD,EAAS,yJAOjBA,sBAGQiwB,QAAQC,IAAI,2BAOhB,CACF,CAEAD,QAAQC,IAAI,sBAAuBlwB,EAAOpF,QAE1C6zB,EAAUgF,mBAAmBJ,EAAQ,GAAI,eAEzCvE,EAAcz2B,MAAQ2H,EAGtB,MAAMq3B,EAAY2b,EAAe36C,MAAMqF,QAAQ,sBAAuB,QAChEwuC,EAAY,CAChBr6B,GAAI,YAAYyB,KAAK+c,QACrB8G,WAAY,MAAM6b,EAAe36C,QACjCg/B,YACAC,cAAet3B,EACfu3B,YAAa,GACbC,UAAW,CAAC,GACZxK,UAAU,EACV4K,cAAc,EACdC,YAAY,EACZT,WAAW,EACXK,gBAAiB,EACjBC,SAAU,KACVC,SAAU,MAEZub,EAAe76C,MAAQ+D,KAAKC,UAAU6vC,EAAW,KAAM,GAGvD+G,EAAqB56C,MAAQ,GAAG46C,EAAqB56C,uBAAuBkpC,EAAkBlpC,QAE9Fo2B,EAAUilB,cAAcrgB,EAAQ,cAAcrzB,EAAOpF,aACrD6zB,EAAUkH,aAAatC,EAAQ,CAAE9zB,KAAMS,EAAQgf,MAAOk0B,EAAe76C,QAErEu4B,OAAOl5B,OAAOkJ,QAAQ,YACtBwyC,EAAW/6C,OAAQ,CACrB,OAAS2F,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1BywB,EAAU+E,SAASH,EAASr1B,EAAgBC,SAC5C2yB,OAAOl5B,OAAOsG,MAAM,YAAeA,EAAgBC,QACrD,SACEsvB,EAAYl1B,OAAQ,CACtB,aAIgB,KAChBo+B,EAAgByc,EAAe76C,MAAO,kIAzzBtC,OAAAkyB,IAAAC,EAuWM,MAvWNS,GAuWM,CAAAD,EAAA,MAAAA,EAAA,IAAAa,EAAA,gxDAlTJd,EAuKM,MAvKNO,GAuKM,CArKJP,EAkGM,MAlGNW,GAkGM,CAhGJX,EAmBM,MAnBNa,GAmBM,CAAAZ,EAAA,KAAAA,EAAA,GAlBJD,EAGK,MAHDpB,MAAA,CAAAC,MAAA,UAAAC,OAAA,kCAA2D,CAC7DkB,EAA+B,KAA5BG,MAAM,oBAAiBC,EAAK,cAEjC,MACAJ,EAaE,+BAAAC,EAAA,KAAAA,EAAA,GAAAO,GAZSZ,EAAAqoB,eAAcznB,GACvBtb,KAAK,OACLub,YAAY,iBACZ7B,MAAA,CAAAO,MAAA,OAAAH,WAAA,UAAAH,MAAA,UAAAI,OAAA,uCAAAF,QAAA,0CAHSa,EAAAqoB,oBAgBbjoB,EAyEM,MAzENgB,GAyEM,CAAAf,EAAA,MAAAA,EAAA,IAtEJD,EAGK,MAHDpB,MAAA,CAAAC,MAAA,UAAAC,OAAA,kCAA2D,CAC7DkB,EAAiC,KAA9BG,MAAM,sBAAmBC,EAAK,oBAEnC,kBACAJ,EAEI,KAFDpB,MAAA,CAAAC,MAAA,OAAAC,OAAA,kCAAyD,qDAE5D,IAAAiP,EACA/N,EAiBE,kCAAAC,EAAA,KAAAA,EAAA,GAAAO,GAhBSZ,EAAAsoB,qBAAoB1nB,GAC7BC,YAAY,8JACZ7B,MAAA,CAAAO,MAAA,OAAA+C,KAAA,yBAAAlD,WAAA,UAAAH,MAAA,UAAAI,OAAA,uCAAAF,QAAA,kEAAA2B,OAAA,2CAFSd,EAAAsoB,wBAmBXloB,EA0CM,MA1CNiB,GA0CM,CAzCJjB,EAmBS,UAlBNiC,UAAWrC,EAAAqoB,iBAAmBroB,EAAAsoB,sBAAwBtoB,EAAAlB,aACvDE,MAWC6C,EAAA,CAXD,CAAAS,KAAA,IAAAlD,WAAA,oDAAAH,MAAA,QAAAI,OAAA,OAAAF,QAAA,kCAAAoD,OAAA,iDAAAT,WAAA,YAWC,SACmB9B,EAAAqoB,gBAAmBroB,yBAAwBA,EAAAlB,aAAY,QAC1EgB,QAAOE,EAAA2jB,gBAAA,aAERvjB,EAA+C,KAA5CG,MAAM,mCAAiC,UAAAC,EAAK,IAC/CC,EAAGT,EAAAlB,aAAY,YAAiBkB,EAAAmE,cAAa,4BAAA7C,IAGvCtB,EAAAmE,eAAAvE,IADRC,EAoBS,UAAAvvB,IAAA,EAlBN+xB,SAAUrC,EAAA4C,YACX5D,MAWC6C,EAAA,CAXD,CAAAS,KAAA,IAAAlD,WAAA,UAAAH,MAAA,OAAAI,OAAA,OAAAF,QAAA,kCAAAoD,OAAA,iDAAAT,WAAA,YAWC,CAAAU,QACkBxC,EAAA4C,YAAW,QAC7B9C,QAAOE,EAAAmpB,kBAAA,aAER/oB,EAAgC,KAA7BG,MAAM,oBAAkB,UAAAC,EAAK,IAChCC,EAAGT,EAAA4C,YAAW,2BAAAlB,KAAAV,EAAA,aAOtBZ,EA+DM,MA/DNwB,GA+DM,CA9DJxB,EAeK,KAfL2B,GAeK,CAAA1B,EAAA,MAAAA,EAAA,IAdHD,EAA+B,KAA5BG,MAAM,mBAAiB,UAAAF,EAAA,MAAAA,EAAA,IAAAG,EAAK,UAE/B,IACQR,EAAAmE,eAAAvE,IADRC,EAWC,OAXDmC,GAUG,QAAGhB,EAAA,SAGRZ,EAyBM,MAzBN8B,GAyBM,CAZQlC,EAAAmE,eAG0DvE,IAEtEC,EAMU,UAAAvvB,IAAA,EAJRouB,IAAI,eACH0Q,OAAQpP,EAAAmE,cACTkL,QAAQ,kCACRrQ,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAH,OAAA,OAAAD,WAAA,iBAAAqD,MAVU7C,IAAZC,EAIM,MAJNsC,GAIM,IAAA9B,EAAA,MAAAA,EAAA,KAHJD,EAA4F,KAAzFG,MAAM,oBAAoBvB,MAAA,2CAAAwD,QAAA,iBAC7BpC,EAAiD,KAA9CpB,MAAA,oBAAAE,OAAA,MAAmC,WAAO,GAC7CkB,EAAwE,KAArEpB,MAAA,oBAAAE,OAAA,eAA4C,yBAAqB,UAahEc,EAAAmE,eAAAvE,IADRC,EAiBS,UAAAvvB,IAAA,EAfP0uB,MAAA,qBAAAI,WAAA,UAAAH,MAAA,QAAAI,OAAA,OAAAF,QAAA,kCAAAoD,OAAA,iDAAAT,WAAA,YAYChC,QAAOE,EAAAopB,WAAA,IAAA/oB,EAAA,MAAAA,EAAA,KAERD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,YAClC,QAAAQ,EAAA,WAKOhB,EAAAuoB,gBAAA3oB,IAAXC,EAqCM,MArCN6C,GAqCM,CApCJtC,EAYM,OAXJpB,MAAA,CAAAM,QAAA,gEAAAiD,OAAA,kCACCzC,QAAKO,EAAA,KAAAA,EAAA,GAAAO,GAAEZ,EAAAwoB,UAAYxoB,EAAAwoB,WAAA,CAEpBnoB,EAAA,MAAAA,EAAA,IAAAD,EAGK,MAHDpB,MAAA,CAAAC,MAAA,UAAAC,OAAA,MAAiC,CACnCkB,EAAgC,KAA7BG,MAAM,qBAAkBC,EAAK,eAElC,IACAJ,EAGK,KAFFG,MAAK4C,EAAEnD,EAAAwoB,SAAQ,qDAChBxpB,MAAA,CAAAC,MAAA,OAAA6C,WAAA,6BAII9B,EAAAwoB,UAAA5oB,IADRC,EAsBM,MAtBN6O,GAsBM,CAXJtO,EAUC,MAVDuO,GAUClO,EADKT,EAAAuoB,gBAAc,MAAAvnB,EAAA,mBAOhBhB,EAAAyoB,YAAA7oB,IADRC,EA+FM,OAAAvvB,IAAA,EA7FJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,yCAAAE,QAAA,yDAAAH,QAAA,QAaCW,QAAKO,iBAAOL,EAAAyoB,YAAU,eAEvBroB,EA6EM,OA5EJpB,MAAA,CAAAI,WAAA,UAAAC,OAAA,2CAAAF,QAAA,2BAAAI,MAAA,QAQCO,QAAKO,EAAA,KAAAA,EAAA,GAAAN,EAAN,OAAW,aAEXM,EAAA,MAAAA,EAAA,IAAAD,EAGK,MAHDpB,MAAA,CAAAC,MAAA,UAAAC,OAAA,eAA0C,CAC5CkB,EAAgC,KAA7BG,MAAM,qBAAkBC,EAAK,eAElC,kBACAJ,EAEI,KAFDpB,MAAA,CAAAC,MAAA,OAAAC,OAAA,mCAA0D,sCAE7D,IAAAmB,EAAA,MAAAA,EAAA,IACAD,EAKK,MALDpB,MAAA,CAAAC,MAAA,OAAAC,OAAA,yDAA6E,CAC/EkB,EAAoB,UAAhB,eACJA,EAAiB,UAAb,YACJA,EAAsB,UAAlB,iBACJA,EAAyB,UAArB,sBAAgB,MAEtBA,EAeY,kCAAAC,EAAA,KAAAA,EAAA,GAAAO,GAdDZ,EAAA4W,kBAAiBhW,GAC1BC,YAAY,YACZ7B,MAAA,CAAAO,MAAA,4BAAAH,WAAA,UAAAH,MAAA,UAAAI,OAAA,uCAAAF,QAAA,iDAAA2B,OAAA,2BAFSd,EAAA4W,qBAeXxW,EAoCM,MApCNyO,GAoCM,CAnCJzO,EAkBS,UAjBNiC,UAAWrC,EAAA4W,mBAAqB5W,EAAA4C,YACjC5D,MAUC6C,EAAA,CAVD,CAAAS,KAAA,IAAAlD,WAAA,UAAAH,MAAA,OAAAI,OAAA,OAAAF,QAAA,kCAAAoD,OAAA,kDAUC,CAAAC,SACmBxC,qBAAqBA,EAAA4C,YAAW,QACnD9C,QAAOE,EAAAqpB,cAAA,eAERjpB,EAA+C,KAA5CG,MAAM,mCAAiC,UAAAC,EAAK,IAC/CC,EAAGT,EAAA4C,YAAW,wBAAAkM,IAEhB1O,EAeS,UAdPpB,MAAA,CAAAsD,KAAA,IAAAlD,WAAA,OAAAH,MAAA,QAAAI,OAAA,OAAAF,QAAA,kCAAAoD,OAAA,kDAWCzC,QAAKO,eAAEL,EAAAyoB,YAAU,IACnB,mJC04BX,MAAM/kB,EAAgBC,KAChBC,SAAEA,GAAaC,EAAYH,GAC3B4lB,EAAsBC,IACtBzlB,EAAYC,IAGZwM,EAAmB7R,EAA6B,CACpD8qB,KAAK,EACLC,aAAa,EACbC,eAAe,EACfC,iBAAiB,EACjBC,mBAAmB,IAYfC,EAAqBC,IACzB,IAAKA,EAAMpqC,aAAe,GAE1B,MAAMqqC,EAAuB,GACvB5nC,EAAQ2nC,EAAM5tC,MAAM,KAE1B,UAAW8tC,KAAQ7nC,EAAO,CACxB,MAAM1C,EAAUuqC,EAAKtqC,OACrB,GAAKD,EAEL,GAAIA,EAAQrN,SAAS,KAAM,CAEzB,MAAOvC,EAAOE,GAAO0P,EAAQvD,MAAM,KAAKnI,IAAIw+B,GAAKuM,SAASvM,EAAE7yB,SAC5D,IAAKuqC,MAAMp6C,KAAWo6C,MAAMl6C,IAAQF,GAAS,GAAKE,GAAO,EACvD,QAAS2D,EAAI7D,EAAO6D,GAAK3D,EAAK2D,IAC5Bq2C,EAAW5wC,KAAKzF,EAGtB,KAAO,CAEL,MAAMwT,EAAK43B,SAASr/B,IACfwqC,MAAM/iC,IAAOA,GAAM,GACtB6iC,EAAW5wC,KAAK+N,EAEpB,CACF,CAEA,OAAO6iC,GAIHG,EAAmBxrB,EAAc,IACjCyrB,EAAiBzrB,GAAI,GACrB0rB,EAAa1rB,EAAY,IACzB2rB,EAAkB3rB,EAAgF,IAClG4rB,EAA0B5rB,GAAI,GAG9B6rB,EAAiB7rB,GAAI,GACrB8rB,EAAsB9rB,GAAI,GAG1Bmb,EAAenb,GAAI,GACnBob,EAAoBpb,EAAgD,MAGpE+rB,EAAkB/rB,EAA8C,IAChEgsB,EAAmBhsB,EAAY,IAC/BisB,EAAkBjsB,EAAuC,CAAEzxB,KAAM,GAAIo9B,QAAS,KAG9EugB,EAAuB,KAC3B,IACE,MAAMvV,EAAWtO,IACjB,IAAKsO,EAEH,YADA/P,QAAQoC,KAAK,yBAKf,MAAMZ,EAAa,GAAGuO,sBAChBlO,EAAYC,aAAaC,QAAQP,GAEvC,GAAIK,EACF,IACE,MAAMsD,EAASh5B,KAAK2L,MAAM+pB,GAC1BojB,EAAe78C,MAAQ+8B,EAAO8f,iBAAkB,EAChDC,EAAoB98C,MAAQ+8B,EAAO+f,sBAAuB,EAC1DllB,QAAQC,IAAI,2BAA4B,CACtCslB,YAAaN,EAAe78C,MAC5Bo9C,iBAAkBN,EAAoB98C,OAE1C,OAASuuC,GACP3W,QAAQjyB,MAAM,YAAa4oC,GAC3BsO,EAAe78C,OAAQ,EACvB88C,EAAoB98C,OAAQ,CAC9B,MAEA68C,EAAe78C,OAAQ,EACvB88C,EAAoB98C,OAAQ,CAEhC,OAAS2F,GACPiyB,QAAQjyB,MAAM,YAAaA,GAC3Bk3C,EAAe78C,OAAQ,EACvB88C,EAAoB98C,OAAQ,CAC9B,GAGIq9C,EAAuB,KAC3B,IACE,MAAM1V,EAAWtO,IACjB,IAAKsO,EAEH,YADA/P,QAAQoC,KAAK,yBAKf,MAAMZ,EAAa,GAAGuO,sBAChB5K,EAAS,CACb8f,eAAgBA,EAAe78C,MAC/B88C,oBAAqBA,EAAoB98C,OAE3C05B,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAU+4B,IAChDnF,QAAQC,IAAI,0BACd,OAASlyB,GACPiyB,QAAQjyB,MAAM,YAAaA,EAC7B,GAaI23C,EAAsB,KAC1B,IACE,MAAM3V,EAAWtO,IACjB,IAAKsO,EAEH,YADA/P,QAAQoC,KAAK,yBAKf,MAAMZ,EAAa,GAAGuO,qBAChBlO,EAAYC,aAAaC,QAAQP,GAEvC,GAAIK,EACF,IACE,IAAI8jB,EAAYx5C,KAAK2L,MAAM+pB,GAEtBp1B,MAAMC,QAAQi5C,KACjBA,EAAY,IAEdR,EAAgB/8C,MAAQu9C,EACxB3lB,QAAQC,IAAI,2BAA4BklB,EAAgB/8C,MAAMuC,OAAQ,IACxE,OAASgsC,GACP3W,QAAQjyB,MAAM,YAAa4oC,GAC3BwO,EAAgB/8C,MAAQ,EAC1B,MAEA+8C,EAAgB/8C,MAAQ,EAE5B,OAAS2F,GACPiyB,QAAQjyB,MAAM,YAAaA,GAC3Bo3C,EAAgB/8C,MAAQ,EAC1B,GAGIw9C,EAAsB,KAC1B,IACE,MAAM7V,EAAWtO,IACjB,IAAKsO,EAEH,YADA/P,QAAQoC,KAAK,yBAKf,MAAMZ,EAAa,GAAGuO,qBACtBjO,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAU+4C,EAAgB/8C,QAChE43B,QAAQC,IAAI,0BACd,OAASlyB,GACPiyB,QAAQjyB,MAAM,YAAaA,EAC7B,GAGI83C,EAAe,KACnB,GAA+B,KAA3BT,EAAiBh9C,MAAc,CACjC,MAAMsW,EAAQ86B,SAAS4L,EAAiBh9C,OACpCsW,GAAS,GAAKA,EAAQymC,EAAgB/8C,MAAMuC,SAC9C06C,EAAgBj9C,MAAQ,IAAK+8C,EAAgB/8C,MAAMsW,IAEvD,GA8CIonC,EAAqB,KACzB,IACE,MAAM/V,EAAWtO,IACjB,IAAKsO,EAEH,YADA/P,QAAQoC,KAAK,2BAGfpC,QAAQC,IAAI,QAAS8P,GAGrB,MAAMvO,EAAa,GAAGuO,oBAChBlO,EAAYC,aAAaC,QAAQP,GAEvC,GAAIK,EACF,IACEkjB,EAAgB38C,MAAQ+D,KAAK2L,MAAM+pB,GACnC7B,QAAQC,IAAI,6BAA8B8kB,EAAgB38C,MAAMuC,OAAQ,IAC1E,OAASgsC,GACP3W,QAAQjyB,MAAM,cAAe4oC,GAC7BoO,EAAgB38C,MAAQ,EAC1B,MAEA43B,QAAQC,IAAI,6BACZ8kB,EAAgB38C,MAAQ,EAE5B,OAAS2F,GACPiyB,QAAQjyB,MAAM,cAAeA,EAC/B,GAIIg4C,EAAqB,KACzB,IACE,MAAMhW,EAAWtO,IACjB,IAAKsO,EAEH,YADA/P,QAAQoC,KAAK,2BAGfpC,QAAQC,IAAI,WAAY8P,GACxB/P,QAAQC,IAAI,UAAWwC,EAAMsiB,EAAgB38C,QAG7C,MAAMo5B,EAAa,GAAGuO,oBACtBjO,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAU24C,EAAgB38C,QAEhE43B,QAAQC,IAAI,8BAA+B8kB,EAAgB38C,MAAMuC,OAAQ,IAC3E,OAASoD,GACPiyB,QAAQjyB,MAAM,cAAeA,EAC/B,GAIIi4C,EAAkB,KACtB,IAAK1nB,EAASl2B,MAAM69C,cAAgD,KAAhC3nB,EAASl2B,MAAM69C,aAAqB,CACtE,MAAMC,EAAW5nB,EAASl2B,MAAMq7B,cAAgB,GAC5CyiB,EAASp5C,SAAS,qCACpBwxB,EAASl2B,MAAM69C,aAAe,SACrBC,EAASp5C,SAAS,oBAC3BwxB,EAASl2B,MAAM69C,aAAe,QAE9B3nB,EAASl2B,MAAM69C,aAAe,QAElC,GAIFhjB,EAAU,KACRjD,QAAQC,IAAI,4BACZ+lB,IACAF,IACAJ,IACAJ,MAIF,uGAjTuBja,IACrBJ,EAAiB7iC,MAAMijC,IAAYJ,EAAiB7iC,MAAMijC,mTAoHrC,MACjB4Z,EAAe78C,OAAS88C,EAAoB98C,SAC9C68C,EAAe78C,OAAQ,EACvB88C,EAAoB98C,OAAQ,EAC5Bq9C,IACA9kB,OAAOl5B,OAAO8pC,KAAK,gGAiEO,KAC5B,MAAM5pC,EAAOg5B,OAAO+K,OAAO,YAC3B,GAAI/jC,GAAQA,EAAKyS,OAAQ,CACvB,MAAM2qB,EAAUpE,OAAO+K,OAAO,iBAC1B3G,GAAWA,EAAQ3qB,SACrB+qC,EAAgB/8C,MAAMyL,KAAK,CAAElM,KAAMA,EAAKyS,OAAQ2qB,QAASA,EAAQ3qB,SACjEwrC,IACAR,EAAiBh9C,OAAS+8C,EAAgB/8C,MAAMuC,OAAS,GAAGX,WAC5D67C,IACAllB,OAAOl5B,OAAOkJ,QAAQ,UAE1B,gBAGmB,KACnB,GAA+B,KAA3By0C,EAAiBh9C,OAAgBi9C,EAAgBj9C,MAAMT,KAAKyS,QAAUirC,EAAgBj9C,MAAM28B,QAAQ3qB,OAAQ,CAC9G,MAAMsE,EAAQ86B,SAAS4L,EAAiBh9C,OACpCsW,GAAS,GAAKA,EAAQymC,EAAgB/8C,MAAMuC,SAC9Cw6C,EAAgB/8C,MAAMsW,GAAS,IAAK2mC,EAAgBj9C,OACpDw9C,IACAjlB,OAAOl5B,OAAOkJ,QAAQ,UAE1B,MACEgwB,OAAOl5B,OAAOm7B,QAAQ,8BAIH,KACrB,GAA+B,KAA3BwiB,EAAiBh9C,OACf86B,QAAQ,eAAgB,CAC1B,MAAMxkB,EAAQ86B,SAAS4L,EAAiBh9C,OACpCsW,GAAS,GAAKA,EAAQymC,EAAgB/8C,MAAMuC,SAC9Cw6C,EAAgB/8C,MAAM+9C,OAAOznC,EAAO,GACpCknC,IACAR,EAAiBh9C,MAAQ,GACzBi9C,EAAgBj9C,MAAQ,CAAET,KAAM,GAAIo9B,QAAS,IAC7CpE,OAAOl5B,OAAOkJ,QAAQ,UAE1B,gFAgFqB,KACvBqvB,QAAQC,IAAI,sBACZU,OAAOl5B,OAAOkJ,QAAQ,oCAIG,KACzBqvB,QAAQC,IAAI,gBACI7B,EAAcgoB,eAE5BpmB,QAAQC,IAAI,YAEZD,QAAQjyB,MAAM,kCAIW,KAC3BiyB,QAAQC,IAAI,gBACI7B,EAAcioB,iBAE5BrmB,QAAQC,IAAI,cAEZD,QAAQjyB,MAAM,2CAIkB,KAClCiyB,QAAQC,IAAI,oBACZ,IAEgD,mBAAlCU,OAAe2lB,eACxB3lB,OAAe2lB,iBAEhB3lB,OAAOl5B,OAAOsG,MAAM,mBAExB,OAASA,GACPiyB,QAAQjyB,MAAM,cAAeA,GAC7B4yB,OAAOl5B,OAAOsG,MAAM,SAAYA,EAAgBC,QAClD,wBAI2B,KAC3B,MAAMu4C,EAAWjoB,EAASl2B,MAAM69C,aAC1BO,EAA4C,CAChDC,OAAQ,4BACRC,OAAQ,2DAGNF,EAAkBD,KACpBjoB,EAASl2B,MAAMq7B,aAAe+iB,EAAkBD,GAChD5lB,OAAOl5B,OAAOkJ,QAAQ,SAAqB,WAAb41C,EAAwB,SAAW,2CAMzC,KAC1B,IAEE,IAAKjoB,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAElD,YADA/C,OAAOl5B,OAAOm7B,QAAQ,wBAKRxE,EAAcgoB,gBAE5BpmB,QAAQC,IAAI,aAAc,CACxBimB,SAAU5nB,EAASl2B,MAAMq7B,aACzBE,MAAOrF,EAASl2B,MAAMu7B,MACtB4iB,SAAUjoB,EAASl2B,MAAM69C,aAEzBviB,QAASpF,EAASl2B,MAAMs7B,QAAU,MAAQpF,EAASl2B,MAAMs7B,QAAQ94B,OAAM,GAAM,IAGnF,OAASmD,GACPiyB,QAAQjyB,MAAM,eAAgBA,GAC9B4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,0BAI6B8B,UAC7B,IAIE,GAHAkwB,QAAQC,IAAI,mBAGgB,oBAAjB0mB,aAET,YADAhmB,OAAOl5B,OAAOsG,MAAM,wBAItBiyB,QAAQC,IAAI,wBAGZD,QAAQC,IAAI,+BACZ,MAAM2mB,QAA6BD,aAAa,YAIhD,GAHA3mB,QAAQC,IAAI,YAAa2mB,IAItBA,GACwB,oCAAzBA,GACAA,EAAqB95C,SAAS,OAC9B,CACAkzB,QAAQC,IAAI,4BAGZ,MAAM4mB,EAAYlmB,OAAO/yB,QAAU+yB,OAAO/F,KAAO+F,OAC3CmmB,EAAaD,EAAkBE,WAC/BC,EAAeH,EAAkBI,aAEvC,IAAIf,EAAW,GACX9L,EAAS,GACTzW,EAAQ,GAWZ,OATImjB,IACFZ,EAAWY,EAAUI,iBAAmBJ,EAAUK,eAAiB,GACnExjB,EAAQmjB,EAAUM,cAAgBN,EAAUO,cAAgB,IAG1DL,IACF5M,EAAS4M,EAAYM,gBAAkBN,EAAYO,QAAUP,EAAYP,QAAU,IAGhFP,GAAa9L,GAAWzW,GAUzBuiB,IAAU5nB,EAASl2B,MAAMq7B,aAAeyiB,GACxC9L,IAAQ9b,EAASl2B,MAAMs7B,QAAU0W,GACjCzW,IAAOrF,EAASl2B,MAAMu7B,MAAQA,SAE5BvF,EAAcgoB,oBAEpBzlB,OAAOl5B,OAAOkJ,QACZ,oBACGu1C,EAAW,SAASA,MAAe,KACnC9L,EAAS,aAAaA,EAAOxvC,cAAgB,KAC7C+4B,EAAQ,SAASA,IAAU,WAnB9BhD,OAAOl5B,OAAOm7B,QACZ,oEAsBN,CAGA,MAAM4kB,EAAcZ,EAAqBxsC,OACzC4lB,QAAQC,IAAI,iBAAiBunB,KAE7B,MAAMC,QAA6Bd,aAAa,gBAAgBa,KAIhE,IAAIE,EAHJ1nB,QAAQC,IAAI,YAAawnB,GAIzB,IACEC,EAAcv7C,KAAK2L,MAAM2vC,GACzBznB,QAAQC,IAAI,cAAeynB,EAC7B,OAAS/Q,GAGP,OAFA3W,QAAQjyB,MAAM,oBAAqB4oC,QACnChW,OAAOl5B,OAAOsG,MAAM,aAEtB,CAGA,IAAIm4C,EAAW,GACX9L,EAAS,GACTzW,EAAQ,GAYZ,GATI+jB,EAAY,YACdxB,EAAWwB,EAAY,WACvB1nB,QAAQC,IAAI,yBAA0BimB,IAC7BwB,EAAYC,aACrBzB,EAAWwB,EAAYC,WACvB3nB,QAAQC,IAAI,4BAA6BimB,IAIvCwB,EAAY,aAAc,CAC5B,MAAME,EAAWF,EAAY,aAC7B1nB,QAAQC,IAAI,uBAAwB2nB,GACpC5nB,QAAQC,IAAI,wCACd,MAAWynB,EAAY18C,MACrBovC,EAASsN,EAAY18C,IACrBg1B,QAAQC,IAAI,uBAUd,GANIynB,EAAY/jB,QACdA,EAAQ+jB,EAAY/jB,MACpB3D,QAAQC,IAAI,UAAW0D,KAIpBuiB,IAAaviB,EAShB,OARAhD,OAAOl5B,OAAOm7B,QACZ,qFAMF5C,QAAQoC,KAAK,eAAgBslB,GAK1BtN,GACHpa,QAAQC,IAAI,6BAId,IAAI4nB,EAAgB,EACpB,MAAMC,EAA0B,GAE5B5B,IACF5nB,EAASl2B,MAAMq7B,aAAeyiB,EAC9B2B,IACAC,EAAcj0C,KAAK,aAAaqyC,MAG9B9L,IACF9b,EAASl2B,MAAMs7B,QAAU0W,EACzByN,IACAC,EAAcj0C,KAAK,iBAAiBumC,EAAOxvC,OAAM,OAG/C+4B,IACFrF,EAASl2B,MAAMu7B,MAAQA,EACvBkkB,IACAC,EAAcj0C,KAAK,SAAS8vB,YAIxBvF,EAAcgoB,eAGpB,IAAI2B,EACF,cAAcF,sBACFL,QACTM,EAAcvwC,KAAK,QAGnB6iC,IACH2N,GAAkB,oDAGpBpnB,OAAOl5B,OAAOkJ,QAAQo3C,GAEtB/nB,QAAQC,IAAI,YAAa,CACvBunB,cACAtB,WACA9L,OAAQA,EAAS,MAAQA,EAAOxvC,UAAY,GAC5C+4B,SAEJ,OAAS51B,GACPiyB,QAAQjyB,MAAM,eAAgBA,GAC9B4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,uBAG0B8B,UAC1B,IAAI+0C,EAAez8C,MAEnB,IAOE,GANAy8C,EAAez8C,OAAQ,EACvB43B,QAAQC,IAAI,kBACZD,QAAQC,IAAI,aAAc3B,EAASl2B,MAAMq7B,cACzCzD,QAAQC,IAAI,cAAe3B,EAASl2B,MAAMs7B,QAAU,MAAQpF,EAASl2B,MAAMs7B,QAAQ94B,OAAM,GAAM,QAG1F0zB,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAElD,YADA/C,OAAOl5B,OAAOm7B,QAAQ,wBAIxBjC,OAAOl5B,OAAO8pC,KAAK,4BAGnB,MAAMyW,qBAAEA,SAAyBjkB,EAAAj0B,UAAA,MAAAk4C,8BAAMhkB,OAAO,cAAS3rB,KAAA4rB,KAAAgkB,GAAA,OAAAD,yBAAA7jB,wBACjD+jB,QAAeF,IAErBhoB,QAAQC,IAAI,gBAAiBioB,GAEzBA,EAAOv9C,OAAS,GAElBi6C,EAAiBx8C,MAAQ8/C,EACzBvnB,OAAOl5B,OAAOkJ,QACZ,WAAWu3C,EAAOv9C,sBACPu9C,EAAOt9C,MAAM,EAAG,GAAG2M,KAAK,QAAQ2wC,EAAOv9C,OAAS,EAAI,MAAQ,OAIpE2zB,EAASl2B,MAAMu7B,OAASukB,EAAO,KAClC5pB,EAASl2B,MAAMu7B,MAAQukB,EAAO,GAC9BloB,QAAQC,IAAI,YAAaioB,EAAO,MAGlCvnB,OAAOl5B,OAAOm7B,QAAQ,gBAE1B,OAAS70B,GACPiyB,QAAQjyB,MAAM,YAAaA,GAG3B,MAAM2iC,EAAgB3iC,EAAgBC,QAGlC0iC,EAAa/lC,OAAS,IACxBg2B,OAAOl5B,OAAOsG,MACZ,6GAQF4yB,OAAOl5B,OAAOsG,MAAM,eAAe2iC,KAGrC1Q,QAAQjyB,MAAM,aAAc2iC,EAC9B,SACEmU,EAAez8C,OAAQ,CACzB,0BAG6B0H,UAC7B,IAIE,GAHAkwB,QAAQC,IAAI,YAGP3B,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAElD,YADA/C,OAAOl5B,OAAOm7B,QAAQ,wBAIxBjC,OAAOl5B,OAAO8pC,KAAK,iBAGnB,MAAMf,qBAAEA,EAAA1M,gBAAsBA,SAAoBC,EAAAj0B,UAAA,MAAA0gC,uBAAA1M,yBAAME,OAAO,cAAa3rB,KAAA4rB,KAAAC,GAAA,OAAAsM,uBAAA1M,oBAAAK,wBACtEoM,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cACnDzD,QAAQC,IAAI,aAAcsQ,GAG1B,MAWMnM,EAAiBN,EAXD,CACpBH,MAAOrF,EAASl2B,MAAMu7B,OAAS,gBAC/BU,SAAU,CAAC,CAAEC,KAAM,OAAQjuB,QAAS,UACpCmuB,WAAY,EACZD,YAAajG,EAASl2B,MAAMm8B,YAC5BE,MAAOnG,EAASl2B,MAAMq8B,MACtBC,iBAAkBpG,EAASl2B,MAAMs8B,iBACjCC,kBAAmBrG,EAASl2B,MAAMu8B,mBAIkBrG,EAASl2B,MAAMq7B,cACrEzD,QAAQC,IAAI,aAAcmE,GAG1B,MAAMQ,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUg4B,KAGvB,GAAIQ,EAASM,GAAI,CACf,MAAM14B,QAAao4B,EAASS,OAC5BrF,QAAQC,IAAI,YAAazzB,GAGzB,MAAM27C,EAAQ37C,EAAK+4B,UAAU,IAAIv3B,SAASqI,SAAW,QAC/C+xC,EAAY57C,EAAKm3B,OAASrF,EAASl2B,MAAMu7B,MAE/ChD,OAAOl5B,OAAOkJ,QAAQ,mBAAwBy3C,aAA0BD,EAAM7hB,UAAU,EAAG,SAC7F,KAAO,CACL,MAAM+T,QAAkBzV,EAAS8H,OACjC1M,QAAQjyB,MAAM,YAAassC,GAC3B1Z,OAAOl5B,OAAOsG,MAAM,WAAW62B,EAASO,gBAAqBkV,EAAU/T,UAAU,EAAG,OACtF,CACF,OAASv4B,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,WAAcA,EAAgBC,QACpD,oBAGuB8B,UACvB,IAAIszB,EAAwB,KAC5B,IACE,GAAI6hB,EAAe78C,MAAO,OAc1B,GAZA43B,QAAQC,IAAI,aACZglB,EAAe78C,OAAQ,EACvBq9C,IAGAriB,EAAS5E,EAAU6pB,QAAQ,CACzBjtB,MAAO,OACP7M,YAAa,UAAU+P,EAASl2B,MAAMkgD,sBAAsBhqB,EAASl2B,MAAMmgD,iBAC3EC,SAAU,QAIPlqB,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAElD,YADA/C,OAAOl5B,OAAOm7B,QAAQ,wBAKxB,QAAwC,IAApCtE,EAASl2B,MAAMkgD,uBAAoE,IAAlChqB,EAASl2B,MAAMmgD,eAElE,YADA5nB,OAAOl5B,OAAOm7B,QAAQ,gBAKxB,GAAItE,EAASl2B,MAAMkgD,iBAAmB,GAAKhqB,EAASl2B,MAAMmgD,eAAiBjqB,EAASl2B,MAAMkgD,iBAExF,YADA3nB,OAAOl5B,OAAOm7B,QAAQ,0BAIxB5C,QAAQC,IAAI,SAAS3B,EAASl2B,MAAMkgD,sBAAsBhqB,EAASl2B,MAAMmgD,kBAGzEhU,EAAansC,OAAQ,EACrBosC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eACpC0B,EAAkBpsC,OAAO2qC,UACvB,SAASzU,EAASl2B,MAAMkgD,sBAAsBhqB,EAASl2B,MAAMmgD,kBAG/D/T,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,mBACpC0B,EAAkBpsC,OAAO2qC,UAAU,uBAGnC,MAAM0V,kBAAEA,SAAsB1kB,EAAAj0B,UAAA,MAAA24C,2BAAMzkB,OAAO,cAAS3rB,KAAA4rB,KAAAgkB,GAAA,OAAAQ,sBAAAtkB,wBAC9CukB,QAAgBD,EAAkBnqB,EAASl2B,MAAMkgD,iBAAkBhqB,EAASl2B,MAAMmgD,gBAExF/T,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eAEpC9S,QAAQC,IAAI,QAASyoB,GAGrB,MAAM3Y,EAAWtO,IACjB,GAAIsO,EAAU,CACZ,MAAMvO,EAAa,GAAGuO,iBACtBjO,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAU,CAAEu8C,aAAcD,KAChE1oB,QAAQC,IAAI,wBACd,CAGA+jB,EAAoB4E,WAClBtqB,EAASl2B,MAAMkgD,kBAAoB,EACnChqB,EAASl2B,MAAMmgD,gBAAkBjqB,EAASl2B,MAAMkgD,kBAAoB,EACpEI,GAIF/nB,OAAOkoB,cAAc,IAAIC,YAAY,4BAErCtU,EAAkBpsC,OAAOwqC,YAAY,KACrC4B,EAAkBpsC,OAAO0qC,WAAW,WACpC0B,EAAkBpsC,OAAO2qC,UAAU,cAEnCpN,WAAW,KACT4O,EAAansC,OAAQ,EACrBu4B,OAAOl5B,OAAOkJ,QAAQ,gBAElByyB,GACF5E,EAAUkH,aAAatC,IAExB,IACL,OAASr1B,GACPiyB,QAAQjyB,MAAM,QAASA,GACvBwmC,EAAansC,OAAQ,EACrBu4B,OAAOl5B,OAAOsG,MAAM,SAAYA,EAAgBC,SAE5Co1B,GACF5E,EAAU+E,SAASH,EAASr1B,EAAgBC,QAEhD,SACEi3C,EAAe78C,OAAQ,EACvBq9C,GACF,yBAG4B31C,UAC5B,IAAIszB,EAAwB,KAC5B,IACE,GAAI8hB,EAAoB98C,MAAO,OAc/B,GAZA43B,QAAQC,IAAI,aACZilB,EAAoB98C,OAAQ,EAC5Bq9C,IAGAriB,EAAS5E,EAAU6pB,QAAQ,CACzBjtB,MAAO,OACP7M,YAAa,UAAU+P,EAASl2B,MAAM2gD,4BAA4BzqB,EAASl2B,MAAM4gD,2BACjFR,SAAU,QAIPlqB,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAElD,YADA/C,OAAOl5B,OAAOm7B,QAAQ,wBAUxB,GALA2R,EAAansC,OAAQ,EACrBosC,EAAkBpsC,OAAOwqC,YAAY,GACrC4B,EAAkBpsC,OAAO0qC,WAAW,gBAG/BxU,EAASl2B,MAAM2gD,yBAA2BzqB,EAASl2B,MAAM4gD,qBAE5D,YADAroB,OAAOl5B,OAAOm7B,QAAQ,gBAKxB,IAAIqmB,EAA8B,KAElC,GAAI5D,EAAgBj9C,MAAM28B,QAAQ3qB,OAAQ,CAEpB8oB,QAClB,UAAUmiB,EAAgBj9C,MAAMT,iBAAiB09C,EAAgBj9C,MAAM28B,aAGvEkkB,EAAe5D,EAAgBj9C,MAAM28B,QAEzC,CAOA,GALKkkB,IAEHA,EAAetoB,OAAO+K,OAAO,mCAG1Bud,IAAiBA,EAAa7uC,OAEjC,YADAumB,OAAOl5B,OAAOm7B,QAAQ,WAIxB,MAAMmC,EAAoBkkB,EACvBryC,MAAM,KACNnI,IAAKy6C,GAAcA,EAAE9uC,QACrBvD,OAAQqyC,GAAcA,GAEzB,GAAuB,IAAnBnkB,EAAQp6B,OAEV,YADAg2B,OAAOl5B,OAAOm7B,QAAQ,cAWxB,IAAIumB,EAPJ3U,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eACpC0B,EAAkBpsC,OAAO2qC,UACvB,SAASzU,EAASl2B,MAAM2gD,4BAA4BzqB,EAASl2B,MAAM4gD,wBAKrE,IACE,MAAMI,EAAe,GAAG9qB,EAASl2B,MAAM2gD,0BAA0BzqB,EAASl2B,MAAM4gD,uBAIhF,GAHAhpB,QAAQC,IAAI,UAAWmpB,QAImB,IAAhCzoB,OAAeC,cACiC,mBAAhDD,OAAeC,aAAayoB,gBAKpC,MAAM,IAAI7/C,MAAM,oCAHhB2/C,EAAgBxoB,OAAeC,aAAayoB,gBAAgBD,GAC5DppB,QAAQC,IAAI,gDAAiDkpB,EAAax+C,QAK5E6pC,EAAkBpsC,OAAO2qC,UAAU,OAAOoW,EAAax+C,aACzD,OAASoD,GAIP,OAHAiyB,QAAQjyB,MAAM,YAAaA,GAC3BwmC,EAAansC,OAAQ,OACrBu4B,OAAOl5B,OAAOsG,MAAM,aAAgBA,EAAgBC,QAEtD,CAEA,IAAKm7C,GAAwC,IAAxBA,EAAax+C,OAEhC,YADAg2B,OAAOl5B,OAAOm7B,QAAQ,aAKxB,MAAM0mB,EAAeH,EAClB16C,IAAI,CAAC86C,EAAKjmB,IAEF,MAAMA,EAAM,MADO,SAAbimB,EAAIjlB,KAAkB,KAAO,SACRilB,EAAIv7C,WAEvCuJ,KAAK,QAEFqsB,EAAe,qbA4BfC,EAAa,qCAEZkB,EAAQxtB,KAAK,YACpBwtB,EAAQp6B,mBAAmBo6B,EAAQp6B,2BAGrC2+C,oCAKUvkB,EAAQt2B,IAAIy6C,GAAK,IAAIA,UAAU3xC,KAAK,sFAO5CyoB,QAAQC,IAAI,aACZD,QAAQC,IAAI,oBAAqB2D,GACjC5D,QAAQC,IAAI,kBAAmB4D,EAAWj5B,MAAM,EAAG,KAAO,OAE1D4pC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,qBACpC0B,EAAkBpsC,OAAO2qC,UAAU,SAAShO,EAAQxtB,KAAK,SAGzD,MAAMi5B,qBAAEA,EAAA1M,gBAAsBA,SAAoBC,EAAAj0B,UAAA,MAAA0gC,uBAAA1M,yBAAME,OAAO,cAAa3rB,KAAA4rB,KAAAC,GAAA,OAAAsM,uBAAA1M,oBAAAK,wBACtEoM,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAEnD+Q,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,oBACpC0B,EAAkBpsC,OAAO2qC,UAAU,uBAEnC,MAoBM3O,EAAiBN,EApBD,CACpBH,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CACEC,KAAM,SACNjuB,QAASutB,GAEX,CACEU,KAAM,OACNjuB,QAASwtB,IAGbW,WAAYlG,EAASl2B,MAAMo8B,WAC3BD,YAAa,GACbE,MAAOnG,EAASl2B,MAAMq8B,MACtBC,iBAAkBpG,EAASl2B,MAAMs8B,iBACjCC,kBAAmBrG,EAASl2B,MAAMu8B,mBAIkBrG,EAASl2B,MAAMq7B,cAG/DmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUg4B,KAGvB,IAAKQ,EAASM,GAAI,CAChB,MAAMmV,QAAkBzV,EAAS8H,OASjC,OARA6H,EAAansC,OAAQ,EACrB43B,QAAQjyB,MAAM,aAAc62B,EAASO,OAAQP,EAASQ,YACtDpF,QAAQjyB,MAAM,QAASssC,QACvB1Z,OAAOl5B,OAAOsG,MACZ,oBAAoB62B,EAASO,eAAeP,EAASQ,gEACrD,GACA,CAAEK,QAAS,KAGf,CAEA+O,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBAEpC,MAAM/iC,QAAe60B,EAASS,OAG9B,GAFArF,QAAQC,IAAI,QAASlwB,IAEhBA,EAAOw1B,UAAYx1B,EAAOw1B,QAAQ,KAAOx1B,EAAOw1B,QAAQ,GAAGv3B,QAI9D,OAHAumC,EAAansC,OAAQ,EACrB43B,QAAQjyB,MAAM,cAAegC,QAC7B4wB,OAAOl5B,OAAOsG,MAAM,+BAAgC,GAAI,CAAE03B,QAAS,MAIrE,MAAM+jB,EAAaz5C,EAAOw1B,QAAQ,GAAGv3B,QAAQqI,QAO7C,IAAIozC,EANJzpB,QAAQC,IAAI,UAAWupB,GAEvBhV,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eAIpC,IAEE,GACE0W,EAAW18C,SAAS,UACpB08C,EAAW18C,SAAS,SACpB08C,EAAW18C,SAAS,SACpB08C,EAAW18C,SAAS,WAClB08C,EAAW18C,SAAS,OAAS08C,EAAW18C,SAAS,KAQnD,OALAynC,EAAansC,OAAQ,EACrBu4B,OAAOl5B,OAAOsG,MAAM,+BAA+By7C,EAAW5+C,MAAM,EAAG,OAAQ,GAAI,CACjF66B,QAAS,WAEXzF,QAAQjyB,MAAM,eAAgBy7C,GAKhC,IAAI5Y,EAAW4Y,EAAWpvC,OAG1Bw2B,EAAWA,EACRnjC,QAAQ,eAAgB,IACxBA,QAAQ,UAAW,IACnBA,QAAQ,UAAW,IAGtB,MAAMojC,EAAYD,EAASE,MAAM,eACjC,IAAID,EAGF,MAAM,IAAIrnC,MAAM,mBAFhBigD,EAAct9C,KAAK2L,MAAM+4B,EAAU,GAIvC,OAAS8F,GAKP,OAJA3W,QAAQjyB,MAAM,YAAa4oC,GAC3B3W,QAAQC,IAAI,UAAWupB,GACvBjV,EAAansC,OAAQ,OACrBu4B,OAAOl5B,OAAOsG,MAAM,2BAA2By7C,EAAW5+C,MAAM,EAAG,OAAQ,GAAI,CAAE66B,QAAS,KAE5F,CAGA,IAAKgkB,EAAYj9C,OAASC,MAAMC,QAAQ+8C,EAAYj9C,MAElD,YADAm0B,OAAOl5B,OAAOsG,MAAM,2BAKtB,QAASK,EAAI,EAAGA,EAAIq7C,EAAYj9C,KAAK7B,OAAQyD,IAAK,CAChD,IAAK3B,MAAMC,QAAQ+8C,EAAYj9C,KAAK4B,IAElC,YADAuyB,OAAOl5B,OAAOsG,MAAM,IAAIK,EAAI,iBAG9B,GAAIq7C,EAAYj9C,KAAK4B,GAAGzD,SAAWo6B,EAAQp6B,OAIzC,OAHAg2B,OAAOl5B,OAAOsG,MAAM,IAAIK,EAAI,eAAe22B,EAAQp6B,aAAa8+C,EAAYj9C,KAAK4B,GAAGzD,WACpFq1B,QAAQC,IAAI,QAAS8E,QACrB/E,QAAQC,IAAI,QAASwpB,EAAYj9C,KAAK4B,GAG1C,CAGA,MAAMs7C,EAAY,CAChB3kB,UACAv4B,KAAMi9C,EAAYj9C,MAIdm9C,EAAUjT,IAChB,GAAIiT,EAAS,CACX,MACMnoB,EAAa,GADFC,qBAC+BkoB,IAGhD,IAAIC,EAAgB,GACpB,MAAM/nB,EAAYC,aAAaC,QAAQP,GACvC,GAAIK,EACF,IACE+nB,EAAgBz9C,KAAK2L,MAAM+pB,EAC7B,OAAS1xB,GACP6vB,QAAQjyB,MAAM,YAAaoC,GAC3By5C,EAAgB,EAClB,CAIFA,EAAc/1C,KAAK,CACjBg2C,SAAUvrB,EAASl2B,MAAM2gD,uBACzBe,OAAQxrB,EAASl2B,MAAM4gD,qBACvBjkB,QAAS2kB,EAAU3kB,QACnBv4B,KAAMk9C,EAAUl9C,OAIlBs1B,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAUw9C,IAChD5pB,QAAQC,IAAI,iCAAkC0pB,GAE9CnV,EAAkBpsC,OAAOwqC,YAAY,KACrC4B,EAAkBpsC,OAAO0qC,WAAW,aACpC0B,EAAkBpsC,OAAO2qC,UAAU,OAAO2W,EAAUl9C,KAAK7B,cAEzDg7B,WAAW,KACT4O,EAAansC,OAAQ,EACrBu4B,OAAOl5B,OAAOkJ,QAAQ,WAAW+4C,EAAUl9C,KAAK7B,aAE5Cy4B,GACF5E,EAAUkH,aAAatC,IAExB,KAEHpD,QAAQC,IAAI,cAAe2pB,EAC7B,MACErV,EAAansC,OAAQ,EACrBu4B,OAAOl5B,OAAOm7B,QAAQ,kBAE1B,OAAS70B,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzBwmC,EAAansC,OAAQ,EACrBu4B,OAAOl5B,OAAOsG,MAAM,WAAcA,EAAgBC,SAE9Co1B,GACF5E,EAAU+E,SAASH,EAASr1B,EAAgBC,QAEhD,SACEk3C,EAAoB98C,OAAQ,EAC5Bq9C,GACF,uBAG0B,KAC1B,IAEE,IAAKnnB,EAASl2B,MAAM2gD,yBAA2BzqB,EAASl2B,MAAM4gD,qBAE5D,YADAroB,OAAOl5B,OAAOm7B,QAAQ,gBAKxB,MAAMqmB,EAA8BtoB,OAAO+K,OAAO,iCAClD,IAAKud,IAAiBA,EAAa7uC,OAEjC,YADAumB,OAAOl5B,OAAOm7B,QAAQ,WAKxB,MAAMmC,EAAoBkkB,EACvBryC,MAAM,KACNnI,IAAKy6C,GAAcA,EAAE9uC,QACrBvD,OAAQqyC,GAAcA,GAEzB,GAAuB,IAAnBnkB,EAAQp6B,OAEV,YADAg2B,OAAOl5B,OAAOm7B,QAAQ,cAKxB,MAAMmnB,EAAiB,CACrBF,SAAUvrB,EAASl2B,MAAM2gD,uBACzBe,OAAQxrB,EAASl2B,MAAM4gD,qBACvBjkB,UACAv4B,KAAM,IAIFm9C,EAAUjT,IAChB,GAAIiT,EAAS,CACX,MACMnoB,EAAa,GADFC,qBAC+BkoB,IAGhD,IAAIC,EAAgB,GACpB,MAAM/nB,EAAYC,aAAaC,QAAQP,GACvC,GAAIK,EACF,IACE+nB,EAAgBz9C,KAAK2L,MAAM+pB,EAC7B,OAAS1xB,GACP6vB,QAAQjyB,MAAM,YAAaoC,GAC3By5C,EAAgB,EAClB,CAIFA,EAAc/1C,KAAKk2C,GAGnBjoB,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAUw9C,IAChD5pB,QAAQC,IAAI,kCAAmC0pB,GAE/ChpB,OAAOl5B,OAAOkJ,QAAQ,cAAco0B,EAAQxtB,KAAK,SACjDyoB,QAAQC,IAAI,eAAgB8pB,EAC9B,MACEppB,OAAOl5B,OAAOm7B,QAAQ,kBAE1B,OAAS70B,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,WAAcA,EAAgBC,QACpD,wBAG2B8B,UAC3B,IAGE,GAFAkwB,QAAQC,IAAI,YAEP6kB,EAAW18C,MAAMgS,OAEpB,YADAumB,OAAOl5B,OAAOm7B,QAAQ,eAKxB,MAAMonB,EAASlF,EAAW18C,MAAMwO,MAAM,KAAKnI,IAAI+1C,GAASA,EAAMpqC,QACxDqqC,EAAuB,GAE7B,UAAWD,KAASwF,EAClB,GAAIxF,EAAM13C,SAAS,KAAM,CAEvB,MAAOvC,EAAOE,GAAO+5C,EAAM5tC,MAAM,KAAKnI,IAAIwF,QAC1C,GAAI1J,GAASE,GAAOF,GAASE,EAC3B,QAAS2D,EAAI7D,EAAO6D,GAAK3D,EAAK2D,IAC5Bq2C,EAAW5wC,KAAKzF,EAGtB,KAAO,CAEL,MAAMwT,EAAK3N,OAAOuwC,GACd5iC,GACF6iC,EAAW5wC,KAAK+N,EAEpB,CAGF,GAA0B,IAAtB6iC,EAAW95C,OAEb,YADAg2B,OAAOl5B,OAAOm7B,QAAQ,cAKxB,IAAIumB,EACJ,IAEE,QAA4C,IAAhCxoB,OAAeC,aAWzB,MAAM,IAAIp3B,MAAM,oBAXuC,CACvD,MAAMygD,EAAiBtpB,OAAeC,aAAaspB,sBAAwB,EAG3E,GAFAlqB,QAAQC,IAAI,UAAWgqB,GAEqC,mBAAhDtpB,OAAeC,aAAayoB,gBAItC,MAAM,IAAI7/C,MAAM,oCAHhB2/C,EAAgBxoB,OAAeC,aAAayoB,gBAAgB,KAAKY,KACjEjqB,QAAQC,IAAI,8BAA+BkpB,EAAax+C,OAI5D,CAGF,OAASoD,GAGP,OAFAiyB,QAAQjyB,MAAM,YAAaA,QAC3B4yB,OAAOl5B,OAAOsG,MAAM,aAAgBA,EAAgBC,QAEtD,CAEA,IAAKm7C,GAAwC,IAAxBA,EAAax+C,OAEhC,YADAg2B,OAAOl5B,OAAOm7B,QAAQ,YAKxB,IAAIunB,EAAc,EAClB,MAAMC,EAAiB,GAEvB,UAAWC,KAAa5F,EAAY,CAGlC,GADsBM,EAAgB38C,MAAMga,KAAKmnC,GAAOA,EAAIe,aAAeD,GACxD,CACjBrqB,QAAQC,IAAI,MAAMoqB,cAClB,QACF,CAEA,MAAMr8C,EAAUm7C,EAAa/b,KAAKmc,GAAOA,EAAIe,aAAeD,GACxDr8C,IAEFo8C,EAAev2C,KAAK,CAClBy2C,WAAYD,EACZE,WAAW,IAIbxF,EAAgB38C,MAAMyL,KAAK,CACzBy2C,WAAYD,EACZ1iD,KAAMqG,EAAQrG,MAAQ,UACtB28B,KAAMt2B,EAAQs2B,MAAQ,OACtBt2B,QAASA,EAAQA,SAAW,KAE9Bm8C,IAEJ,CAGA,GAAIC,EAAez/C,OAAS,EAC1B,IACEq1B,QAAQC,IAAI,qBAAsBwkB,GAGlC,UAAW4F,KAAa5F,EACtB,UACQkC,aAAa,SAAS0D,KAC5BrqB,QAAQC,IAAI,UAAUoqB,IACxB,OAASt8C,GACPiyB,QAAQjyB,MAAM,QAAQs8C,QAAiBt8C,EACzC,CAGF4yB,OAAOl5B,OAAOkJ,QAAQ,UACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,aAAcA,GAC5B4yB,OAAOl5B,OAAOsG,MAAM,gBAAmBA,EAAgBC,QACzD,CAGEm8C,EAAc,GAEhBpE,IACAplB,OAAOl5B,OAAOkJ,QAAQ,QAAQw5C,SAC9BrF,EAAW18C,MAAQ,IAEnBu4B,OAAOl5B,OAAOm7B,QAAQ,YAE1B,OAAS70B,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,WAAcA,EAAgBC,QACpD,wBAG2B8B,UAC3B,IAGE,GAFAkwB,QAAQC,IAAI,cAEP6kB,EAAW18C,MAAMgS,OAEpB,YADAumB,OAAOl5B,OAAOm7B,QAAQ,eAKxB,MAAM6hB,EAAaF,EAAkBO,EAAW18C,MAAMgS,QACtD,GAA0B,IAAtBqqC,EAAW95C,OAEb,YADAg2B,OAAOl5B,OAAOm7B,QAAQ,cAKxB,IAAIumB,EACJ,IAEE,QAA4C,IAAhCxoB,OAAeC,aAWzB,MAAM,IAAIp3B,MAAM,oBAXuC,CACvD,MAAMygD,EAAiBtpB,OAAeC,aAAaspB,sBAAwB,EAG3E,GAFAlqB,QAAQC,IAAI,UAAWgqB,GAEqC,mBAAhDtpB,OAAeC,aAAayoB,gBAItC,MAAM,IAAI7/C,MAAM,oCAHhB2/C,EAAgBxoB,OAAeC,aAAayoB,gBAAgB,KAAKY,KACjEjqB,QAAQC,IAAI,8BAA+BkpB,EAAax+C,OAI5D,CAGF,OAASoD,GAGP,OAFAiyB,QAAQjyB,MAAM,YAAaA,QAC3B4yB,OAAOl5B,OAAOsG,MAAM,aAAgBA,EAAgBC,QAEtD,CAEA,IAAKm7C,GAAwC,IAAxBA,EAAax+C,OAEhC,YADAg2B,OAAOl5B,OAAOm7B,QAAQ,YAKxB,MAAM4nB,EAAiB,GACvB,IAAIC,EAAa,EAEjB,UAAWJ,KAAa5F,EAAY,CAClB0E,EAAa/b,KAAKmc,GAAOA,EAAIe,aAAeD,KAE1DG,EAAe32C,KAAK,CAClBy2C,WAAYD,EACZE,WAAW,IAEbE,IAEJ,CAEA,GAA8B,IAA1BD,EAAe7/C,OAEjB,YADAg2B,OAAOl5B,OAAOm7B,QAAQ,aAKxB,IAEE,UAAWynB,KAAa5F,EACtB,UACQkC,aAAa,WAAW0D,KAC9BrqB,QAAQC,IAAI,UAAUoqB,IACxB,OAASt8C,GACPiyB,QAAQjyB,MAAM,QAAQs8C,QAAiBt8C,EACzC,CAEJ,OAASA,GAGP,OAFAiyB,QAAQjyB,MAAM,aAAcA,QAC5B4yB,OAAOl5B,OAAOsG,MAAM,gBAAmBA,EAAgBC,QAEzD,CAGA+2C,EAAgB38C,MAAQ28C,EAAgB38C,MAAMyO,OAAO6zC,IAAcjG,EAAW33C,SAAS49C,EAAUJ,aAGjGvE,IAEAplB,OAAOl5B,OAAOkJ,QAAQ,QAAQ85C,SAC9B3F,EAAW18C,MAAQ,EACrB,OAAS2F,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,WAAcA,EAAgBC,QACpD,yBAG4B8B,MAAO66C,GAAqB,KACxD,IAUE,IAAIxB,EATJnpB,QAAQC,IAAI,SAAU0qB,GAGe,IAAjC5F,EAAgB38C,MAAMuC,SACxBq1B,QAAQC,IAAI,qBACZ6lB,KAKF,IAEE,QAA4C,IAAhCnlB,OAAeC,aAWzB,MAAM,IAAIp3B,MAAM,oBAXuC,CACvD,MAAMygD,EAAiBtpB,OAAeC,aAAaspB,sBAAwB,EAG3E,GAFAlqB,QAAQC,IAAI,UAAWgqB,GAEqC,mBAAhDtpB,OAAeC,aAAayoB,gBAItC,MAAM,IAAI7/C,MAAM,oCAHhB2/C,EAAgBxoB,OAAeC,aAAayoB,gBAAgB,KAAKY,KACjEjqB,QAAQC,IAAI,8BAA+BkpB,EAAax+C,OAI5D,CAGF,OAASoD,GAKP,OAJAiyB,QAAQjyB,MAAM,YAAaA,QACvB48C,GACFhqB,OAAOl5B,OAAOsG,MAAM,aAAgBA,EAAgBC,SAGxD,CAEA,IAAKm7C,GAAwC,IAAxBA,EAAax+C,OAIhC,YAHIggD,GACFhqB,OAAOl5B,OAAOm7B,QAAQ,aAM1B,MAAMgoB,EAAsB,GAC5B,IAAIC,EAAe,EAEnB,UAAWH,KAAa3F,EAAgB38C,MAAO,CAC7C,MAAM4F,EAAUm7C,EAAa/b,QAAYmc,EAAIe,aAAeI,EAAUJ,YAClEt8C,EAEF48C,EAAoB/2C,KAAK,CACvBy2C,WAAYI,EAAUJ,WACtB3iD,KAAMqG,EAAQrG,MAAQ+iD,EAAU/iD,KAChC28B,KAAMt2B,EAAQs2B,MAAQomB,EAAUpmB,KAChCt2B,QAASA,EAAQA,SAAW08C,EAAU18C,UAIxC68C,GAEJ,CAGA9F,EAAgB38C,MAAQwiD,EAGxB7E,IAEI4E,IACEE,EAAe,EACjBlqB,OAAOl5B,OAAOkJ,QAAQ,YAAYk6C,aAElClqB,OAAOl5B,OAAOkJ,QAAQ,oBAI1BqvB,QAAQC,IAAI,QAAQ2qB,EAAoBjgD,kBAAkBkgD,SAC5D,OAAS98C,GACPiyB,QAAQjyB,MAAM,YAAaA,GACvB48C,GACFhqB,OAAOl5B,OAAOsG,MAAM,aAAgBA,EAAgBC,QAExD,wBAG2B8B,MAAOu6C,IAClC,IACErqB,QAAQC,IAAI,SAAUoqB,GAGtB,MAAM3rC,EAAQqmC,EAAgB38C,MAAM0iD,UAAUvB,GAAOA,EAAIe,aAAeD,GACxE,IAAc,IAAV3rC,EAEF,YADAiiB,OAAOl5B,OAAOm7B,QAAQ,OAAOynB,aAK/B,UAEQ1D,aAAa,WAAW0D,KAC9BrqB,QAAQC,IAAI,UAAWoqB,EACzB,OAASt8C,GAGP,OAFAiyB,QAAQjyB,MAAM,aAAcA,QAC5B4yB,OAAOl5B,OAAOm7B,QAAQ,cAExB,CAGAmiB,EAAgB38C,MAAM+9C,OAAOznC,EAAO,GAGpCqnC,IAEAplB,OAAOl5B,OAAOkJ,QAAQ,UAAU05C,IAClC,OAASt8C,GACPiyB,QAAQjyB,MAAM,YAAaA,GAC3B4yB,OAAOl5B,OAAOsG,MAAM,aAAgBA,EAAgBC,QACtD,0GAxyFKitB,MAAM,eAAevB,MAAA,CAAAG,QAAA,kBAAAC,WAAA,2BAGtBmB,MAAM,iBACNvB,MAAA,CAAAG,QAAA,uFAoEOoB,MAAM,aAAavB,MAAA,yCAsBnBuB,MAAM,aAAavB,MAAA,yCA0CnBuB,MAAM,aAAavB,MAAA,qCAmBnBqC,GAAA,CAAAd,MAAM,kBACJA,MAAM,iBAAiBvB,MAAA,CAAAM,QAAA,iCAAAI,IAAA,aACnBV,MAAA,CAAAM,QAAA,8BAAAL,MAAA,sCAEsCD,MAAA,CAAAC,MAAA,oDAIxCsB,MAAM,eAAevB,MAAA,CAAAM,QAAA,OAAAI,IAAA,gFA2FzBa,MAAM,aAAavB,MAAA,yCAsBnBuB,MAAM,aAAavB,MAAA,yCA0BnBuB,MAAM,aAAavB,MAAA,yCA0BnBuB,MAAM,aAAavB,MAAA,yCA0BnBuB,MAAM,aAAavB,MAAA,yCA8B1BuB,MAAM,iBACNvB,MAAA,CAAAG,QAAA,uFAoEOoB,MAAM,aAAavB,MAAA,yCAEpBuB,MAAM,iBACNvB,MAAA,CAAAM,QAAA,8BAAAI,IAAA,OAAAT,MAAA,0BAAAsD,OAAA,sBAUwChC,MAAM,aAAavB,MAAA,yCA+EjEuB,MAAM,iBACNvB,MAAA,CAAAG,QAAA,uFAoEOoB,MAAM,aAAavB,MAAA,yCAkBnBuB,MAAM,aAAavB,MAAA,yCAkBnBuB,MAAM,eAAevB,MAAA,CAAAM,QAAA,OAAAI,IAAA,yFAkDIa,MAAM,+BACtBA,MAAM,mCAStBA,MAAM,iBACNvB,MAAA,CAAAG,QAAA,uFAoEOoB,MAAM,aAAavB,MAAA,yCAkBnBuB,MAAM,aAAavB,MAAA,yCAkBnBuB,MAAM,aAAavB,MAAA,yCAEjBA,MAAA,CAAAM,QAAA,OAAAI,IAAA,qDAmC+BV,MAAA,CAAAM,QAAA,OAAAI,IAAA,YA+DjCa,MAAM,aAAavB,MAAA,yCAEjBA,MAAA,CAAAM,QAAA,OAAAI,IAAA,oCACEV,MAAA,CAAAM,QAAA,8BAAAI,IAAA,YAYAV,MAAA,CAAAM,QAAA,8BAAAI,IAAA,kBAY6CV,MAAA,4BAmBjDuB,MAAM,eAAevB,MAAA,CAAAM,QAAA,OAAAI,IAAA,yEAwBSa,MAAM,+BAC3BA,MAAM,mCAiCtBA,MAAM,iBACNvB,MAAA,CAAAG,QAAA,uFAoEOoB,MAAM,aAAavB,MAAA,yCAoBnBuB,MAAM,eAAevB,MAAA,CAAAM,QAAA,OAAAI,IAAA,yEA6Eaa,MAAM,2BACtCmkB,GAAA,CAAAnkB,MAAM,cACFokB,GAAA,CAAApkB,MAAM,wBAsBqBA,MAAM,wBAEjCwkB,GAAA,CAAAxkB,MAAM,gBACHykB,GAAA,CAAAzkB,MAAM,cAKN0kB,GAAA,CAAA1kB,MAAM,4CAyBRA,MAAM,8DA1tCxB,OAAAX,IAAAC,EAguCM,MAhuCNS,GAguCM,CA9tCJF,EA0XM,MA1XNO,GA0XM,CAtXJP,EA+DM,OA9DJpB,MAAA,CAAAuD,OAAA,+BAAAjD,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAlkB,SAAA,WAAAskB,SAAA,SAAAqC,WAAA,0CAyBChC,QAAKO,eAAEL,EAAA4Q,cAAa,QACpB7C,aAAU1N,EAAA,KAAAA,EAAA,GAAAO,IAAcA,EAAOoN,cAA8BhP,MAAMI,WAAA,8GAAmJwB,EAAOoN,cAA8BhP,MAAMlV,UAAS,+BAA8C8W,EAAOoN,cAA8BhP,MAAMqxB,WAAU,qCAM7WpiB,aAAU5N,EAAA,KAAAA,EAAA,GAAAO,IAAcA,EAAOoN,cAA8BhP,MAAMI,WAAA,6GAAkJwB,EAAOoN,cAA8BhP,MAAMlV,UAAS,OAAsB8W,EAAOoN,cAA8BhP,MAAMqxB,WAAU,0CAOrVhwB,EAAA,MAAAA,EAAA,IAAAD,EAiBK,MAhBHpB,MAAA,CAAA7jB,SAAA,yBAAAmkB,QAAA,8BAAAI,IAAA,OAAAR,OAAA,IAAAD,MAAA,sHAYC,CAEDmB,EAAuE,KAApEG,MAAM,kBAAkBvB,MAAA,CAAAC,MAAA,kCAA4C,cAEzE,IACAmB,EAIK,KAHFG,MAAK4C,EAAA,CAAEnD,EAAAuQ,iBAAgB,sCAClB,aACNvR,MAAA,CAAAC,MAAA,8CAAA6C,WAAA,kCAIJ1B,EAoTM,YAnTJA,EAoBM,MApBNW,GAoBM,CAAAV,EAAA,MAAAA,EAAA,IAnBJD,EAA+F,SAAxFpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAyE,WAAO,IAAAkP,EACvF/N,EAiBS,gCAAAC,EAAA,KAAAA,EAAA,GAAAO,GAhBEZ,WAASurB,aAAY3qB,GAC9B5B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oBAAAS,OAAA,WAWC6f,SAAQpiB,EAAAswB,sBAAA,IAAAjwB,EAAA,MAAAA,EAAA,KAETD,EAAsC,UAA9B1yB,MAAM,UAAS,aACvB0yB,EAAgD,UAAxC1yB,MAAM,UAAS,oBAAgB,YAf9B,CAAA6iD,EAAAvwB,EAAA4D,SAAS2nB,kBAmBtBnrB,EAwCM,MAxCNa,GAwCM,CAAAZ,EAAA,MAAAA,EAAA,IAvCJD,EAGQ,SAHDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAwE,CAAAuB,EAAC,YAE9EJ,EAA6F,QAAvFpB,MAAA,CAAAC,MAAA,gDAAuD,+BAAyB,MAExFmB,EAcE,+BAAAC,EAAA,KAAAA,EAAA,GAAAO,GAbSZ,WAAS+I,aAAYnI,GAC9Btb,KAAK,OACLub,YAAY,mBACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,iCAHS,CAAAwM,EAAAtO,EAAA4D,SAASmF,0qBAoCtB3I,EAiBM,MAjBNgB,GAiBM,CAAAf,EAAA,MAAAA,EAAA,IAhBJD,EAA+F,SAAxFpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAyE,WAAO,IAAAkP,EACvF/N,EAcE,+BAAAC,EAAA,KAAAA,EAAA,GAAAO,GAbSZ,WAASgJ,QAAOpI,GACzBtb,KAAK,WACLub,YAAY,SACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,iCAHS,CAAAwM,EAAAtO,EAAA4D,SAASoF,aAgBtB5I,EAiGM,MAjGNiB,GAiGM,CAhGJjB,EA8DM,MA9DNkB,GA8DM,CA7DJlB,EAKQ,QALRsB,GAKQ,CAAArB,EAAA,MAAAA,EAAA,IAAAG,EALwE,UAE9E,IAAmC,IAAvBR,mBAAiB/vB,QAAM2vB,IAAnCC,EAEO,OAFP+B,GAAkG,+BAElGZ,EAAA,SAEFZ,EAsDM,MAtDN2B,GAsDM,CArDJ3B,EA0BS,UAzBNiC,SAAUrC,EAAAmqB,eACX5pB,MAAM,eACNvB,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,YAAAE,OAAA,8BAAAkD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,MAAAN,WAAA,2DAAAH,MAAA,SAkBAuxB,YAAY,yGACZC,WAAW,qGACV3wB,QAAOE,EAAA0wB,qBAAAjwB,EAELT,EAAAmqB,eAAc,wBAAAnoB,IAEnB5B,EAyBS,UAxBPG,MAAM,cACNvB,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,YAAAE,OAAA,8BAAAkD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,MAAAN,WAAA,2DAAAH,MAAA,SAkBAuxB,YAAY,yGACZC,WAAW,qGACV3wB,QAAOE,EAAA2wB,qBACT,iBAM0B,IAAvB3wB,EAAAkqB,iBAAiBj6C,cADzB4vB,EAeE,SAAAvvB,IAAA,EAbS,sBAAA+vB,EAAA,KAAAA,EAAA,GAAAO,GAAAZ,EAAA4D,SAASqF,MAAKrI,GACvBtb,KAAK,OACLub,YAAY,gCACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,kCAHS,CAAAwM,EAAAtO,EAAA4D,SAASqF,SAAKkF,GAAAvO,IAczBC,EAgBS,UAAAvvB,IAAA,EAdE,sBAAA+vB,EAAA,KAAAA,EAAA,GAAAO,GAAAZ,EAAA4D,SAASqF,MAAKrI,GACvBL,MAAM,eACNvB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,8BAWAjC,EAA0FkD,EAAA,KAAAC,EAAlEhD,EAAAkqB,iBAATjhB,QAAfpJ,EAA0F,UAA/CvvB,IAAK24B,EAAQv7B,MAAOu7B,GAAAxI,EAAUwI,GAAK,EAAA/G,MAAA,cAbrE,CAAAquB,EAAAvwB,EAAA4D,SAASqF,WAiBtB7I,EAoBM,MApBN+B,GAoBM,CAAA9B,EAAA,MAAAA,EAAA,IAnBJD,EAEC,SAFMpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BACJ,gCAA4B,IAAAkP,EAE/B/N,EAeE,+BAAAC,EAAA,KAAAA,EAAA,GAAAO,GAdgBZ,WAAS8J,WAAUlJ,GACnCtb,KAAK,SACLhJ,IAAI,MACJyY,IAAI,QACJiK,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCAJgB9B,EAAA4D,SAASkG,gBAAA,EAAjB,CAAA8mB,QAAR,QAiBJxwB,EAwBM,MAxBNqC,GAwBM,CAAApC,EAAA,MAAAA,EAAA,IAvBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAwE,CAAAuB,EAAC,sBAC7DJ,EAA8D,QAAxDpB,MAAA,CAAAC,MAAA,4BAAqC,kBAAY,MAE1EmB,EAgBE,+BAAAC,EAAA,KAAAA,EAAA,GAAAO,GAfgBZ,WAAS6J,YAAWjJ,GACpCtb,KAAK,SACLhJ,IAAI,IACJyY,IAAI,IACJwM,KAAK,MACLvC,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCALgB9B,EAAA4D,SAASiG,iBAAA,EAAjB,CAAA+mB,QAAR,oBAgBFxwB,EAEM,OAFDpB,MAAA,oBAAAC,MAAA,4BAAsD,4CAK7DmB,EAwBM,MAxBNsC,GAwBM,CAAArC,EAAA,MAAAA,EAAA,IAvBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAwE,CAAAuB,EAAC,iBAClEJ,EAA8D,QAAxDpB,MAAA,CAAAC,MAAA,4BAAqC,kBAAY,MAErEmB,EAgBE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAfgBZ,WAAS+J,MAAKnJ,GAC9Btb,KAAK,SACLhJ,IAAI,IACJyY,IAAI,IACJwM,KAAK,OACLvC,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCALgB9B,EAAA4D,SAASmG,WAAA,EAAjB,CAAA6mB,QAAR,oBAgBFxwB,EAEM,OAFDpB,MAAA,oBAAAC,MAAA,4BAAsD,gDAK7DmB,EAwBM,MAxBNsO,GAwBM,CAAArO,EAAA,MAAAA,EAAA,IAvBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAwE,CAAAuB,EAAC,6BACtDJ,EAAoE,QAA9DpB,MAAA,CAAAC,MAAA,4BAAqC,wBAAkB,MAEvFmB,EAgBE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAfgBZ,WAASgK,iBAAgBpJ,GACzCtb,KAAK,SACLhJ,IAAI,KACJyY,IAAI,IACJwM,KAAK,MACLvC,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCALgB9B,EAAA4D,SAASoG,sBAAA,EAAjB,CAAA4mB,QAAR,oBAgBFxwB,EAEM,OAFDpB,MAAA,oBAAAC,MAAA,4BAAsD,sCAK7DmB,EAwBM,MAxBNuO,GAwBM,CAAAtO,EAAA,MAAAA,EAAA,IAvBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAwE,CAAAuB,EAAC,8BACrDJ,EAAoE,QAA9DpB,MAAA,CAAAC,MAAA,4BAAqC,wBAAkB,MAExFmB,EAgBE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAfgBZ,WAASiK,kBAAiBrJ,GAC1Ctb,KAAK,SACLhJ,IAAI,KACJyY,IAAI,IACJwM,KAAK,MACLvC,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCALgB9B,EAAA4D,SAASqG,uBAAA,EAAjB,CAAA2mB,QAAR,oBAgBFxwB,EAEM,OAFDpB,MAAA,oBAAAC,MAAA,4BAAsD,+CAhTlDe,EAAAuQ,iBAAgB,SAwT/BnQ,EA8JM,MA9JNyO,GA8JM,CA1JJzO,EA+DM,OA9DJpB,MAAA,CAAAuD,OAAA,+BAAAjD,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAlkB,SAAA,WAAAskB,SAAA,SAAAqC,WAAA,0CAyBChC,QAAKO,iBAAEL,EAAA4Q,cAAa,gBACpB7C,aAAU1N,EAAA,MAAAA,EAAA,IAAAO,IAAcA,EAAOoN,cAA8BhP,MAAMI,WAAA,8GAAmJwB,EAAOoN,cAA8BhP,MAAMlV,UAAS,+BAA8C8W,EAAOoN,cAA8BhP,MAAMqxB,WAAU,qCAM7WpiB,aAAU5N,EAAA,MAAAA,EAAA,IAAAO,IAAcA,EAAOoN,cAA8BhP,MAAMI,WAAA,6GAAkJwB,EAAOoN,cAA8BhP,MAAMlV,UAAS,OAAsB8W,EAAOoN,cAA8BhP,MAAMqxB,WAAU,0CAOrVhwB,EAAA,MAAAA,EAAA,IAAAD,EAiBK,MAhBHpB,MAAA,CAAA7jB,SAAA,yBAAAmkB,QAAA,8BAAAI,IAAA,OAAAR,OAAA,IAAAD,MAAA,sHAYC,CAEDmB,EAAwE,KAArEG,MAAM,mBAAmBvB,MAAA,CAAAC,MAAA,kCAA4C,YAE1E,IACAmB,EAIK,KAHFG,MAAK4C,EAAA,CAAEnD,EAAAuQ,iBAAgB,8CAClB,aACNvR,MAAA,CAAAC,MAAA,8CAAA6C,WAAA,kCAIJ1B,EAwFM,YAvFJA,EAYM,MAZN0O,GAYM,CAXJ1O,EAUQ,QAVR4O,GAUQ,CAAAb,EANN/N,EAIE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAHSZ,WAAS6wB,uBAAsBjwB,GACxCtb,KAAK,WACL0Z,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAA+C,OAAA,sEAFS,CAAAuuB,EAAA9wB,EAAA4D,SAASitB,0CAGlB,oBAIK7wB,EAAA4D,SAASitB,wBAAAjxB,IAApBC,EAyEM,MAzENoP,GAyEM,CAAA5O,EAAA,MAAAA,EAAA,IAxEJD,EAAiG,SAA1FpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAyE,aAAS,IAAAkP,EACzF/N,EAcE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAbgBZ,WAAS+wB,mBAAkBnwB,GAC3Ctb,KAAK,SACLhJ,IAAI,IACJ0iB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCAHgB9B,EAAA4D,SAASmtB,wBAAA,EAAjB,CAAAH,QAAR,MAcFxwB,EAuDM,OAvDDpB,MAAA,qBAAAM,QAAA,OAAAI,IAAA,SAAkD,CACrDU,EAiBS,UAhBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,UAAAT,WAAA,6DAWA0uB,YAAY,gGACZC,WAAW,6FACV3wB,QAAOE,EAAAgxB,oBACT,aAGD5wB,EAiBS,UAhBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,UAAAT,WAAA,6DAWA0uB,YAAY,gGACZC,WAAW,6FACV3wB,QAAOE,EAAAixB,sBACT,aAGD7wB,EAiBS,UAhBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,UAAAT,WAAA,6DAWA0uB,YAAY,gGACZC,WAAW,6FACV3wB,QAAOE,EAAAkxB,6BACT,uCAnFMlxB,EAAAuQ,iBAAgB,iBA4F/BnQ,EAkKM,MAlKN+O,GAkKM,CA9JJ/O,EA+DM,OA9DJpB,MAAA,CAAAuD,OAAA,+BAAAjD,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAlkB,SAAA,WAAAskB,SAAA,SAAAqC,WAAA,0CAyBChC,QAAKO,iBAAEL,EAAA4Q,cAAa,kBACpB7C,aAAU1N,EAAA,MAAAA,EAAA,IAAAO,IAAcA,EAAOoN,cAA8BhP,MAAMI,WAAA,8GAAmJwB,EAAOoN,cAA8BhP,MAAMlV,UAAS,+BAA8C8W,EAAOoN,cAA8BhP,MAAMqxB,WAAU,qCAM7WpiB,aAAU5N,EAAA,MAAAA,EAAA,IAAAO,IAAcA,EAAOoN,cAA8BhP,MAAMI,WAAA,6GAAkJwB,EAAOoN,cAA8BhP,MAAMlV,UAAS,OAAsB8W,EAAOoN,cAA8BhP,MAAMqxB,WAAU,0CAOrVhwB,EAAA,MAAAA,EAAA,IAAAD,EAiBK,MAhBHpB,MAAA,CAAA7jB,SAAA,yBAAAmkB,QAAA,8BAAAI,IAAA,OAAAR,OAAA,IAAAD,MAAA,sHAYC,CAEDmB,EAAiF,KAA9EG,MAAM,4BAA4BvB,MAAA,CAAAC,MAAA,kCAA4C,YAEnF,IACAmB,EAIK,KAHFG,MAAK4C,EAAA,CAAEnD,EAAAuQ,iBAAgB,gDAClB,aACNvR,MAAA,CAAAC,MAAA,8CAAA6C,WAAA,kCAIJ1B,EA4FM,YA3FJA,EAiBM,MAjBNkP,GAiBM,CAAAjP,EAAA,MAAAA,EAAA,IAhBJD,EAA4F,SAArFpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAyE,QAAI,IAAAkP,EACpF/N,EAcE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAbgBZ,WAAS4tB,iBAAgBhtB,GACzCtb,KAAK,SACLhJ,IAAI,IACJ0iB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCAHgB9B,EAAA4D,SAASgqB,sBAAA,EAAjB,CAAAgD,QAAR,QAeJxwB,EAiBM,MAjBNmP,GAiBM,CAAAlP,EAAA,MAAAA,EAAA,IAhBJD,EAA4F,SAArFpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAyE,QAAI,IAAAkP,EACpF/N,EAcE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAbgBZ,WAAS6tB,eAAcjtB,GACvCtb,KAAK,SACLhJ,IAAI,IACJ0iB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCAHgB9B,EAAA4D,SAASiqB,oBAAA,EAAjB,CAAA+C,QAAR,QAeJxwB,EAsDM,MAtDN0P,GAsDM,CArDJ1P,EAuBS,UAtBPG,MAAM,4BACL8B,SAAUrC,EAAAuqB,eACXvrB,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,YAAAE,OAAA,0CAAAkD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,MAAAN,WAAA,UAAAH,MAAA,WAiBCa,QAAOE,EAAAmxB,wBAAA,IAAA9wB,EAAA,MAAAA,EAAA,KAERD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,UAClC,QAAAuP,IACA3P,EA4BS,UA3BPG,MAAM,iCACL8B,SAAUrC,EAAAuqB,iBAAmBvqB,EAAA4D,SAASoF,QACvChK,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,YAAAE,OAAA,0CAAAkD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,MAAAN,WAAA,gKAAAH,MAAA,SAoBCa,QAAOE,EAAAoxB,kBAAA,CAEEpxB,EAAAuqB,gBAA8C3qB,IACxDC,EAAkD,IAAlDsQ,MADUvQ,IAAVC,EAAwD,IAAxDqQ,KACkD1P,EAAA,IAClDC,EAAGT,EAAAuqB,eAAc,wBAAAva,gBAzFVhQ,EAAAuQ,iBAAgB,mBAgG/BnQ,EAkTM,MAlTNgQ,GAkTM,CA9SJhQ,EA+DM,OA9DJpB,MAAA,CAAAuD,OAAA,+BAAAjD,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAlkB,SAAA,WAAAskB,SAAA,SAAAqC,WAAA,0CAyBChC,QAAKO,iBAAEL,EAAA4Q,cAAa,oBACpB7C,aAAU1N,EAAA,MAAAA,EAAA,IAAAO,IAAcA,EAAOoN,cAA8BhP,MAAMI,WAAA,8GAAmJwB,EAAOoN,cAA8BhP,MAAMlV,UAAS,+BAA8C8W,EAAOoN,cAA8BhP,MAAMqxB,WAAU,qCAM7WpiB,aAAU5N,EAAA,MAAAA,EAAA,IAAAO,IAAcA,EAAOoN,cAA8BhP,MAAMI,WAAA,6GAAkJwB,EAAOoN,cAA8BhP,MAAMlV,UAAS,OAAsB8W,EAAOoN,cAA8BhP,MAAMqxB,WAAU,0CAOrVhwB,EAAA,MAAAA,EAAA,IAAAD,EAiBK,MAhBHpB,MAAA,CAAA7jB,SAAA,yBAAAmkB,QAAA,8BAAAI,IAAA,OAAAR,OAAA,IAAAD,MAAA,sHAYC,CAEDmB,EAAyE,KAAtEG,MAAM,oBAAoBvB,MAAA,CAAAC,MAAA,kCAA4C,YAE3E,IACAmB,EAIK,KAHFG,MAAK4C,EAAA,CAAEnD,EAAAuQ,iBAAgB,kDAClB,aACNvR,MAAA,CAAAC,MAAA,8CAAA6C,WAAA,kCAIJ1B,EA4OM,YA3OJA,EAiBM,MAjBNiQ,GAiBM,CAAAhQ,EAAA,MAAAA,EAAA,IAhBJD,EAA4F,SAArFpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAyE,QAAI,IAAAkP,EACpF/N,EAcE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAbgBZ,WAASquB,uBAAsBztB,GAC/Ctb,KAAK,SACLhJ,IAAI,IACJ0iB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCAHgB9B,EAAA4D,SAASyqB,4BAAA,EAAjB,CAAAuC,QAAR,QAeJxwB,EAiBM,MAjBN8iB,GAiBM,CAAA7iB,EAAA,MAAAA,EAAA,IAhBJD,EAA4F,SAArFpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAyE,QAAI,IAAAkP,EACpF/N,EAcE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAbgBZ,WAASsuB,qBAAoB1tB,GAC7Ctb,KAAK,SACLhJ,IAAI,IACJ0iB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCAHgB9B,EAAA4D,SAAS0qB,0BAAA,EAAjB,CAAAsC,QAAR,QAeJxwB,EAiGM,MAjGN+iB,GAiGM,CAAA9iB,EAAA,MAAAA,EAAA,IAhGJD,EAA8F,SAAvFpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAyE,UAAM,IACtFmB,EAkCM,MAlCNkjB,GAkCM,CAAAnV,EAjCJ/N,EAiBS,gCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAhBEZ,EAAA0qB,iBAAgB9pB,GACzB5B,MAAA,CAAAsD,KAAA,IAAAnD,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,8BASCmjB,SAAQpiB,EAAAmrB,cAAA,CAET9qB,EAAA,MAAAA,EAAA,IAAAD,EAAiC,UAAzB1yB,MAAM,IAAG,WAAO,KAAAkyB,GAAA,GACxBC,EAESkD,EAAA,KAAAC,EAF2BhD,EAAAyqB,gBAAe,CAAnC7N,EAAU54B,SAA1B6b,EAES,UAF6CvvB,IAAK0T,EAAQtW,MAAOsW,GAAAyc,EACrEmc,EAAS3vC,MAAI,EAAAs2C,MAAA,gBAdTvjB,EAAA0qB,oBAiBXtqB,EAcS,UAbPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,QAAAsD,OAAA,qDAUCzC,QAAOE,EAAAqxB,uBAAA,IAAAhxB,EAAA,MAAAA,EAAA,KAERD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,QAClC,SAEyB,KAAhBR,EAAA0qB,kBAAgB9qB,IAA3BC,EA2DM,MA3DN2jB,GA2DM,CAAArV,EA1DJ/N,EAaE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAZSZ,kBAAgB/yB,KAAI2zB,GAC7Btb,KAAK,OACLub,YAAY,OACZ7B,MAAA,CAAAsD,KAAA,IAAAnD,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,0CAHS,CAAAqP,EAAAtO,EAAA2qB,gBAAgB19C,UAa3BmzB,EAaE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAZSZ,kBAAgBqK,QAAOzJ,GAChCtb,KAAK,OACLub,YAAY,YACZ7B,MAAA,CAAAsD,KAAA,IAAAnD,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,0CAHS,CAAAqP,EAAAtO,EAAA2qB,gBAAgBtgB,WAa3BjK,EAcS,UAbPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,QAAAsD,OAAA,qDAUCzC,QAAOE,EAAAsxB,cAAA,IAAAjxB,EAAA,MAAAA,EAAA,KAERD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,QAClC,OACAJ,EAcS,UAbPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,QAAAsD,OAAA,qDAUCzC,QAAOE,EAAAuxB,gBAAA,IAAAlxB,EAAA,MAAAA,EAAA,KAERD,EAAiC,KAA9BG,MAAM,qBAAmB,SAAAC,EAAK,QACnC,qBAKJJ,EA4CM,MA5CNqjB,GA4CM,CAAApjB,EAAA,MAAAA,EAAA,IA3CJD,EAA4F,SAArFpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BAAyE,QAAI,IACpFmB,EAyCM,MAzCNsjB,GAyCM,CAxCJtjB,EAWM,MAXN0jB,GAWM,CAVJ1jB,EAQO,OAPJpB,MAAK6C,EAAA,CAAAtC,MAAA,sDAA+IS,EAAAuqB,eAAc,oBAAAzoB,WAAA,iDAQrK1B,EAAsD,QAAhDpB,MAAA,CAAAC,MAAA,4BAAqC,cAE7CmB,EAWM,MAXNyjB,GAWM,CAVJzjB,EAQO,OAPJpB,MAAK6C,EAAA,CAAAtC,MAAA,sDAA+IS,EAAAwqB,oBAAmB,oBAAA1oB,WAAA,iDAQ1K1B,EAAsD,QAAhDpB,MAAA,CAAAC,MAAA,4BAAqC,cAElCe,EAAAuqB,gBAAkBvqB,EAAAwqB,qBAAA5qB,IAA7BC,EAeM,MAfN+jB,GAeM,CAdJxjB,EAaS,UAZPpB,MAAA,CAAAG,QAAA,UAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,QAAAsD,OAAA,8BASCzC,QAAOE,EAAAwxB,gBAAA,IAAAnxB,EAAA,MAAAA,EAAA,KAERD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,UAClC,uBAKNJ,EAoDM,MApDN4jB,GAoDM,CAnDJ5jB,EA0BS,UAzBPG,MAAM,iCACL8B,SAAUrC,EAAAwqB,sBAAwBxqB,EAAA4D,SAASoF,QAC5ChK,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,YAAAE,OAAA,8BAAAkD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,MAAAN,WAAA,2DAAAH,MAAA,SAkBCa,QAAOE,EAAAyxB,uBAAA,CAEEzxB,EAAAwqB,qBAAmD5qB,IAC7DC,EAAkD,IAAlDskB,MADUvkB,IAAVC,EAA6D,IAA7DqkB,KACkD1jB,EAAA,IAClDC,EAAGT,EAAAwqB,oBAAmB,2BAAAvG,IAExB7jB,EAuBS,UAtBPG,MAAM,8BACNvB,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,YAAAE,OAAA,8BAAAkD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,MAAAN,WAAA,2DAAAH,MAAA,SAkBCa,QAAOE,EAAA0xB,qBAAA,IAAArxB,EAAA,MAAAA,EAAA,KAERD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,WAClC,mBA1OSR,EAAAuQ,iBAAgB,qBAgP/BnQ,EAkOM,MAlONgkB,GAkOM,CA9NJhkB,EA+DM,OA9DJpB,MAAA,CAAAuD,OAAA,+BAAAjD,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAlkB,SAAA,WAAAskB,SAAA,SAAAqC,WAAA,0CAyBChC,QAAKO,iBAAEL,EAAA4Q,cAAa,sBACpB7C,aAAU1N,EAAA,MAAAA,EAAA,IAAAO,IAAcA,EAAOoN,cAA8BhP,MAAMI,WAAA,8GAAmJwB,EAAOoN,cAA8BhP,MAAMlV,UAAS,+BAA8C8W,EAAOoN,cAA8BhP,MAAMqxB,WAAU,qCAM7WpiB,aAAU5N,EAAA,MAAAA,EAAA,IAAAO,IAAcA,EAAOoN,cAA8BhP,MAAMI,WAAA,6GAAkJwB,EAAOoN,cAA8BhP,MAAMlV,UAAS,OAAsB8W,EAAOoN,cAA8BhP,MAAMqxB,WAAU,0CAOrVhwB,EAAA,MAAAA,EAAA,IAAAD,EAiBK,MAhBHpB,MAAA,CAAA7jB,SAAA,yBAAAmkB,QAAA,8BAAAI,IAAA,OAAAR,OAAA,IAAAD,MAAA,sHAYC,CAEDmB,EAA+E,KAA5EG,MAAM,0BAA0BvB,MAAA,CAAAC,MAAA,kCAA4C,YAEjF,IACAmB,EAIK,KAHFG,MAAK4C,EAAA,CAAEnD,EAAAuQ,iBAAgB,oDAClB,aACNvR,MAAA,CAAAC,MAAA,8CAAA6C,WAAA,kCAIJ1B,EA4JM,YA3JJA,EAmBM,MAnBNokB,GAmBM,CAAAnkB,EAAA,MAAAA,EAAA,IAlBJD,EAEC,SAFMpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,4BACJ,2BAAuB,IAAAkP,EAE1B/N,EAcE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAbSZ,EAAAoqB,WAAUxpB,GACnBtb,KAAK,OACLub,YAAY,OACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6C,WAAA,oCAHS9B,EAAAoqB,gBAebhqB,EA0EM,MA1ENmkB,GA0EM,CAzEJnkB,EAuBS,UAtBPG,MAAM,gBACNvB,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,YAAAE,OAAA,8BAAAkD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,MAAAN,WAAA,4DAAAH,MAAA,SAkBCa,QAAOE,EAAA2xB,sBAAA,IAAAtxB,EAAA,MAAAA,EAAA,KAERD,EAAqC,KAAlCG,MAAM,yBAAuB,SAAAC,EAAK,UACvC,OACAJ,EAwBS,UAvBPG,MAAM,gBACNvB,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,YAAAE,OAAA,8BAAAkD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,MAAAN,WAAA,2DAAAH,MAAA,SAkBCoD,UAAWrC,EAAAoqB,WAAW1qC,OACtBogB,QAAOE,EAAA4xB,sBAAA,IAAAvxB,EAAA,MAAAA,EAAA,KAERD,EAA+B,KAA5BG,MAAM,mBAAiB,SAAAC,EAAK,UACjC,QAAA8jB,IACAlkB,EAuBS,UAtBPG,MAAM,gBACNvB,MAAA,CAAAsD,KAAA,wBAAAnD,QAAA,YAAAE,OAAA,8BAAAkD,OAAA,iDAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,MAAAN,WAAA,2DAAAH,MAAA,QAkBCa,QAAKO,kBAAQL,EAAA6xB,uBAAqB,SAAAxxB,EAAA,MAAAA,EAAA,KAEnCD,EAAmC,KAAhCG,MAAM,uBAAqB,SAAAC,EAAK,QACrC,SAISR,EAAAqqB,gBAAgBp6C,OAAM,GAAA2vB,IAAjCC,EAwDM,MAxDN4kB,GAwDM,CAvDJrkB,EAsBM,MAtBNskB,GAsBM,CArBJtkB,EAoBQ,QApBRukB,GAoBQ,CAnBNvkB,EAAoD,YAA9C,WAAQK,EAAGT,EAAAqqB,gBAAgBp6C,QAAS,MAAG,GAC7CmwB,EAiBS,UAhBPG,MAAM,cACNvB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAH,MAAA,QAAAI,OAAA,6BAAAkD,OAAA,iDAAAT,WAAA,6DAYChC,QAAKO,EAAA,MAAAA,EAAA,IAAAO,GAAEZ,EAAAsqB,yBAA2BtqB,EAAAsqB,0BAAA7pB,EAEhCT,EAAAsqB,wBAAuB,kBAIrBtqB,EAAAsqB,yBAAA1qB,IAAXC,EA+BM,MA/BN+kB,GA+BM,EAAAhlB,GAAA,GA9BJC,EA6BMkD,EAAA,KAAAC,EA7BahD,EAAAqqB,gBAAPwE,QAAZhvB,EA6BM,OA7B+BvvB,IAAKu+C,EAAIe,WAAYrvB,MAAM,wBAC9DH,EASM,MATN2kB,GASM,CARJ3kB,EAAqD,OAArD4kB,GAAyB,IAACvkB,EAAGouB,EAAIe,YAAU,GAC3CxvB,EAGO,QAHDG,MAAK4C,EAAA,CAAC,eAAc,QAAmB0rB,EAAIjlB,QAAInJ,EACxC,SAARouB,EAAIjlB,KAAI,KAA6B,cAARilB,EAAIjlB,KAAI,WAAiC,IACzEnJ,EAAGouB,EAAI5hD,MAAI,GAEbmzB,EAEO,OAFP6kB,GAEOxkB,EADFouB,EAAIv7C,QAAQs4B,UAAS,OAAAnL,EAAaouB,EAAIv7C,QAAQrD,OAAM,kBAG3DmwB,EAiBS,UAhBPG,MAAM,cACNvB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAH,MAAA,QAAAI,OAAA,6BAAAkD,OAAA,iDAAAT,WAAA,6DAYChC,QAAK,IAAQE,EAAA8xB,qBAAqBjD,EAAIe,aACxC,OAED,EAAA1K,kCAINrlB,EAA6C,MAA7CslB,GAAgC,aAAO,SA3J5BnlB,EAAAuQ,iBAAgB,uBAgK/Bf,EAA+ExP,EAAA,gBAA/DtB,IAAI,oBAAqBE,KAAMoB,EAAA6Z,aAAcnZ,MAAM,yHCzHvE,MAAMgD,EAAgBC,KAChBC,SAAEA,GAAaC,EAAYH,GAG3BI,EAAYC,IAGZknB,EAAY,CAChB8G,OAAQ,CACN9kD,KAAM,QACNy/B,UAAW,uBACXgK,OAAQ,CACN,CAAEzpC,KAAM,KAAM+kD,MAAO,KAAM1uB,KAAM,oBACjC,CAAEr2B,KAAM,KAAM+kD,MAAO,KAAM1uB,KAAM,0BACjC,CAAEr2B,KAAM,KAAM+kD,MAAO,KAAM1uB,KAAM,4BACjC,CAAEr2B,KAAM,MAAO+kD,MAAO,MAAO1uB,KAAM,uBAGvC2uB,IAAK,CACHhlD,KAAM,WACNy/B,UACE,qKACFgK,OAAQ,CACN,CAAEzpC,KAAM,KAAM+kD,MAAO,KAAM1uB,KAAM,wBACjC,CAAEr2B,KAAM,KAAM+kD,MAAO,KAAM1uB,KAAM,qBACjC,CAAEr2B,KAAM,KAAM+kD,MAAO,KAAM1uB,KAAM,4BACjC,CAAEr2B,KAAM,OAAQ+kD,MAAO,OAAQ1uB,KAAM,yBACrC,CAAEr2B,KAAM,KAAM+kD,MAAO,KAAM1uB,KAAM,qBACjC,CAAEr2B,KAAM,OAAQ+kD,MAAO,OAAQ1uB,KAAM,qBACrC,CAAEr2B,KAAM,OAAQ+kD,MAAO,OAAQ1uB,KAAM,oBACrC,CAAEr2B,KAAM,OAAQ+kD,MAAO,OAAQ1uB,KAAM,2BAKrCn0B,EAASuvB,EAAY,CACzBzxB,KAAM,QACNy/B,UAAW,uBACXgK,OAAQ,CACN,CAAEzpC,KAAM,KAAM+kD,MAAO,KAAM1uB,KAAM,oBACjC,CAAEr2B,KAAM,KAAM+kD,MAAO,KAAM1uB,KAAM,0BACjC,CAAEr2B,KAAM,KAAM+kD,MAAO,KAAM1uB,KAAM,4BACjC,CAAEr2B,KAAM,MAAO+kD,MAAO,MAAO1uB,KAAM,wBAIjCoX,EAAQhc,EAAgB,CAC5B,CAAE5qB,KAAM,aAAc6H,QAAS,IAC/B,CAAE7H,KAAM,YAAa6H,QAAS,IAC9B,CAAE7H,KAAM,YAAa6H,QAAS,MAG1Bu9B,EAAcxa,EAAqBgc,EAAMhtC,MAAM,IAC/CyrC,EAASza,GAAI,GACb0a,EAAW1a,EAAI,IACfwzB,EAAmBxzB,EAAI,IACvByzB,EAAqBzzB,GAAI,GACzB0zB,EAAgB1zB,GAAI,GACpB2zB,EAAoB3zB,EAAmB,MAGvCmb,EAAenb,GAAI,GACnBob,EAAoBpb,EAAgD,MAGpE4zB,EAAmB5zB,EAAI,IACvB6zB,EAAsB7zB,GAAI,GAC1B8zB,EAAiB9zB,GAAI,GAGrB+zB,EAA2B/zB,EAAI,IAC/Bg0B,EAAwBh0B,GAAI,GAC5Bi0B,EAAmBj0B,GAAI,GAGvBk0B,EAAgBl0B,GAAI,GACpBm0B,EAAWn0B,EAAI,IACfo0B,EAAep0B,GAAI,GAGnBq0B,EAAoBr0B,GAAI,GACxBs0B,EAAqBt0B,EAAI,IACzBu0B,EAAqBv0B,GAAI,GA+EzBw0B,EAAmBptB,EAAS,KAEX32B,EAAOzB,MAAMgpC,OAAO3iC,IAAIqY,GAAK,KAAKA,EAAE4lC,OAAS5lC,EAAEnf,UAAU4P,KAAK,KAGnF,MAAMs2C,EAAmBhkD,EAAOzB,MAAMgpC,OACnC3iC,IAAIqY,IACH,MAAMgnC,EAAWhnC,EAAEkX,KAAO,aAAalX,EAAEkX,cAAgB,GACnD0uB,EAAQ5lC,EAAE4lC,OAAS5lC,EAAEnf,KAC3B,MAAO,OAAOmmD,IAAWpB,gBAAoBA,QAE9Cn1C,KAAK,MAGc1N,EAAOzB,MAAMgpC,OAAO3iC,IAAIqY,GAAKA,EAAE4lC,OAAS5lC,EAAEnf,MAAQ,OAAO4P,KAAK,KAGpF,MA+FMw2C,cAAEA,EAAAC,cAAeA,GA/FK,EAACj/B,EAAeqiB,KAI1C,GAA8B,KAFPriB,EAAM+hB,MAAM,eAAiB,IAEjCnmC,OAAc,CAI/B,MAAO,CACLojD,cAAe,IAHI3c,EAAO3iC,IAAIqY,GAAK,KAAKA,EAAE4lC,OAAS5lC,EAAEnf,UAAU4P,KAAK,QAIpEy2C,cAAe,IAHK5c,EAAO3iC,IAAIqY,GAAKA,EAAE4lC,OAAS5lC,EAAEnf,MAAM4P,KAAK,QAKhE,CAGA,IAAI02C,EAAkBl/B,EACnBthB,QAAQ,QAAS,MACjBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KAEpBuyB,QAAQC,IAAI,WAAYlR,GACxBiR,QAAQC,IAAI,YAAaguB,GAGzB,MAAMt3C,EAAkB,GAClBu3C,EAAyB,GAC/B,IAAIC,EAAa,EAGjB,MAAMtxC,EAAQoxC,EAAgBr3C,MAAM,eACpCopB,QAAQC,IAAI,aAAcpjB,GAE1B,QAASzO,EAAI,EAAGA,EAAIyO,EAAMlS,OAAQyD,IAAK,CACrC,MAAMs2C,EAAO7nC,EAAMzO,GAGnB,GAAIs2C,EAAK5T,MAAM,aACbn6B,EAAM9C,KAAK6wC,GACXwJ,EAAar6C,KAAK6wC,GAClB1kB,QAAQC,IAAI,UAAUykB,UACxB,GAESA,EAAKtqC,OAAOzP,OAAS,IAAM+5C,EAAK5T,MAAM,aAAc,CAE3D,MAAMsd,EAAc1J,EAAK5T,MAAM,gBAAkB,GAC3Cud,EAAaD,EAAYzjD,OAK/B,GAJAq1B,QAAQC,IAAI,sBAAsBykB,EAAKpe,UAAU,EAAG,SACpDtG,QAAQC,IAAI,cAAemuB,GAC3BpuB,QAAQC,IAAI,aAAaouB,cAAuBF,YAAqB/c,EAAOzmC,UAEzD,IAAf0jD,EAAkB,CACpBruB,QAAQoC,KAAK,mBACb,QACF,CAGA,MAAMksB,EAAU,EAEhB,QAASzyC,EAAS,EAAGA,EAASwyC,EAAYxyC,GAAUyyC,EAAS,CAC3D,MAAMC,EAAQx3C,KAAKC,IAAIs3C,EAASD,EAAaxyC,GAE7C,GAAI0yC,EAAQ,EAAG,CACb,MAAMC,EAAgBpd,EAAOxmC,MAAMujD,EAAYA,EAAaI,GAE5D,KAAOC,EAAc7jD,OAAS4jD,GAC5BC,EAAc36C,KAAK,CACjBlM,KAAM,KAAKwmD,EAAaK,EAAc7jD,OAAS,IAC/C+hD,MAAO,KAAKyB,EAAaK,EAAc7jD,OAAS,IAChDqzB,KAAM,KAGV,MAAMywB,EAAeD,EAAc//C,IAAIqY,GAAK,KAAKA,EAAE4lC,OAAS5lC,EAAEnf,UAAU4P,KAAK,KACvEimB,EAAWgxB,EAAc//C,IAAIqY,GAAKA,EAAE4lC,OAAS5lC,EAAEnf,MAAM4P,KAAK,KAChEZ,EAAM9C,KAAK,IAAI46C,MACfP,EAAar6C,KAAK,IAAI2pB,MACtBwC,QAAQC,IAAI,aAAazC,MACzB2wB,GAAcI,CAChB,CACF,CACF,CACF,CAKA,OAHAvuB,QAAQC,IAAI,aAActpB,EAAMY,KAAK,OACrCyoB,QAAQC,IAAI,aAAciuB,EAAa32C,KAAK,OAErC,CACLw2C,cAAep3C,EAAMY,KAAK,MAC1By2C,cAAeE,EAAa32C,KAAK,QAIIm3C,CAAoB7kD,EAAOzB,MAAMg/B,UAAWv9B,EAAOzB,MAAMgpC,QAElG,MAAO,+EAKP2c,2BAIAF,GAAoB,qEAKpBG,siBAkCI3uB,EAAcmB,EAAS,KAC3B,MAAMiV,EAAWL,EAAMhtC,MAAMglC,KAAKtmB,GAAgB,eAAXA,EAAEtY,MACnCknC,EAAUN,EAAMhtC,MAAMglC,KAAKtmB,GAAgB,cAAXA,EAAEtY,MAClCmnC,EAASP,EAAMhtC,MAAMglC,KAAKtmB,GAAgB,cAAXA,EAAEtY,MAEvC,IAAKinC,EAAU,MAAO,GAEtB,MAAMU,EAAY,SACZC,EAAW,QAGjB,IAAIuY,EAAiBlZ,EAASp/B,SAAW,GAMzC,OALAxM,EAAOzB,MAAMgpC,OAAOpE,QAAQ,CAACtsB,EAAOtS,KAClC,MAAMwgD,EAAeluC,EAAM/Y,MAAQ,KAAKyG,EAAI,IAC5CugD,EAAiBA,EAAelhD,QAAQ,IAAI2E,OAAO,MAAMhE,EAAI,WAAY,KAAMwgD,KAG1E,uPAMJxY,sKASCV,GAASr/B,SAAW,WACpB+/B,UACDD,yDAAiEA,mHAEjEA,mFAA2FA,UAC3FA,4EAAoFA,UACpFA,oFAA4FA,0BAG7FwY,SACCxY,KAAaR,GAAQt/B,SAAW,OAAO8/B,yBAM5C,SAAS7T,IAET,CA+xCA,SAASusB,EAAoB5U,EAAkB6U,GAC7C,IAAIz4C,EAAUy4C,EAAI10C,OAGlB,MAAM20C,EAAa14C,EAAQy6B,MAAM,wCAC7Bie,IACF14C,EAAU04C,EAAW,GAAG30C,QAI1B,MAAM40C,EAAiB34C,EAAQy6B,MAAM,6CAarC,OAZIke,IACF34C,EAAU24C,EAAe,GAAG50C,QAI9B/D,EAAUA,EAAQ5I,QAAQ,mCAAoC,IAC9D4I,EAAUA,EAAQ5I,QAAQ,uBAAwB,IAE9CwsC,EAASvvC,SAAS,WACpB2L,EAAUA,EAAQ5I,QAAQ,mBAAoBqjC,GAASA,EAAM1gB,gBAGxD/Z,CACT,CAqFA,SAAS44C,IACP,IACE,MAAMlf,EAAWtO,IACjB,IAAKsO,EAEH,YADA/P,QAAQoC,KAAK,0BAKf,MAAMZ,EAAa,GAAGuO,+BAChBuT,EAAkBxhB,aAAaC,QAAQP,GAE7C,GAAI8hB,EACF,IACE,MAAMthB,EAAc71B,KAAK2L,MAAMwrC,GAC/Bz5C,EAAOzB,MAAQ,IAAKyB,EAAOzB,SAAU45B,GACrChC,QAAQC,IAAI,+BACd,OAAS9vB,GACP6vB,QAAQjyB,MAAM,aAAcoC,EAC9B,CAEJ,OAASpC,GACPiyB,QAAQjyB,MAAM,aAAcA,EAC9B,CACF,CAGA,SAASw0B,IACP,IACE,MAAMwN,EAAWtO,IACjB,IAAKsO,EAEH,YADA/P,QAAQoC,KAAK,0BAKf,MAAMZ,EAAa,GAAGuO,+BACtBjO,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAUvC,EAAOzB,QACvD43B,QAAQC,IAAI,4BACd,OAASlyB,GACPiyB,QAAQjyB,MAAM,aAAcA,EAC9B,CACF,CAGAk1B,EAAU,KACRgsB,MAIF51B,EACE,IAAMxvB,EAAOzB,MACb,KACEm6B,KAEF,CAAE4U,MAAM,mdAnuDO,CAEf,kBACA,kBACA,mBACA,mBACA,kBACA,qBACA,oBAEA,oBACA,0BAEA,yBACA,8BACA,6BACA,yBAEA,mBAEA,kCACA,yBACA,mBACA,mBACA,qBACA,qBAEA,kBACA,mBACA,oBACA,uBACA,mBACA,mBACA,wBAEA,2BACA,yBACA,oBACA,wBAEA,kBACA,oBACA,mBACA,qBACA,oBACA,qBAEA,qBACA,qBAEA,mBACA,wBACA,sBACA,kBACA,yBACA,sBAEA,oBACA,yBACA,sBACA,oBACA,2BACA,mBAEA,4BACA,qBACA,qBACA,qBACA,oBACA,iBAEA,mBACA,kFA2NF,WACEttC,EAAOzB,MAAMgpC,OAAOv9B,KAAK,CAAElM,KAAM,GAAI+kD,MAAO,GAAI1uB,KAAM,IACxD,cAGA,SAAqBtf,GACnB7U,EAAOzB,MAAMgpC,OAAO+U,OAAOznC,EAAO,EACpC,qBAGA,WACE4uC,EAAcllD,OAAQ,EACtBmlD,EAASnlD,MAAQ,EACnB,6BAGA,WACEqlD,EAAkBrlD,OAAQ,EAC1BslD,EAAmBtlD,MAAQ,EAC7B,iBAGA0H,iBACE,IAAKy9C,EAASnlD,MAAMgS,OAElB,YADA3S,OAAOm7B,QAAQ,eAKjB,IAAKtE,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAMlD,YALAj8B,OAAOsG,MAAM,oCAAqC,GAAI,CACpD03B,QAAS,EACTypB,gBAAiB,EACjBC,aAAa,IAMjB,MAAM/rB,EAAS5E,EAAU6E,WAAW,cAAe,eAGnD2pB,EAAiB5kD,MAAQmlD,EAASnlD,MAElColD,EAAaplD,OAAQ,EACrBmsC,EAAansC,OAAQ,EAErB,IACEosC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpC0B,EAAkBpsC,OAAO2qC,UAAU,WAAWwa,EAASnlD,MAAMuC,aAC7D6zB,EAAUgF,mBAAmBJ,EAAQ,GAAI,WACzC,MAAMQ,EAAe,s6BAoCfC,EAAa,yCAGrB0pB,EAASnlD,MAAMgS,8CAKb4lB,QAAQC,IAAI,sBACZD,QAAQC,IAAI,aAAc3B,EAASl2B,MAAMq7B,cACzCzD,QAAQC,IAAI,WAAY3B,EAASl2B,MAAMu7B,OAEvC6Q,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,wBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,YAGzC,MAAMmN,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cACnDzD,QAAQC,IAAI,cAAesQ,GAG3BiE,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,sBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,SAAS9E,EAASl2B,MAAMu7B,UAEjE,MAAMiB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CACEC,KAAM,SACNjuB,QAASutB,GAEX,CACEU,KAAM,OACNjuB,QAASwtB,IAGbW,WAAY,IACZD,YAAa,OAIjB,IAAKK,EAASM,GAAI,CAChB,MAAMmV,QAAkBzV,EAAS8H,OACjC,MAAM,IAAIljC,MAAM,YAAYo7B,EAASO,UAAUP,EAASQ,eAAeiV,IACzE,CAEA,MAAMtqC,QAAe60B,EAASS,OAG9B,GAFArF,QAAQC,IAAI,aAAclwB,IAErBA,EAAOw1B,UAAYx1B,EAAOw1B,QAAQ,KAAOx1B,EAAOw1B,QAAQ,GAAGv3B,QAC9D,MAAM,IAAIxE,MAAM,YAGlB,MAAMggD,EAAaz5C,EAAOw1B,QAAQ,GAAGv3B,QAAQqI,QAI7C,GAHA2pB,QAAQC,IAAI,aAAcupB,IAGrBA,GAAoC,iBAAfA,EACxB,MAAM,IAAIhgD,MAAM,cAIlB,IAAIonC,EAAW4Y,EAAWpvC,OAG1Bw2B,EAAWA,EAASnjC,QAAQ,uBAAwB,IAAIA,QAAQ,cAAe,IAG/E,MAAMojC,EAAYD,EAASE,MAAM,uBAMjC,IAAIse,EALAve,IACFD,EAAWC,EAAU,IAKvB,IACEue,EAAejjD,KAAK2L,MAAM84B,EAC5B,OAAS+F,GACP,MAAM,IAAIntC,MACR,gEAAgEuG,EAAOnF,MAAM,EAAG,OAEpF,CAEA,IAAK6B,MAAMC,QAAQ0iD,GACjB,MAAM,IAAI5lD,MAAM,mBAIlB,MAAM6lD,EAAcD,EAAav4C,OAAQ6J,GAChCA,EAAM/Y,MAAQ+Y,EAAMgsC,OAG7B,GAA2B,IAAvB2C,EAAY1kD,OACd,MAAM,IAAInB,MAAM,sBAIlBK,EAAOzB,MAAMgpC,OAASie,EAAY5gD,IAAKiS,IAAA,CACrC/Y,KAAM+Y,EAAM/Y,MAAQ,GACpB+kD,MAAOhsC,EAAMgsC,OAAS,GACtB1uB,KAAMtd,EAAMsd,MAAQ,MAGtBwW,EAAkBpsC,OAAOwqC,YAAY,KACrC4B,EAAkBpsC,OAAO0qC,WAAW,WACpC0B,EAAkBpsC,OAAO2qC,UAAU,QAAQsc,EAAY1kD,cACvD6zB,EAAUkH,aAAatC,EAAQ,CAAEkK,WAAY+hB,EAAY1kD,SAEzDg7B,WAAW,KACT4O,EAAansC,OAAQ,EACrBklD,EAAcllD,OAAQ,EACtBmlD,EAASnlD,MAAQ,GACjBX,OAAOkJ,QAAQ,QAAQ0+C,EAAY1kD,gBAClC,IACL,OAASoD,GACPiyB,QAAQjyB,MAAM,cAAeA,GAC7BwmC,EAAansC,OAAQ,EAGrB,MAAMw9B,EAAW73B,EAAMC,SAAW,OAClCwwB,EAAU+E,SAASH,EAAQwC,GAIzBA,EAAS94B,SAAS,YAClB84B,EAAS94B,SAAS,QAClB84B,EAAS94B,SAAS,QAClB84B,EAAS94B,SAAS,gBAElBrF,OAAOsG,MAAM,4DAA6D,GAAI,CAC5E03B,QAAS,EACTypB,gBAAiB,EACjBC,aAAa,IAGf1nD,OAAOsG,MAAM,SAAS63B,IAAY,GAAI,CACpCH,QAAS,IACT0pB,aAAa,GAGnB,SACE3B,EAAaplD,OAAQ,CACvB,CACF,kBAGA0H,eAA+BwhC,GAC7B,GAAK0b,EAAiB5kD,MAAtB,CAKA8kD,EAAe9kD,OAAQ,EACvBmsC,EAAansC,OAAQ,EAErB,IACEosC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpC0B,EAAkBpsC,OAAO2qC,UAAU,SAASzB,KAE5C,MAAM1N,EAAe,kDAEfC,EAAa,cACrBmpB,EAAiB5kD,qBAGjBkpC,iLASEkD,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBAEpC,MAAMvC,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BW,WAAY,IACZD,YAAa,OAIjB,IAAKK,EAASM,GACZ,MAAM,IAAI17B,MAAM,WAAWo7B,EAASQ,cAGtCoP,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBAEpC,MAAM/iC,QAAe60B,EAASS,OACxBmkB,EAAaz5C,EAAOw1B,QAAQ,IAAIv3B,SAASqI,SAAW,GAE1Dm+B,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eAGpC,IAAIlC,EAAW4Y,EACZpvC,OACA3M,QAAQ,uBAAwB,IAChCA,QAAQ,cAAe,IAC1B,MAAMojC,EAAYD,EAASE,MAAM,uBAC7BD,IACFD,EAAWC,EAAU,IAGvB,MAAMue,EAAejjD,KAAK2L,MAAM84B,GAChC,IAAKnkC,MAAMC,QAAQ0iD,GACjB,MAAM,IAAI5lD,MAAM,mBAIlBK,EAAOzB,MAAMgpC,OAASge,EAAa3gD,IAAKiS,IAAA,CACtC/Y,KAAM+Y,EAAM/Y,MAAQ,GACpB+kD,MAAOhsC,EAAMgsC,OAAShsC,EAAM/Y,MAAQ,GACpCq2B,KAAMtd,EAAMsd,MAAQ,MAItBgvB,EAAiB5kD,OAAS,gBAAgBkpC,IAE1CkD,EAAkBpsC,OAAOwqC,YAAY,KACrC4B,EAAkBpsC,OAAO0qC,WAAW,WACpC0B,EAAkBpsC,OAAO2qC,UAAU,OAAOqc,EAAazkD,cAEvDg7B,WAAW,KACT4O,EAAansC,OAAQ,EACrB6kD,EAAoB7kD,OAAQ,EAC5Bu4B,OAAOl5B,OAAOkJ,QAAQ,eACrB,IACL,OAAS5C,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1BwmC,EAAansC,OAAQ,EACrBu4B,OAAOl5B,OAAOsG,MAAM,YAAcA,EAAMC,QAC1C,SACEk/C,EAAe9kD,OAAQ,CACzB,CAnGA,MAFEu4B,OAAOl5B,OAAOm7B,QAAQ,WAsG1B,uBAGA9yB,iBACE,IAAK49C,EAAmBtlD,MAAMgS,OAE5B,YADA3S,OAAOm7B,QAAQ,eAKjB,IAAKtE,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAMlD,YALAj8B,OAAOsG,MAAM,oCAAqC,GAAI,CACpD03B,QAAS,EACTypB,gBAAiB,EACjBC,aAAa,IAMjB,MAAM/rB,EAAS5E,EAAU6E,WAAW,cAAe,YAGnD8pB,EAAyB/kD,MAAQslD,EAAmBtlD,MAEpDulD,EAAmBvlD,OAAQ,EAC3BmsC,EAAansC,OAAQ,EAErB,IACEosC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eACpC0B,EAAkBpsC,OAAO2qC,UAAU,eACnCvU,EAAUgF,mBAAmBJ,EAAQ,GAAI,UACzC,MAAMQ,EAAe,u+CAyCfC,EAAa,yBAErB6pB,EAAmBtlD,MAAMgS,sCAIvB4lB,QAAQC,IAAI,sBACZD,QAAQC,IAAI,aAAc3B,EAASl2B,MAAMq7B,cACzCzD,QAAQC,IAAI,WAAY3B,EAASl2B,MAAMu7B,OAEvC6Q,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,WAGzC,MAAMmN,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cACnDzD,QAAQC,IAAI,cAAesQ,GAE3BiE,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpCtU,EAAUgF,mBAAmBJ,EAAQ,GAAI,SAAS9E,EAASl2B,MAAMu7B,UAGjE,MAAMiB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CACEC,KAAM,SACNjuB,QAASutB,GAEX,CACEU,KAAM,OACNjuB,QAASwtB,IAGbW,WAAY,IACZD,YAAa,OAIjB,IAAKK,EAASM,GAAI,CAChB,MAAMmV,QAAkBzV,EAAS8H,OACjC,MAAM,IAAIljC,MAAM,YAAYo7B,EAASO,UAAUP,EAASQ,eAAeiV,IACzE,CAEA,MAAMtqC,QAAe60B,EAASS,OAG9B,GAFArF,QAAQC,IAAI,aAAclwB,IAErBA,EAAOw1B,UAAYx1B,EAAOw1B,QAAQ,KAAOx1B,EAAOw1B,QAAQ,GAAGv3B,QAC9D,MAAM,IAAIxE,MAAM,YAGlB,MAAMggD,EAAaz5C,EAAOw1B,QAAQ,GAAGv3B,QAAQqI,QAI7C,GAHA2pB,QAAQC,IAAI,aAAcupB,IAGrBA,GAAoC,iBAAfA,EACxB,MAAM,IAAIhgD,MAAM,cAIlB,IAAIonC,EAAW4Y,EAAWpvC,OAG1Bw2B,EAAWA,EAASnjC,QAAQ,uBAAwB,IAAIA,QAAQ,cAAe,IAG/E,MAAMojC,EAAYD,EAASE,MAAM,uBAMjC,IAAIse,EALAve,IACFD,EAAWC,EAAU,IAKvB,IACEue,EAAejjD,KAAK2L,MAAM84B,EAC5B,OAAS+F,GACP,MAAM,IAAIntC,MACR,gEAAgEggD,EAAW5+C,MAAM,EAAG,OAExF,CAEA,IAAK6B,MAAMC,QAAQ0iD,GACjB,MAAM,IAAI5lD,MAAM,mBAIlB,MAAM6lD,EAAcD,EAAav4C,OAAQ6J,GAChCA,EAAM/Y,MAAQ+Y,EAAMgsC,OAG7B,GAA2B,IAAvB2C,EAAY1kD,OACd,MAAM,IAAInB,MAAM,sBAIlBK,EAAOzB,MAAMgpC,OAASie,EAAY5gD,IAAKiS,IAAA,CACrC/Y,KAAM+Y,EAAM/Y,MAAQ,GACpB+kD,MAAOhsC,EAAMgsC,OAAS,GACtB1uB,KAAMtd,EAAMsd,MAAQ,MAGtBwW,EAAkBpsC,OAAOwqC,YAAY,KACrC4B,EAAkBpsC,OAAO0qC,WAAW,WACpC0B,EAAkBpsC,OAAO2qC,UAAU,QAAQsc,EAAY1kD,cACvD6zB,EAAUkH,aAAatC,EAAQ,CAAEkK,WAAY+hB,EAAY1kD,SAEzDg7B,WAAW,KACT4O,EAAansC,OAAQ,EACrBqlD,EAAkBrlD,OAAQ,EAC1BslD,EAAmBtlD,MAAQ,GAC3BX,OAAOkJ,QAAQ,QAAQ0+C,EAAY1kD,gBAClC,IACL,OAASoD,GACPiyB,QAAQjyB,MAAM,eAAgBA,GAC9BwmC,EAAansC,OAAQ,EAGrB,MAAMw9B,EAAW73B,EAAMC,SAAW,OAClCwwB,EAAU+E,SAASH,EAAQwC,GAIzBA,EAAS94B,SAAS,YAClB84B,EAAS94B,SAAS,QAClB84B,EAAS94B,SAAS,QAClB84B,EAAS94B,SAAS,gBAElBrF,OAAOsG,MAAM,4DAA6D,GAAI,CAC5E03B,QAAS,EACTypB,gBAAiB,EACjBC,aAAa,IAGf1nD,OAAOsG,MAAM,SAAS63B,IAAY,GAAI,CACpCH,QAAS,IACT0pB,aAAa,GAGnB,SACExB,EAAmBvlD,OAAQ,CAC7B,CACF,iBAGA,SAAwBsW,GACtBquC,EAAkB3kD,MAAQsW,CAC5B,aAGA,SAAoB4wC,GACc,OAA5BvC,EAAkB3kD,QACpByB,EAAOzB,MAAMgpC,OAAO2b,EAAkB3kD,OAAO41B,KAAOsxB,EACpDvC,EAAkB3kD,MAAQ,KAE9B,oBAGA0H,eAAiCwhC,GAC/B,GAAK6b,EAAyB/kD,MAA9B,CAKAilD,EAAiBjlD,OAAQ,EACzBmsC,EAAansC,OAAQ,EAErB,IACEosC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpC0B,EAAkBpsC,OAAO2qC,UAAU,SAASzB,KAE5C,MAAM1N,EAAe,4CAEfC,EAAa,YACrBspB,EAAyB/kD,qBAGzBkpC,8KASEkD,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBAEpC,MAAMvC,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BW,WAAY,IACZD,YAAa,OAIjB,IAAKK,EAASM,GACZ,MAAM,IAAI17B,MAAM,WAAWo7B,EAASQ,cAGtCoP,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBAEpC,MAAM/iC,QAAe60B,EAASS,OACxBmkB,EAAaz5C,EAAOw1B,QAAQ,IAAIv3B,SAASqI,SAAW,GAE1Dm+B,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eAGpC,IAAIlC,EAAW4Y,EACZpvC,OACA3M,QAAQ,uBAAwB,IAChCA,QAAQ,cAAe,IAC1B,MAAMojC,EAAYD,EAASE,MAAM,uBAC7BD,IACFD,EAAWC,EAAU,IAGvB,MAAMue,EAAejjD,KAAK2L,MAAM84B,GAChC,IAAKnkC,MAAMC,QAAQ0iD,GACjB,MAAM,IAAI5lD,MAAM,mBAIlBK,EAAOzB,MAAMgpC,OAASge,EAAa3gD,IAAKiS,IAAA,CACtC/Y,KAAM+Y,EAAM/Y,MAAQ,GACpB+kD,MAAOhsC,EAAMgsC,OAAShsC,EAAM/Y,MAAQ,GACpCq2B,KAAMtd,EAAMsd,MAAQ,MAItBmvB,EAAyB/kD,OAAS,gBAAgBkpC,IAElDkD,EAAkBpsC,OAAOwqC,YAAY,KACrC4B,EAAkBpsC,OAAO0qC,WAAW,WACpC0B,EAAkBpsC,OAAO2qC,UAAU,OAAOqc,EAAazkD,cAEvDg7B,WAAW,KACT4O,EAAansC,OAAQ,EACrBglD,EAAsBhlD,OAAQ,EAC9Bu4B,OAAOl5B,OAAOkJ,QAAQ,eACrB,IACL,OAAS5C,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1BwmC,EAAansC,OAAQ,EACrBu4B,OAAOl5B,OAAOsG,MAAM,YAAcA,EAAMC,QAC1C,SACEq/C,EAAiBjlD,OAAQ,CAC3B,CAnGA,MAFEu4B,OAAOl5B,OAAOm7B,QAAQ,SAsG1B,qBAGA,WACE,MAAMwO,EAASvnC,EAAOzB,MAAMgpC,OAGtBme,EAAcne,EAAOzmC,OAE3B,GAAoB,IAAhB4kD,EAGF,OAFA1lD,EAAOzB,MAAMg/B,UAAY,4BACzBpH,QAAQC,IAAI,kBAId,GAAIsvB,GAAe,EAEjB1lD,EAAOzB,MAAMg/B,UAAY,mCAAmCgK,EAAO3iC,IAAI,IAAM,WAAW8I,KAAK,qBAC7FyoB,QAAQC,IAAI,2BAA4Bp2B,EAAOzB,MAAMg/B,WACrDpH,QAAQC,IAAI,WAAYsvB,OACnB,CAGL,MAAMjB,EAAUiB,GAAe,EAAIx4C,KAAK0G,KAAK8xC,EAAc,GAAK,EAG1DC,EAAYz4C,KAAKC,IAAID,KAAK0G,KAAK8xC,EAAc,GAAIA,GAAe,GAAK,EAAIx4C,KAAK0G,KAAK8xC,EAAc,IAEjG54C,EAAkB,GAGxBA,EAAM9C,KAAK,iCACX,QAASzF,EAAI,EAAGA,EAAIohD,EAAWphD,GAAKkgD,EAAS,CAC3C,MAAMC,EAAQx3C,KAAKC,IAAIs3C,EAASkB,EAAYphD,GAC5CuI,EAAM9C,KACJ,MACEu9B,EACGxmC,MAAMwD,EAAGA,EAAImgD,GACb9/C,IAAI,IAAM,WACV8I,KAAK,OACR,eAEN,CAGAZ,EAAM9C,KAAK,iCACX,QAASzF,EAAIohD,EAAWphD,EAAImhD,EAAanhD,GAAKkgD,EAAS,CACrD,MAAMC,EAAQx3C,KAAKC,IAAIs3C,EAASiB,EAAcnhD,GAC9CuI,EAAM9C,KACJ,MACEu9B,EACGxmC,MAAMwD,EAAGA,EAAImgD,GACb9/C,IAAI,IAAM,WACV8I,KAAK,OACR,eAEN,CAEA1N,EAAOzB,MAAMg/B,UAAYzwB,EAAMY,KAAK,IAEpCyoB,QAAQC,IAAI,2BAA4Bp2B,EAAOzB,MAAMg/B,WACrDpH,QAAQC,IAAI,WAAYsvB,GACxBvvB,QAAQC,IACN,WACA,UAAUuvB,gBAAwBD,EAAcC,aAAqBlB,KAEzE,CAGA,MAAMmB,EAAare,EAChB3iC,IAAI,CAACqY,EAAG1Y,IAEA,0EADU0Y,EAAEkX,KAAO,aAAalX,EAAEkX,cAAgB,KAEflX,EAAE4lC,OAAS,MAAQt+C,EAAI,iDACjCA,EAAI,2BAGrCmJ,KAAK,MAEFohC,EAAc,wBACV9uC,EAAOzB,MAAMT,uHAITkC,EAAOzB,MAAMT,iGAI3B8nD,oDAgEMC,EAAY,uFAID7lD,EAAOzB,MAAMT,0fAyB9BytC,EAAMhtC,MAAM,GAAGiO,QAAUsiC,EACzBvD,EAAMhtC,MAAM,GAAGiO,QAvFI,grCAwFnB++B,EAAMhtC,MAAM,GAAGiO,QAAUq5C,EACzB9b,EAAYxrC,MAAQgtC,EAAMhtC,MAAM,GAEhCu4B,OAAOl5B,OAAOkJ,QAAQ,WACxB,eAGA,WACEkjC,EAAOzrC,OAAQ,EACf0rC,EAAS1rC,MAAQ,EACnB,mBAGA,WACEyB,EAAOzB,MAAMgpC,OAAOv9B,KAAK,CACvBlM,KAAM,KAAKkC,EAAOzB,MAAMgpC,OAAOzmC,OAAS,IACxC+hD,MAAO,KAAK7iD,EAAOzB,MAAMgpC,OAAOzmC,OAAS,IACzCqzB,KAAM,IAEV,sBAGA,SAA6Btf,GACvB7U,EAAOzB,MAAMgpC,OAAOzmC,QAAU,EAChCg2B,OAAOl5B,OAAOm7B,QAAQ,cAGxB/4B,EAAOzB,MAAMgpC,OAAO+U,OAAOznC,EAAO,EACpC,eAGA,SAAsB24B,GACpB,MAAMC,EAAWqO,EAAUtO,GACvBC,IACFztC,EAAOzB,MAAQ+D,KAAK2L,MAAM3L,KAAKC,UAAUkrC,IACzC3W,OAAOl5B,OAAOkJ,QAAQ,SAAS2mC,EAAS3vC,WAE5C,iBAGAmI,iBACE,IAAKgkC,EAAS1rC,MAAMgS,OAElB,YADAumB,OAAOl5B,OAAOsG,MAAM,WAKtB,MAAMq1B,EAAS5E,EAAU6E,WAAW,cAAe,aAGnDupB,EAAiBxkD,MAAQ0rC,EAAS1rC,MAGlCmsC,EAAansC,OAAQ,EAErB,IAEE,IAAKk2B,EAASl2B,MAAMq7B,eAAiBnF,EAASl2B,MAAMs7B,QAIlD,OAHA/C,OAAOl5B,OAAOsG,MAAM,6BACpBwmC,EAAansC,OAAQ,OACrBo2B,EAAU+E,SAASH,EAAQ,UAK7BoR,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpC0B,EAAkBpsC,OAAO2qC,UAAU,SAASlpC,EAAOzB,MAAMgpC,OAAOzmC,YAChE6pC,EAAkBpsC,OAAO2qC,UAAU,OAAOzU,EAASl2B,MAAMu7B,SACzDnF,EAAUgF,mBAAmBJ,EAAQ,GAAI,UAGzC,MAAMusB,EAAeva,EAAMhtC,MAAMqG,IAAIqY,GAAK,OAAOA,EAAEtY,aAAasY,EAAEzQ,WAAWkB,KAAK,QAG5EqsB,EAAe,+tCAmDfC,EAAa,yCACrBh6B,EAAOzB,MAAMgpC,OAAO3iC,IAAI,CAACqY,EAAG1Y,IAAM,KAAKA,EAAI,KAAK0Y,EAAE4lC,eAAe5lC,EAAEnf,iBAAiByG,EAAI,IAAI0Y,EAAEkX,KAAO,UAAUlX,EAAEkX,OAAS,MAAMzmB,KAAK,6CAGlH1N,EAAOzB,MAAMgpC,OAAOzmC,kCACpBd,EAAOzB,MAAMgpC,OAAO,IAAIsb,OAAS,eAAe7iD,EAAOzB,MAAMgpC,OAAO,IAAIsb,OAAS,QAAQ7iD,EAAOzB,MAAMgpC,OAAO,GAAK,UAAUvnC,EAAOzB,MAAMgpC,OAAO,GAAGsb,QAAU,KAAK7iD,EAAOzB,MAAMgpC,OAAO,GAAK,UAAUvnC,EAAOzB,MAAMgpC,OAAO,GAAGsb,QAAU,KAAK7iD,EAAOzB,MAAMgpC,OAAO,GAAK,UAAUvnC,EAAOzB,MAAMgpC,OAAO,GAAGsb,QAAU,gEAEzT7iD,EAAOzB,MAAMgpC,OAAOzmC,OAAS,yKAOtCd,EAAOzB,MAAMg/B,yBAGb0M,EAAS1rC,0CAGTunD,8CAIQ9lD,EAAOzB,MAAMgpC,OAAOzmC,gJAM1B6pC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,qBACpC0B,EAAkBpsC,OAAO2qC,UAAU,WAAWzU,EAASl2B,MAAMq7B,gBAC7DjF,EAAUgF,mBAAmBJ,EAAQ,GAAI,WAEzC,MAAMmN,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,YAAajG,EAASl2B,MAAMm8B,aAAe,GAC3CC,WAAYlG,EAASl2B,MAAMo8B,YAAc,UAU7C,GALAgQ,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eACpC0B,EAAkBpsC,OAAO2qC,UAAU,uBACnCvU,EAAUgF,mBAAmBJ,EAAQ,GAAI,WAAW9E,EAASl2B,MAAMu7B,WAE9DiB,EAASM,GACZ,MAAM,IAAI17B,MAAM,WAAWo7B,EAASQ,cAGtC,MAAM54B,QAAao4B,EAASS,OACtBiV,EAAa9tC,EAAK+4B,QAAQ,IAAIv3B,SAASqI,SAAW,GAGxDm+B,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,oBACpC0B,EAAkBpsC,OAAO2qC,UAAU,YAAYuH,EAAW3vC,aAC1D6zB,EAAUgF,mBAAmBJ,EAAQ,GAAI,aAGzC,MAAMwsB,EAAmB,iEACnBC,EAAU,IAAIvV,EAAWwV,SAASF,IAExC,GAAuB,IAAnBC,EAAQllD,OACV,MAAM,IAAInB,MAAM,gBAGlB,UAAWsnC,KAAS+e,EAAS,CAC3B,MACME,EADUjf,EAAM,GAAG12B,OACM3M,QAAQ,QAAS,IAChD,IAAI4I,EAAUw4C,EAAoBkB,EAAgBjf,EAAM,IAGpDz6B,EAAQ3L,SAAS,cACnB2L,EAAUA,EAAQzL,MAAM,GAAG,GAAIwP,QAGjC,MAAM08B,EAAO1B,EAAMhtC,MAAMglC,KAAKtmB,GAAKA,EAAEtY,OAASuhD,GAC1CjZ,EACFA,EAAKzgC,QAAUA,EACa,eAAnB05C,GAAsD,cAAnBA,GAAqD,cAAnBA,GAE9E3a,EAAMhtC,MAAMyL,KAAK,CAAErF,KAAMuhD,EAAgB15C,WAE7C,CAGA++B,EAAMhtC,MAAM4kC,QAAQ8J,IAClBA,EAAKtoC,KAAOsoC,EAAKtoC,KAAKf,QAAQ,QAAS,MAIzC,MAAMuiD,MAAkBzpC,IACxB6uB,EAAMhtC,MAAM4kC,QAAQ8J,IAClBkZ,EAAY7kD,IAAI2rC,EAAKtoC,KAAMsoC,KAE7B1B,EAAMhtC,MAAQqE,MAAM+V,KAAKwtC,EAAYrvC,UAGrC6zB,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,eACpC0B,EAAkBpsC,OAAO2qC,UAAU,OAAO8c,EAAQllD,cAClD6zB,EAAUgF,mBAAmBJ,EAAQ,GAAI,UAEzC,MAAMqS,EAAWL,EAAMhtC,MAAMglC,KAAKtmB,GAAgB,eAAXA,EAAEtY,OAA0B4mC,EAAMhtC,MAAM,GAC/EwrC,EAAYxrC,MAAQqtC,EAIpBjB,EAAkBpsC,OAAOwqC,YAAY,KACrC4B,EAAkBpsC,OAAO0qC,WAAW,cACpCtU,EAAUkH,aAAatC,EAAQ,CAAE6sB,UAAWJ,EAAQllD,SAEpDg7B,WAAW,KACT4O,EAAansC,OAAQ,EACrByrC,EAAOzrC,OAAQ,EACfu4B,OAAOl5B,OAAOkJ,QAAQ,eACrB,IACL,OAAS5C,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1BwmC,EAAansC,OAAQ,EACrBo2B,EAAU+E,SAASH,EAAQr1B,EAAMC,SACjC2yB,OAAOl5B,OAAOsG,MAAM,YAAcA,EAAMC,QAC1C,CACF,eAGA8B,eAA4BwhC,GAC1B,GAAKsb,EAAiBxkD,MAAtB,CAKA0kD,EAAc1kD,OAAQ,EACtBmsC,EAAansC,OAAQ,EAErB,IAEEosC,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,mBACpC0B,EAAkBpsC,OAAO2qC,UAAU,SAASzB,KAE5C,MAAMqe,EAAeva,EAAMhtC,MAAMqG,IAAIqY,GAAK,OAAOA,EAAEtY,aAAasY,EAAEzQ,WAAWkB,KAAK,QAE5EqsB,EAAe,iQAUfC,EAAa,YACrB+oB,EAAiBxkD,qBAGjBkpC,yBAGAznC,EAAOzB,MAAMgpC,OAAO3iC,IAAI,CAACqY,EAAG1Y,IAAM,KAAKA,EAAI,KAAK0Y,EAAE4lC,eAAe5lC,EAAEnf,iBAAiByG,EAAI,IAAI0Y,EAAEkX,KAAO,UAAUlX,EAAEkX,OAAS,MAAMzmB,KAAK,6BAGrIo4C,kTAuBEnb,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,uBACpC0B,EAAkBpsC,OAAO2qC,UAAU,UAAUqC,EAAMhtC,MAAMuC,YAEzD,MAAM4lC,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAEnD+Q,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpC0B,EAAkBpsC,OAAO2qC,UAAU,uBAEnC,MAAMnO,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAU,CACnBu3B,MAAOrF,EAASl2B,MAAMu7B,MACtBU,SAAU,CACR,CAAEC,KAAM,SAAUjuB,QAASutB,GAC3B,CAAEU,KAAM,OAAQjuB,QAASwtB,IAE3BU,YAAa,GACbC,WAAY,UAIhB,IAAKI,EAASM,GACZ,MAAM,IAAI17B,MAAM,WAAWo7B,EAASQ,cAItCoP,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBAEpC,MAAMtmC,QAAao4B,EAASS,OACtBiV,EAAa9tC,EAAK+4B,QAAQ,IAAIv3B,SAASqI,SAAW,GAGxDm+B,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,iBACpC0B,EAAkBpsC,OAAO2qC,UAAU,SAASuH,EAAW3vC,aAGvD,MAAMilD,EAAmB,iEACnBC,EAAU,IAAIvV,EAAWwV,SAASF,IAExC,GAAuB,IAAnBC,EAAQllD,OACV,MAAM,IAAInB,MAAM,6BAGlBgrC,EAAkBpsC,OAAO2qC,UAAU,OAAO8c,EAAQllD,cAGlD,MAAMulD,EAAiBL,EAAQphD,IAAI0hD,GAAKA,EAAE,GAAG/1C,OAAO3M,QAAQ,QAAS,KAE/D2iD,EADgB,CAAC,aAAc,YAAa,aACfv5C,OAAOiQ,IAAMopC,EAAepjD,SAASga,IASxE,GAPIspC,EAAazlD,OAAS,IACxB6pC,EAAkBpsC,OAAO2qC,UAAU,sBAAsBqd,EAAa74C,KAAK,SAC3EopB,OAAOl5B,OAAOm7B,QAAQ,qBAAqBwtB,EAAa74C,KAAK,QAAS,GAAI,CACxEkuB,QAAS,OAIToqB,EAAQllD,OAAS,EACnB,UAAWmmC,KAAS+e,EAAS,CAC3B,MAAME,EAAiBjf,EAAM,GAAG12B,OAAO3M,QAAQ,QAAS,IACxD,IAAI4I,EAAUw4C,EAAoBkB,EAAgBjf,EAAM,IACpDz6B,EAAQ3L,SAAS,cACnB2L,EAAUA,EAAQzL,MAAM,GAAG,GAAIwP,QAEjC,MAAM08B,EAAO1B,EAAMhtC,MAAMglC,KAAKtmB,GAAKA,EAAEtY,OAASuhD,GAC1CjZ,IACFA,EAAKzgC,QAAUA,EACfm+B,EAAkBpsC,OAAO2qC,UAAU,UAAUgd,KAEjD,CAIFvb,EAAkBpsC,OAAOwqC,YAAY,IACrC4B,EAAkBpsC,OAAO0qC,WAAW,aAGpC8Z,EAAiBxkD,OAAS,gBAAgBkpC,IAK1CkD,EAAkBpsC,OAAOwqC,YAAY,KACrC4B,EAAkBpsC,OAAO0qC,WAAW,cAEpCnN,WAAW,KACT4O,EAAansC,OAAQ,EACrBykD,EAAmBzkD,OAAQ,EAC3Bu4B,OAAOl5B,OAAOkJ,QAAQ,iBAAiBk/C,EAAQllD,eAC9C,IACL,OAASoD,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1BwmC,EAAansC,OAAQ,EACrBu4B,OAAOl5B,OAAOsG,MAAM,YAAcA,EAAMC,QAC1C,SACE8+C,EAAc1kD,OAAQ,CACxB,CAhKA,MAFEu4B,OAAOl5B,OAAOm7B,QAAQ,SAmK1B,gBAGA9yB,uBACQ02B,EAAgBonB,EAAiBxlD,MAAO,kBAChD,oCA6BA,WACE,MAAMqtC,EAAWL,EAAMhtC,MAAMglC,KAAKtmB,GAAgB,eAAXA,EAAEtY,MACnCknC,EAAUN,EAAMhtC,MAAMglC,KAAKtmB,GAAgB,cAAXA,EAAEtY,MAClCmnC,EAASP,EAAMhtC,MAAMglC,KAAKtmB,GAAgB,cAAXA,EAAEtY,MAEvC,IAAKinC,GAAwC,KAA5BA,EAASp/B,QAAQ+D,OAEhC,YADAumB,OAAOl5B,OAAOsG,MAAM,gBAItB,MAAMmE,EAAO,uCAAuCzE,QAAQ,QAAS,SAAU8P,GAC7E,MAAM5E,EAAqB,GAAhB5B,KAAK84B,SAAiB,EAEjC,OADgB,MAANtyB,EAAY5E,EAAS,EAAJA,EAAW,GAC7B3O,SAAS,GACpB,GAGMmsC,EAAY,SACZC,EAAW,QAIX/O,EAAgB,GADFoO,EAASp/B,QAAQ+D,YAEpCg8B,OACDV,GAASr/B,SAAW,SAClB+/B,UAEDD,OACDR,GAAQt/B,SAAW,SACjB8/B,KAKF,IAAIka,EAAexmD,EAAOzB,MAAMg/B,UAGhC,MAAMkpB,GAAyBD,EAAavf,MAAM,eAAiB,IAAInmC,OACjE2iC,EAAazjC,EAAOzB,MAAMgpC,OAAOzmC,OAET,IAA1B2lD,IAEFD,EAAe,GAAGA,EAAa5iD,QAAQ,sBAAuB,mBAAmBhB,MAAM6gC,GACpFijB,KAAK,cACLh5C,KAAK,mBAKV,MAAMi5C,EAAqBnpB,EAAc55B,QAAQ,QAAS,MAAMA,QAAQ,MAAO,MAEzEwuC,EAAY,CAChBr6B,GAAI1P,EACJg1B,WAAYr9B,EAAOzB,MAAMT,KACzBy/B,UAAWipB,EACXhpB,cAAempB,EACflpB,YAAa,GACbC,UAAW,CAAC,GACZxK,UAAU,EACV4K,cAAc,EACdC,YAAY,EACZT,WAAW,EACXK,gBAAiB,EACjBC,SAAU,KACVC,SAAU,MAINI,EAAO,IAAIC,KAAK,CAAC57B,KAAKC,UAAU6vC,EAAW,KAAM,IAAK,CAAEj8B,KAAM,qBAC9D3F,EAAMC,IAAI0tB,gBAAgBF,GAC1B5kB,EAAI0jB,SAASsB,cAAc,KACjChlB,EAAEvI,KAAON,EACT6I,EAAEilB,SAAW,SAASt+B,EAAOzB,MAAMT,YACnCub,EAAEmlB,QACF/tB,IAAIiuB,gBAAgBluB,GAEpBsmB,OAAOl5B,OAAOkJ,QAAQ,mBACxB,sJAl2FOqqB,GAAA,CAAAC,MAAM,2BAGPA,MAAM,iBACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,YAAAC,WAAA,iPAAAC,OAAA,2LAqCKL,MAAA,CAAAM,QAAA,OAAAI,IAAA,gCA8DFV,MAAA,CAAAM,QAAA,iDAAAI,IAAA,kCAGDV,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAE,OAAA,oBAAAC,QAAA,2DA0BKN,MAAA,8BAqBAA,MAAA,CAAAsD,KAAA,IAAAhD,QAAA,iCAAAI,IAAA,oCAMIV,MAAA,CAAAM,QAAA,4FACGN,MAAA,CAAAC,MAAA,uIAgDHD,MAAA,CAAAM,QAAA,OAAAI,IAAA,mFA+BSa,MAAM,yBAoFxBvB,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAE,OAAA,oBAAAC,QAAA,uCAWEN,MAAA,CAAAM,QAAA,OAAAI,IAAA,6GA4CCV,MAAA,CAAAM,QAAA,iCAAAI,IAAA,iCAEEV,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAE,OAAA,0BAkCDL,MAAA,CAAAI,WAAA,gCAAAD,QAAA,OAAAE,OAAA,oBAAAI,SAAA,kCAUET,MAAA,CAAAE,OAAA,IAAAD,MAAA,6JAeDD,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAE,OAAA,oBAAAiD,KAAA,2BAgDLtD,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAI,MAAA,2BAAAF,OAAA,0BAWEL,MAAA,CAAAM,QAAA,gDAAAI,IAAA,mGA8CGV,MAAA,CAAAM,QAAA,OAAAI,IAAA,0CAwDLV,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAI,MAAA,mEAAAF,OAAA,0BAeEL,MAAA,CAAAI,WAAA,oFAAAC,OAAA,0DAAAF,QAAA,yCAQKH,MAAA,CAAAM,QAAA,6FACEN,MAAA,CAAAM,QAAA,8BAAAI,IAAA,aAEEV,MAAA,CAAAC,MAAA,6DAoB4BD,MAAA,CAAAM,QAAA,iCAAAI,IAAA,YAc3BV,MAAA,CAAAC,MAAA,+KAoEED,MAAA,CAAAC,MAAA,6BAAAE,QAAA,cAmBTH,MAAA,CAAAM,QAAA,OAAAI,IAAA,gDAiCwBV,MAAA,qBAAAM,QAAA,OAAAI,IAAA,0DAwD7BV,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAI,MAAA,qHAgCKP,MAAA,8BAsBAA,MAAA,CAAAM,QAAA,OAAAI,IAAA,0EAuFLV,MAAA,CAAAI,WAAA,iCAAAD,QAAA,OAAAI,MAAA,qHA+BKP,MAAA,8BAsBAA,MAAA,CAAAM,QAAA,OAAAI,IAAA,qHAtgCX,OAAAE,IAAAC,EAwkCM,MAxkCNS,GAwkCM,CAtkCJF,EAkGM,MAlGNO,GAkGM,CAAAN,EAAA,MAAAA,EAAA,IA3EJD,EAeK,MAdHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,yDAAAK,QAAA,8BAAAI,IAAA,+EAUC,CAEDU,EAA6E,KAA1EG,MAAM,wBAAwBvB,MAAA,CAAAC,MAAA,kCAA4C,cAE/E,IACAmB,EA0DM,MA1DNW,GA0DM,CAzDJX,EAkBS,UAjBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,iBAWChC,QAAKO,eAAEL,EAAAmrB,aAAY,QACnBpd,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,oBACxDmkB,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,sBAAAuW,EAAA,MAAAA,EAAA,KAEzDD,EAA2D,KAAxDG,MAAM,oBAAoBvB,MAAA,mCAA8B,iBAE7D,UACAoB,EAkBS,UAjBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,iBAWChC,QAAOE,EAAA4hB,aACP7T,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,oBACxDmkB,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,sBAAAuW,EAAA,MAAAA,EAAA,KAEzDD,EAAyE,KAAtEG,MAAM,kCAAkCvB,MAAA,mCAA8B,aAE3E,UACAoB,EAkBS,UAjBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,iBAWChC,QAAOE,EAAA+1B,YACPhoB,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,oBACxDmkB,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,sBAAAuW,EAAA,MAAAA,EAAA,KAEzDD,EAA8D,KAA3DG,MAAM,uBAAuBvB,MAAA,mCAA8B,eAEhE,cAKJoB,EA4WM,MA5WNa,GA4WM,CA1WJb,EAsNM,MAtNNgB,GAsNM,CAAAf,EAAA,MAAAA,EAAA,IA3MJD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,QAQC,CAEDU,EAAsD,KAAnDG,MAAM,kBAAkBvB,MAAA,CAAAC,MAAA,eAA2B,YAExD,IAGAmB,EAkBM,MAlBNiB,GAkBM,CAAAhB,EAAA,MAAAA,EAAA,IAjBJD,EAEC,SAFMpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,mDACJ,QAAI,IAAAkP,EAEP/N,EAaE,+BAAAC,EAAA,KAAAA,EAAA,GAAAO,GAZSZ,SAAO0M,UAAS9L,GACzBtb,KAAK,OACLub,YAAY,uBACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,0CAHS,CAAAqP,EAAAtO,EAAA7wB,OAAOu9B,eAgBpBtM,EA0FM,MA1FNkB,GA0FM,EAAA1B,GAAA,GAzFJC,EAwFMkD,EAAA,KAAAC,EAvFqBhD,EAAA7wB,OAAOunC,OAAM,CAA9B1wB,EAAOhC,SADjB6b,EAwFM,OAtFHvvB,IAAK0T,EACNgb,MAAA,CAAAG,QAAA,OAAAC,WAAA,gCAAAC,OAAA,uBAEAe,EAkBM,MAlBNsB,GAkBM,CAjBJtB,EAAyF,OAAzFwB,GAAgE,MAAGnB,EAAGzc,EAAK,MAC3Eoc,EAeS,UAdNiC,SAAUrC,EAAA7wB,OAAOunC,OAAOzmC,QAAM,EAC9B+uB,MAAK6C,EAAA,CAAA1C,QAAA,+GAAkSqD,QAAAxC,EAAA7wB,OAAOunC,OAAOzmC,QAAM,SAU3T6vB,QAAKc,GAAEZ,cAAYhc,IACrB,OAED,GAAA+d,QAEF3B,EAcE,+BAAAQ,GAbS5a,EAAM/Y,KAAI2zB,EACnBtb,KAAK,OACLub,YAAY,OACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,4DAAA+C,IAAA,CAHS,CAAAsM,EAAAtoB,EAAM/Y,UAcjBmzB,EAcE,+BAAAQ,GAbS5a,EAAMgsC,MAAKpxB,EACpBtb,KAAK,OACLub,YAAY,OACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,4DAAAiD,IAAA,CAHS,CAAAoM,EAAAtoB,EAAMgsC,SAcjB5xB,EAiCM,MAjCN+B,GAiCM,CAAAgM,EAhCJ/N,EAcE,+BAAAQ,GAbS5a,EAAMsd,KAAI1C,EACnBtb,KAAK,OACLub,YAAY,8BACZ7B,MAAA,CAAAsD,KAAA,IAAAnD,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,gEAAAwD,IAAA,CAHS,CAAA6L,EAAAtoB,EAAMsd,QAcjBlD,EAgBS,UAfPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,0BAAAsD,OAAA,8BAUA7B,MAAM,OACLZ,QAAKc,GAAEZ,EAAAg2B,eAAehyC,IAAK,CAEnBgC,EAAMsd,UAAfzD,EAA6C,KAAAvvB,IAAA,EAAvBiwB,MAAK4C,EAAEnd,EAAMsd,OAAI,UAAA1D,IACvCC,EAAwC,IAAxC6O,MAAwC,EAAAhM,kBAMhDtC,EAgBS,UAfPpB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,MAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,WAWCzC,QAAOE,EAAAi2B,UAAA,IAAA51B,EAAA,MAAAA,EAAA,KAERD,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,mCAA8B,UAE5D,OAEAoB,EAiBS,UAhBPpB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,0BAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,WAYCzC,QAAOE,EAAAk2B,oBAAA,IAAA71B,EAAA,MAAAA,EAAA,KAERD,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,mCAA8B,oBAE5D,OAEAoB,EAiBS,UAhBPpB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,0BAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,WAYCzC,QAAOE,EAAAm2B,4BAAA,IAAA91B,EAAA,MAAAA,EAAA,KAERD,EAAyE,KAAtEG,MAAM,kCAAkCvB,MAAA,mCAA8B,eAE3E,OAEAoB,EAiBS,UAhBPpB,MAAA,CAAAO,MAAA,OAAAJ,QAAA,0BAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,WAYCzC,QAAOE,EAAAo2B,oBAAA,IAAA/1B,EAAA,MAAAA,EAAA,KAERD,EAA8D,KAA3DG,MAAM,uBAAuBvB,MAAA,mCAA8B,cAEhE,SAIFoB,EAqDM,MArDNuO,GAqDM,CA1CJvO,EAoBM,MApBNyO,GAoBM,EAAAjP,GAAA,GAjBJC,EAgBMkD,EAAA,KAAAC,EAfWhD,EAAA0a,MAAR0B,QADTvc,EAgBM,OAdHvvB,IAAK8rC,EAAKtoC,KACVkrB,MAAK6C,EAAA,CAAA1C,QAAA,sBAAiEa,EAAAkZ,aAAaplC,OAASsoC,EAAKtoC,KAAI,oBAAAmrB,MAA+Ce,EAAAkZ,aAAaplC,OAASsoC,EAAKtoC,KAAI,iBAAAwuC,aAAA,qFAUnLxiB,WAAOE,EAAAkZ,YAAckD,GAAA3b,EAEnB2b,EAAKtoC,MAAI,GAAAg7B,MAAA,QAMR9O,EAAAkZ,YAAA/K,GAAAvO,IADRC,EAkBY,YAAAvvB,IAAA,EAhBD,sBAAA+vB,EAAA,KAAAA,EAAA,GAAAO,GAAAZ,EAAAkZ,YAAYv9B,QAAOilB,GAC5B5B,MAAA,CAAAsD,KAAA,IAAA/C,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,qGAAA6B,OAAA,6BAcCuN,QAAOrO,EAAA4H,eAAA,YAfC,CAAA0G,EAAAtO,EAAAkZ,YAAYv9B,WAAOqlB,EAAA,SAoBhCZ,EAwFM,MAxFN4O,GAwFM,CAtFJ5O,EAwDM,MAxDN6O,GAwDM,CAvDJ7O,EA+BM,OA/BDpB,MAAA,CAAAM,QAAA,yFAA+F,CAAAe,EAAA,MAAAA,EAAA,IAClGD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,QAQC,CAEDU,EAAuD,KAApDG,MAAM,mBAAmBvB,MAAA,CAAAC,MAAA,eAA2B,aAEzD,IACAmB,EAeS,UAdPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,WAUCzC,QAAOE,EAAAq2B,eAAA,IAAAh2B,EAAA,MAAAA,EAAA,KAERD,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,mCAA8B,QAE5D,SAEFoB,EAsBM,MAtBN+O,GAsBM,CAZJ/O,EAWC,MAXDkP,GAWC7O,EADKT,EAAAkzB,kBAAgB,OAM1B9yB,EA0BM,MA1BNmP,GA0BM,CAAAlP,EAAA,MAAAA,EAAA,IAzBJD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,QAQC,CAEDU,EAAsD,KAAnDG,MAAM,kBAAkBvB,MAAA,CAAAC,MAAA,eAA2B,YAExD,IACAmB,EAUO,OATLpB,MAAA,CAAAI,WAAA,gCAAAD,QAAA,4BAAAE,OAAA,oBAAAI,SAAA,QAQA62B,UAAQt2B,EAAA2E,aAAA,OAAAmL,UAQS,OAAjB9P,EAAAqyB,uBADRxyB,EA8GM,OAAAvvB,IAAA,EA5GJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,4EAYCQ,QAAKO,mBAAOL,EAAAqyB,kBAAiB,kBAE9BjyB,EA6FM,MA7FN2P,GA6FM,CAAA1P,EAAA,MAAAA,EAAA,IAnFJD,EAAwF,MAApFpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,gDAA2E,QAAI,IACnFmB,EA8CM,MA9CN4P,GA8CM,EAAApQ,IApCJC,EAmCMkD,EAAA,KAAAC,EAlCuBhD,EAAAu2B,SAAQ,CAA3B3B,EAAWhsB,IADrBxI,EAmCM,OAjCH9vB,IAAKs4B,EACL5J,MAAO,CAAAG,QAAA,qMAYPuB,MAAOk0B,EACP90B,QAAKc,GAAEZ,EAAAw2B,WAAW5B,GAClB7mB,aAAU1N,YAAkB5qB,IAA6BA,EAAEu4B,cAAchP,MAAMI,WAAU,UAA8B3pB,EAAEu4B,cAAchP,MAAMiY,YAAW,UAA8BxhC,EAAEu4B,cAAchP,MAAMlV,UAAS,aAAiCrU,EAAEu4B,cAAchP,MAAMwP,UAAS,uCAQrRP,aAAU5N,cAAkB5qB,IAA6BA,EAAEu4B,cAAchP,MAAMI,WAAU,UAA8B3pB,EAAEu4B,cAAchP,MAAMiY,YAAW,UAA8BxhC,EAAEu4B,cAAchP,MAAMlV,UAAS,WAA+BrU,EAAEu4B,cAAchP,MAAMwP,UAAS,WASpRpO,EAAkE,KAA9DG,MAAK4C,EAAEyxB,GAAW51B,MAAA,oBAAAC,MAAA,oCAG1BmB,EAkCM,MAlCN+P,GAkCM,CAjCJ/P,EAcS,UAbPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,8CAAAsD,OAAA,WAUCzC,QAAKO,iBAAEL,EAAAqyB,kBAAiB,OAC1B,QAGDjyB,EAiBS,UAhBPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,WAUCzC,QAAKO,EAAA,MAAAA,EAAA,IAAAO,IAAiBZ,EAAA7wB,OAAOunC,OAAO1W,EAAAqyB,mBAAoB/uB,KAAI,GAAqBtD,EAAAqyB,kBAAiB,QAIpG,0BASCryB,EAAAmZ,QAAAvZ,IADRC,EAyNM,OAAAvvB,IAAA,EAvNJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,4EAYCQ,QAAKO,mBAAOL,EAAAmZ,QAAM,eAEnB/Y,EAwMM,MAxMNgQ,GAwMM,CAAA/P,EAAA,MAAAA,EAAA,IA5LJD,EAA2F,MAAvFpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,gDAA2E,WAAO,IAGtFmB,EAmHM,MAnHNiQ,GAmHM,CA1GJjQ,EAqBM,MArBN8iB,GAqBM,CApBJ9iB,EAKM,MALN+iB,GAKM,CAAA9iB,EAAA,MAAAA,EAAA,IAJJD,EAAuE,KAApEG,MAAM,kBAAkBvB,MAAA,CAAAC,MAAA,yCAC3BmB,EAEM,MAFNkjB,GAA+D,WACtD7iB,EAAGT,SAAO0W,OAAOzmC,QAAS,OACnC,KAEFmwB,EAaS,UAZPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,0BAAAC,OAAA,0DAAAJ,MAAA,6BAAAsD,OAAA,WASCzC,QAAOE,EAAAy2B,kBAAA,IAAAp2B,EAAA,MAAAA,EAAA,KAERD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,UAClC,SAGSR,EAAA7wB,OAAOunC,OAAOzmC,OAAM,GAAA2vB,IAA/BC,EAiFM,MAjFN0jB,GAiFM,EAAA3jB,GAAA,GAhFJC,EA+EMkD,EAAA,KAAAC,EA9EiBhD,EAAA7wB,OAAOunC,OAAM,CAA1B1wB,EAAOtS,SADjBmsB,EA+EM,OA7EHvvB,IAAKoD,EACNsrB,MAAA,CAAAI,WAAA,wBAAAC,OAAA,4DAAAF,QAAA,WAAAG,QAAA,8BAAAI,IAAA,SAUAU,EAAsG,OAAtGojB,GAAiF,KAAE/iB,EAAG/sB,EAAC,GAAO,IAAC,GAAAy6B,EAC/F/N,EAaE,+BAAAQ,GAZS5a,EAAMgsC,MAAKpxB,EACpBtb,KAAK,OACLub,YAAY,OACZ7B,MAAA,CAAAsD,KAAA,IAAAnD,QAAA,UAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,sCAAAwkB,IAAA,CAHS,CAAAnV,EAAAtoB,EAAMgsC,WAajB5xB,EAaE,+BAAAQ,GAZS5a,EAAM/Y,KAAI2zB,EACnBtb,KAAK,OACLub,YAAY,MACZ7B,MAAA,CAAAsD,KAAA,IAAAnD,QAAA,UAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,sCAAAykB,IAAA,CAHS,CAAApV,EAAAtoB,EAAM/Y,QAcT+Y,EAAMsd,UADdzD,EAgBS,UAAAvvB,IAAA,EAdP0uB,MAAA,CAAAG,QAAA,UAAAC,WAAA,0BAAAC,OAAA,0DAAAJ,MAAA,6BAAAsD,OAAA,8BAUA7B,MAAM,OACLZ,QAAKc,GAAE5a,EAAMsd,KAAI,KAElBlD,EAA2B,KAAvBG,MAAK4C,EAAEnd,EAAMsd,OAAI,yBAEvBlD,EAmBS,UAlBNiC,SAAUrC,EAAA7wB,OAAOunC,OAAOzmC,QAAM,EAC/B+uB,MAQC6C,GARD,CAAA1C,QAAA,UAAAC,WAAA,yBAAAC,OAAA,yDAAAJ,MAAA,6BAAAsD,OAAA,WAQC,CAAAC,QACoCxC,EAAA7wB,OAAOunC,OAAOzmC,QAAM,OAAAsyB,OAA2CvC,EAAA7wB,OAAOunC,OAAOzmC,QAAM,6BAIxHywB,MAAM,OACLZ,QAAKc,GAAEZ,EAAA02B,oBAAoBhjD,IAAC,IAAA2sB,EAAA,MAAAA,EAAA,KAE7BD,EAAiC,KAA9BG,MAAM,qBAAmB,eAAAsjB,sBAIlChkB,EAA6F,MAA7F+jB,GAAoE,4BAGtExjB,EAeY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAdDZ,EAAAoZ,SAAQxY,GACjBC,YAAY,yJACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,yEAAA6B,OAAA,2BAFSd,EAAAoZ,YAeXhZ,EAgCM,MAhCN4jB,GAgCM,CA/BJ5jB,EAcS,UAbPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,8CAAAsD,OAAA,WAUCzC,QAAKO,iBAAEL,EAAAmZ,QAAM,IACf,QAGD/Y,EAeS,UAdPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,WAUCzC,QAAOE,EAAA2jB,gBAAA,IAAAtjB,EAAA,MAAAA,EAAA,KAERD,EAAyE,KAAtEG,MAAM,kCAAkCvB,MAAA,mCAA8B,QAE3E,SAESgB,EAAAkyB,kBAAAtyB,IAAXC,EAkBM,MAlBNokB,GAkBM,CAjBJ7jB,EAgBS,UAfPpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,8CAAAsD,OAAA,WAUCF,SAAUrC,EAAAoyB,cACVtyB,QAAKO,iBAAEL,EAAAmyB,oBAAkB,mBAE1B/xB,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,kCAA8BwB,EAAA,IAC1DC,EAAGT,EAAAoyB,cAAa,wBAAAlO,8BAOxB1U,EAaExP,EAAA,gBAZCpB,KAAMoB,EAAAmyB,mBACN,eAAcnyB,EAAAoyB,cACf1xB,MAAM,YACN7M,YAAY,gCACXiP,SAAU,4DAMV2M,QAAKpP,iBAAEL,EAAAmyB,oBAAkB,GACzBxiB,UAAS3P,EAAAqpB,cAAA,gCAKJrpB,EAAA4yB,eAAAhzB,IADRC,EA0HM,OAAAvvB,IAAA,EAxHJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,4EAYCQ,QAAKO,mBAAOL,EAAA4yB,eAAa,eAE1BxyB,EAyGM,MAzGN+jB,GAyGM,CAAA9jB,EAAA,MAAAA,EAAA,IAAAa,EAAA,woBAxEJd,EAoBM,MApBNgkB,GAoBM,CAAA/jB,EAAA,MAAAA,EAAA,IAnBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,+BAA4E,mBAEnF,IAAAkP,EACA/N,EAeY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAdDZ,EAAA6yB,SAAQjyB,GACjBC,YAAY,8FACZ7B,MAAA,CAAAO,MAAA,4BAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,iFAAA6B,OAAA,2BAFSd,EAAA6yB,cAiBbzyB,EAiDM,MAjDNokB,GAiDM,CAhDJpkB,EAaS,UAZPpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,WASCzC,QAAKO,iBAAEL,EAAA4yB,eAAa,IACtB,QAGDxyB,EAgBS,UAfPpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,iCAUCF,UAAWrC,EAAA6yB,SAASnzC,QAAUsgB,EAAA8yB,aAC9BhzB,QAAOE,EAAA22B,gBAAA,eAERv2B,EAA2D,KAAxDG,MAAM,oBAAoBvB,MAAA,kCAA8BwB,EAAA,IAC3DC,EAAGT,EAAA8yB,aAAY,0BAAAvO,IAGTvkB,EAAAsyB,kBAAA1yB,IADRC,EAgBS,UAAAvvB,IAAA,EAdP0uB,MAAA,CAAAG,QAAA,YAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,0BAAAsD,OAAA,WASCF,SAAUrC,EAAAwyB,eACV1yB,QAAKO,iBAAEL,EAAAuyB,qBAAmB,mBAE3BnyB,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,kCAA8BwB,EAAA,IAC1DC,EAAGT,EAAAwyB,eAAc,wBAAAlO,KAAAtjB,EAAA,uBAOzBwO,EAaExP,EAAA,gBAZCpB,KAAMoB,EAAAuyB,oBACN,eAAcvyB,EAAAwyB,eACf9xB,MAAM,eACN7M,YAAY,kCACXiP,SAAU,0DAMV2M,QAAKpP,iBAAEL,EAAAuyB,qBAAmB,GAC1B5iB,UAAS3P,EAAA42B,iBAAA,gCAKJ52B,EAAA+yB,mBAAAnzB,IADRC,EAyHM,OAAAvvB,IAAA,EAvHJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,4EAYCQ,QAAKO,mBAAOL,EAAA+yB,mBAAiB,eAE9B3yB,EAwGM,MAxGNqkB,GAwGM,CAAApkB,EAAA,MAAAA,EAAA,IAAAa,EAAA,wlBAxEJd,EAoBM,MApBNskB,GAoBM,CAAArkB,EAAA,MAAAA,EAAA,IAnBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,+BAA4E,gBAEnF,IAAAkP,EACA/N,EAeY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAdDZ,EAAAgzB,mBAAkBpyB,GAC3BC,YAAY,6FACZ7B,MAAA,CAAAO,MAAA,4BAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,+CAFSd,EAAAgzB,wBAiBb5yB,EAiDM,MAjDNukB,GAiDM,CAhDJvkB,EAaS,UAZPpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,WASCzC,QAAKO,iBAAEL,EAAA+yB,mBAAiB,IAC1B,QAGD3yB,EAgBS,UAfPpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,iCAUCF,UAAWrC,EAAAgzB,mBAAmBtzC,QAAUsgB,EAAAizB,mBACxCnzB,QAAOE,EAAA62B,sBAAA,eAERz2B,EAAyE,KAAtEG,MAAM,kCAAkCvB,MAAA,kCAA8BwB,EAAA,IACzEC,EAAGT,EAAAizB,mBAAkB,0BAAArO,IAGf5kB,EAAAyyB,0BAAA7yB,IADRC,EAgBS,UAAAvvB,IAAA,EAdP0uB,MAAA,CAAAG,QAAA,YAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,0BAAAsD,OAAA,WASCF,SAAUrC,EAAA2yB,iBACV7yB,QAAKO,iBAAEL,EAAA0yB,uBAAqB,mBAE7BtyB,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,kCAA8BwB,EAAA,IAC1DC,EAAGT,EAAA2yB,iBAAgB,wBAAA5N,KAAA/jB,EAAA,uBAO3BwO,EAQExP,EAAA,gBAPCpB,KAAMoB,EAAA0yB,sBACN,eAAc1yB,EAAA2yB,iBACfjyB,MAAM,YACN7M,YAAY,kCACXiP,SAAU,yDACV2M,QAAKpP,iBAAEL,EAAA0yB,uBAAqB,GAC5B/iB,UAAS3P,EAAA82B,mBAAA,gCAIZtnB,EAA+ExP,EAAA,gBAA/DtB,IAAI,oBAAqBE,KAAMoB,EAAA6Z,aAAcnZ,MAAM,wJC31BvE,MAAMq2B,EAAexN,IAGfyN,EAAkBt4B,EAAkE,IACpFu4B,EAAgBv4B,EAA0B,IAAI7S,KAG9CqrC,EAAwB,KAC5B,IACEF,EAAgBtpD,MAAQqpD,EAAaI,oBACrC7xB,QAAQC,IAAI,mBAAoByxB,EAAgBtpD,MAAMuC,OACxD,OAASwF,GACP6vB,QAAQjyB,MAAM,YAAaoC,GAC3BuhD,EAAgBtpD,MAAQ,EAC1B,GA0BIo+B,EAAkB12B,MAAO48B,EAAcqb,EAAyB,eACpE/nB,QAAQC,IAAI,aAAcyM,EAAK/hC,QAE/B,IAEE,GAAIg2B,OAAO/yB,QAAU+yB,OAAO/yB,SAAW+yB,OAAQ,CAC7CX,QAAQC,IAAI,wBAEZ,SAD4B6xB,EAAoBplB,GAI9C,OAFA1M,QAAQC,IAAI,gBACZU,OAAOl5B,OAAOkJ,QAAQo3C,EAG1B,CAGA,GAAIn7C,UAAU+/B,WAAahM,OAAOoxB,gBAAiB,CACjD/xB,QAAQC,IAAI,sBACZ,IAIE,aAHMrzB,UAAU+/B,UAAUC,UAAUF,GACpC1M,QAAQC,IAAI,2BACZU,OAAOl5B,OAAOkJ,QAAQo3C,EAExB,OAASiK,GACPhyB,QAAQoC,KAAK,oBAAqB4vB,EAEpC,CACF,CAGAhyB,QAAQC,IAAI,qBAEZ,SADsBgyB,EAAgBvlB,GAIpC,OAFA1M,QAAQC,IAAI,yBACZU,OAAOl5B,OAAOkJ,QAAQo3C,GAKxB/nB,QAAQC,IAAI,wBACZiyB,EAAqBxlB,EACvB,OAASylB,GACPnyB,QAAQjyB,MAAM,QAASokD,GAEvBD,EAAqBxlB,EACvB,GAIIolB,EAAsBhiD,MAAO48B,GAC1B,IAAIz8B,QAAQmI,IACjB,IACE,MAAMg6C,EAAYzxB,OAAO/yB,OAAOg5B,SAC1ByrB,EAAa1xB,OAAO/yB,OAAOg5B,SAAS3B,KAGpCqtB,EAAWF,EAAUlqB,cAAc,YACzCoqB,EAASlqD,MAAQskC,EACjB4lB,EAAS54B,MAAM64B,QAAU,iKAQzBD,EAASE,aAAa,WAAY,IAElCH,EAAWjqB,YAAYkqB,GAGvBA,EAASG,QACTH,EAASI,SACTJ,EAASK,kBAAkB,EAAGjmB,EAAK/hC,QAGnC,MAAMgG,EAAUyhD,EAAUQ,YAAY,QAGtCP,EAAW/pB,YAAYgqB,GAEvBl6C,EAAQzH,EACV,OAASwhD,GACPnyB,QAAQjyB,MAAM,WAAYokD,GAC1B/5C,GAAQ,EACV,IAKE65C,EAAkBniD,MAAO48B,GACtB,IAAIz8B,QAAQmI,IACjB,IAEE,MAAMk6C,EAAW1rB,SAASsB,cAAc,YACxCoqB,EAASlqD,MAAQskC,EACjB4lB,EAAS54B,MAAM7jB,SAAW,QAC1By8C,EAAS54B,MAAM5W,KAAO,UACtBwvC,EAAS54B,MAAMkB,IAAM,UACrB03B,EAAS54B,MAAMwD,QAAU,IACzBo1B,EAAS54B,MAAMm5B,cAAgB,OAC/BP,EAASE,aAAa,WAAY,IAElC5rB,SAAS3B,KAAKmD,YAAYkqB,GAG1BA,EAASI,SACTJ,EAASK,kBAAkB,EAAGjmB,EAAK/hC,QAGnC,MAAMgG,EAAUi2B,SAASgsB,YAAY,QAGrChsB,SAAS3B,KAAKqD,YAAYgqB,GAE1Bl6C,EAAQzH,EACV,OAASwhD,GACPnyB,QAAQjyB,MAAM,oBAAqBokD,GACnC/5C,GAAQ,EACV,IAKE85C,EAAwBxlB,IAC5B1M,QAAQC,IAAI,kBAAmByM,EAAK/hC,QAEpC,IAEE,MAAMynD,EAAYzxB,OAAO/yB,OAAOg5B,SAC1ByrB,EAAa1xB,OAAO/yB,OAAOg5B,SAAS3B,KAGpC6tB,EAAkBV,EAAUW,eAAe,uBAC7CD,GACFT,EAAW/pB,YAAYwqB,GAIzB,MAAME,EAAUZ,EAAUlqB,cAAc,OACxC8qB,EAAQpxC,GAAK,sBACboxC,EAAQt5B,MAAM64B,QAAU,8UAexB,MAAMU,EAAYb,EAAUlqB,cAAc,OAC1C+qB,EAAUv5B,MAAM64B,QAAU,sSAc1B,MAAMt0C,EAASm0C,EAAUlqB,cAAc,OACvCjqB,EAAO+yC,UAAY,k6BAkBnB,MAAMsB,EAAWF,EAAUlqB,cAAc,YACzCoqB,EAASlqD,MAAQskC,EACjB4lB,EAAS54B,MAAM64B,QAAU,2cAoBzB,MAAMW,EAAkBd,EAAUlqB,cAAc,OAChDgrB,EAAgBx5B,MAAM64B,QAAU,6GAQhC,MAAMpD,EAAciD,EAAUlqB,cAAc,UAC5CinB,EAAYgE,YAAc,KAC1BhE,EAAYz1B,MAAM64B,QAAU,kPAW5BpD,EAAYjE,YAAc,KACxBiE,EAAYz1B,MAAMI,WAAa,WAEjCq1B,EAAYhE,WAAa,KACvBgE,EAAYz1B,MAAMI,WAAa,WAIjC,MAAMs5B,EAAahB,EAAUlqB,cAAc,UAC3CkrB,EAAWD,YAAc,SACzBC,EAAW15B,MAAM64B,QAAU,kPAW3Ba,EAAWlI,YAAc,KACvBkI,EAAW15B,MAAMI,WAAa,WAEhCs5B,EAAWjI,WAAa,KACtBiI,EAAW15B,MAAMI,WAAa,WAIhCo5B,EAAgB9qB,YAAYgrB,GAC5BF,EAAgB9qB,YAAY+mB,GAE5B8D,EAAU7qB,YAAYnqB,GACtBg1C,EAAU7qB,YAAYkqB,GACtBW,EAAU7qB,YAAY8qB,GACtBF,EAAQ5qB,YAAY6qB,GAGpBZ,EAAWjqB,YAAY4qB,GAGvB7D,EAAYkE,QAAU,KACpBrzB,QAAQC,IAAI,WACZoyB,EAAW/pB,YAAY0qB,IAGzBI,EAAWC,QAAUvjD,UACnBkwB,QAAQC,IAAI,eACZ,IAEEqyB,EAASG,QACTH,EAASI,SAGO9rB,SAASgsB,YAAY,SAEnCjyB,OAAOl5B,OAAOkJ,QAAQ,WACtB0hD,EAAW/pB,YAAY0qB,IAEvBryB,OAAOl5B,OAAOm7B,QAAQ,eAE1B,OAASuvB,GACPnyB,QAAQjyB,MAAM,UAAWokD,GACzBxxB,OAAOl5B,OAAOm7B,QAAQ,eACxB,GAIFowB,EAAQK,QAAUljD,IACZA,EAAE5E,SAAWynD,IACfhzB,QAAQC,IAAI,UACZoyB,EAAW/pB,YAAY0qB,KAK3B,MAAMM,EAAiBnjD,IACP,WAAVA,EAAEnF,MACJg1B,QAAQC,IAAI,WACZoyB,EAAW/pB,YAAY0qB,GACvBZ,EAAUmB,oBAAoB,UAAWD,KAG7ClB,EAAUoB,iBAAiB,UAAWF,GAGtC3tB,WAAW,KACT3F,QAAQC,IAAI,UACZqyB,EAASG,QACTH,EAASI,UACR,KAGH/xB,OAAOl5B,OAAO8pC,KAAK,qBACrB,OAAS4gB,GACPnyB,QAAQjyB,MAAM,eAAgBokD,GAC9BxxB,OAAOl5B,OAAOsG,MAAM,qBACtB,GAgJI0lD,EAAqB3jD,MAAO4jD,GACzB,IAAIzjD,QAAuBmI,IAChC,MAAMu7C,EAASC,EAAE,sbAeTF,EACCjlD,IACC9G,GAAQ,2IAEsCA,iDAC5CA,uCAIH4P,KAAK,ooBAwBRy7C,EAAUY,EAAE,2NAYlBA,EAAE,QAAQC,OAAOb,GAASa,OAAOF,GAEjCC,EAAE,oBAAoBE,GAAG,QAAS,KAChCd,EAAQrsC,SACRgtC,EAAOhtC,SACPvO,EAAQ,QAGVw7C,EAAE,qBAAqBE,GAAG,QAAS,KACjC,MAAMC,EAAWH,EAAE,mCAAmCjgD,MACtDq/C,EAAQrsC,SACRgtC,EAAOhtC,SACPvO,EAAQ27C,GAAY,QAGtBH,EAAE,iCAAiCpoD,KAAK,WAAW,KA0RvDomD,qGAx1BwBlzC,IACtB,MAAMs1C,EAAUrC,EAAcvpD,MAAM6C,IAAIyT,KAAU,EAClDizC,EAAcvpD,MAAM+C,IAAIuT,GAAQs1C,eAGdt1C,GACXizC,EAAcvpD,MAAM6C,IAAIyT,KAAU,oBAIjB5O,UACxBkwB,QAAQC,IAAI,aACZ,UACQ2xB,IACNjxB,OAAOl5B,OAAOkJ,QAAQ,QACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,WAAcA,EAAgBC,QACpD,gGAmVmBqI,IACnBmwB,EAAgBnwB,EAAS,4BAIJqI,IACrB,GAAIwkB,QAAQ,eACV,IACE,MAAMymB,EAAUjT,IAChB,IAAKiT,EAEH,YADAhpB,OAAOl5B,OAAOsG,MAAM,cAItB2jD,EAAgBtpD,MAAM+9C,OAAOznC,EAAO,GAGpC,MACM8iB,EAAa,GADFC,qCACiCkoB,IAClD7nB,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAUslD,EAAgBtpD,QAChE43B,QAAQC,IAAI,4BAEZU,OAAOl5B,OAAOkJ,QAAQ,QACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,SACtB,0BAK2B+B,UAC7B,IAEE,IAAIg3B,EAAgB,OACpB,IACE,MAAMxH,EAAmBwB,YAAY,WACjCxB,GAAoBA,EAAiB33B,OACvCm/B,EAAgBxH,EAAiB33B,KAEjCm/B,EAAgBA,EAAcr5B,QAAQ,gBAAiB,KAAK2M,OAEhE,OAAS65C,GACPj0B,QAAQoC,KAAK,YAAa6xB,EAC5B,CAGA,MACMC,EAAgB,MAAMptB,MADtB,IAAczjB,MAAOu3B,cAAchwC,MAAM,EAAG,MAGlDo1B,QAAQC,IAAI,WAAYi0B,GAGxB,GAD2BC,oBACJrnD,SAASonD,GAE9B,YADAvzB,OAAOl5B,OAAOm7B,QAAQ,QAAQsxB,gBAI1BE,gBAAgBF,EAAe,IAErC,UACQG,oBAAoB,UAAWH,GACrCvzB,OAAOl5B,OAAOkJ,QAAQ,aAAaujD,cACrC,OAASI,GACPt0B,QAAQoC,KAAK,WAAYkyB,GACzB3zB,OAAOl5B,OAAOkJ,QAAQ,aAAaujD,kBACrC,CACF,OAASnmD,GACPiyB,QAAQjyB,MAAM,aAAcA,GAC5B4yB,OAAOl5B,OAAOsG,MAAM,cAAiBA,EAAgBC,QACvD,mBAIsB8B,MAAOuG,EAAiBk+C,KAC9C,IACE,MAAMb,EAAiBS,oBACvB,GAA8B,IAA1BT,EAAe/oD,OAEjB,YADAg2B,OAAOl5B,OAAOm7B,QAAQ,sBAIxB,MAAM4xB,EACsB,IAA1Bd,EAAe/oD,OAAe+oD,EAAe,SAAWD,EAAmBC,GAC7E,IAAKc,EACH,OAGF,MACMC,EAAW,CACf9sD,KAFgB,MAAM4sD,EAAe,UAASlxC,MAAOqxC,uBAGrDC,SAAS,EACTC,SAAU,CACR50C,KAAM,WACNb,KAAM,GACN01C,eAAgB,CAAEC,MAAO,UAAoB31C,KAAM,IACnD41C,WAAY,kBAEdl/C,SAAU,CACRmK,KAAM,8BACNskB,KAAM,SACNyK,MAAO,GAET14B,UACA83B,QAAS,qBAAqBujB,EAAgBtpD,MAAMmsD,IAAe1K,UAAY,SAAS6H,EAAgBtpD,MAAMmsD,IAAezK,QAAU,MACvIkL,gBAAiB,EACjBC,gBAAgB,EAChBC,eAAe,EACfC,gBAAgB,EAChBC,gBAAiB,MACjBC,qBAAsB,MACtBC,qBAAsB,EACtBv4B,UAAU,EACV0R,MAAO,EACPO,MAAO,GACPumB,SAAU,EACVC,cAAe,GACfC,mBAAmB,EACnBC,aAAc,EACdC,kBAAkB,EAClBjnB,SAAS,EACTknB,mBAAmB,EACnBC,QAAQ,EACRC,SAAU,EACVC,kBAAkB,EAClBC,kBAAkB,EAClBC,0BAA0B,EAC1BC,0BAA0B,EAC1BloB,IAAK3qB,KAAK+c,aAGN+1B,uBAAuB3B,EAAmB,CAACC,IACjD9zB,OAAOl5B,OAAOkJ,QAAQ,cAAc6jD,IACtC,OAASzmD,GACPiyB,QAAQjyB,MAAM,YAAaA,GAC3B4yB,OAAOl5B,OAAOsG,MAAM,aAAgBA,EAAgBC,QACtD,uCAsFqB,KACrB,IAEE,MAAMokD,EAAYzxB,OAAO/yB,OAAOg5B,SAC1ByrB,EAAa1xB,OAAO/yB,OAAOg5B,SAAS3B,KAGpC6tB,EAAkBV,EAAUW,eAAe,uBAC7CD,GACFT,EAAW/pB,YAAYwqB,GAIzB,MAAME,EAAUZ,EAAUlqB,cAAc,OACxC8qB,EAAQpxC,GAAK,sBACboxC,EAAQt5B,MAAM64B,QAAU,8UAexB,MAAMU,EAAYb,EAAUlqB,cAAc,OAC1C+qB,EAAUv5B,MAAM64B,QAAU,sSAc1B,MAAMt0C,EAASm0C,EAAUlqB,cAAc,OACvCjqB,EAAO+yC,UAAY,kpBAkBnB,MAAMkC,EAAkBd,EAAUlqB,cAAc,OAChDgrB,EAAgBx5B,MAAM64B,QAAU,oHAQhB,CACd,CAAE3wC,GAAI,eAAgB8qB,KAAM,YAAa/S,MAAO,WAChD,CAAE/X,GAAI,WAAY8qB,KAAM,UAAW/S,MAAO,WAC1C,CAAE/X,GAAI,aAAc8qB,KAAM,UAAW/S,MAAO,WAC5C,CAAE/X,GAAI,kBAAmB8qB,KAAM,UAAW/S,MAAO,WACjD,CAAE/X,GAAI,aAAc8qB,KAAM,UAAW/S,MAAO,WAC5C,CAAE/X,GAAI,eAAgB8qB,KAAM,YAAa/S,MAAO,YAG1CqT,QAAQopB,IACd,MAAMC,EAAMjE,EAAUlqB,cAAc,UACpCmuB,EAAIz0C,GAAKw0C,EAAOx0C,GAChBy0C,EAAIlD,YAAciD,EAAO1pB,KACzB2pB,EAAI38B,MAAM64B,QAAU,yBACJ6D,EAAOz8B,8OAUvB08B,EAAInL,YAAc,KAChBmL,EAAI38B,MAAMwD,QAAU,OAEtBm5B,EAAIlL,WAAa,KACfkL,EAAI38B,MAAMwD,QAAU,KAEtBg2B,EAAgB9qB,YAAYiuB,KAI9B,MAAMC,EAAalE,EAAUlqB,cAAc,OAC3CouB,EAAW10C,GAAK,eAChB00C,EAAW58B,MAAM64B,QAAU,2UAa3B+D,EAAWnD,YAAc,kBAGzB,MAAMhE,EAAciD,EAAUlqB,cAAc,UAC5CinB,EAAYgE,YAAc,KAC1BhE,EAAYz1B,MAAM64B,QAAU,6QAc5BU,EAAU7qB,YAAYnqB,GACtBg1C,EAAU7qB,YAAY8qB,GACtBD,EAAU7qB,YAAYkuB,GACtBrD,EAAU7qB,YAAY+mB,GAEtB6D,EAAQ5qB,YAAY6qB,GACpBZ,EAAWjqB,YAAY4qB,GAGvB,MAAM/yB,EAAOjyB,IACX,MAAMyW,EAAS2tC,EAAUW,eAAe,gBACpCtuC,IACFA,EAAO0uC,aAAenlD,EAAU,KAChCyW,EAAOyuB,UAAYzuB,EAAO0uB,eAK9Bgc,EAAYkE,QAAU,KACpBhB,EAAW/pB,YAAY0qB,IAIzBZ,EAAUW,eAAe,iBAAiBS,iBAAiB,QAAS,KAClEvzB,EAAI,sBACJ,IACOU,OAAe41B,yBACjB51B,OAAe41B,0BAChBt2B,EAAI,uBAEJA,EAAI,YAER,OAASlyB,GACPkyB,EAAI,WAAclyB,EAAgBC,QACpC,IAIFokD,EAAUW,eAAe,aAAaS,iBAAiB,QAAS,KAC9DvzB,EAAI,gBACJ,IACOU,OAAe61B,qBACjB71B,OAAe61B,sBAChBv2B,EAAI,uBAEJA,EAAI,YAER,OAASlyB,GACPkyB,EAAI,WAAclyB,EAAgBC,QACpC,IAIFokD,EAAUW,eAAe,eAAeS,iBAAiB,QAAS,KAChEvzB,EAAI,gBACJ,IACOU,OAAe81B,mBACjB91B,OAAe81B,oBAChBx2B,EAAI,yBAEJA,EAAI,cAER,OAASlyB,GACPkyB,EAAI,aAAgBlyB,EAAgBC,QACtC,IAIFokD,EAAUW,eAAe,oBAAoBS,iBAAiB,QAAS,KACrEvzB,EAAI,gBACJ,IACOU,OAAe+1B,sBACjB/1B,OAAe+1B,uBAChBz2B,EAAI,yBAEJA,EAAI,cAER,OAASlyB,GACPkyB,EAAI,aAAgBlyB,EAAgBC,QACtC,IAIFokD,EAAUW,eAAe,eAAeS,iBAAiB,QAAS,KAChEvzB,EAAI,gBACJ,IACOU,OAAeg2B,wBACjBh2B,OAAeg2B,yBAChB12B,EAAI,yBAEJA,EAAI,cAER,OAASlyB,GACPkyB,EAAI,aAAgBlyB,EAAgBC,QACtC,IAIFokD,EAAUW,eAAe,iBAAiBS,iBAAiB,QAAS,KAClEvzB,EAAI,kBACJ,IACOU,OAAe2lB,gBACjB3lB,OAAe2lB,iBAChBrmB,EAAI,uBAEJA,EAAI,YAER,OAASlyB,GACPkyB,EAAI,WAAclyB,EAAgBC,QACpC,IAIFglD,EAAQK,QAAUljD,IACZA,EAAE5E,SAAWynD,GACfX,EAAW/pB,YAAY0qB,IAK3B,MAAMM,EAAiBnjD,IACP,WAAVA,EAAEnF,MACJqnD,EAAW/pB,YAAY0qB,GACvBZ,EAAUmB,oBAAoB,UAAWD,KAG7ClB,EAAUoB,iBAAiB,UAAWF,GAEtC3yB,OAAOl5B,QAAQ8pC,KAAK,UACtB,OAAS4gB,GACPnyB,QAAQjyB,MAAM,YAAaokD,GAC3BxxB,OAAOl5B,QAAQsG,MAAM,oBACvB,wFAllCKktB,MAAM,cAAcvB,MAAA,CAAAG,QAAA,kBAAAC,WAAA,2BAErBmB,MAAM,iBACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,uFAsBKoB,MAAM,iBAAiBvB,MAAA,CAAAM,QAAA,8BAAAI,IAAA,mBAGxBa,MAAM,cACNvB,MAAA,CAAAI,WAAA,UAAAH,MAAA,QAAAE,QAAA,gEAiEJoB,MAAM,eACNvB,MAAA,CAAAM,QAAA,iCAAAI,IAAA,gDA6BSa,MAAM,eAAevB,MAAA,CAAAM,QAAA,8BAAAI,IAAA,OAAA4C,KAAA,UAClB/B,MAAM,iBAAiBvB,MAAA,CAAAC,MAAA,qCACvBsB,MAAM,gBAAgBvB,MAAA,CAAAC,MAAA,gCAIxBsB,MAAM,cAAcvB,MAAA,CAAAC,MAAA,sCAI1BsB,MAAM,kBACNvB,MAAA,CAAAG,QAAA,OAAAC,WAAA,8CAGEmB,MAAM,kBACNvB,MAAA,CAAAM,QAAA,OAAAI,IAAA,2IAmEAa,MAAM,eACNvB,MAAA,mFAAAC,MAAA,iFAAAsD,OAAA,mBAgBIhC,MAAM,cAAcvB,MAAA,uBAAAG,QAAA,YAAAF,MAAA,wDA/NlC,OAAAW,IAAAC,EAoOM,MApONS,GAoOM,CAnOJF,EAyFM,MAzFNO,GAyFM,CAAAN,EAAA,KAAAA,EAAA,GA9EJD,EAYK,MAXHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,0DAAAK,QAAA,8BAAAI,IAAA,QASD,eAED,IACAU,EAgEM,MAhENW,GAgEM,CA9DIf,EAAAg3B,gBAAgB/mD,OAAM,GAAA2vB,IAD9BC,EAKC,OALDoB,GAKCR,EADKT,EAAAg3B,gBAAgB/mD,QAAS,OAAI,IAAA+wB,EAAA,OAEnCZ,EAkBS,UAjBPG,MAAM,6BACNvB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,UAAAsD,OAAA,6BAAAT,WAAA,WAAAxC,QAAA,8BAAAI,IAAA,OAaCI,QAAOE,EAAAk8B,mBAAA,IAAA77B,EAAA,KAAAA,EAAA,IAERD,EAAmC,KAAhCG,MAAM,uBAAqB,SAAAC,EAAK,UACrC,OACAJ,EAkBS,UAjBPG,MAAM,sCACNvB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,QAAAsD,OAAA,6BAAAT,WAAA,WAAAxC,QAAA,8BAAAI,IAAA,OAaCI,QAAOE,EAAAm8B,wBAAA,IAAA97B,EAAA,KAAAA,EAAA,IAERD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,aAClC,OACAJ,EAkBS,UAjBPG,MAAM,2BACNvB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,OAAAsD,OAAA,6BAAAT,WAAA,WAAAxC,QAAA,8BAAAI,IAAA,OAaCI,QAAOE,EAAAo8B,gBAAA,IAAA/7B,EAAA,KAAAA,EAAA,IAERD,EAA+B,KAA5BG,MAAM,mBAAiB,SAAAC,EAAK,UACjC,WAKIR,EAAAg3B,iBAAmBh3B,EAAAg3B,gBAAgB/mD,OAAM,GAAA2vB,IADjDC,EAkIM,MAlINuB,GAkIM,EAAAxB,GAAA,GA7HJC,EA4HMkD,EAAA,KAAAC,EA3HoBhD,EAAAg3B,gBAAe,CAA/B5yC,EAAMJ,SADhB6b,EA4HM,OA1HHvvB,IAAK0T,EACNuc,MAAM,eACNvB,MAAA,CAAAI,WAAA,UAAAC,OAAA,uCAAAF,QAAA,OAAA2C,WAAA,mBAQA1B,EAsBM,OArBJG,MAAM,iBACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,UAAAE,QAAA,gEAAAiD,OAAA,+BAAAT,WAAA,yCAWChC,QAAKc,GAAEZ,EAAA8W,eAAe9yB,IAAK,CAE5Boc,EAKM,MALNkB,GAKM,CAJJlB,EAA8F,OAA9FsB,GAAuE,IAACjB,EAAGzc,EAAK,MAChFoc,EAEC,OAFDwB,GACG,MAAGnB,EAAGrc,EAAK+qC,UAAW,MAAG1uB,EAAGrc,EAAKgrC,QAAM,KAG5ChvB,EAAyG,OAAzG2B,GAAyGtB,EAAvCT,EAAAq8B,WAAWr4C,GAAK,eAAAqd,IAG5ErB,EAAAq8B,WAAWr4C,IAAK4b,IADxBC,EAwFM,MAxFNmC,GAwFM,CAnFJ5B,EAmEM,MAnEN8B,GAmEM,CA/DJ9B,EAoBS,UAnBPG,MAAM,cACNvB,MAAA,CAAAsD,KAAA,IAAAnD,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,UAAAsD,OAAA,6BAAAT,WAAA,kBAAAxC,QAAA,yDAAAI,IAAA,OAeCI,QAAKc,GAAEZ,EAAAs8B,YAAYl4C,EAAKzI,UAAO,IAAA0kB,EAAA,KAAAA,EAAA,IAEhCD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,QAClC,QAAA2B,IACA/B,EAoBS,UAnBPG,MAAM,+BACNvB,MAAA,CAAAsD,KAAA,IAAAnD,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,QAAAsD,OAAA,6BAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,OAeCI,QAAKc,GAAEZ,EAAAu8B,gBAAgBn4C,EAAKzI,QAASqI,IAAK,IAAAqc,EAAA,KAAAA,EAAA,IAE3CD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,YAClC,QAAAiC,IACArC,EAoBS,UAnBPG,MAAM,4BACNvB,MAAA,CAAAsD,KAAA,IAAAnD,QAAA,WAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,QAAAsD,OAAA,6BAAAT,WAAA,WAAAxC,QAAA,yDAAAI,IAAA,OAeCI,QAAKc,GAAEZ,EAAAw8B,cAAcx4C,IAAK,IAAAqc,EAAA,KAAAA,EAAA,IAE3BD,EAAiC,KAA9BG,MAAM,qBAAmB,SAAAC,EAAK,QACnC,QAAAkC,MAEFtC,EAcM,MAdNsO,GAcMjO,EADDrc,EAAKzI,SAAO,MAAAqlB,EAAA,qBAKvBpB,IAAAC,EAIM,MAJN8O,GAIM,IAAAtO,EAAA,KAAAA,EAAA,IAHJD,EAA4F,KAAzFG,MAAM,oBAAoBvB,MAAA,2CAAAwD,QAAA,iBAC7BpC,EAAsD,KAAnDpB,MAAA,CAAAE,OAAA,8BAAwC,WAAO,GAClDkB,EAAmE,SAA5DpB,MAAA,oBAAAC,MAAA,SAAqC,mBAAe,0HCdjE,MAAMiwB,EAAgBxwB,EAAsF,IACtG+9B,EAAqB/9B,EAA0B,IAAI7S,KAGnD6wC,EAAsB,KAC1B,IACE,MAAMzN,EAAUjT,IAChB,IAAKiT,EAGH,OAFA3pB,QAAQoC,KAAK,wBACbwnB,EAAcxhD,MAAQ,IAKxB,MACMo5B,EAAa,GADFC,mCAC+BkoB,IAC1C9nB,EAAYC,aAAaC,QAAQP,GAEvCxB,QAAQC,IAAI,6BAA8BuB,GAGxCooB,EAAcxhD,MADZy5B,EACoB11B,KAAK2L,MAAM+pB,GAEX,GAGxB7B,QAAQC,IAAI,mBAAoB2pB,EAAcxhD,MAAMuC,OACtD,OAASwF,GACP6vB,QAAQjyB,MAAM,YAAaoC,GAC3By5C,EAAcxhD,MAAQ,EACxB,GAcIo+B,EAAkB12B,MAAO48B,EAAcqb,EAAyB,eACpE/nB,QAAQC,IAAI,aAAcyM,EAAK/hC,QAE/B,IAEE,GAAIg2B,OAAO/yB,QAAU+yB,OAAO/yB,SAAW+yB,OAAQ,CAC7CX,QAAQC,IAAI,wBAEZ,SAD4B6xB,EAAoBplB,GAI9C,OAFA1M,QAAQC,IAAI,gBACZU,OAAOl5B,OAAOkJ,QAAQo3C,EAG1B,CAGA,GAAIn7C,UAAU+/B,WAAahM,OAAOoxB,gBAAiB,CACjD/xB,QAAQC,IAAI,sBACZ,IAIE,aAHMrzB,UAAU+/B,UAAUC,UAAUF,GACpC1M,QAAQC,IAAI,2BACZU,OAAOl5B,OAAOkJ,QAAQo3C,EAExB,OAASiK,GACPhyB,QAAQoC,KAAK,oBAAqB4vB,EAEpC,CACF,CAGAhyB,QAAQC,IAAI,qBAEZ,SADsBgyB,EAAgBvlB,GAIpC,OAFA1M,QAAQC,IAAI,yBACZU,OAAOl5B,OAAOkJ,QAAQo3C,GAKxB/nB,QAAQC,IAAI,wBACZiyB,EAAqBxlB,EACvB,OAASylB,GACPnyB,QAAQjyB,MAAM,QAASokD,GAEvBD,EAAqBxlB,EACvB,GAIIolB,EAAsBhiD,MAAO48B,GAC1B,IAAIz8B,QAAQmI,IACjB,IACE,MAAMg6C,EAAYzxB,OAAO/yB,OAAOg5B,SAC1ByrB,EAAa1xB,OAAO/yB,OAAOg5B,SAAS3B,KAGpCqtB,EAAWF,EAAUlqB,cAAc,YACzCoqB,EAASlqD,MAAQskC,EACjB4lB,EAAS54B,MAAM64B,QAAU,iKAQzBD,EAASE,aAAa,WAAY,IAElCH,EAAWjqB,YAAYkqB,GAGvBA,EAASG,QACTH,EAASI,SACTJ,EAASK,kBAAkB,EAAGjmB,EAAK/hC,QAGnC,MAAMgG,EAAUyhD,EAAUQ,YAAY,QAGtCP,EAAW/pB,YAAYgqB,GAEvBl6C,EAAQzH,EACV,OAASwhD,GACPnyB,QAAQjyB,MAAM,WAAYokD,GAC1B/5C,GAAQ,EACV,IAKE65C,EAAkBniD,MAAO48B,GACtB,IAAIz8B,QAAQmI,IACjB,IAEE,MAAMk6C,EAAW1rB,SAASsB,cAAc,YACxCoqB,EAASlqD,MAAQskC,EACjB4lB,EAAS54B,MAAM7jB,SAAW,QAC1By8C,EAAS54B,MAAM5W,KAAO,UACtBwvC,EAAS54B,MAAMkB,IAAM,UACrB03B,EAAS54B,MAAMwD,QAAU,IACzBo1B,EAAS54B,MAAMm5B,cAAgB,OAC/BP,EAASE,aAAa,WAAY,IAElC5rB,SAAS3B,KAAKmD,YAAYkqB,GAG1BA,EAASI,SACTJ,EAASK,kBAAkB,EAAGjmB,EAAK/hC,QAGnC,MAAMgG,EAAUi2B,SAASgsB,YAAY,QAGrChsB,SAAS3B,KAAKqD,YAAYgqB,GAE1Bl6C,EAAQzH,EACV,OAASwhD,GACPnyB,QAAQjyB,MAAM,oBAAqBokD,GACnC/5C,GAAQ,EACV,IAKE85C,EAAwBxlB,IAC5B1M,QAAQC,IAAI,kBAAmByM,EAAK/hC,QAEpC,IAEE,MAAMynD,EAAYzxB,OAAO/yB,OAAOg5B,SAC1ByrB,EAAa1xB,OAAO/yB,OAAOg5B,SAAS3B,KAGpC6tB,EAAkBV,EAAUW,eAAe,uBAC7CD,GACFT,EAAW/pB,YAAYwqB,GAIzB,MAAME,EAAUZ,EAAUlqB,cAAc,OACxC8qB,EAAQpxC,GAAK,sBACboxC,EAAQt5B,MAAM64B,QAAU,8UAexB,MAAMU,EAAYb,EAAUlqB,cAAc,OAC1C+qB,EAAUv5B,MAAM64B,QAAU,sSAc1B,MAAMt0C,EAASm0C,EAAUlqB,cAAc,OACvCjqB,EAAO+yC,UAAY,k6BAkBnB,MAAMsB,EAAWF,EAAUlqB,cAAc,YACzCoqB,EAASlqD,MAAQskC,EACjB4lB,EAAS54B,MAAM64B,QAAU,2cAoBzB,MAAMW,EAAkBd,EAAUlqB,cAAc,OAChDgrB,EAAgBx5B,MAAM64B,QAAU,6GAQhC,MAAMpD,EAAciD,EAAUlqB,cAAc,UAC5CinB,EAAYgE,YAAc,KAC1BhE,EAAYz1B,MAAM64B,QAAU,kPAW5BpD,EAAYjE,YAAc,KACxBiE,EAAYz1B,MAAMI,WAAa,WAEjCq1B,EAAYhE,WAAa,KACvBgE,EAAYz1B,MAAMI,WAAa,WAIjC,MAAMs5B,EAAahB,EAAUlqB,cAAc,UAC3CkrB,EAAWD,YAAc,SACzBC,EAAW15B,MAAM64B,QAAU,kPAW3Ba,EAAWlI,YAAc,KACvBkI,EAAW15B,MAAMI,WAAa,WAEhCs5B,EAAWjI,WAAa,KACtBiI,EAAW15B,MAAMI,WAAa,WAIhCo5B,EAAgB9qB,YAAYgrB,GAC5BF,EAAgB9qB,YAAY+mB,GAE5B8D,EAAU7qB,YAAYnqB,GACtBg1C,EAAU7qB,YAAYkqB,GACtBW,EAAU7qB,YAAY8qB,GACtBF,EAAQ5qB,YAAY6qB,GAGpBZ,EAAWjqB,YAAY4qB,GAGvB7D,EAAYkE,QAAU,KACpBrzB,QAAQC,IAAI,WACZoyB,EAAW/pB,YAAY0qB,IAGzBI,EAAWC,QAAUvjD,UACnBkwB,QAAQC,IAAI,eACZ,IAEEqyB,EAASG,QACTH,EAASI,SAGO9rB,SAASgsB,YAAY,SAEnCjyB,OAAOl5B,OAAOkJ,QAAQ,WACtB0hD,EAAW/pB,YAAY0qB,IAEvBryB,OAAOl5B,OAAOm7B,QAAQ,eAE1B,OAASuvB,GACPnyB,QAAQjyB,MAAM,UAAWokD,GACzBxxB,OAAOl5B,OAAOm7B,QAAQ,eACxB,GAIFowB,EAAQK,QAAUljD,IACZA,EAAE5E,SAAWynD,IACfhzB,QAAQC,IAAI,UACZoyB,EAAW/pB,YAAY0qB,KAK3B,MAAMM,EAAiBnjD,IACP,WAAVA,EAAEnF,MACJg1B,QAAQC,IAAI,WACZoyB,EAAW/pB,YAAY0qB,GACvBZ,EAAUmB,oBAAoB,UAAWD,KAG7ClB,EAAUoB,iBAAiB,UAAWF,GAGtC3tB,WAAW,KACT3F,QAAQC,IAAI,UACZqyB,EAASG,QACTH,EAASI,UACR,KAGH/xB,OAAOl5B,OAAO8pC,KAAK,qBACrB,OAAS4gB,GACPnyB,QAAQjyB,MAAM,eAAgBokD,GAC9BxxB,OAAOl5B,OAAOsG,MAAM,qBACtB,GA+BFqpD,4FApX6B14C,IAC3B,MAAMs1C,EAAUmD,EAAmB/uD,MAAM6C,IAAIyT,KAAU,EACvDy4C,EAAmB/uD,MAAM+C,IAAIuT,GAAQs1C,oBAGdt1C,GAChBy4C,EAAmB/uD,MAAM6C,IAAIyT,KAAU,6FAmV7B24C,IACjB,IAEE,MAAMC,EAAM,CAACD,EAAUtyB,QAAQxtB,KAAK,SAAU8/C,EAAU7qD,KAAKiC,IAAI8oD,GAAOA,EAAIhgD,KAAK,QAAQA,KAAK,MAC9FivB,EAAgB8wB,EAAK,YACvB,OAASvpD,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,aACtB,eAImB2Q,IACnB,GAAIwkB,QAAQ,eAAgB,CAC1B0mB,EAAcxhD,MAAM+9C,OAAOznC,EAAO,GAClC,MAAMirC,EAAUjT,IAChB,GAAIiT,EAAS,CAEX,MACMnoB,EAAa,GADFC,mCAC+BkoB,IAChD7nB,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAUw9C,EAAcxhD,QAC9Du4B,OAAOl5B,OAAOkJ,QAAQ,QACxB,CACF,wFAtmBKsqB,MAAM,YAAYvB,MAAA,CAAAG,QAAA,kBAAAC,WAAA,2BAEnBmB,MAAM,iBACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,6FAwBEoB,MAAM,cACNvB,MAAA,CAAAI,WAAA,UAAAH,MAAA,QAAAE,QAAA,gEAQFoB,MAAM,eACNvB,MAAA,CAAAM,QAAA,iCAAAI,IAAA,gDA6BSa,MAAM,eAAevB,MAAA,CAAAM,QAAA,8BAAAI,IAAA,OAAA4C,KAAA,UAClB/B,MAAM,iBAAiBvB,MAAA,CAAAC,MAAA,qCACvBsB,MAAM,gBAAgBvB,MAAA,CAAAC,MAAA,gCAIxBsB,MAAM,cAAcvB,MAAA,CAAAC,MAAA,sCAM1BsB,MAAM,kBACNvB,MAAA,CAAAG,QAAA,OAAAC,WAAA,8CAGEmB,MAAM,kBACNvB,MAAA,CAAAM,QAAA,OAAAI,IAAA,gJAgFGa,MAAM,gBAAgBvB,MAAA,2CAAAK,OAAA,0BAClBL,MAAA,CAAAO,MAAA,oCAAAH,WAAA,gBACEJ,MAAA,CAAAI,WAAA,sBAkCLmB,MAAM,cAAcvB,MAAA,uBAAAG,QAAA,YAAAF,MAAA,wDAvMlC,OAAAW,IAAAC,EA4MM,MA5MNS,GA4MM,CA3MJF,EA8BM,MA9BNO,GA8BM,CAAAN,EAAA,KAAAA,EAAA,GAnBJD,EAYK,MAXHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,0DAAAK,QAAA,8BAAAI,IAAA,QASD,aAED,IAEQM,EAAAkvB,cAAcj/C,OAAM,GAAA2vB,IAD5BC,EAKC,OALDkB,GAKCN,EADKT,EAAAkvB,cAAcj/C,QAAS,OAAI,IAAA+wB,EAAA,SAM3BhB,EAAAkvB,eAAiBlvB,EAAAkvB,cAAcj/C,OAAM,GAAA2vB,IAD7CC,EAoKM,MApKNoB,GAoKM,EAAArB,GAAA,GA/JJC,EA8JMkD,EAAA,KAAAC,EA7JoBhD,EAAAkvB,cAAa,CAA7B9qC,EAAMJ,SADhB6b,EA8JM,OA5JHvvB,IAAK0T,EACNuc,MAAM,eACNvB,MAAA,CAAAI,WAAA,UAAAC,OAAA,uCAAAF,QAAA,OAAA2C,WAAA,mBAQA1B,EAwBM,OAvBJG,MAAM,iBACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,UAAAE,QAAA,gEAAAiD,OAAA,+BAAAT,WAAA,yCAWChC,QAAKc,GAAEZ,EAAA88B,oBAAoB94C,IAAK,CAEjCoc,EAKM,MALNiB,GAKM,CAJJjB,EAA8F,OAA9FkB,GAAuE,IAACb,EAAGzc,EAAK,MAChFoc,EAEC,OAFDsB,GACG,MAAGjB,EAAGrc,EAAK+qC,UAAW,MAAG1uB,EAAGrc,EAAKgrC,QAAM,KAG5ChvB,EAES,OAFTwB,GAESnB,EADPT,EAAA+8B,gBAAgB/4C,GAAK,eAAAod,IAIjBpB,EAAA+8B,gBAAgB/4C,IAAK4b,IAD7BC,EAwHM,MAxHNkC,GAwHM,CAnHJ3B,EAiFM,MAjFN4B,GAiFM,CAtEJ5B,EAkCS,UAjCPG,MAAM,cACNvB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,QAAAsD,OAAA,iDAAAT,WAAA,gBAAAxC,QAAA,8BAAAI,IAAA,uDAAAvkB,SAAA,WAAAskB,SAAA,UAiBCK,QAAKc,GAAEZ,EAAAg9B,UAAU54C,IAAI,IAAAic,EAAA,KAAAA,EAAA,IAEtBD,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAAwD,KAArDG,MAAM,mBAAmBvB,MAAA,iCAA4B,QAC1D,QAAAkD,IACA9B,EAkCS,UAjCPG,MAAM,gBACNvB,MAAA,CAAAG,QAAA,WAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,QAAAsD,OAAA,iDAAAT,WAAA,gBAAAxC,QAAA,8BAAAI,IAAA,yDAAAvkB,SAAA,WAAAskB,SAAA,UAiBCK,QAAKc,GAAEZ,EAAAi9B,YAAYj5C,IAAK,IAAAqc,EAAA,KAAAA,EAAA,IAEzBD,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAAyD,KAAtDG,MAAM,oBAAoBvB,MAAA,iCAA4B,QAC3D,QAAAmD,MAEF/B,EAgCM,MAhCNqC,GAgCM,CA/BJrC,EA8BQ,QA9BRsC,GA8BQ,CA7BNtC,EAiBQ,QAjBRsO,GAiBQ,CAhBNtO,EAeK,YAAAR,GAAA,GAdHC,EAaKkD,EAAA,KAAAC,EAZqB5e,EAAKimB,QAAO,CAA5B9mB,EAAQqlB,SADlB/I,EAaK,MAXFvvB,IAAKs4B,EACN5J,MAAA,CAAAG,QAAA,qDAAAF,MAAA,gFAAAwB,EASGld,GAAM,eAIf6c,EAUQ,eAAAR,GAAA,GATNC,EAQKkD,EAAA,KAAAC,EARuB5e,EAAKtS,KAAI,CAAzB+qD,EAAKK,SAAjBr9B,EAQK,MARmCvvB,IAAK4sD,EAAQl+B,MAAA,yCACnDY,GAAA,GAAAC,EAMKkD,EAAA,KAAAC,EALuB65B,EAAG,CAArBM,EAAMC,SADhBv9B,EAMK,MAJFvvB,IAAK8sD,EACNp+B,MAAA,CAAAG,QAAA,YAAAF,MAAA,+CAAAwB,EAEG08B,GAAI,qDASvBv9B,IAAAC,EAIM,MAJN8O,GAIM,IAAAtO,EAAA,KAAAA,EAAA,IAHJD,EAA4F,KAAzFG,MAAM,oBAAoBvB,MAAA,2CAAAwD,QAAA,iBAC7BpC,EAAsD,KAAnDpB,MAAA,CAAAE,OAAA,8BAAwC,WAAO,GAClDkB,EAAmE,SAA5DpB,MAAA,oBAAAC,MAAA,SAAqC,mBAAe,qGC3MjEo+B,GAAiBpvD,aCCVsyB,MAAM,YAAYvB,MAAA,CAAAG,QAAA,kBAAAC,WAAA,uBAEhBuB,GAAA,CAAAJ,MAAM,0BAiDgCA,MAAM,oBAoCxCA,MAAM,aAAavB,MAAA,CAAAE,OAAA,eAuBnBqB,MAAM,aAAavB,MAAA,CAAAE,OAAA,eACfF,MAAA,CAAAM,QAAA,8BAAAI,IAAA,MAAAT,MAAA,0BAAAsD,OAAA,sBASPhC,MAAM,yBACNvB,MAAA,CAAAE,OAAA,eAGEqB,MAAM,eACNvB,MAAA,CAAAO,MAAA,OAAAC,OAAA,MAAAJ,WAAA,gCAAAK,SAAA,SAAAtkB,SAAA,iBAqBG6jB,MAAA,0CAAAC,MAAA,uDAKFsB,MAAM,eAAevB,MAAA,CAAAM,QAAA,OAAAI,IAAA,0DAwEGa,MAAM,sBAM/BA,MAAM,iBACNvB,MAAA,CAAAI,WAAA,UAAAC,OAAA,0CAAAF,QAAA,OAAAF,MAAA,kJAwDGD,MAAA,iFAKEuB,MAAM,aAAavB,MAAA,8BAmBnBA,MAAA,CAAAM,QAAA,OAAAI,IAAA,yCAuDRoP,GAAA,CAAAvO,MAAM,0BAiDoCA,MAAM,oBAqB5CA,MAAM,aAAavB,MAAA,CAAAE,OAAA,eAuBnBqB,MAAM,aAAavB,MAAA,CAAAE,OAAA,eACfF,MAAA,CAAAM,QAAA,8BAAAI,IAAA,MAAAT,MAAA,0BAAAsD,OAAA,sBASPhC,MAAM,yBACNvB,MAAA,CAAAE,OAAA,eAIEqB,MAAM,eACNvB,MAAA,CAAA7jB,SAAA,WAAAokB,MAAA,OAAAC,OAAA,OAAAJ,WAAA,gDAAAK,SAAA,iEAmDGT,MAAA,CAAAM,QAAA,6EAAAI,IAAA,YAEDV,MAAA,CAAAC,MAAA,iDAAAG,WAAA,gMAAA8D,UAAA,0CA+CD3C,MAAM,eAAevB,MAAA,CAAAM,QAAA,OAAAI,IAAA,0DAwEOa,MAAM,sBAQnCA,MAAM,gBACNvB,MAAA,CAAAI,WAAA,UAAAC,OAAA,0CAAAF,QAAA,oCAQKoB,MAAM,cAAcvB,MAAA,8BAIlBA,MAAA,CAAAC,MAAA,mCAGFsB,MAAM,cAAcvB,MAAA,8BAIlBA,MAAA,CAAAC,MAAA,mCAKFsB,MAAM,cAAcvB,MAAA,8BAKrBA,MAAA,CAAAC,MAAA,qHAaCykB,GAAA,CAAAnjB,MAAM,mBAIJvB,MAAA,CAAAC,MAAA,mCAaJsB,MAAM,iBAAiBvB,MAAA,kFAsBrBuB,MAAM,aAAavB,MAAA,CAAAE,OAAA,qBAyBtBqB,MAAM,yBACNvB,MAAA,CAAAE,OAAA,eAGEqB,MAAM,eACNvB,MAAA,CAAAO,MAAA,OAAAC,OAAA,MAAAJ,WAAA,gCAAAK,SAAA,SAAAtkB,SAAA,iBAqBG6jB,MAAA,0CAAAC,MAAA,uDAKFsB,MAAM,eAAevB,MAAA,CAAAM,QAAA,OAAAI,IAAA,oDAyEvBa,MAAM,iBAAiBvB,MAAA,CAAAI,WAAA,UAAAD,QAAA,uDAMrBoB,MAAM,aAAavB,MAAA,2CAqBnBuB,MAAM,iBAAiBvB,MAAA,CAAAM,QAAA,OAAAI,IAAA,yBAiF/BilB,GAAA,CAAApkB,MAAM,0BAiDqCA,MAAM,oBAkB7CA,MAAM,aAAavB,MAAA,iDAuCYuB,MAAM,aAAavB,MAAA,oCAoCrDA,MAAA,CAAAM,QAAA,OAAAI,IAAA,0CAkDkCV,MAAA,wBAAAC,MAAA,iDAErBD,MAAA,CAAAC,MAAA,sBAIiCD,MAAA,CAAAM,QAAA,iCAAAI,IAAA,4BAwBrCV,MAAA,CAAAsD,KAAA,8BAEEtD,MAAA,CAAAM,QAAA,8BAAAI,IAAA,wCAC8CV,MAAA,gCACMA,MAAA,gCAC1CA,MAAA,0BACPA,MAAA,CAAAC,MAAA,oDAMHD,MAAA,gEAAAC,MAAA,yDAqBAD,MAAA,0CAAAC,MAAA,yCAoBPD,MAAA,iFAGKA,MAAA,8BAIEA,MAAA,CAAAM,QAAA,8BAAAI,IAAA,kBAGDV,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAH,MAAA,mFAaAD,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAH,MAAA,mFAaAD,MAAA,CAAAG,QAAA,WAAAC,WAAA,OAAAH,MAAA,6EAeDD,MAAA,8BACGA,MAAA,CAAAC,MAAA,8CAAAK,QAAA,0CAIFN,MAAA,CAAAC,MAAA,uDAKCD,MAAA,CAAAM,QAAA,0BAAAI,IAAA,kBAUDV,MAAA,CAAAC,MAAA,gCAQDD,MAAA,8BAKDA,MAAA,CAAAG,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,sHAkBCD,MAAA,CAAAM,QAAA,OAAAI,IAAA,+DAyDXV,MAAA,CAAAI,WAAA,UAAAC,OAAA,4DAAAF,QAAA,2BAAAI,MAAA,kGAYKP,MAAA,CAAAM,QAAA,6FAuBAN,MAAA,CAAAM,QAAA,iCAAAI,IAAA,aAsBEV,MAAA,CAAAM,QAAA,8BAAAI,IAAA,oDAwHAV,MAAA,CAAAM,QAAA,yCAAAI,IAAA,uCA6DHV,MAAA,CAAAI,WAAA,UAAAD,QAAA,6BAAAE,OAAA,2CAKKL,MAAA,CAAAM,QAAA,iCAAAI,IAAA,aAEDV,MAAA,CAAAC,MAAA,0BAAAK,QAAA,8BAAAI,IAAA,OAAA6C,OAAA,+BAkBAvD,MAAA,CAAAC,MAAA,0BAAAK,QAAA,8BAAAI,IAAA,OAAA6C,OAAA,4CAwEHvD,MAAA,CAAAM,QAAA,OAAAI,IAAA,0DA0CJ49B,GAAA,CAAA/8B,MAAM,0BAiDmCA,MAAM,oBAkC3CA,MAAM,aAAavB,MAAA,CAAAE,OAAA,eAuBnBqB,MAAM,aAAavB,MAAA,CAAAE,OAAA,eACfF,MAAA,CAAAM,QAAA,8BAAAI,IAAA,MAAAT,MAAA,0BAAAsD,OAAA,sBASPhC,MAAM,yBACNvB,MAAA,CAAAE,OAAA,eAIEqB,MAAM,eACNvB,MAAA,CAAA7jB,SAAA,WAAAokB,MAAA,OAAAC,OAAA,OAAAJ,WAAA,iDAAAK,SAAA,iEAmDGT,MAAA,CAAAM,QAAA,6EAAAI,IAAA,YAEDV,MAAA,CAAAC,MAAA,iDAAAG,WAAA,gMAAA8D,UAAA,0CA+CD3C,MAAM,eAAevB,MAAA,CAAAM,QAAA,OAAAI,IAAA,0DAwEMa,MAAM,sBAMlCA,MAAM,iBACNvB,MAAA,CAAAI,WAAA,UAAAC,OAAA,0CAAAF,QAAA,OAAAF,MAAA,kJAwDGsB,MAAM,iBAAiBvB,MAAA,kFAsBrBuB,MAAM,aAAavB,MAAA,CAAAE,OAAA,qBAyBtBqB,MAAM,yBACNvB,MAAA,CAAAE,OAAA,eAIEqB,MAAM,eACNvB,MAAA,CAAA7jB,SAAA,WAAAokB,MAAA,OAAAC,OAAA,OAAAJ,WAAA,iDAAAK,SAAA,iEAmDGT,MAAA,CAAAM,QAAA,6EAAAI,IAAA,YAEDV,MAAA,CAAAC,MAAA,iDAAAG,WAAA,gMAAA8D,UAAA,0CA+CD3C,MAAM,eAAevB,MAAA,CAAAM,QAAA,OAAAI,IAAA,wGAoFtC,MAAMgE,EAAgBC,KAChBC,SAAEA,GAAaC,EAAYH,GAG3B65B,EAAoB7+B,EAAI,IAAI7S,KAC5B2xC,EAAkB9+B,EAAI,IACtB++B,EAAmB/+B,EAAI,IACvBg/B,EAAyBh/B,GAAI,GAC7Bi/B,EAA4Bj/B,GAAI,GAChCk/B,EAA4Bl/B,EAAI,GAChCm/B,EAA0Bn/B,EAAI,IAC9Bo/B,EAAwBp/B,GAAI,GAC5Bq/B,EAAuBr/B,EAAI,IAC3Bs/B,EAAsBt/B,EAAI,IAC1Bu/B,EAAwBv/B,GAAI,GAC5Bw/B,EAAgBx/B,EAAI,IACpBy/B,EAAuBz/B,GAAI,GAC3B0/B,EAA2B1/B,GAAI,GAC/B2/B,EAA2B3/B,EAAI,GAG/B4/B,EAAuB5/B,EAAI,IAC3B6/B,EAAuB7/B,EAAoC,MAC3D8/B,EAAwB9/B,GAAI,GAC5B+/B,EAAsB//B,EAAc,IACpCo7B,EAAoBp7B,EAAI,IACxBggC,EAAmBhgC,GAAI,GACvBigC,EAAyBjgC,EAAI,IAC7BkgC,EAAuBlgC,GAAI,GAC3BmgC,EAA2BngC,GAAI,GAC/BogC,EAA2BpgC,EAAI,GAG/BqgC,EAA0BrgC,EAAI,IAC9B2U,EAAmB3U,EAAsB,IACzCsgC,EAAoBtgC,EAAI,IACxBugC,EAAevgC,EAAyC,YACxDwgC,EAAqBxgC,EAAI,IAAI7S,KAG7BszC,EAAiBzgC,GAAI,GACrB0gC,EAAe1gC,EAA6B,IAC5C2gC,EAAkB3gC,EAAmB,MAGrC4gC,EAAe5gC,GAAI,GAGnB6gC,EAA0B,KAC9B,SAG4C,IAAhCt5B,OAAeC,cACmC,mBAAlDD,OAAeC,aAAauzB,mBAEpCgF,EAAoB/wD,MAASu4B,OAAeC,aAAauzB,oBACzDn0B,QAAQC,IAAI,6BAA8Bk5B,EAAoB/wD,SAE9D+wD,EAAoB/wD,MAAQ,GAC5B43B,QAAQoC,KAAK,+BAEjB,OAASr0B,GACPiyB,QAAQjyB,MAAM,eAAgBA,GAC9BorD,EAAoB/wD,MAAQ,EAC9B,GAII8xD,EAAgB,KACpB,IACEF,EAAa5xD,OAAQ,EACrB,MAAM+xD,EAAY14B,IAClB,IAAK04B,EAGH,OAFAn6B,QAAQoC,KAAK,+BACb43B,EAAa5xD,OAAQ,GAKvB,MAAMo5B,EAAa,GAAG24B,eAChB7W,EAAkBxhB,aAAaC,QAAQP,GACvCK,EAAYyhB,EAAkBn3C,KAAK2L,MAAMwrC,GAAmB,GAElEtjB,QAAQC,IAAI,aAAc4B,GAGtBA,EAAUu4B,mBACZlC,EAAgB9vD,MAAQy5B,EAAUu4B,iBAAiBhwD,OAAS,GAC5D+tD,EAAiB/vD,MAAQy5B,EAAUu4B,iBAAiB31C,QAAU,GAC9D4zC,EAA0BjwD,MAAQy5B,EAAUu4B,iBAAiBC,kBAAmB,EAChF9B,EAAwBnwD,MAAQy5B,EAAUu4B,iBAAiBxB,eAAiB,GAC5E54B,QAAQC,IAAI,cAAe,CACzB71B,MAAO8tD,EAAgB9vD,MAAMk+B,UAAU,EAAG,IAC1C7hB,OAAQ0zC,EAAiB/vD,MAAMk+B,UAAU,EAAG,IAC5C+zB,gBAAiBhC,EAA0BjwD,MAC3CwwD,cAAeL,EAAwBnwD,MAAMk+B,UAAU,EAAG,OAK1DzE,EAAUy4B,sBACZ7B,EAAqBrwD,MAAQy5B,EAAUy4B,oBAAoB/rC,aAAe,GAC1EmqC,EAAoBtwD,MAAQy5B,EAAUy4B,oBAAoB71C,QAAU,GACpEm0C,EAAcxwD,MAAQy5B,EAAUy4B,oBAAoB1B,eAAiB,GACrEE,EAAyB1wD,MAAQy5B,EAAUy4B,oBAAoBD,kBAAmB,EAClFr6B,QAAQC,IAAI,cAAe,CACzB1R,YAAakqC,EAAqBrwD,MAAMk+B,UAAU,EAAG,IACrD7hB,OAAQi0C,EAAoBtwD,MAAMk+B,UAAU,EAAG,IAC/CsyB,cAAeA,EAAcxwD,MAAMk+B,UAAU,EAAG,IAChD+zB,gBAAiBvB,EAAyB1wD,SAK1Cy5B,EAAU04B,uBACZvB,EAAqB5wD,MAAQy5B,EAAU04B,qBAAqBhsC,aAAe,GAC3E0qC,EAAqB7wD,MAAQy5B,EAAU04B,qBAAqB91C,QAAU,KACtE+vC,EAAkBpsD,MAAQy5B,EAAU04B,qBAAqB/F,mBAAqB,GAC9E6E,EAAuBjxD,MAAQy5B,EAAU04B,qBAAqB3B,eAAiB,GAC/EW,EAAyBnxD,MAAQy5B,EAAU04B,qBAAqBF,kBAAmB,EACnFr6B,QAAQC,IAAI,gBAAiB,CAC3B1R,YAAayqC,EAAqB5wD,MAAMk+B,UAAU,EAAG,IACrD7hB,OAAQw0C,EAAqB7wD,MAAQ,MAAQ,MAC7CosD,kBAAmBA,EAAkBpsD,MACrCwwD,cAAeS,EAAuBjxD,MAAMk+B,UAAU,EAAG,IACzD+zB,gBAAiBd,EAAyBnxD,SAK1Cy5B,EAAU24B,sBACZvC,EAAkB7vD,MAAQ,IAAIme,IAAIre,OAAO8b,QAAQ6d,EAAU24B,sBAC3Dx6B,QAAQC,IAAI,aAAc/3B,OAAO0tB,YAAYqiC,EAAkB7vD,SAI7Dy5B,EAAU44B,wBACZhB,EAAwBrxD,MAAQy5B,EAAU44B,sBAAsBjG,mBAAqB,GACrFkF,EAAkBtxD,MAAQy5B,EAAU44B,sBAAsBC,aAAe,GACzEf,EAAavxD,MAAQy5B,EAAU44B,sBAAsBE,QAAU,WAC/D36B,QAAQC,IAAI,iBAAkB,CAC5Bu0B,kBAAmBiF,EAAwBrxD,MAC3CsyD,YAAahB,EAAkBtxD,MAC/BuyD,OAAQhB,EAAavxD,QAInBqxD,EAAwBrxD,QAC1B43B,QAAQC,IAAI,uBACZ0F,WAAW,KACTi1B,MACC,OAKPj1B,WAAW,KACTq0B,EAAa5xD,OAAQ,EACrB43B,QAAQC,IAAI,oBACX,IACL,OAASlyB,GACPiyB,QAAQjyB,MAAM,cAAeA,GAC7BisD,EAAa5xD,OAAQ,CACvB,GAIIyyD,EAAyB,KAE7B,GAAKb,EAAa5xD,MAKlB,IACE,MAAM+xD,EAAY14B,IAClB,IAAK04B,EAEH,YADAn6B,QAAQoC,KAAK,0BAIf,MAAM8N,EAAa,CACjBkqB,iBAAkB,CAChBhwD,MAAO8tD,EAAgB9vD,MACvBqc,OAAQ0zC,EAAiB/vD,MACzBiyD,gBAAiBhC,EAA0BjwD,MAC3CwwD,cAAeL,EAAwBnwD,OAEzCkyD,oBAAqB,CACnB/rC,YAAakqC,EAAqBrwD,MAClCqc,OAAQi0C,EAAoBtwD,MAC5BwwD,cAAeA,EAAcxwD,MAC7BiyD,gBAAiBvB,EAAyB1wD,OAE5CmyD,qBAAsB,CACpBhsC,YAAayqC,EAAqB5wD,MAClCqc,OAAQw0C,EAAqB7wD,MAC7BosD,kBAAmBA,EAAkBpsD,MACrCwwD,cAAeS,EAAuBjxD,MACtCiyD,gBAAiBd,EAAyBnxD,OAE5CqyD,sBAAuB,CACrBjG,kBAAmBiF,EAAwBrxD,MAC3CsyD,YAAahB,EAAkBtxD,MAC/BuyD,OAAQhB,EAAavxD,OAEvBoyD,oBAAqBtyD,OAAO0tB,YAAYqiC,EAAkB7vD,QAItDo5B,EAAa,GAAG24B,eACtBr4B,aAAaY,QAAQlB,EAAYr1B,KAAKC,UAAU8jC,IAChDlQ,QAAQC,IAAI,4BAA6B,CACvC66B,wBAAyB5C,EAAgB9vD,MAAMuC,OAC/CowD,yBAA0B5C,EAAiB/vD,MAAMuC,OACjDqwD,sBAAuBvC,EAAqBrwD,MAAMuC,OAClDswD,wBAAyBvC,EAAoBtwD,MAAMuC,QAEvD,OAASoD,GACPiyB,QAAQjyB,MAAM,cAAeA,EAC/B,MAlDEiyB,QAAQC,IAAI,qBAsDVi7B,GAAgB3X,YAASsX,EAAwB,KAGvDxhC,EACE,CACE6+B,EACAC,EACAE,EACAE,EACAE,EACAC,EACAE,EACAE,EACAE,EACAC,EACAzE,EACA6E,EACAE,EACAE,EACAC,EACAC,EACA1B,GAEF,KACM+B,EAAa5xD,QACf43B,QAAQC,IAAI,mBACZi7B,OAGJ,CAAE/jB,MAAM,IAIVlU,EAAU,KACRjD,QAAQC,IAAI,6BACZi6B,IACAD,MAIF7iB,EAAgB,KACdpX,QAAQC,IAAI,8BAEZi7B,GAAcC,SACdN,MAIF,MA6oBMO,GAAwBC,GAExBA,EAAM91B,UAAU,IAAIgW,OAAOllC,QACtBglD,EAAM91B,QAAQ,GAAGgW,MAAMllC,QAG5BglD,EAAM9f,OAAO7O,KACR2uB,EAAM9f,MAAM7O,KAGQ,iBAAlB2uB,EAAMhlD,QACRglD,EAAMhlD,QAEW,iBAAfglD,EAAM3uB,KACR2uB,EAAM3uB,KAEe,iBAAnB2uB,EAAMz2B,SACRy2B,EAAMz2B,SAER,KAIH02B,GAAwBxrD,MAC5ByrD,EACAC,KAEA,MAAMjrB,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUmvD,KAGvB,IAAK32B,EAASM,GAAI,CAChB,MAAMmV,QAAkBzV,EAAS8H,OACjC,MAAM,IAAIljC,MAAM,UAAUo7B,EAASO,UAAUP,EAASQ,eAAeiV,EAAUzvC,MAAM,EAAG,OAC1F,CAEA,IAAKg6B,EAASK,KACZ,MAAM,IAAIz7B,MAAM,iCAGlB,MAAM6uC,EAASzT,EAASK,KAAKgW,YACvBC,EAAU,IAAIC,YAAY,SAChC,IAAIsgB,EAAS,GACTpgB,GAAO,EACPtrC,EAAS,GAEbyrD,EAAYpzD,MAAQ,EAEpB,MAAMszD,EAAetkD,IACnB,MAAM+C,EAAU/C,EAAKgD,OACrB,IAAKD,EACH,OAAO,EAGT,GAAgB,iBAAZA,GAA0C,WAAZA,EAChC,OAAO,EAGT,MAAMwhD,EAAcxhD,EAAQ3P,WAAW,SAAW2P,EAAQvP,MAAM,GAAGwP,OAASD,EAC5E,IAAKwhD,GAA+B,WAAhBA,EAClB,OAAO,EAGT,IACE,MAAMC,EAAczvD,KAAK2L,MAAM6jD,GACzBE,EAAYT,GAAqBQ,GACnCC,IACF9rD,GAAU8rD,EACVL,EAAYpzD,MAAQ2O,KAAKC,IAAIwkD,EAAYpzD,MAAQ,EAAG,IAExD,OAASuuC,GACP3W,QAAQoC,KAAK,aAAcu5B,EAAY/wD,MAAM,EAAG,KAAM+rC,EACxD,CAEA,OAAO,GAGT,MAAQ0E,GAAM,CACZ,MAAMjzC,MAAEA,EAAOizC,KAAMygB,SAAqBzjB,EAAOiD,OACjD,GAAIlzC,EAAO,CACTqzD,GAAUvgB,EAAQ/wB,OAAO/hB,EAAO,CAAE4yC,QAAQ,IAC1C,MAAMrkC,EAAQ8kD,EAAO7kD,MAAM,MAC3B6kD,EAAS9kD,EAAMmC,OAAS,GACxB,UAAW1B,KAAQT,EACjB,GAAI+kD,EAAYtkD,GAAO,CACrBikC,GAAO,EACP,KACF,CAEJ,CAEIygB,IACFzgB,GAAO,EAEX,CAOA,OALIogB,IAAWpgB,GACbqgB,EAAYD,GAGdD,EAAYpzD,MAAQ,IACb2H,GAwbH6qD,GAAuB9qD,UAC3B,GAAK2pD,EAAwBrxD,MAK7B,IAEE,IAAI2zD,EAAiB,KACrB,QAC0C,IAAhCp7B,OAAeC,cAC8B,mBAA7CD,OAAeC,aAAao7B,aAOpC,OAHAh8B,QAAQjyB,MAAM,mCACd4yB,OAAOl5B,OAAOsG,MAAM,sBACpBggC,EAAiB3lC,MAAQ,IAJzB2zD,QAAmBp7B,OAAeC,aAAao7B,aAAavC,EAAwBrxD,OAQlF2zD,GAAatvD,MAAMC,QAAQqvD,IAAcA,EAAUpxD,OAAS,GAC9DojC,EAAiB3lC,MAAQ2zD,EACzB/7B,QAAQC,IAAI,aAAaw5B,EAAwBrxD,YAAY2lC,EAAiB3lC,MAAMuC,cACpFg2B,OAAOl5B,OAAOkJ,QAAQ,OAAOo9B,EAAiB3lC,MAAMuC,gBAEpDojC,EAAiB3lC,MAAQ,GACzBu4B,OAAOl5B,OAAO8pC,KAAK,YAEvB,OAASxjC,GACPiyB,QAAQjyB,MAAM,eAAgBA,GAC9B4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,SAC/C+/B,EAAiB3lC,MAAQ,EAC3B,MA/BE2lC,EAAiB3lC,MAAQ,IAmCvB6zD,GAA2Bz7B,EAAS,KACxC,IAAIxc,EAAU,IAAI+pB,EAAiB3lC,OAGnC,GAAIsxD,EAAkBtxD,MAAMgS,OAAQ,CAClC,MAAM8hD,EAAQxC,EAAkBtxD,MAAM+nB,cACtCnM,EAAUA,EAAQnN,OAAOslD,IACvB,MAAMC,EAAYD,EAAMx0D,MAAMwoB,cAAcrjB,SAASovD,GAC/CG,EAAeF,EAAM9lD,SAAS8Z,cAAcrjB,SAASovD,GACrDI,EAAYH,EAAMvH,UAAUz1C,MAAMiD,KAAKpX,GACxB,iBAARA,EACFA,EAAImlB,cAAcrjB,SAASovD,GACzBlxD,aAAeoH,QACjBpH,EAAIhB,WAAWmmB,cAAcrjB,SAASovD,IAIjD,OAAOE,GAAaC,GAAgBC,GAExC,CASA,MAN2B,YAAvB3C,EAAavxD,MACf4b,EAAUA,EAAQnN,OAAOslD,GAASA,EAAMxH,SACR,aAAvBgF,EAAavxD,QACtB4b,EAAUA,EAAQnN,OAAOslD,IAAUA,EAAMxH,UAGpC3wC,u3BAjvCmBu4C,IAC1Bv8B,QAAQC,IAAI,+BAAgCs8B,GAC5C,MAAMvI,EAAUiE,EAAkB7vD,MAAM6C,IAAIsxD,KAAa,EACzDv8B,QAAQC,IAAI,UAAW+zB,GACvBiE,EAAkB7vD,MAAM+C,IAAIoxD,GAAWvI,GACvCh0B,QAAQC,IAAI,WAAY+zB,mBAIFuI,GACftE,EAAkB7vD,MAAM6C,IAAIsxD,KAAa,0BAMlBzsD,UAC9B,GAAKooD,EAAgB9vD,MAAMgS,OAK3B,IACEg+C,EAAuBhwD,OAAQ,EAC/BkwD,EAA0BlwD,MAAQ,EAClCu4B,OAAOl5B,OAAO8pC,KAAK,cAAe,QAAS,CAAE9L,QAAS,OAEtD,MAAM81B,EAAiB,CACrB53B,MAAOrF,EAASl2B,MAAMu7B,MACtBa,WAAYlG,EAASl2B,MAAMo8B,YAAc,IACzCD,YAAa,GACbyW,OAAQqd,EAA0BjwD,MAClCi8B,SAAU,CACR,CACEC,KAAM,SACNjuB,QAAS,+2FA0JX,CACEiuB,KAAM,OACNjuB,QAAS6hD,EAAgB9vD,SAK/B,IAAIo0D,EAEJ,GAAInE,EAA0BjwD,MAE5Bo0D,QAAsBlB,GAAsBC,EAAgBjD,OACvD,CAEL,MAAM/nB,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUmvD,KAGvB,IAAK32B,EAASM,GACZ,MAAM,IAAI17B,MAAM,uBAAuBo7B,EAASO,UAIlDq3B,SADmB53B,EAASS,QACPE,QAAQ,GAAGv3B,QAAQqI,QAAQ+D,OAChDk+C,EAA0BlwD,MAAQ,GACpC,CAEA+vD,EAAiB/vD,MAAQo0D,EACzB3B,IAEAl6B,OAAOl5B,OAAOkJ,QAAQ,UACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1B4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,SACEoqD,EAAuBhwD,OAAQ,EAC/BkwD,EAA0BlwD,MAAQ,CACpC,MAtNEu4B,OAAOl5B,OAAOm7B,QAAQ,oCAyNG,KACtBu1B,EAAiB/vD,MAMtBo+B,EAAgB2xB,EAAiB/vD,MAAO,eALtCu4B,OAAOl5B,OAAOm7B,QAAQ,oCASK9yB,UAC7B,GAAKyoD,EAAwBnwD,MAAMgS,OAKnC,GAAK+9C,EAAiB/vD,MAKtB,IACEowD,EAAsBpwD,OAAQ,EAC9BkwD,EAA0BlwD,MAAQ,EAClCu4B,OAAOl5B,OAAO8pC,KAAK,YAAa,QAAS,CAAE9L,QAAS,OAEpD,MAAM81B,EAAiB,CACrB53B,MAAOrF,EAASl2B,MAAMu7B,MACtBa,WAAYlG,EAASl2B,MAAMo8B,YAAc,IACzCD,YAAa,GACbyW,OAAQqd,EAA0BjwD,MAClCi8B,SAAU,CACR,CACEC,KAAM,SACNjuB,QACE,2DAEJ,CACEiuB,KAAM,OACNjuB,QAAS,UAAU8hD,EAAiB/vD,iBAAiBmwD,EAAwBnwD,WAKnF,IAAIq0D,EAEJ,GAAIpE,EAA0BjwD,MAE5Bq0D,QAAqBnB,GAAsBC,EAAgBjD,OACtD,CAEL,MAAM/nB,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUmvD,KAGvB,IAAK32B,EAASM,GACZ,MAAM,IAAI17B,MAAM,uBAAuBo7B,EAASO,UAIlDs3B,SADmB73B,EAASS,QACRE,QAAQ,GAAGv3B,QAAQqI,QAAQ+D,OAC/Ck+C,EAA0BlwD,MAAQ,GACpC,CAEA+vD,EAAiB/vD,MAAQq0D,EACzB5B,IAEAl6B,OAAOl5B,OAAOkJ,QAAQ,QACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1B4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,SACEwqD,EAAsBpwD,OAAQ,EAC9BkwD,EAA0BlwD,MAAQ,CACpC,MA/DEu4B,OAAOl5B,OAAOm7B,QAAQ,iBALtBjC,OAAOl5B,OAAOm7B,QAAQ,yCAwEW,KACnC21B,EAAwBnwD,MAAQ,GAChCyyD,IACAl6B,OAAOl5B,OAAOkJ,QAAQ,wCAIYb,UAClC,GAAK2oD,EAAqBrwD,MAAMgS,OAKhC,IACEu+C,EAAsBvwD,OAAQ,EAC9B2wD,EAAyB3wD,MAAQ,EACjCu4B,OAAOl5B,OAAO8pC,KAAK,oBAEnB,MAAMgqB,EAAiB,CACrB53B,MAAOrF,EAASl2B,MAAMu7B,OAAS,gBAC/Ba,WAAYlG,EAASl2B,MAAMo8B,YAAc,KACzCD,YAAa,GACbyW,OAAQ8d,EAAyB1wD,MACjCi8B,SAAU,CACR,CACEC,KAAM,SACNjuB,QAAS,syFAgIX,CACEiuB,KAAM,OACNjuB,QAASoiD,EAAqBrwD,SAKpC,IAAIo0D,EAEJ,GAAI1D,EAAyB1wD,MAE3Bo0D,QAAsBlB,GAAsBC,EAAgBxC,OACvD,CAEL,MAAMxoB,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUmvD,KAGvB,IAAK32B,EAASM,GACZ,MAAM,IAAI17B,MAAM,uBAAuBo7B,EAASO,UAIlDq3B,SADmB53B,EAASS,QACPE,QAAQ,GAAGv3B,QAAQqI,QAAQ+D,OAChD2+C,EAAyB3wD,MAAQ,GACnC,CAEAswD,EAAoBtwD,MAAQo0D,EAC5B3B,IAEAl6B,OAAOl5B,OAAOkJ,QAAQ,WACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1B4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,SACE2qD,EAAsBvwD,OAAQ,EAC9B2wD,EAAyB3wD,MAAQ,CACnC,MA5LEu4B,OAAOl5B,OAAOm7B,QAAQ,+BA+LC,KACzB61B,EAAqBrwD,MAAQ,GAC7BswD,EAAoBtwD,MAAQ,GAC5BwwD,EAAcxwD,MAAQ,GACtByyD,IACAl6B,OAAOl5B,OAAOkJ,QAAQ,4BAGE,KACnB+nD,EAAoBtwD,MAMzBo+B,EAAgBkyB,EAAoBtwD,MAAO,cALzCu4B,OAAOl5B,OAAOm7B,QAAQ,iCASE,KAC1Bs1B,EAAgB9vD,MAAQ,GACxB+vD,EAAiB/vD,MAAQ,GACzByyD,IACAl6B,OAAOl5B,OAAOkJ,QAAQ,oCAIUb,UAChC,GAAK8oD,EAAcxwD,MAAMgS,OAKzB,GAAKs+C,EAAoBtwD,MAKzB,IACEywD,EAAqBzwD,OAAQ,EAC7B2wD,EAAyB3wD,MAAQ,EACjCu4B,OAAOl5B,OAAO8pC,KAAK,0BAEnB,MAAMgqB,EAAiB,CACrB53B,MAAOrF,EAASl2B,MAAMu7B,OAAS,gBAC/Ba,WAAYlG,EAASl2B,MAAMo8B,YAAc,KACzCD,YAAa,GACbyW,OAAQ8d,EAAyB1wD,MACjCi8B,SAAU,CACR,CACEC,KAAM,SACNjuB,QAAS,uXAkBX,CACEiuB,KAAM,OACNjuB,QAAS,iBAEjBqiD,EAAoBtwD,oCAKpBwwD,EAAcxwD,WAKZ,IAAIs0D,EAEJ,GAAI5D,EAAyB1wD,MAE3Bs0D,QAAqBpB,GAAsBC,EAAgBxC,OACtD,CAEL,MAAMxoB,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUmvD,KAGvB,IAAK32B,EAASM,GACZ,MAAM,IAAI17B,MAAM,uBAAuBo7B,EAASO,UAIlDu3B,SADmB93B,EAASS,QACRE,QAAQ,GAAGv3B,QAAQqI,QAAQ+D,OAC/C2+C,EAAyB3wD,MAAQ,GACnC,CAEAswD,EAAoBtwD,MAAQs0D,EAC5B9D,EAAcxwD,MAAQ,GACtByyD,IAEAl6B,OAAOl5B,OAAOkJ,QAAQ,WACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,WAAYA,GAC1B4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,SACE6qD,EAAqBzwD,OAAQ,EAC7B2wD,EAAyB3wD,MAAQ,CACnC,MAtFEu4B,OAAOl5B,OAAOm7B,QAAQ,0BALtBjC,OAAOl5B,OAAOm7B,QAAQ,+BA+FC,KACzBg2B,EAAcxwD,MAAQ,GACtByyD,IACAl6B,OAAOl5B,OAAOkJ,QAAQ,0FAuHab,UACnC,GAAKkpD,EAAqB5wD,MAAMgS,OAKhC,IACE8+C,EAAsB9wD,OAAQ,EAC9BoxD,EAAyBpxD,MAAQ,EACjCu4B,OAAOl5B,OAAO8pC,KAAK,qBAAsB,GAAI,CAAE9L,QAAS,OAExD,MAAM81B,EAAiB,CACrB53B,MAAOrF,EAASl2B,MAAMu7B,OAAS,gBAC/Ba,WAAYlG,EAASl2B,MAAMo8B,YAAc,IACzCD,YAAa,GACbyW,OAAQue,EAAyBnxD,MACjCi8B,SAAU,CACR,CACEC,KAAM,SACNjuB,QAAS,g/GA6LX,CACEiuB,KAAM,OACNjuB,QAAS2iD,EAAqB5wD,SAKpC,IAAIo0D,EAEJ,GAAIjD,EAAyBnxD,MAE3Bo0D,QAAsBlB,GAAsBC,EAAgB/B,OACvD,CAEL,MAAMjpB,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUmvD,KAGvB,IAAK32B,EAASM,GACZ,MAAM,IAAI17B,MAAM,uBAAuBo7B,EAASO,UAIlDq3B,SADmB53B,EAASS,QACPE,QAAQ,GAAGv3B,QAAQqI,QAAQ+D,OAChDo/C,EAAyBpxD,MAAQ,GACnC,CAGA,IAEE,MACMwoC,GADY4rB,EAAc1rB,MAAM,iCAAmC,CAAC,KAAM0rB,IACrD,IAAMA,EAE3BG,EAAcxwD,KAAK2L,MAAM84B,GAC/BqoB,EAAqB7wD,MAAQu0D,EAC7B9B,IAEAl6B,OAAOl5B,OAAOkJ,QAAQ,aACxB,OAASgmC,GACP3W,QAAQjyB,MAAM,aAAc4oC,GAC5B3W,QAAQC,IAAI,QAASu8B,GACrB77B,OAAOl5B,OAAOsG,MAAM,gBACtB,CACF,OAASA,GACPiyB,QAAQjyB,MAAM,aAAcA,GAC5B4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,SACEkrD,EAAsB9wD,OAAQ,EAC9BoxD,EAAyBpxD,MAAQ,CACnC,MArQEu4B,OAAOl5B,OAAOm7B,QAAQ,+BAyQC,KACzBo2B,EAAqB5wD,MAAQ,GAC7B6wD,EAAqB7wD,MAAQ,KAC7BosD,EAAkBpsD,MAAQ,GAC1BixD,EAAuBjxD,MAAQ,GAC/ByyD,IACAl6B,OAAOl5B,OAAOkJ,QAAQ,4BAIEb,UACxB,GAAK0kD,EAAkBpsD,MAKvB,GAAK6wD,EAAqB7wD,MAK1B,IACEgxD,EAAiBhxD,OAAQ,EACzBu4B,OAAOl5B,OAAO8pC,KAAK,WAAWijB,EAAkBpsD,mBAG1C+tD,uBAAuB3B,EAAkBpsD,MAAO,CAAC6wD,EAAqB7wD,OAAQ,CAAEw0D,OAAQ,cAE9Fj8B,OAAOl5B,OAAOkJ,QAAQ,cAAc6jD,EAAkBpsD,SACxD,OAAS2F,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,SACEorD,EAAiBhxD,OAAQ,CAC3B,MAjBEu4B,OAAOl5B,OAAOm7B,QAAQ,iBALtBjC,OAAOl5B,OAAOm7B,QAAQ,gCA0BC,KACzB,IAAKq2B,EAAqB7wD,MAExB,YADAu4B,OAAOl5B,OAAOm7B,QAAQ,YAIxB,MAAMgO,EAAWzkC,KAAKC,UAAU6sD,EAAqB7wD,MAAO,KAAM,GAClEo+B,EAAgBoK,EAAU,kDAIO9gC,UACjC,GAAKupD,EAAuBjxD,MAAMgS,OAKlC,GAAK6+C,EAAqB7wD,MAK1B,IACEkxD,EAAqBlxD,OAAQ,EAC7BoxD,EAAyBpxD,MAAQ,EACjCu4B,OAAOl5B,OAAO8pC,KAAK,4BAEnB,MAAMgqB,EAAiB,CACrB53B,MAAOrF,EAASl2B,MAAMu7B,OAAS,gBAC/Ba,WAAYlG,EAASl2B,MAAMo8B,YAAc,IACzCD,YAAa,GACbyW,OAAQue,EAAyBnxD,MACjCi8B,SAAU,CACR,CACEC,KAAM,SACNjuB,QAAS,kXAkBX,CACEiuB,KAAM,OACNjuB,QAAS,mBAEjBlK,KAAKC,UAAU6sD,EAAqB7wD,MAAO,KAAM,gCAKjDixD,EAAuBjxD,WAKrB,IAAIo0D,EAEJ,GAAIjD,EAAyBnxD,MAE3Bo0D,QAAsBlB,GAAsBC,EAAgB/B,OACvD,CAEL,MAAMjpB,EAASC,EAAqBlS,EAASl2B,MAAMq7B,cAC7CmB,QAAiBC,MAAM0L,EAAQ,CACnCzL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAU1G,EAASl2B,MAAMs7B,WAE1CuB,KAAM94B,KAAKC,UAAUmvD,KAGvB,IAAK32B,EAASM,GACZ,MAAM,IAAI17B,MAAM,uBAAuBo7B,EAASO,UAIlDq3B,SADmB53B,EAASS,QACPE,QAAQ,GAAGv3B,QAAQqI,QAAQ+D,OAChDo/C,EAAyBpxD,MAAQ,GACnC,CAGA,IAEE,MACMwoC,GADY4rB,EAAc1rB,MAAM,iCAAmC,CAAC,KAAM0rB,IACrD,IAAMA,EAE3BG,EAAcxwD,KAAK2L,MAAM84B,GAC/BqoB,EAAqB7wD,MAAQu0D,EAC7BtD,EAAuBjxD,MAAQ,GAC/ByyD,IAEAl6B,OAAOl5B,OAAOkJ,QAAQ,aACxB,OAASgmC,GACP3W,QAAQjyB,MAAM,aAAc4oC,GAC5B3W,QAAQC,IAAI,QAASu8B,GACrB77B,OAAOl5B,OAAOsG,MAAM,gBACtB,CACF,OAASA,GACPiyB,QAAQjyB,MAAM,aAAcA,GAC5B4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,SACEsrD,EAAqBlxD,OAAQ,EAC7BoxD,EAAyBpxD,MAAQ,CACnC,MAlGEu4B,OAAOl5B,OAAOm7B,QAAQ,wBALtBjC,OAAOl5B,OAAOm7B,QAAQ,wCA2GU,KAClCy2B,EAAuBjxD,MAAQ,GAC/ByyD,IACAl6B,OAAOl5B,OAAOkJ,QAAQ,oFA2EK+N,IAC3B,MAAMs1C,EAAU4F,EAAmBxxD,MAAM6C,IAAIyT,KAAU,EACvDk7C,EAAmBxxD,MAAM+C,IAAIuT,GAAQs1C,oBAIdt1C,GAChBk7C,EAAmBxxD,MAAM6C,IAAIyT,KAAU,qBAIpBy9C,IAC1B,IAEErC,EAAa1xD,MAAQ,CACnB4lC,IAAKmuB,EAAMnuB,IACXrmC,KAAMw0D,EAAMx0D,MAAQ,GACpBgtD,QAASwH,EAAMxH,UAAW,EAC1Bt+C,QAAS8lD,EAAM9lD,SAAW,GAC1Bu+C,SAAU,CACR50C,KAAMm8C,EAAMvH,UAAU50C,MAAQ,YAC9Bb,KAAM,IAAKg9C,EAAMvH,UAAUz1C,MAAQ,IACnC01C,eAAgB,CACdC,MAAOqH,EAAMvH,UAAUC,gBAAgBC,OAAS,UAChD31C,KAAM,IAAKg9C,EAAMvH,UAAUC,gBAAgB11C,MAAQ,KAErD41C,WAAYoH,EAAMvH,UAAUG,YAAc,kBAE5Cl/C,SAAUsmD,EAAMtmD,SACZ,CACEmK,KAAMm8C,EAAMtmD,SAASmK,MAAQ,8BAC7BskB,KAAM63B,EAAMtmD,SAASyuB,MAAQ,SAC7ByK,MAAOotB,EAAMtmD,SAASk5B,OAAS,EAC/BN,MAAO0tB,EAAMtmD,SAAS44B,OAAS,GAEjC,CACEzuB,KAAM,8BACNskB,KAAM,SACNyK,MAAO,EACPN,MAAO,GAEbI,YAAastB,EAAMttB,aAAe,IAClCguB,UAAWV,EAAMU,UACb,CACEC,iBAAkBX,EAAMU,UAAUC,mBAAoB,EACtDC,iBAAkBZ,EAAMU,UAAUE,mBAAoB,EACtDC,YAAab,EAAMU,UAAUG,aAAe,MAE9C,CACEF,kBAAkB,EAClBC,kBAAkB,EAClBC,YAAa,MAEnBC,OAAQd,EAAMc,OACV,CACEztB,OAAQ2sB,EAAMc,OAAOztB,QAAU,KAC/BC,SAAU0sB,EAAMc,OAAOxtB,UAAY,KACnCC,MAAOysB,EAAMc,OAAOvtB,OAAS,MAE/B,CACEF,OAAQ,KACRC,SAAU,KACVC,MAAO,OAGfqqB,EAAgB3xD,MAAQ+zD,EAAMnuB,IAC9B6rB,EAAezxD,OAAQ,CACzB,OAAS2F,GACPiyB,QAAQjyB,MAAM,YAAaA,GAC3B4yB,OAAOl5B,OAAOsG,MAAM,YAAeA,EAAgBC,QACrD,mBAIsB8B,UACtB,GAAKgqD,EAAa1xD,MAAMT,MAAMyS,OAK9B,GAAK2/C,EAAgB3xD,MAKrB,IAEE,MAAM80D,QAAyBC,oBAAoB1D,EAAwBrxD,MAAO2zD,IAChF,MAAMqB,EAAarB,EAAUjR,aAAe36C,EAAE69B,MAAQ+rB,EAAgB3xD,OAStE,OARmB,IAAfg1D,IAEFrB,EAAUqB,GAAc,IACnBrB,EAAUqB,MACVtD,EAAa1xD,MAChB4lC,IAAK+rB,EAAgB3xD,QAGlB2zD,IAIThuB,EAAiB3lC,MAAQ80D,EAGzBrD,EAAezxD,OAAQ,EACvB0xD,EAAa1xD,MAAQ,GACrB2xD,EAAgB3xD,MAAQ,KAExBu4B,OAAOl5B,OAAOkJ,QAAQ,QACxB,OAAS5C,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,MA/BE2yB,OAAOl5B,OAAOsG,MAAM,gBALpB4yB,OAAOl5B,OAAOm7B,QAAQ,kCAwCG9yB,MAAOqsD,IAClC,GAAKj5B,QAAQ,YAAYi5B,EAAMx0D,YAI/B,IAEE,MAAMo0D,UAAEA,SAAoBsB,uBAAuB5D,EAAwBrxD,MAAO+H,GAAKA,EAAE69B,MAAQmuB,EAAMnuB,KAGvGD,EAAiB3lC,MAAQ2zD,EAEzBp7B,OAAOl5B,OAAOkJ,QAAQ,UAAUwrD,EAAMx0D,QACxC,OAASoG,GACPiyB,QAAQjyB,MAAM,UAAWA,GACzB4yB,OAAOl5B,OAAOsG,MAAM,QAAWA,EAAgBC,QACjD,uHAn9HA,OAAAssB,IAAAC,EAg0EM,MAh0ENS,GAg0EM,CA9zEJF,EAwWM,MAxWNO,GAwWM,CAvWJP,EA8CM,OA7CJG,MAAM,iBACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAkD,OAAA,UAAAT,WAAA,iBAsBChC,QAAKO,eAAEL,EAAA4iC,mBAAkB,eACzB70B,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,oBACxDmkB,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAEzDuW,EAAA,MAAAA,EAAA,IAAAD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAAyE,KAAtEG,MAAM,oBAAoBvB,MAAA,CAAAC,MAAA,kCAA4C,aAE3E,IACAmB,EAGK,KAFFG,MAAK4C,EAAEnD,EAAA6iC,eAAc,mEACtB7jC,MAAA,CAAAC,MAAA,OAAA6C,WAAA,wDAIO9B,EAAA6iC,eAAc,eAAAjjC,IAAzBC,EAsTM,MAtTNkB,GAsTM,CAAAV,EAAA,MAAAA,EAAA,IAAAa,EAAA,mxBAlRJd,EAoBM,MApBNa,GAoBM,CAAAZ,EAAA,MAAAA,EAAA,IAnBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,WAElG,IAAAkP,EACA/N,EAeY,kCAAAC,EAAA,KAAAA,EAAA,GAAAO,GAdDZ,EAAAw9B,gBAAe58B,GACxBC,YAAY,gBACZ7B,MAAA,CAAAO,MAAA,OAAAC,OAAA,QAAAL,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,mDAFSd,EAAAw9B,qBAkBbp9B,EAKM,MALNgB,GAKM,CAJJhB,EAGQ,QAHRiB,GAGQ,CAAA8M,EAFN/N,EAAqF,+BAAAC,EAAA,KAAAA,EAAA,GAAAO,GAArEZ,EAAA29B,0BAAyB/8B,GAAEtb,KAAK,WAAW0Z,MAAA,CAAAuD,OAAA,0BAA3CvC,EAAA29B,6CAAqE,6BAOjF39B,EAAA09B,wBAA0B19B,EAAA49B,0BAAyB,GAAAh+B,IAD3DC,EA+BM,MA/BNyB,GA+BM,CA1BJlB,EAsBM,MAtBNsB,GAsBM,CAXJtB,EAUO,OATLG,MAAM,gBACLvB,MAAK6C,EAAA,CAAAtC,MAA2BS,EAAA49B,0BAAyB,IAAAp+B,OAAA,uHAA6MQ,EAAA29B,0BAAyB,2CAAA77B,WAAA,+BAUpS1B,EAEM,MAFNwB,GAAoG,WAC3FnB,EAAGT,EAAA49B,0BAA0B9yB,QAAO,IAAM,KACnD,MAAA9J,EAAA,OAGFZ,EAqEM,MArEN2B,GAqEM,CApEJ3B,EAiCS,UAhCPG,MAAM,iBACL8B,SAAUrC,EAAA09B,yBAA2B19B,EAAAw9B,gBAAgB99C,OACtDsf,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,mEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAA8iC,yBAAA,eAER1iC,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,0CAERH,EAA4E,KAAzEG,MAAM,oBAAoBvB,MAAA,qDAA+CwB,EAAA,IAC5EC,EAAGT,EAAA09B,uBAAsB,uBAAA17B,IAG3B5B,EAgCS,UA/BPG,MAAM,eACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,mEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAA+iC,qBAAA,IAAA1iC,EAAA,MAAAA,EAAA,KAERD,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAA4E,KAAzEG,MAAM,oBAAoBvB,MAAA,sDAA+C,QAE9E,SAISgB,EAAAy9B,kBAAA79B,IAAXC,EAyIM,MAzINqC,GAyIM,CAAA7B,EAAA,MAAAA,EAAA,IAxIJD,EAGK,MAHDpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,gDAA0E,CAC5EmB,EAAkF,KAA/EG,MAAM,2BAA2BvB,MAAA,sBAAAC,MAAA,eAA8C,aAEpF,IACAmB,EAiBM,MAjBN+B,GAiBM1B,EADDT,EAAAy9B,kBAAgB,GAGrBr9B,EAoCM,OApCDG,MAAM,iBAAiBvB,MAAA,qBAAAM,QAAA,OAAAI,IAAA,UAC1BU,EAkCS,UAjCPG,MAAM,cACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,gBAAAxC,QAAA,8BAAAI,IAAA,uDAAAvkB,SAAA,WAAAskB,SAAA,UAiBCK,QAAOE,EAAAgjC,sBAAA,IAAA3iC,EAAA,MAAAA,EAAA,KAERD,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAAwD,KAArDG,MAAM,mBAAmBvB,MAAA,iCAA4B,UAC1D,SAIFoB,EAyEM,MAzENqC,GAyEM,CAAApC,EAAA,MAAAA,EAAA,IAxEJD,EAGK,MAHDpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,gDAA0E,CAC5EmB,EAAyF,KAAtFG,MAAM,kCAAkCvB,MAAA,sBAAAC,MAAA,eAA8C,iBAE3F,IACAmB,EAiBM,MAjBNsC,GAiBM,CAAAyL,EAhBJ/N,EAeY,kCAAAC,EAAA,KAAAA,EAAA,GAAAO,GAdDZ,EAAA69B,wBAAuBj9B,GAChCC,YAAY,6BACZ7B,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAL,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,mDAFSd,EAAA69B,6BAiBbz9B,EAgDM,MAhDNsO,GAgDM,CA/CJtO,EAwBS,UAvBNiC,SAAUrC,EAAA89B,wBAA0B99B,EAAA69B,wBAAwBn+C,OAC7Dsf,MAaC6C,GAbD,CAAAS,KAAA,IAAAnD,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,iDAAAsD,OAAA,UAAAT,WAAA,iEAAAU,QAAA,KAaC,CAAAA,QACoCxC,EAAA89B,wBAA0B99B,EAAA69B,wBAAwBn+C,OAAI,KAAA6iB,OAAwCvC,EAAA89B,wBAA0B99B,EAAA69B,wBAAwBn+C,OAAI,2BAIxLogB,QAAOE,EAAAijC,wBAAA,eAER7iC,EAAyE,KAAtEG,MAAM,kCAAkCvB,MAAA,kCAA8BwB,EAAA,IACzEC,EAAGT,EAAA89B,sBAAqB,yBAAAnvB,IAE1BvO,EAqBS,UApBNiC,UAAWrC,EAAA69B,wBAAwBn+C,OACpCsf,MAUC6C,GAVD,CAAA1C,QAAA,YAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,iBAUC,CAAAU,QACqCxC,0BAAwBtgB,OAAI,KAAA6iB,OAAyCvC,0BAAwBtgB,OAAI,2BAItIogB,QAAOE,EAAAkjC,8BAAA,IAAA7iC,EAAA,MAAAA,EAAA,KAERD,EAA4D,KAAzDG,MAAM,qBAAqBvB,MAAA,mCAA8B,YAE9D,SAAA6P,kCAQVzO,EA6lBM,MA7lBN0O,GA6lBM,CA5lBJ1O,EA8CM,OA7CJG,MAAM,iBACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAkD,OAAA,UAAAT,WAAA,iBAsBChC,QAAKO,eAAEL,EAAA4iC,mBAAkB,mBACzB70B,aAAU1N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,oBACxDmkB,aAAU5N,EAAA,KAAAA,EAAA,GAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAEzDuW,EAAA,MAAAA,EAAA,IAAAD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAA8E,KAA3EG,MAAM,yBAAyBvB,MAAA,CAAAC,MAAA,kCAA4C,iBAEhF,IACAmB,EAGK,KAFFG,MAAK4C,EAAEnD,EAAA6iC,eAAc,uEACtB7jC,MAAA,CAAAC,MAAA,OAAA6C,WAAA,wDAIO9B,EAAA6iC,eAAc,mBAAAjjC,IAAzBC,EA2iBM,MA3iBNmP,GA2iBM,CAAA3O,EAAA,MAAAA,EAAA,IA1iBJD,EAkBM,OAlBDG,MAAM,qBAAmB,CAC5BH,EAGI,KAHDpB,MAAA,CAAAE,OAAA,YAAAD,MAAA,4BAAuD,CACxDmB,EAAiF,KAA9EG,MAAM,0BAA0BvB,MAAA,sBAAAC,MAAA,eAA8C,kDAGnFmB,EAYI,KAXFpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,6BAAAG,WAAA,UAAAD,QAAA,gEASD,wDAED,IAGFiB,EAoBM,MApBN6O,GAoBM,CAAA5O,EAAA,MAAAA,EAAA,IAnBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,WAElG,IAAAkP,EACA/N,EAeY,kCAAAC,EAAA,KAAAA,EAAA,GAAAO,GAdDZ,EAAAs+B,qBAAoB19B,GAC7BC,YAAY,sBACZ7B,MAAA,CAAAO,MAAA,OAAAC,OAAA,QAAAL,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,mDAFSd,EAAAs+B,0BAkBbl+B,EAKM,MALN+O,GAKM,CAJJ/O,EAGQ,QAHRkP,GAGQ,CAAAnB,EAFN/N,EAAoF,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAApEZ,EAAA6+B,yBAAwBj+B,GAAEtb,KAAK,WAAW0Z,MAAA,CAAAuD,OAAA,0BAA1CvC,EAAA6+B,4CAAoE,6BAOhF7+B,EAAAw+B,uBAAyBx+B,EAAA8+B,yBAAwB,GAAAl/B,IADzDC,EA0GM,MA1GN0P,GA0GM,CApGJnP,EAmDM,MAnDN0P,GAmDM,CAAAzP,EAAA,MAAAA,EAAA,IAtCJD,EASO,OARLpB,MAAA,CAAA7jB,SAAA,WAAAokB,MAAA,OAAAC,OAAA,OAAAJ,WAAA,qHAAA8D,UAAA,qCAOC,UAGH9C,EA0BM,OAzBJG,MAAM,gBACLvB,MAAK6C,EAAA,CAAA1mB,SAAA,iBAAiE6kB,EAAA8+B,yBAAwB,IAAAt/B,OAAA,uHAA6MQ,EAAA6+B,yBAAwB,2CAAA/8B,WAAA,gIAapU1B,EAUO,OATLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,IAAAmX,MAAA,OAAAC,OAAA,MAAAJ,WAAA,2GAQC,iBAKPgB,EA8CM,MA9CN2P,GA8CM,CA7CJ3P,EAcO,OAdP4P,GAYC,WACQvP,EAAGT,EAAA8+B,yBAAyBh0B,QAAO,IAAM,KAClD,GAAAzK,EAAA,MAAAA,EAAA,IAEAD,EA4BM,OA5BDpB,MAAA,CAAAM,QAAA,OAAAI,IAAA,QAA+B,CAClCU,EAQO,OAPLpB,MAAA,CAAAO,MAAA,MAAAC,OAAA,MAAAJ,WAAA,gCAAA8D,UAAA,+CAQF9C,EAQO,OAPLpB,MAAA,CAAAO,MAAA,MAAAC,OAAA,MAAAJ,WAAA,gCAAA8D,UAAA,iDAQF9C,EAQO,OAPLpB,MAAA,CAAAO,MAAA,MAAAC,OAAA,MAAAJ,WAAA,gCAAA8D,UAAA,qEAYR9C,EAqEM,MArEN8P,GAqEM,CApEJ9P,EAiCS,UAhCPG,MAAM,kBACL8B,SAAUrC,EAAAw+B,wBAA0Bx+B,EAAAs+B,qBAAqB5+C,OAC1Dsf,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,iEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAAmjC,8BAAA,eAER/iC,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,0CAERH,EAA4E,KAAzEG,MAAM,oBAAoBvB,MAAA,qDAA+CwB,EAAA,IAC5EC,EAAGT,EAAAw+B,sBAAqB,uBAAAruB,IAG1B/P,EAgCS,UA/BPG,MAAM,eACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,mEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAAojC,oBAAA,IAAA/iC,EAAA,MAAAA,EAAA,KAERD,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAA4E,KAAzEG,MAAM,oBAAoBvB,MAAA,sDAA+C,QAE9E,SAISgB,EAAAu+B,sBAAA3+B,IAAXC,EAkUM,MAlUNuQ,GAkUM,CAAA/P,EAAA,MAAAA,EAAA,IAjUJD,EAGK,MAHDpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,gDAA0E,CAC5EmB,EAAkF,KAA/EG,MAAM,2BAA2BvB,MAAA,sBAAAC,MAAA,eAA8C,cAEpF,IAGAmB,EA0DM,MA1DNiQ,GA0DM,CAhDJjQ,EAKM,MALN8iB,GAKM,CAAA7iB,EAAA,MAAAA,EAAA,IAJJD,EAEC,SAFMpB,MAAA,CAAAC,MAAA,iDAAAK,QAAA,gCACJ,SAAK,IAERc,EAA2F,MAA3F+iB,GAA2F1iB,EAA3CT,uBAAqB/yB,MAAI,YAG3EmzB,EAOM,MAPNkjB,GAOM,CAAAjjB,EAAA,MAAAA,EAAA,IANJD,EAEC,SAFMpB,MAAA,CAAAC,MAAA,iDAAAK,QAAA,gCACJ,UAAM,IAETc,EAEM,MAFNmjB,GAEM9iB,EADDT,EAAAu+B,qBAAqBrE,UAAUz1C,MAAM5H,KAAI,iBAIhDujB,EAgBM,MAhBNojB,GAgBM,CAAAnjB,EAAA,MAAAA,EAAA,IAfJD,EAEC,SAFMpB,MAAA,CAAAC,MAAA,iDAAAK,QAAA,gCACJ,SAAK,IAERc,EAWM,MAXNqjB,GAWMhjB,EADDT,uBAAqBrkB,SAAO,KAInCykB,EAaM,MAbNsjB,GAaM,CAAArjB,EAAA,MAAAA,EAAA,IAZJD,EAEC,SAFMpB,MAAA,CAAAC,MAAA,iDAAAK,QAAA,gCACJ,SAAK,IAERc,EAQM,MARN0jB,GAQMrjB,EANiC,aAAnCT,EAAAu+B,qBAAqBrE,UAAU50C,KAAI,aAA4G,cAAnC0a,EAAAu+B,qBAAqBrE,UAAU50C,KAAI,+BAWvJ8a,EAoJM,MApJNyjB,GAoJM,CAAAxjB,EAAA,MAAAA,EAAA,IAAAa,EAAA,yrBA9HJd,EAoBM,MApBNwjB,GAoBM,CAAAvjB,EAAA,MAAAA,EAAA,IAnBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,WAElG,IAAAkP,EACA/N,EAeY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAdDZ,EAAA2+B,uBAAsB/9B,GAC/BC,YAAY,iBACZ7B,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAL,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,mDAFSd,EAAA2+B,4BAmBL3+B,EAAA4+B,sBAAwB5+B,EAAA8+B,yBAAwB,GAAAl/B,IADxDC,EA+BM,MA/BNmkB,GA+BM,CA1BJ5jB,EAsBM,MAtBN6jB,GAsBM,CAXJ7jB,EAUO,OATLG,MAAM,gBACLvB,MAAK6C,EAAA,CAAAtC,MAA+BS,EAAA8+B,yBAAwB,IAAAt/B,OAAA,uHAA6NQ,EAAA6+B,yBAAwB,2CAAA/8B,WAAA,+BAUtT1B,EAEM,MAFN8jB,GAAoG,WAC3FzjB,EAAGT,EAAA8+B,yBAAyBh0B,QAAO,IAAM,KAClD,MAAA9J,EAAA,OAGFZ,EAqEM,MArEN+jB,GAqEM,CApEJ/jB,EAiCS,UAhCPG,MAAM,gBACL8B,SAAUrC,EAAA4+B,uBAAyB5+B,EAAA2+B,uBAAuBj/C,OAC3Dsf,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,iEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAAqjC,4BAAA,eAERjjC,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,0CAERH,EAA0F,KAAvFG,MAAM,kCAAkCvB,MAAA,qDAA+CwB,EAAA,IAC1FC,EAAGT,EAAA4+B,qBAAoB,uBAAAxa,IAGzBhkB,EAgCS,UA/BPG,MAAM,sBACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,mEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAAsjC,6BAAA,IAAAjjC,EAAA,MAAAA,EAAA,KAERD,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAA6E,KAA1EG,MAAM,qBAAqBvB,MAAA,sDAA+C,YAE/E,WAKJoB,EAsGM,MAtGNokB,GAsGM,CAAAnkB,EAAA,MAAAA,EAAA,IArGJD,EAGK,MAHDpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,gDAA0E,CAC5EmB,EAAiF,KAA9EG,MAAM,0BAA0BvB,MAAA,sBAAAC,MAAA,eAA8C,cAEnF,IAEAmB,EAmBM,MAnBNmkB,GAmBM,CAAAlkB,EAAA,MAAAA,EAAA,IAlBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,YAElG,IAAAkP,EACA/N,EAcS,gCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAbEZ,EAAA85B,kBAAiBl5B,GAC1B5B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,8CAUAmB,EAAyC,UAAjC1yB,MAAM,GAAG20B,SAAA,IAAS,UAAM,KAAAzC,GAAA,GAChCC,EAAiFkD,EAAA,KAAAC,EAA5DhD,EAAAy+B,oBAAN8E,QAAf1jC,EAAiF,UAAtCvvB,IAAKizD,EAAK71D,MAAO61D,GAAA9iC,EAAO8iC,GAAE,EAAAjf,MAAA,gBAZ5DtkB,EAAA85B,uBAgBb15B,EA0EM,MA1ENqkB,GA0EM,CAzEJrkB,EAoCS,UAnCPG,MAAM,gBACL8B,UAAWrC,EAAA85B,mBAAqB95B,EAAA0+B,iBACjC1/B,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,gBAAAxC,QAAA,8BAAAI,IAAA,uDAAAvkB,SAAA,WAAAskB,SAAA,UAiBCK,QAAOE,EAAAwjC,mBAAA,eAERpjC,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,0CAERH,EAA+D,KAA5DG,MAAM,0BAA0BvB,MAAA,gCAA4BwB,EAAA,IAC/DC,EAAGT,EAAA0+B,iBAAgB,uBAAAha,IAGrBtkB,EAkCS,UAjCPG,MAAM,cACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,gBAAAxC,QAAA,8BAAAI,IAAA,wDAAAvkB,SAAA,WAAAskB,SAAA,UAiBCK,QAAOE,EAAAyjC,oBAAA,IAAApjC,EAAA,MAAAA,EAAA,KAERD,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAAwD,KAArDG,MAAM,mBAAmBvB,MAAA,iCAA4B,aAC1D,qCAQVoB,EA6ZM,MA7ZNukB,GA6ZM,CA5ZJvkB,EA8CM,OA7CJG,MAAM,+BACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAkD,OAAA,UAAAT,WAAA,iBAsBChC,QAAKO,iBAAEL,EAAA4iC,mBAAkB,oBACzB70B,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,oBACxDmkB,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAEzDuW,EAAA,MAAAA,EAAA,IAAAD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAAwE,KAArEG,MAAM,mBAAmBvB,MAAA,CAAAC,MAAA,kCAA4C,gBAE1E,IACAmB,EAGK,KAFFG,MAAK4C,EAAEnD,EAAA6iC,eAAc,wEACtB7jC,MAAA,CAAAC,MAAA,0BAAA6C,WAAA,qCAIO9B,EAAA6iC,eAAc,oBAAAjjC,IAAzBC,EA2WM,MA3WN+kB,GA2WM,CAAAvkB,EAAA,OAAAA,EAAA,KA1WJD,EAcM,OAbJG,MAAM,oBACNvB,MAAA,CAAAI,WAAA,4DAAAD,QAAA,4DAQAiB,EAGI,KAHDpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,6BAAAK,QAAA,8BAAAI,IAAA,QAAgG,CACjGU,EAA8D,KAA3DG,MAAM,0BAA0BvB,MAAA,CAAAC,MAAA,eAA2B,4CAMlEmB,EAoCM,MApCN2kB,GAoCM,CAAA1kB,EAAA,MAAAA,EAAA,IAnCJD,EAWQ,SAVNpB,MAAA,CAAAM,QAAA,+BAAAL,MAAA,4EAQD,YAED,IAAAkP,EACA/N,EAsBS,gCAAAC,EAAA,MAAAA,EAAA,IAAAO,GArBEZ,EAAA++B,wBAAuBn+B,GAChC5B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,4DAAAJ,MAAA,6BAAAsD,OAAA,UAAAT,WAAA,mEAYCsgB,SAAQpiB,EAAAkgC,qBACRlpB,QAAK3W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,WAC9CC,OAAI7W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,8BAE9C5W,EAAA,MAAAA,EAAA,IAAAD,EAAgC,UAAxB1yB,MAAM,IAAG,UAAM,KAAAkyB,GAAA,GACvBC,EAESkD,EAAA,KAAAC,EAFYhD,EAAAy+B,oBAAN8E,QAAf1jC,EAES,UAFkCvvB,IAAKizD,EAAK71D,MAAO61D,GAAA9iC,EACvD8iC,GAAE,EAAAve,MAAA,gBAnBEhlB,EAAA++B,6BAyBF/+B,EAAA++B,yBAAAn/B,IAAXC,EA+BM,MA/BNolB,GA+BM,CAAA5kB,EAAA,MAAAA,EAAA,IA9BJD,EAWQ,SAVNpB,MAAA,CAAAM,QAAA,+BAAAL,MAAA,4EAQD,WAED,IAAAkP,EACA/N,EAiBE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAhBSZ,EAAAg/B,kBAAiBp+B,GAC1Btb,KAAK,OACLub,YAAY,mBACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,YAAAC,WAAA,UAAAC,OAAA,4DAAAJ,MAAA,6BAAA6C,WAAA,mEAWCkV,QAAK3W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,WAC9CC,OAAI7W,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMiY,YAAW,2CAfrCjX,EAAAg/B,iCAqBLh/B,EAAA++B,yBAA2B/+B,EAAAqT,iBAAiBpjC,OAAM,GAAA2vB,IAD1DC,EAiDM,MAjDNqlB,GAiDM,CA7CJ9kB,EAcS,UAbNpB,MAAK6C,EAAA,CAAA1C,QAAA,sBAA6E,aAAZa,EAAAi/B,aAAY,iBAAA5/B,OAAA,iGAUlFS,QAAKO,iBAAEL,EAAAi/B,aAAY,aACrB,SAED,GACA7+B,EAcS,UAbNpB,MAAK6C,EAAA,CAAA1C,QAAA,sBAA6E,YAAZa,EAAAi/B,aAAY,iBAAA5/B,OAAA,iGAUlFS,QAAKO,iBAAEL,EAAAi/B,aAAY,YACrB,SAED,GACA7+B,EAcS,UAbNpB,MAAK6C,EAAA,CAAA1C,QAAA,sBAA6E,aAAZa,EAAAi/B,aAAY,iBAAA5/B,OAAA,iGAUlFS,QAAKO,iBAAEL,EAAAi/B,aAAY,aACrB,WAED,MAAAj+B,EAAA,OAIShB,EAAA++B,yBAAAn/B,IAAXC,EAGM,MAHNslB,GAGM,CAFQnlB,EAAAuhC,yBAAyBtxD,OAAM,GAAA2vB,IAA3CC,EAAuG,UAAtD,QAAKY,EAAGT,EAAAuhC,yBAAyBtxD,QAAS,QAAK,KAAA2vB,IAChGC,EAAgD,OAAhDwlB,GAAoC,aAAKrkB,EAAA,OAIhChB,EAAAuhC,yBAAyBtxD,OAAM,GAAA2vB,IAA1CC,EAqNM,MArNNylB,GAqNM,EAAA1lB,GAAA,GApNJC,EAmNMkD,EAAA,KAAAC,EAlNqBhD,EAAAuhC,yBAAwB,CAAzCE,EAAOz9C,SADjB6b,EAmNM,OAjNHvvB,IAAK0T,EACNgb,MAAA,CAAAI,WAAA,UAAAC,OAAA,2CAAAF,QAAA,OAAA2C,WAAA,mBASA1B,EA2DM,OA1DJpB,MAAA,CAAAM,QAAA,oEAAAiD,OAAA,gCAOCzC,QAAKc,GAAEZ,EAAA0jC,oBAAoB1/C,IAAK,CAGjCoc,EA0CM,MA1CNolB,GA0CM,CAxCJplB,EAOM,MAPNqlB,GAOM,CAN4B,aAApBgc,EAAMvH,UAAU50C,MAAIsa,IAAhCC,EAAkF,OAAlF6lB,GAAyE,OACpC,cAApB+b,EAAMvH,UAAU50C,MAAIsa,IAArCC,EAAwF,OAAxF8lB,GAA+E,QAAE/lB,IACjFC,EAA6C,OAA7C+lB,GAAqC,MACrCxlB,EAEO,OAFPylB,GAEOplB,EADFghC,EAAMx0D,MAAI,cAKjBmzB,EAkBM,MAlBN0lB,GAkBM,CAjBQ2b,EAAMvH,UAAUz1C,MAAQg9C,EAAMvH,SAASz1C,KAAKxU,OAAM,GAAA2vB,IAA9DC,EAGO,OAAAkmB,GAH6D,SAElEtlB,EAAGghC,EAAMvH,SAASz1C,KAAK1Q,IAAK/F,GAAoB,iBAADA,EAAiBA,EAAIsQ,OAAOtQ,IAAK6O,KAAI,YAAA+iB,IAEtFC,EAA4B,UAAf,aAED4hC,EAAMtmD,UAAU44B,OAA6B,IAApB0tB,EAAMtmD,SAAS44B,WAApDlU,EAGO,OAAAomB,GAAA,CAAA5lB,EAAA,MAAAA,EAAA,IAFLD,EAAoC,QAA9BpB,MAAA,CAAAC,MAAA,SAAoB,OAAG,IAAAuB,EAAO,QAChCC,EAAGghC,EAAMtmD,SAAS44B,OAAK,MAAA/S,EAAA,OAID,aAApBygC,EAAMtmD,UAAUmK,MAAuBm8C,EAAMtmD,SAASk5B,OAA6B,IAApBotB,EAAMtmD,SAASk5B,OAAKzU,IAD3FC,EAKO,OAAAqmB,GAAA,CAAA7lB,EAAA,MAAAA,EAAA,IAFLD,EAAoC,QAA9BpB,MAAA,CAAAC,MAAA,SAAoB,OAAG,IAAAuB,EAAO,QAChCC,EAAGghC,EAAMtmD,SAASk5B,OAAK,MAAArT,EAAA,SAK/BZ,EAQM,MARN+lB,GAQM1lB,EANFghC,EAAM9lD,QAAgC8lD,EAAM9lD,QAAQ1L,OAAM,GAAgCwxD,EAAM9lD,QAAQiwB,UAAS,YAA0C61B,EAAM9lD,QAAA,cASvKykB,EAGK,KAFFG,MAAK4C,EAAEnD,EAAA2jC,gBAAgB3/C,GAAK,qDAC7Bgb,MAAA,CAAAC,MAAA,8DAMIe,EAAA2jC,gBAAgB3/C,IAAK4b,IAD7BC,EAwIM,MAxINymB,GAwIM,CAnIJlmB,EA6CM,MA7CNmmB,GA6CM,CAAAlmB,EAAA,MAAAA,EAAA,IA5CJD,EAEO,QAFDpB,MAAA,CAAAC,MAAA,8CAAAK,QAAA,gCAA2F,cAEjG,IACAc,EAwCM,MAxCNomB,GAwCM,CAtCwB,aAApBib,EAAMvH,UAAU50C,MAAIsa,IAD5BC,EAYO,OAZP4mB,GAUC,yBAIgC,cAApBgb,EAAMvH,UAAU50C,MAAIsa,IADjCC,EAYO,OAZP6mB,GAUC,2BAED9mB,IACAC,EAYO,OAZP8mB,GAUC,iBAOLvmB,EAyBM,MAzBNwmB,GAyBM,CAxBJxmB,EAQO,OARPwjC,GAQO,CAAAvjC,EAAA,MAAAA,EAAA,IAAAG,EAR0F,aAE/F,IAC4B,aAApBihC,EAAMvH,UAAU50C,UADxBua,EAKO,OALPgkC,GAGC,qBAED7iC,EAAA,SAEFZ,EAcM,MAdN0jC,GAcM,EAAAlkC,GAAA,GAbJC,EAMOkD,EAAA,KAAAC,EALey+B,EAAMvH,UAAUz1C,MAAI,IAAhCnU,EAAKyzD,SADflkC,EAMO,QAJJvvB,IAAKyzD,EACN/kC,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAH,MAAA,oDAAAwB,EAEa,iBAAHnwB,EAAmBA,EAAMgO,OAAOhO,IAAG,WAGtCmxD,EAAMvH,UAAUz1C,MAAkC,IAA1Bg9C,EAAMvH,SAASz1C,KAAKxU,OAG5B+wB,EAAA,QAHkCpB,IAD3DC,EAKO,OALPmkC,GAKOvjC,EADkB,aAApBghC,EAAMvH,UAAU50C,KAAI,gCAM7B8a,EAoBM,MApBN6jC,GAoBM,CAAA5jC,EAAA,MAAAA,EAAA,IAnBJD,EAEO,QAFDpB,MAAA,CAAAC,MAAA,8CAAAK,QAAA,gCAA2F,cAEjG,IACAc,EAeM,MAfN8jC,GAeMzjC,EADDghC,EAAM9lD,SAAO,cAKpBykB,EA+BM,MA/BN+jC,GA+BM,CA9BJ/jC,EAcS,UAbPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,UAAAT,WAAA,YAUChC,QAAKc,GAAEZ,EAAAokC,mBAAmB3C,IAAK,IAAAphC,EAAA,MAAAA,EAAA,KAEhCD,EAAgC,KAA7BG,MAAM,oBAAkB,SAAAC,EAAK,QAClC,QAAA6jC,IACAjkC,EAcS,UAbPpB,MAAA,CAAAG,QAAA,WAAAC,WAAA,UAAAC,OAAA,6BAAAJ,MAAA,2BAAAsD,OAAA,UAAAT,WAAA,YAUChC,QAAKc,GAAEZ,EAAAskC,qBAAqB7C,IAAK,IAAAphC,EAAA,MAAAA,EAAA,KAElCD,EAAiC,KAA9BG,MAAM,qBAAmB,SAAAC,EAAK,QACnC,QAAA+jC,sDAUJvkC,EAAAm/B,gBAAAv/B,IADRC,EAwYM,OAAAvvB,IAAA,EAtYJ0uB,MAAA,CAAA7jB,SAAA,QAAA+kB,IAAA,IAAA9X,KAAA,IAAAC,MAAA,IAAA8X,OAAA,IAAAf,WAAA,qBAAAE,QAAA,0GAaCQ,QAAKO,mBAAOL,EAAAm/B,gBAAc,eAE3B/+B,EAsXM,MAtXNokC,GAsXM,CAzWJpkC,EAqBM,MArBNqkC,GAqBM,CAAApkC,EAAA,OAAAA,EAAA,KApBJD,EAGK,MAHDpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,gDAAiE,CACnEmB,EAA0E,KAAvEG,MAAM,mBAAmBvB,MAAA,sBAAAC,MAAA,eAA8C,eAE5E,IACAmB,EAeS,UAdPpB,MAAA,CAAAI,WAAA,cAAAC,OAAA,OAAAJ,MAAA,0BAAAsD,OAAA,UAAApD,QAAA,WAAA2C,WAAA,cASChC,QAAKO,iBAAEL,EAAAm/B,gBAAc,GACrBpxB,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMC,MAAK,QAC7CgP,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMC,MAAK,aAAAoB,EAAA,OAAAA,EAAA,MAE9CD,EAAiC,KAA9BG,MAAM,qBAAmB,kBAIhCH,EAySM,MAzSNskC,GAySM,CAvSJtkC,EAiBM,YAAAC,EAAA,OAAAA,EAAA,KAhBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,mDAA8F,WAErG,IAAAkP,EACA/N,EAYE,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAXSZ,eAAa/yB,KAAI2zB,GAC1Btb,KAAK,OACL0Z,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,4DAAAJ,MAAA,0CAFS,CAAAqP,EAAAtO,EAAAo/B,aAAanyD,UAe1BmzB,EAQM,MARNukC,GAQM,CAAAx2B,EAPJ/N,EAKE,SAJAlZ,GAAG,sCAAAmZ,EAAA,MAAAA,EAAA,IAAAO,GACMZ,eAAai6B,QAAOr5B,GAC7Btb,KAAK,WACL0Z,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAA+C,OAAA,uBAFS,CAAAuuB,EAAA9wB,EAAAo/B,aAAanF,2BAIxB75B,EAAmG,SAA5FwkC,IAAI,gBAAgB5lC,MAAA,CAAAC,MAAA,6BAAAsD,OAAA,YAAyD,WAAO,MAI7FnC,EAmCM,YAAAC,EAAA,OAAAA,EAAA,KAlCJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,mDAA8F,YAErG,IACAmB,EA8BE,SA7BC1yB,OAAyBsyB,EAAAo/B,aAAalF,UAAUz1C,MAAI,IAAQ1Q,IAAK/F,GAAoB,iBAADA,EAAiBA,EAAIsQ,OAAOtQ,IAAK6O,KAAI,KAG1HyI,KAAK,OACLub,YAAY,+BACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,4DAAAJ,MAAA,8BASCoP,QAAKhO,cAAoB5qB,IAAqC,MAAAgP,EAAOhP,EAAE5E,OAAOnD,MAA2BwO,MAAK,KAA2BC,OAAQnO,GAAcA,EAAE0R,QAA6B3L,IAAK/F,GAAcA,EAAE0R,QAA2BsgB,EAAAo/B,aAAalF,SAAQ,IAA4Bl6B,EAAAo/B,aAAalF,SAAAz1C,OAA8E01C,eAAAn6B,EAAAo/B,aAAalF,UAAUC,gBAAc,CAAAC,MAAA,UAAA31C,KAAA,IAAA41C,WAAoEr6B,EAAAo/B,aAAalF,UAAUG,YAAU,iBAAA/0C,KAAgD0a,EAAAo/B,aAAalF,UAAU50C,MAAI,8BAmBplB8a,EA8BM,YAAAC,EAAA,OAAAA,EAAA,KA7BJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,mDAA8F,WAErG,IACAmB,EAyBS,UAxBN1yB,MAAOsyB,EAAAo/B,aAAalF,UAAU50C,MAAI,YACnC0Z,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,4DAAAJ,MAAA,6BAAAsD,OAAA,WAUC6f,SAAM/hB,EAAA,MAAAA,EAAA,IAAoB5qB,GAA8BuqB,EAAAo/B,aAAalF,SAAQ,IAA4Bl6B,EAAAo/B,aAAalF,SAAA50C,KAAoC7P,EAAE5E,OAAOnD,MAAA+W,KAAiCub,EAAAo/B,aAAalF,UAAUz1C,MAAI,GAAA01C,eAA4Cn6B,EAAAo/B,aAAalF,UAAUC,gBAAc,CAAAC,MAAA,UAAA31C,KAAA,IAAA41C,WAAoEr6B,EAAAo/B,aAAalF,UAAUG,YAAU,yCAWtZj6B,EAA2C,UAAnC1yB,MAAM,aAAY,eAC1B0yB,EAAyC,UAAjC1yB,MAAM,YAAW,WAAO,SAAAm3D,MAKpCzkC,EAmCM,YAAAC,EAAA,OAAAA,EAAA,KAlCJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,mDAA8F,WAErG,IACAmB,EA8BS,UA7BN1yB,MAAOsyB,EAAAo/B,aAAajkD,UAAUmK,MAAI,8BACnC0Z,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,4DAAAJ,MAAA,6BAAAsD,OAAA,WAUC6f,SAAM/hB,EAAA,MAAAA,EAAA,IAAoB5qB,GAA8BuqB,EAAAo/B,aAAajkD,SAAQ,IAA4B6kB,EAAAo/B,aAAajkD,SAAAmK,KAAoC7P,EAAE5E,OAAOnD,MAAAk8B,KAAiC5J,EAAAo/B,aAAajkD,UAAUyuB,MAAI,SAAAyK,MAAyCrU,EAAAo/B,aAAajkD,UAAUk5B,OAAK,EAAAN,MAAkC/T,EAAAo/B,aAAajkD,UAAU44B,OAAK,4gBAsBvW3T,EAyDM,MAzDN0kC,GAyDM,CAxDJ1kC,EA2BM,YAAAC,EAAA,OAAAA,EAAA,KA1BJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,mDAA8F,SAErG,IACAmB,EAsBE,SArBC1yB,MAAOsyB,EAAAo/B,aAAajkD,UAAUk5B,OAAK,EACpC/uB,KAAK,SACL0Z,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,4DAAAJ,MAAA,8BASCoP,QAAKhO,EAAA,MAAAA,EAAA,IAAsB5qB,GAAgCuqB,EAAAo/B,aAAajkD,SAAQ,IAA8B6kB,EAAAo/B,aAAajkD,SAAAk5B,MAAuC96B,OAAO9D,EAAE5E,OAAOnD,QAAK,EAAAk8B,KAAoC5J,EAAAo/B,aAAajkD,UAAUyuB,MAAI,SAAAmK,MAA2C/T,EAAAo/B,aAAajkD,UAAU44B,OAAK,EAAAzuB,KAAmC0a,EAAAo/B,aAAajkD,UAAUmK,MAAI,+CAYhY8a,EA2BM,YAAAC,EAAA,OAAAA,EAAA,KA1BJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,mDAA8F,SAErG,IACAmB,EAsBE,SArBC1yB,MAAOsyB,EAAAo/B,aAAajkD,UAAU44B,OAAK,EACpCzuB,KAAK,SACL0Z,MAAA,CAAAO,MAAA,OAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,4DAAAJ,MAAA,8BASCoP,QAAKhO,EAAA,MAAAA,EAAA,IAAsB5qB,GAAgCuqB,EAAAo/B,aAAajkD,SAAQ,IAA8B6kB,EAAAo/B,aAAajkD,SAAA44B,MAAuCx6B,OAAO9D,EAAE5E,OAAOnD,QAAK,EAAA4X,KAAoC0a,EAAAo/B,aAAajkD,UAAUmK,MAAI,8BAAAskB,KAA+D5J,EAAAo/B,aAAajkD,UAAUyuB,MAAI,SAAAyK,MAA2CrU,EAAAo/B,aAAajkD,UAAUk5B,OAAK,qBAe9ZjU,EAwEM,MAxEN2kC,GAwEM,CAAA1kC,EAAA,OAAAA,EAAA,KArEJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,+BAAAL,MAAA,mDAA+F,WAEtG,IACAmB,EAiEM,MAjEN4kC,GAiEM,CAhEJ5kC,EAiBQ,QAjBR6kC,GAiBQ,CAdN7kC,EAYE,SAXA9a,KAAK,WACJ4/C,QAASllC,EAAAo/B,aAAa+C,WAAWC,mBAAgB,EACjDhgB,SAAM/hB,EAAA,MAAAA,EAAA,IAAwB5qB,GAAkCuqB,EAAAo/B,aAAa+C,UAAS,IAAgCniC,EAAAo/B,aAAa+C,UAAAC,iBAAqD3sD,EAAE5E,OAAOq0D,QAAA7C,iBAAmDriC,EAAAo/B,aAAa+C,WAAWE,mBAAgB,EAAAC,YAAgDtiC,EAAAo/B,aAAa+C,WAAWG,aAAW,sCAShX,yBAGJliC,EAiBQ,QAjBR+kC,GAiBQ,CAdN/kC,EAYE,SAXA9a,KAAK,WACJ4/C,QAASllC,EAAAo/B,aAAa+C,WAAWE,mBAAgB,EACjDjgB,SAAM/hB,EAAA,MAAAA,EAAA,IAAwB5qB,GAAkCuqB,EAAAo/B,aAAa+C,UAAS,IAAgCniC,EAAAo/B,aAAa+C,UAAAE,iBAAqD5sD,EAAE5E,OAAOq0D,QAAA9C,iBAAmDpiC,EAAAo/B,aAAa+C,WAAWC,mBAAgB,EAAAE,YAAgDtiC,EAAAo/B,aAAa+C,WAAWG,aAAW,sCAShX,yBAGJliC,EA2BM,YAAAC,EAAA,OAAAA,EAAA,KA1BJD,EAEQ,SAFDpB,MAAA,CAAAC,MAAA,0BAAAK,QAAA,gCAAyE,iBAEhF,IACAc,EAsBE,SArBC1yB,MAAOsyB,EAAAo/B,aAAa+C,WAAWG,aAAW,GAC3Ch9C,KAAK,SACLub,YAAY,UACZ7B,MAAA,CAAAO,MAAA,OAAAJ,QAAA,MAAAC,WAAA,UAAAC,OAAA,2DAAAJ,MAAA,8BASCoP,QAAKhO,EAAA,MAAAA,EAAA,IAAwB5qB,GAAkCuqB,EAAAo/B,aAAa+C,UAAS,IAAgCniC,EAAAo/B,aAAa+C,UAAAG,YAA8D,KAAd7sD,EAAE5E,OAAOnD,WAAsB6L,OAAO9D,EAAE5E,OAAOnD,OAAK00D,iBAA6CpiC,EAAAo/B,aAAa+C,WAAWC,mBAAgB,EAAAC,iBAAqDriC,EAAAo/B,aAAa+C,WAAWE,mBAAgB,uBAejajiC,EAmBM,YAAAC,EAAA,OAAAA,EAAA,KAlBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,mDAA8F,WAErG,IAAAkP,EACA/N,EAcY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAbDZ,eAAarkB,QAAOilB,GAC7B5B,MAAA,CAAAO,MAAA,4BAAAJ,QAAA,OAAAC,WAAA,UAAAC,OAAA,4DAAAJ,MAAA,6BAAA6B,OAAA,gDADS,CAAAwN,EAAAtO,EAAAo/B,aAAazjD,eAkB5BykB,EAqCM,MArCNglC,GAqCM,CApCJhlC,EAgBS,UAfPpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,OAAAC,OAAA,8BAAAJ,MAAA,2BAAAsD,OAAA,UAAAT,WAAA,YAUChC,QAAKO,iBAAEL,EAAAm/B,gBAAc,GACrBpxB,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMI,WAAU,QAClD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMI,WAAU,SACpD,OAED,IACAgB,EAkBS,UAjBPpB,MAAA,CAAAG,QAAA,YAAAC,WAAA,UAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,YAWChC,QAAOE,EAAAqlC,gBACPt3B,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMI,WAAU,WAClD6O,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAE5E,OAAOmuB,MAAMI,WAAU,gBAAAiB,EAAA,OAAAA,EAAA,MAEnDD,EAA0D,KAAvDG,MAAM,mBAAmBvB,MAAA,mCAA8B,QAE5D,0BAMNoB,EAukBM,MAvkBNk9B,GAukBM,CAtkBJl9B,EA8CM,OA7CJG,MAAM,iBACNvB,MAAA,CAAAM,QAAA,gEAAAH,QAAA,YAAAC,WAAA,2PAAAC,OAAA,yLAAAkD,OAAA,UAAAT,WAAA,iBAsBChC,QAAKO,iBAAEL,EAAA4iC,mBAAkB,kBACzB70B,aAAU1N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,oBACxDmkB,aAAU5N,EAAA,MAAAA,EAAA,IAAG5qB,GAAYA,EAAEu4B,cAAchP,MAAMlV,UAAS,mBAEzDuW,EAAA,OAAAA,EAAA,KAAAD,EAaK,MAZHpB,MAAA,CAAAE,OAAA,IAAAD,MAAA,8CAAAK,QAAA,8BAAAI,IAAA,SAQC,CAEDU,EAA6E,KAA1EG,MAAM,wBAAwBvB,MAAA,CAAAC,MAAA,kCAA4C,eAE/E,IACAmB,EAGK,KAFFG,MAAK4C,EAAEnD,EAAA6iC,eAAc,sEACtB7jC,MAAA,CAAAC,MAAA,OAAA6C,WAAA,wDAIO9B,EAAA6iC,eAAc,kBAAAjjC,IAAzBC,EAqhBM,MArhBNylC,GAqhBM,CAAAjlC,EAAA,OAAAA,EAAA,KAAAa,EAAA,sqBAnfJd,EAoBM,MApBNmlC,GAoBM,CAAAllC,EAAA,OAAAA,EAAA,KAnBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,WAElG,IAAAkP,EACA/N,EAeY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAdDZ,EAAA+9B,qBAAoBn9B,GAC7BC,YAAY,2BACZ7B,MAAA,CAAAO,MAAA,OAAAC,OAAA,QAAAL,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,mDAFSd,EAAA+9B,0BAkBb39B,EAKM,MALNolC,GAKM,CAJJplC,EAGQ,QAHRqlC,GAGQ,CAAAt3B,EAFN/N,EAAoF,+BAAAC,EAAA,MAAAA,EAAA,IAAAO,GAApEZ,EAAAo+B,yBAAwBx9B,GAAEtb,KAAK,WAAW0Z,MAAA,CAAAuD,OAAA,0BAA1CvC,EAAAo+B,8CAAoE,6BAOhFp+B,EAAAi+B,uBAAyBj+B,EAAAq+B,yBAAwB,GAAAz+B,IADzDC,EA0GM,MA1GN6lC,GA0GM,CApGJtlC,EAmDM,MAnDNulC,GAmDM,CAAAtlC,EAAA,OAAAA,EAAA,KAtCJD,EASO,OARLpB,MAAA,CAAA7jB,SAAA,WAAAokB,MAAA,OAAAC,OAAA,OAAAJ,WAAA,sHAAA8D,UAAA,qCAOC,UAGH9C,EA0BM,OAzBJG,MAAM,gBACLvB,MAAK6C,EAAA,CAAA1mB,SAAA,iBAAiE6kB,EAAAq+B,yBAAwB,IAAA7+B,OAAA,uHAA6MQ,EAAAo+B,yBAAwB,2CAAAt8B,WAAA,mIAapU1B,EAUO,OATLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,IAAAmX,MAAA,OAAAC,OAAA,MAAAJ,WAAA,2GAQC,iBAKPgB,EA8CM,MA9CNwlC,GA8CM,CA7CJxlC,EAcO,OAdPylC,GAYC,WACQplC,EAAGT,EAAAq+B,yBAAyBvzB,QAAO,IAAM,KAClD,GAAAzK,EAAA,OAAAA,EAAA,KAEAD,EA4BM,OA5BDpB,MAAA,CAAAM,QAAA,OAAAI,IAAA,QAA+B,CAClCU,EAQO,OAPLpB,MAAA,CAAAO,MAAA,MAAAC,OAAA,MAAAJ,WAAA,gCAAA8D,UAAA,+CAQF9C,EAQO,OAPLpB,MAAA,CAAAO,MAAA,MAAAC,OAAA,MAAAJ,WAAA,gCAAA8D,UAAA,iDAQF9C,EAQO,OAPLpB,MAAA,CAAAO,MAAA,MAAAC,OAAA,MAAAJ,WAAA,gCAAA8D,UAAA,qEAYR9C,EAqEM,MArEN0lC,GAqEM,CApEJ1lC,EAiCS,UAhCPG,MAAM,kBACL8B,SAAUrC,EAAAi+B,wBAA0Bj+B,EAAA+9B,qBAAqBr+C,OAC1Dsf,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,kEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAA+lC,6BAAA,iBAER3lC,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,4CAERH,EAA4E,KAAzEG,MAAM,oBAAoBvB,MAAA,qDAA+CwB,EAAA,IAC5EC,EAAGT,EAAAi+B,sBAAqB,wBAAA+H,IAG1B5lC,EAgCS,UA/BPG,MAAM,eACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,mEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAAimC,oBAAA,IAAA5lC,EAAA,OAAAA,EAAA,MAERD,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAA4E,KAAzEG,MAAM,oBAAoBvB,MAAA,sDAA+C,QAE9E,SAISgB,EAAAg+B,qBAAAp+B,IAAXC,EA+RM,MA/RNqmC,GA+RM,CAAA7lC,EAAA,OAAAA,EAAA,KA9RJD,EAGK,MAHDpB,MAAA,CAAAE,OAAA,aAAAD,MAAA,gDAA0E,CAC5EmB,EAAkF,KAA/EG,MAAM,2BAA2BvB,MAAA,sBAAAC,MAAA,eAA8C,eAEpF,IACAmB,EAiBM,MAjBN+lC,GAiBM1lC,EADDT,EAAAg+B,qBAAmB,GAGxB59B,EAoCM,OApCDG,MAAM,iBAAiBvB,MAAA,qBAAAM,QAAA,OAAAI,IAAA,UAC1BU,EAkCS,UAjCPG,MAAM,cACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,6BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,gBAAAxC,QAAA,8BAAAI,IAAA,uDAAAvkB,SAAA,WAAAskB,SAAA,UAiBCK,QAAOE,EAAAomC,mBAAA,IAAA/lC,EAAA,OAAAA,EAAA,MAERD,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAAwD,KAArDG,MAAM,mBAAmBvB,MAAA,iCAA4B,WAC1D,SAIFoB,EA+NM,MA/NNimC,GA+NM,CAAAhmC,EAAA,OAAAA,EAAA,KAAAa,EAAA,ksBAzMJd,EAoBM,MApBNkmC,GAoBM,CAAAjmC,EAAA,OAAAA,EAAA,KAnBJD,EAEQ,SAFDpB,MAAA,CAAAM,QAAA,8BAAAL,MAAA,gDAA2F,WAElG,IAAAkP,EACA/N,EAeY,kCAAAC,EAAA,MAAAA,EAAA,IAAAO,GAdDZ,EAAAk+B,cAAat9B,GACtBC,YAAY,iBACZ7B,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAL,QAAA,OAAAC,WAAA,UAAAC,OAAA,0CAAAJ,MAAA,6BAAA6B,OAAA,mDAFSd,EAAAk+B,mBAmBLl+B,EAAAm+B,sBAAwBn+B,EAAAq+B,yBAAwB,GAAAz+B,IADxDC,EA0GM,MA1GN0mC,GA0GM,CApGJnmC,EAmDM,MAnDNomC,GAmDM,CAAAnmC,EAAA,OAAAA,EAAA,KAtCJD,EASO,OARLpB,MAAA,CAAA7jB,SAAA,WAAAokB,MAAA,OAAAC,OAAA,OAAAJ,WAAA,sHAAA8D,UAAA,qCAOC,UAGH9C,EA0BM,OAzBJG,MAAM,gBACLvB,MAAK6C,EAAA,CAAA1mB,SAAA,iBAAyE6kB,EAAAq+B,yBAAwB,IAAA7+B,OAAA,uHAA6NQ,EAAAo+B,yBAAwB,2CAAAt8B,WAAA,mIAa5V1B,EAUO,OATLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,IAAAmX,MAAA,OAAAC,OAAA,MAAAJ,WAAA,2GAQC,iBAKPgB,EA8CM,MA9CNqmC,GA8CM,CA7CJrmC,EAcO,OAdPsmC,GAYC,WACQjmC,EAAGT,EAAAq+B,yBAAyBvzB,QAAO,IAAM,KAClD,GAAAzK,EAAA,OAAAA,EAAA,KAEAD,EA4BM,OA5BDpB,MAAA,CAAAM,QAAA,OAAAI,IAAA,QAA+B,CAClCU,EAQO,OAPLpB,MAAA,CAAAO,MAAA,MAAAC,OAAA,MAAAJ,WAAA,gCAAA8D,UAAA,+CAQF9C,EAQO,OAPLpB,MAAA,CAAAO,MAAA,MAAAC,OAAA,MAAAJ,WAAA,gCAAA8D,UAAA,iDAQF9C,EAQO,OAPLpB,MAAA,CAAAO,MAAA,MAAAC,OAAA,MAAAJ,WAAA,gCAAA8D,UAAA,qEAYR9C,EAqEM,MArENumC,GAqEM,CApEJvmC,EAiCS,UAhCPG,MAAM,gBACL8B,SAAUrC,EAAAm+B,uBAAyBn+B,EAAAk+B,cAAcx+C,OAClDsf,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,iEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAA4mC,2BAAA,iBAERxmC,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,4CAERH,EAA0F,KAAvFG,MAAM,kCAAkCvB,MAAA,qDAA+CwB,EAAA,IAC1FC,EAAGT,EAAAm+B,qBAAoB,uBAAA0I,IAGzBzmC,EAgCS,UA/BPG,MAAM,sBACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,oDAAAC,OAAA,8BAAAJ,MAAA,+CAAAsD,OAAA,UAAAT,WAAA,mEAAA3mB,SAAA,WAAAskB,SAAA,UAcCK,QAAOE,EAAA8mC,oBAAA,IAAAzmC,EAAA,OAAAA,EAAA,MAERD,EAWO,OAVLpB,MAAA,CAAA7jB,SAAA,WAAA+kB,IAAA,IAAA9X,KAAA,QAAAmX,MAAA,OAAAC,OAAA,OAAAJ,WAAA,6EAAA0C,WAAA,aASAvB,MAAM,2BAERH,EAA6E,KAA1EG,MAAM,qBAAqBvB,MAAA,sDAA+C,YAE/E,yGCzzEVuB,MAAM,yBACNvB,MAAA,CAAAM,QAAA,iCAAAE,OAAA,OAAAJ,WAAA,UAAAH,MAAA,gBAwGEsB,MAAM,aACNvB,MAAA,CAAAM,QAAA,OAAAF,WAAA,yKAoCQ6B,GAAA,CAAAV,MAAM,iBAMdA,MAAM,gBACNvB,MAAA,CAAAsD,KAAA,8CAAAnD,QAAA,6IA8BN,MAaM4nC,EAAYroC,EAEhB,YAGIsoC,EAAe,CACnBpjC,SAAUqjC,GACVjZ,QAASkZ,GACTC,MAAOC,GACPpjC,UAAWqjC,GACX58B,OAAQ68B,GACRjzC,MAAOkzC,GACPC,QAASC,GACTC,MAAOC,GACPC,IAAKC,GACLC,KAAMC,IAIFC,EAAmBliC,EAAS,IAAMkhC,EAAaD,EAAUr5D,QAGzDu6D,EAAiBniC,EAAS,MAC9BihC,UAAWA,EAAUr5D,iBApCV,CACX,CAAE4C,IAAK,WAAY0hD,MAAO,KAAM1uB,KAAM,mBACtC,CAAEhzB,IAAK,UAAW0hD,MAAO,OAAQ1uB,KAAM,oBACvC,CAAEhzB,IAAK,QAAS0hD,MAAO,KAAM1uB,KAAM,qBACnC,CAAEhzB,IAAK,YAAa0hD,MAAO,MAAO1uB,KAAM,wBACxC,CAAEhzB,IAAK,QAAS0hD,MAAO,QAAS1uB,KAAM,oBACtC,CAAEhzB,IAAK,SAAU0hD,MAAO,QAAS1uB,KAAM,yBACvC,CAAEhzB,IAAK,UAAW0hD,MAAO,OAAQ1uB,KAAM,2BACvC,CAAEhzB,IAAK,QAAS0hD,MAAO,OAAQ1uB,KAAM,qBACrC,CAAEhzB,IAAK,MAAO0hD,MAAO,WAAY1uB,KAAM,qBACvC,CAAEhzB,IAAK,OAAQ0hD,MAAO,KAAM1uB,KAAM,yGA8BjB4kC,IACjB5iC,QAAQC,IAAI,SAAU2iC,GACtBnB,EAAUr5D,MAAQw6D,iBAIE,KACpBC,iBAIiB,KACjBjP,EAAE,0BAA0BkP,QAAQ,wHAxOpC,OAAAxoC,IAAAC,EAkKM,MAlKNS,GAkKM,CAAAD,EAAA,KAAAA,EAAA,GA7JJD,EAeM,OAdJpB,MAAA,CAAAI,WAAA,oDAAAH,MAAA,6BAAAE,QAAA,8KAYD,wBAED,IAGAiB,EA+EM,OA9EJG,MAAM,eACNvB,MAAA,CAAAG,QAAA,YAAAC,WAAA,gEAAAE,QAAA,mxBAiCAc,EA2CM,OA3CDG,MAAM,iBAAiBvB,MAAA,CAAAM,QAAA,OAAAI,IAAA,gCAC1BU,EAoBS,UAnBPG,MAAM,gCACNG,MAAM,MACN1B,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAF,QAAA,yDAAAD,OAAA,OAAAD,WAAA,4BAAAH,MAAA,gCAAAsD,OAAA,UAAAT,WAAA,oCAcChC,QAAOE,EAAAqoC,eAAA,IAAAhoC,EAAA,KAAAA,EAAA,IAERD,EAAiC,KAA9BG,MAAM,qBAAmB,aAE9BH,EAoBS,UAnBPG,MAAM,6BACNG,MAAM,KACN1B,MAAA,CAAAO,MAAA,OAAAC,OAAA,OAAAF,QAAA,yDAAAD,OAAA,OAAAD,WAAA,4BAAAH,MAAA,gCAAAsD,OAAA,UAAAT,WAAA,oCAcChC,QAAOE,EAAAsoC,YAAA,IAAAjoC,EAAA,KAAAA,EAAA,IAERD,EAAiC,KAA9BG,MAAM,qBAAmB,iBAMlCH,EAwCM,MAxCNO,GAwCM,EAAAf,IA5BJC,EA2BMkD,EAAA,KAAAC,EA1BUhD,EAAAuoC,KAAPC,GADTpoC,EA2BM,OAzBH9vB,IAAKk4D,EAAIl4D,IACTiwB,MAAK4C,EAAA,eAAkBnD,EAAA+mC,YAAcyB,EAAIl4D,KACpC,aACL0uB,MAAK6C,EAAA,CAAAS,KAAA,yMAA4WlD,WAAAY,EAAA+mC,YAAcyB,EAAIl4D,IAAG,wBAAA2uB,MAA+Ce,EAAA+mC,YAAcyB,EAAIl4D,IAAG,iBAAAm4D,aAA+CzoC,EAAA+mC,YAAcyB,EAAIl4D,IAAG,4CAAAqyC,SAAA,0BAkB9gB7iB,QAAKc,GAAEZ,EAAA0oC,UAAUF,EAAIl4D,MAAG,CAEzB8vB,EAA0C,KAAtCG,MAAK4C,EAAA,CAAEqlC,EAAIllC,KAAY,cAAU,QACrClD,EAA8C,OAA9Ca,GAA8CR,EAAnB+nC,EAAIxW,OAAK,OAAAjxB,YAKxCX,EAaM,MAbNgB,GAaM,EAAAxB,IADJ+oC,EAA6EC,EAA7D5oC,EAAAgoC,kBAAhBa,EAA6E,CAA1Cv4D,IAAK0vB,EAAA+mC,WAAmB/mC,EAAAioC,gBAAc,oRChK7EU,EAAa3oC,EAAA,qCCkiBf,SAAS8oC,KAEP,MAAMC,EAAe7P,EAAE,4BACvB,GAAI6P,EAAa94D,OAAS,EAExB,OADA84D,EAAaC,OAAO,KACbD,EAGT,MAAME,EAAWhjC,OAAOijC,YAAc,IAiBhCC,EAAYjQ,EAAE,grBAdP,CACX,CAAE5oD,IAAK,WAAY0hD,MAAO,QAAS1uB,KAAM,mBACzC,CAAEhzB,IAAK,UAAW0hD,MAAO,UAAW1uB,KAAM,oBAC1C,CAAEhzB,IAAK,QAAS0hD,MAAO,QAAS1uB,KAAM,qBACtC,CAAEhzB,IAAK,YAAa0hD,MAAO,SAAU1uB,KAAM,wBAC3C,CAAEhzB,IAAK,QAAS0hD,MAAO,WAAY1uB,KAAM,oBACzC,CAAEhzB,IAAK,SAAU0hD,MAAO,WAAY1uB,KAAM,yBAC1C,CAAEhzB,IAAK,UAAW0hD,MAAO,UAAW1uB,KAAM,2BAC1C,CAAEhzB,IAAK,QAAS0hD,MAAO,WAAY1uB,KAAM,qBACzC,CAAEhzB,IAAK,MAAO0hD,MAAO,cAAe1uB,KAAM,qBAC1C,CAAEhzB,IAAK,OAAQ0hD,MAAO,OAAQ1uB,KAAM,gCA+B/BvvB,IACCy0D,GAAO,oDACgCA,EAAIl4D,sWAazCk4D,EAAIxW,iCAIPn1C,KAAK,uBAKZssD,EAAUz2B,KAAK,oBAAoB02B,MACjC,WACElQ,EAAE3qD,MAAM86D,IAAI,CACVjqC,WAAY,2BACZH,MAAO,UACPnV,UAAW,oBAEf,EACA,WACEovC,EAAE3qD,MAAM86D,IAAI,CACVjqC,WAAY,cACZH,MAAO,UACPnV,UAAW,iBAEf,GAIFq/C,EAAUz2B,KAAK,oBAAoB0mB,GAAG,QAAS,WAC7C,MAAM8O,EAAShP,EAAE3qD,MAAMuD,KAAK,OACtBw3D,EAAQpQ,EAAE,0BAGXoQ,EAAMC,GAAG,aACZD,EAAMN,OAAO,KAIf/9B,WAAW,KACT,MAYMu+B,EAZW,CACf,WACA,UACA,QACA,YACA,QACA,SACA,UACA,QACA,MACA,QAEwBzgD,QAAQm/C,GAElC,GAAIsB,GAAY,EAAG,CAEjB,MAAMjB,EAAOe,EAAM52B,KAAK,aACpB61B,EAAKt4D,OAASu5D,GAChBjB,EAAKkB,GAAGD,GAAUE,QAAQ,QAE9B,GACC,KAGHP,EAAUf,QAAQ,IACpB,GAGAe,EAAUE,IAAI,CACZ,kBAAmB,OACnB,kBAAmB,oBAGrB,MAAM/lC,EAAO41B,EAAE,+HAKF+P,EAAW,OAAS,0BACnBA,EAAW,OAAS,yZAWjBA,EAAW,OAAS,6CAMrC,IAAIU,EAAiC,KAwIrC,OAjFArmC,EAAK8lC,MACH,WACMO,IACFttB,aAAastB,GACbA,EAAkB,MAGpBzQ,EAAE3qD,MAAM86D,IAAI,CACVv/C,UAAW,2BACX0kB,UAAW,oEACXyI,YAAa,YAIfkyB,EAAUE,IAAI,UAAW,KAAKzqC,OAlElC,WACE,MAAMgrC,EAAUtmC,EAAKniB,SACf0oD,EAAYvmC,EAAKwmC,cAAgB,GACjCC,EAAazmC,EAAK0mC,eAAiB,GACnCC,EAAYd,EAAUW,cAAgB,IACtCI,EAAaf,EAAUa,eAAiB,IAI9C,GAFA1kC,QAAQC,IAAI,aAAc,CAAEqkC,UAASC,YAAWE,aAAYE,YAAWC,gBAElEN,EAEH,YADAtkC,QAAQoC,KAAK,eAKf,IAAItf,EAAOwhD,EAAQxhD,KAAO6hD,EAAY,GAClC/pC,EAAM0pC,EAAQ1pC,IAElBoF,QAAQC,IAAI,iBAAkB,CAAEnd,OAAM8X,QAGlC9X,EAAO,KACTA,EAAOwhD,EAAQxhD,KAAOyhD,EAAY,GAClCvkC,QAAQC,IAAI,gBAAiBnd,IAI/B,MAAM+hD,EAAcjR,EAAEjzB,QAAQ1G,SAAW,KACrCnX,EAAO6hD,EAAYE,EAAc,KACnC/hD,EAAOwhD,EAAQxhD,MAAQ6hD,EAAYJ,GAAa,EAE5CD,EAAQ1pC,IAAMgqC,EAAa,IAC7BhqC,EAAM0pC,EAAQ1pC,IAAMgqC,EAAa,GACjC5kC,QAAQC,IAAI,gBAAiB,CAAEnd,OAAM8X,UAGrCA,EAAM0pC,EAAQ1pC,IAAM6pC,EAAa,GACjCzkC,QAAQC,IAAI,gBAAiB,CAAEnd,OAAM8X,UAKzC,MAAMkqC,EAAelR,EAAEjzB,QAAQzG,UAAY,KACrC6qC,EAAYhuD,KAAK0Y,IAAI,GAAI1Y,KAAKC,IAAI8L,EAAM+hD,EAAcF,EAAY,KAClEK,EAAWjuD,KAAK0Y,IAAI,GAAI1Y,KAAKC,IAAI4jB,EAAKkqC,EAAe/tD,KAAKC,IAAI4tD,EAA2B,GAAfE,GAAsB,KAEtG9kC,QAAQC,IAAI,UAAW,CAAE8kC,YAAWC,WAAUH,cAAaC,iBAE3DjB,EAAUE,IAAI,CAAEjhD,KAAMiiD,EAAY,KAAMnqC,IAAKoqC,EAAW,MAC1D,CAkBIC,GACApB,EAAUE,IAAI,UAAW,KAAKmB,OAAOxB,OAAO,KAC5C1jC,QAAQC,IAAI,iBAAkB4jC,EAAUhoD,SAC1C,EACA,WACE+3C,EAAE3qD,MAAM86D,IAAI,CACVv/C,UAAW,wBACX0kB,UAAW,mEACXyI,YAAa,YAIf0yB,EAAkB1jC,OAAOgF,WAAW,KAC7Bk+B,EAAUI,GAAG,WAChBJ,EAAUf,QAAQ,MAEnB,IACL,GAIFe,EAAUC,MACR,WACMO,IACFttB,aAAastB,GACbA,EAAkB,KAEtB,EACA,WACER,EAAUf,QAAQ,IACpB,GAIF9kC,EAAK81B,GAAG,QAAS,KACf,MAAMkQ,EAAQpQ,EAAE,0BACZoQ,EAAMC,GAAG,aAEXD,EAAMlB,QAAQ,KACd9kC,EAAK0lC,OAAO,MAGZM,EAAMN,OAAO,OAKjB1lC,EAAKmnC,UAAU,CACbC,YAAa,SACbC,QAAQ,EACR96D,MAAO,WACLqpD,EAAE3qD,MAAM86D,IAAI,aAAc,QAC1BF,EAAUqB,MACZ,EACAI,KAAM,WACJ1R,EAAE3qD,MAAM86D,IAAI,aAAc,gBAC5B,IAGFnQ,EAAE,QAAQC,OAAOgQ,GACjBjQ,EAAE,QAAQC,OAAO71B,GAEjBgC,QAAQC,IAAI,cAAejC,GAC3BgC,QAAQC,IAAI,aAAc4jC,GAC1B7jC,QAAQC,IAAI,iBAAkB2zB,EAAE,yBAAyBjpD,OAAS,GAE3DqzB,CACT,CAGO,SAAS6kC,KACd,MAAMmB,EAAQpQ,EAAE,0BACK,IAAjBoQ,EAAMr5D,SAEVq5D,EAAMlB,QAAQ,KACdU,KACF,CAGO,SAAS+B,KACd,MAAMvB,EAAQpQ,EAAE,0BACK,IAAjBoQ,EAAMr5D,SAENq5D,EAAMC,GAAG,YACXD,EAAMlB,QAAQ,KAEdkB,EAAMN,OAAO,KAEjB,CA91BA9P,EAAE,KAIA,GAHA5zB,QAAQC,IAAI,gBAGqC,IAA7C2zB,EAAE,gCAAgCjpD,OAAc,CAClD,MAAM66D,EAAgB,ukfA+ctB5R,EAAE,QAAQC,OAAO2R,GACjBxlC,QAAQC,IAAI,kBACd,CAEA0F,WAAW,KACT3F,QAAQC,IAAI,2BAGZ,MAAMwlC,EAAgB7R,EAAE,0BAEpB6R,EAAc96D,OAAS,IACzBq1B,QAAQC,IAAI,qCAEZwlC,EAAc9+C,SAEdgf,WAAW,KACT3F,QAAQC,IAAI,sBACX,MAGLD,QAAQC,IAAI,8BAA8B5c,MAAOu3B,eAGjD,MAAM8qB,EAAiB9R,EAAE,kiBAuBzBA,EAAE,QAAQC,OAAO6R,GACjB1lC,QAAQC,IAAI,uBAAwBylC,EAAe,IAGnD1lC,QAAQC,IAAI,sBAAuBylC,EAAe,IAElD,MAAMC,EAAMC,EAAU,IAAMC,IAAIC,GAEhC,IACEH,EAAII,MAAML,EAAe,IACzB1lC,QAAQC,IAAI,eACZD,QAAQC,IAAI,UAAYylC,EAAe,GAAWM,YACpD,OAASj4D,GACPiyB,QAAQjyB,MAAM,cAAeA,GAC7BiyB,QAAQjyB,MAAM,QAAS5B,KAAKC,UAAU2B,EAAO,KAAM,IACnDiyB,QAAQjyB,MAAM,QAAUA,EAAgBk4D,MAC1C,CAEAjmC,QAAQC,IAAI,6BAA8BylC,EAAe,IAGzD//B,WAAW,KACT69B,KACAxjC,QAAQC,IAAI,kBACX,MACF","names":["toastr_1","toastr","$constructor","name","initializer","params","init","inst","def","_a","Object","defineProperty","value","_zod","enumerable","traits","Set","add","k","_","prototype","bind","constr","Parent","Definition","this","deferred","fn","Symbol","hasInstance","has","$ZodAsyncError","Error","constructor","super","$ZodEncodeError","globalConfig","config","newConfig","jsonStringifyReplacer","toString","cached","getter","nullish","input","cleanRegex","source","start","startsWith","end","endsWith","length","slice","EVALUATING","defineLazy","object","key","get","undefined","set","v","configurable","assignProp","target","prop","writable","mergeDefs","defs","mergedDescriptors","descriptors","getOwnPropertyDescriptors","assign","defineProperties","esc","str","JSON","stringify","captureStackTrace","_args","isObject","data","Array","isArray","allowsEval","navigator","userAgent","includes","Function","isPlainObject","o","ctor","prot","hasOwnProperty","call","shallowClone","propertyKeyTypes","escapeRegex","replace","clone","cl","parent","normalizeParams","_params","error","message","aborted","x","startIndex","i","issues","continue","prefixIssues","path","map","iss","unshift","unwrapMessage","finalizeIssue","ctx","full","customError","localeError","reportInput","getLengthableOrigin","issue","args","code","util.jsonStringifyReplacer","$ZodError","$ZodRealError","_parse","_Err","schema","_ctx","async","result","run","Promise","core.$ZodAsyncError","e","Err","util.finalizeIssue","core.config","util.captureStackTrace","callee","_parseAsync","_safeParse","success","errors.$ZodError","safeParse","errors.$ZodRealError","_safeParseAsync","safeParseAsync","_encode","direction","_decode","_encodeAsync","_decodeAsync","_safeEncode","_safeDecode","_safeEncodeAsync","_safeDecodeAsync","cuid","cuid2","ulid","xid","ksuid","nanoid","duration","guid","uuid","version","RegExp","email","ipv4","ipv6","cidrv4","cidrv6","base64","base64url","hostname","e164","dateSource","date","timeSource","hhmm","precision","lowercase","uppercase","$ZodCheck","core.$constructor","onattach","$ZodCheckMaxLength","when","payload","val","util.nullish","push","curr","bag","maximum","Number","POSITIVE_INFINITY","check","origin","util.getLengthableOrigin","inclusive","abort","$ZodCheckMinLength","minimum","NEGATIVE_INFINITY","$ZodCheckLengthEquals","tooBig","exact","$ZodCheckStringFormat","_b","format","pattern","patterns","lastIndex","test","$ZodCheckRegex","$ZodCheckLowerCase","regexes.lowercase","$ZodCheckUpperCase","regexes.uppercase","$ZodCheckIncludes","escapedRegex","util.escapeRegex","position","$ZodCheckStartsWith","prefix","$ZodCheckEndsWith","suffix","$ZodCheckOverwrite","tx","Doc","content","indent","indented","write","arg","execution","lines","split","filter","minIndent","Math","min","trimStart","dedented","repeat","line","compile","F","join","major","minor","patch","$ZodType","checks","ch","parse","runChecks","asyncResult","isAborted","util.aborted","currLen","resolve","then","handleCanaryResult","canary","checkResult","skipChecks","validate","r","vendor","$ZodString","pop","coerce","String","expected","$ZodStringFormat","checks.$ZodCheckStringFormat","$ZodGUID","regexes.guid","$ZodUUID","v1","v2","v3","v4","v5","v6","v7","v8","regexes.uuid","$ZodEmail","regexes.email","$ZodURL","trimmed","trim","url","URL","note","regexes.hostname","protocol","normalize","href","$ZodEmoji","$ZodNanoID","regexes.nanoid","$ZodCUID","regexes.cuid","$ZodCUID2","regexes.cuid2","$ZodULID","regexes.ulid","$ZodXID","regexes.xid","$ZodKSUID","regexes.ksuid","$ZodISODateTime","time","opts","local","offset","timeRegex","regexes.datetime","$ZodISODate","regexes.date","$ZodISOTime","$ZodISODuration","regexes.duration","$ZodIPv4","regexes.ipv4","$ZodIPv6","regexes.ipv6","$ZodCIDRv4","regexes.cidrv4","$ZodCIDRv6","regexes.cidrv6","parts","address","prefixNum","isValidBase64","atob","$ZodBase64","regexes.base64","contentEncoding","$ZodBase64URL","regexes.base64url","c","padEnd","ceil","isValidBase64URL","$ZodE164","regexes.e164","$ZodJWT","token","algorithm","tokensParts","header","parsedHeader","typ","alg","isValidJWT","$ZodUnknown","$ZodNever","handleArrayResult","final","index","util.prefixIssues","$ZodArray","proms","item","element","all","handlePropertyResult","normalizeDef","keys","shape","okeys","optin","optout","keySet","numKeys","optionalKeys","handleCatchall","unrecognized","_catchall","catchall","t","type","$ZodObject","desc","getOwnPropertyDescriptor","sh","newSh","_normalized","util.cached","util.defineLazy","propValues","field","values","util.isObject","$ZodObjectJIT","superParse","fastpass","jit","core.globalConfig","jitless","fastEnabled","util.allowsEval","doc","normalized","parseStr","util.esc","ids","create","counter","id","generateFastpass","handleUnionResults","results","nonaborted","errors","$ZodUnion","options","some","every","flatMap","option","from","p","util.cleanRegex","single","first","$ZodIntersection","left","right","handleIntersectionResults","mergeValues","a","b","valid","Date","util.isPlainObject","bKeys","sharedKeys","indexOf","newObj","sharedValue","mergeErrorPath","newArray","merged","$ZodEnum","entries","numericValues","util.getEnumValues","valuesSet","util.propertyKeyTypes","$ZodTransform","core.$ZodEncodeError","_out","transform","output","handleOptionalResult","$ZodOptional","innerType","$ZodNullable","$ZodDefault","defaultValue","handleDefaultResult","$ZodPrefault","$ZodNonOptional","handleNonOptionalResult","$ZodCatch","catchValue","$ZodPipe","in","out","handlePipeResult","next","$ZodReadonly","handleReadonlyResult","freeze","$ZodCustom","checks.$ZodCheck","handleRefineResult","_iss","util.issue","$ZodRegistry","_map","WeakMap","_idmap","Map","_meta","meta","clear","remove","delete","pm","f","registry","globalRegistry","_guid","Class","util.normalizeParams","_maxLength","checks.$ZodCheckMaxLength","_minLength","checks.$ZodCheckMinLength","_length","checks.$ZodCheckLengthEquals","_overwrite","checks.$ZodCheckOverwrite","_superRefine","_check","addIssue","_issue","fatal","ZodISODateTime","core.$ZodISODateTime","schemas.ZodStringFormat","datetime","core._isoDateTime","ZodISODate","core.$ZodISODate","core._isoDate","ZodISOTime","core.$ZodISOTime","core._isoTime","ZodISODuration","core.$ZodISODuration","core._isoDuration","ZodRealError","mapper","fieldErrors","_errors","processError","el","core.formatError","flatten","formErrors","sub","core.flattenError","addIssues","isEmpty","core._parse","parseAsync","core._parseAsync","core._safeParse","core._safeParseAsync","encode","core._encode","decode","core._decode","encodeAsync","core._encodeAsync","decodeAsync","core._decodeAsync","safeEncode","core._safeEncode","safeDecode","core._safeDecode","safeEncodeAsync","core._safeEncodeAsync","safeDecodeAsync","core._safeDecodeAsync","ZodType","core.$ZodType","util.mergeDefs","core.clone","brand","register","reg","parse.parse","parse.safeParse","parse.parseAsync","parse.safeParseAsync","spa","parse.encode","parse.decode","parse.encodeAsync","parse.decodeAsync","parse.safeEncode","parse.safeDecode","parse.safeEncodeAsync","parse.safeDecodeAsync","refine","core._refine","ZodCustom","superRefine","refinement","core._superRefine","overwrite","checks.overwrite","optional","nullable","nonoptional","ZodNonOptional","array","core._array","ZodArray","or","union","ZodUnion","and","ZodIntersection","pipe","ZodTransform","default","_default","ZodDefault","util.shallowClone","prefault","ZodPrefault","catch","_catch","ZodCatch","readonly","ZodReadonly","describe","description","core.globalRegistry","isOptional","isNullable","_ZodString","core.$ZodString","minLength","maxLength","regex","checks.$ZodCheckRegex","checks.regex","checks.$ZodCheckIncludes","checks.includes","checks.$ZodCheckStartsWith","checks.startsWith","checks.$ZodCheckEndsWith","checks.endsWith","checks.minLength","max","checks.maxLength","checks.length","nonempty","checks.$ZodCheckLowerCase","checks.lowercase","checks.$ZodCheckUpperCase","checks.uppercase","form","checks.normalize","toLowerCase","toUpperCase","ZodString","core._email","ZodEmail","core._url","ZodURL","jwt","core._jwt","ZodJWT","emoji","core._emoji","ZodEmoji","core._guid","ZodGUID","core._uuid","ZodUUID","uuidv4","core._uuidv4","uuidv6","core._uuidv6","uuidv7","core._uuidv7","core._nanoid","ZodNanoID","core._cuid","ZodCUID","core._cuid2","ZodCUID2","core._ulid","ZodULID","core._base64","ZodBase64","core._base64url","ZodBase64URL","core._xid","ZodXID","core._ksuid","ZodKSUID","core._ipv4","ZodIPv4","core._ipv6","ZodIPv6","core._cidrv4","ZodCIDRv4","core._cidrv6","ZodCIDRv6","core._e164","ZodE164","iso.datetime","iso.date","iso.time","iso.duration","string","core._string","ZodStringFormat","core.$ZodStringFormat","core.$ZodEmail","core.$ZodGUID","core.$ZodUUID","core.$ZodURL","core.$ZodEmoji","core.$ZodNanoID","core.$ZodCUID","core.$ZodCUID2","core.$ZodULID","core.$ZodXID","core.$ZodKSUID","core.$ZodIPv4","core.$ZodIPv6","core.$ZodCIDRv4","core.$ZodCIDRv6","core.$ZodBase64","core.$ZodBase64URL","core.$ZodE164","core.$ZodJWT","ZodUnknown","core.$ZodUnknown","unknown","ZodNever","core.$ZodNever","never","core._never","core.$ZodArray","len","unwrap","ZodObject","core.$ZodObjectJIT","keyof","fromEntries","ZodEnum","_enum","passthrough","loose","strict","strip","extend","incoming","_shape","util.extend","safeExtend","util.safeExtend","merge","other","util.merge","pick","mask","currDef","newShape","util.pick","omit","util.omit","partial","oldShape","util.partial","ZodOptional","required","util.required","core.$ZodUnion","core.$ZodIntersection","core.$ZodEnum","enum","extract","newEntries","exclude","core.$ZodTransform","core.$ZodOptional","ZodNullable","core.$ZodNullable","core.$ZodDefault","removeDefault","core.$ZodPrefault","core.$ZodNonOptional","core.$ZodCatch","removeCatch","ZodPipe","core.$ZodPipe","in_","core.$ZodReadonly","core.$ZodCustom","props","__props","emit","__emit","localInput","ref","watch","show","newVal","isGenerating","showInput","style","color","margin","padding","background","border","display","width","height","overflow","gap","$props","_openBlock","_createElementBlock","onClick","_withModifiers","$setup","handleClose","top","bottom","_createElementVNode","_cache","_hoisted_1","class","_createTextVNode","_toDisplayString","title","_hoisted_2","$event","placeholder","resize","_hoisted_3","_createCommentVNode","_hoisted_4","_createStaticVNode","progress","_hoisted_5","_hoisted_6","_hoisted_7","step","total","stepName","_hoisted_8","percentage","_hoisted_9","_normalizeStyle","transition","_hoisted_10","_hoisted_11","elapsedTime","_hoisted_12","_hoisted_13","handleConfirm","disabled","flex","cursor","opacity","_hoisted_14","_hoisted_15","localInstruction","isModifying","$emit","examples","_Fragment","_renderList","example","animation","_normalizeClass","GreetingConfig","z.object","icon","z.string","UIConfig","customHtml","settingsStore","useSettingsStore","settings","storeToRefs","taskStore","useTaskStore","greetings","uiConfig","showCodeDialog","generatedCode","copyButtonText","showAiGenerateDialog","showAiEditDialog","isGeneratingAi","isEditingAi","currentEditingIndex","showHelp","previewHtml","currentCharacter","showOriginalDialog","originalGreetingContent","showAiStyleDialog","isGeneratingStyle","aiProgress","startTime","elapsedTimer","updateProgress","round","console","log","startElapsedTimer","clearInterval","now","setInterval","stopElapsedTimer","progressWithElapsedTime","computed","elapsed","getCurrentCharacter","window","TavernHelper","char","getCharData","SillyTavern","charData","getContext","characters","loadConfig","character","allGreetings","first_mes","alternate_greetings","storageKey","getScriptIdSafe","avatar","configs","savedUIConfig","savedData","localStorage","getItem","savedConfig","greetings_config","ui_config","saved","warn","uiConfigData","updatePreview","saveConfig","configData","klona","setItem","generateFrontendCode","warning","cardsHtml","g","padStart","html","onMounted","confirm","greetingContent","taskId","createTask","idx","failTask","updateTaskProgress","api_endpoint","api_key","model","systemPrompt","userPrompt","filterApiParams","__vitePreload","import","n","R","__VITE_PRELOAD__","filteredParams","messages","role","temperature","max_tokens","top_p","presence_penalty","frequency_penalty","response","fetch","method","headers","Authorization","body","ok","status","statusText","json","aiDescription","choices","toFixed","timeOut","completeTask","setTimeout","errorMsg","requirement","currentDesc","filterApiParams2","filteredParams2","styleDescription","cards","filterApiParams3","filteredParams3","generatedHtml","substring","htmlLength","copyToClipboard","windowTitle","newWindow","open","document","close","characterName","stscriptJson","crypto","randomUUID","scriptName","runOnEdit","findRegex","replaceString","trimStrings","placement","substituteRegex","minDepth","maxDepth","markdownOnly","promptOnly","jsonString","blob","Blob","createObjectURL","link","createElement","download","appendChild","click","removeChild","revokeObjectURL","clearAllConfig","onMouseenter","currentTarget","onMouseleave","greeting","_withDirectives","maxlength","onInput","_vModelText","generateDescription","boxShadow","editDescription","_hoisted_16","_hoisted_17","viewOriginalGreeting","_hoisted_18","_hoisted_19","downloadAsJson","_hoisted_20","_hoisted_21","openPreviewInNewWindow","_hoisted_22","srcdoc","sandbox","_hoisted_23","_hoisted_24","_createVNode","onClose","closeAiGenerateDialog","onConfirm","confirmEditDescription","generateStyleWithAI","_hoisted_25","_hoisted_26","_hoisted_27","closeCodeDialog","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","copyCode","expandedSections","reactive","usageGuide","changelog","section","toggleSection","_vShow","expanded","structure","prompt","aiStructurePrompt","isGeneratingAI","aiPromptDescription","isGeneratingPrompt","originalStructurePrompt","originalPromptDescription","showStructureModifyDialog","isModifyingStructure","showPromptModifyDialog","isModifyingPrompt","varName","subFields","generatedStructure","variableCategories","generatedPrompt","text","clipboard","writeText","parseSubFields","l","obj","forEach","s","autoGeneratePrompt","varNameParsed","find","varData","fieldCount","generatePrompt","promptSection","querySelector","scrollIntoView","behavior","block","promptTemplate","exportAsWorldbook","worldbookEntries","uid","generateUID","keysecondary","comment","constant","vectorized","selective","selectiveLogic","addMemo","order","disable","excludeRecursion","delayUntilRecursion","probability","useProbability","depth","group","groupOverride","groupWeight","scanDepth","caseSensitive","matchWholeWords","useGroupScoring","automationId","sticky","cooldown","delay","jsonStr","floor","random","loadSavedData","scriptId","savedDataStr","saveData","dataToSave","saveTimer","$meta","extensible","strictSet","apiUrl","normalizeApiEndpoint","responseText","errorMessage","errorData","jsonText","jsonMatch","match","parsed","bracketCount","inString","escapeNext","lastValidPos","fields","responseText2","modifyInstruction","info","toggleExpanded","rows","onFocus","borderColor","onBlur","handleAIGenerateStructure","generateStructure","copyGenerated","exportWorldbook","handleAIGeneratePrompt","copyPrompt","modifyStructureWithAI","modifyPromptWithAI","displayProgress","currentMessage","initialMessage","details","elapsedSeconds","elapsedInterval","smoothProgressInterval","setProgress","percent","setMessage","addDetail","detail","detailsArea","scrollTop","scrollHeight","clearDetails","complete","diff","onUnmounted","__expose","cancellable","projects","currentId","currentFile","showAI","aiPrompt","aiGenerating","enableStream","streamingText","showComparison","aiChanges","previewMode","showHistory","aiHistory","showProgress","progressDialogRef","showProjectTemplate","showBugFix","bugDescription","consoleError","bugFile","folderInputRef","currentProject","currentProjectHistory","comparisonPreviewHtml","proj","buildPreviewFromFiles","files","change","newContent","oldContent","projectTemplates","htmlFile","cssFile","jsFile","headTag","bodyTag","headMatch","bodyMatch","headContent","bodyContent","scriptTagRegex","scriptTag","styleTag","saveToChatVar","chatId","frontend_projects_files","frontend_ai_history","loadFromChatVar","getChatIdSafe","parseError","autoSaveTimer","watchEffect","file","clearTimeout","previewTimer","closeAIDialog","closeHistoryDialog","deep","onBeforeUnmount","templateKey","template","newProj","filename","event","firstFile","folderName","webkitRelativePath","projectName","supportedExtensions","projectFiles","fileReadPromises","relativePath","extension","readPromise","reject","reader","FileReader","onload","fileName","onerror","readAsText","htmlContent","folderPath","trimmedPath","gitkeepPath","newFile","folders","folderList","sort","fileTypes","ext","typeOptions","typeChoice","typeIndex","parseInt","selectedType","targetFolder","folderOptions","folderChoice","folderIndex","trimmedName","fullPath","defaultContent","filePath","normalizedEndpoint","apiEndpoint","apiKey","errorText","resultText","fileRegex","changes","exec","existingFile","timestamp","toISOString","changedFiles","phrase","maxTokens","stream","getReader","decoder","TextDecoder","chunkCount","done","read","delta","needMoreInfoMatch","guideContent","alert","historyRecord","record","fileObj","triggerWord","fullHtml","cleanHtml","regexJson","dataStr","dataBlob","exportToRegex","showHistoryDialog","showAIDialog","showBugFixDialog","showProjectTemplateDialog","triggerFolderImport","createProject","webkitdirectory","directory","multiple","onChange","handleFolderImport","borderRadius","selectProject","deleteProject","createNewFolder","showNewFileDialog","fontSize","selectFile","getFileIcon","deleteFile","saveCode","outline","openInNewWindow","_hoisted_32","_hoisted_33","quickSuggestions","suggestion","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","generateWithAI","_hoisted_41","_hoisted_40","_hoisted_39","closeBugFixDialog","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","fixBugWithAI","_hoisted_49","_hoisted_48","_hoisted_47","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","rejectChanges","acceptChanges","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","toLocaleString","restoreHistory","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","createProjectFromTemplate","WorkerGlobalScope","globalThis","noop","bypassFilter","invoke","debounceFilter","ms","timer","maxTimer","lastRejector","_clearTimeout","timer2","lastInvoker","toValue$1","maxDuration","maxWait","rejectOnCancel","watchWithFilter","cb","eventFilter","watchOptions","apply","thisArg","triggerKeyword","interfaceDescription","generatedRegex","showCode","showModify","previewFrame","loadData","savedDataString","debounce","watchDebounced","addTaskDetail","requestParams","doctypeMatch","htmlMatch","showModifyDialog","copyRegex","modifyWithAI","summaryHistoryStore","useSummaryHistoryStore","api","autoSummary","manualSummary","tableGeneration","messageManagement","parseMessageRange","range","messageIds","part","isNaN","available_models","loading_models","hide_range","hidden_messages","hidden_display_expanded","is_summarizing","is_generating_table","headerTemplates","selectedTemplate","currentTemplate","loadGenerationStatus","summarizing","generating_table","saveGenerationStatus","loadHeaderTemplates","templates","saveHeaderTemplates","loadTemplate","loadHiddenMessages","saveHiddenMessages","initApiProvider","api_provider","endpoint","splice","saveSettings","reloadSettings","smartResetChat","provider","providerEndpoints","openai","gemini","triggerSlash","currentProfileResult","parentWin","powerUser","power_user","secretState","secret_state","custom_chat_url","reverse_proxy","custom_model","openai_model","api_key_custom","custom","profileName","profileDetailsResult","profileData","server_url","secretId","importedCount","importDetails","successMessage","fetchAvailableModels","S","models","reply","modelUsed","addTask","start_message_id","end_message_id","category","summarizeMessages","summary","last_summary","addSummary","dispatchEvent","CustomEvent","table_start_message_id","table_end_message_id","headersInput","h","chatMessages","messageRange","getChatMessages","messagesText","msg","aiResponse","aiTableData","tableData","chat_id","table_history","start_id","end_id","emptyTableData","ranges","lastMessageId","getLastMessageId","hiddenCount","messagesToHide","messageId","message_id","is_hidden","messagesToShow","shownCount","hiddenMsg","showToast","validHiddenMessages","removedCount","findIndex","borderLeft","handleProviderChange","_vModelSelect","onmouseover","onmouseout","handle_fetch_models","handleSaveApiConfig","number","auto_summarize_enabled","_vModelCheckbox","summarize_interval","handleSaveSettings","handleReloadSettings","handleResetAutoSummaryStart","handle_test_connection","handle_summarize","showAddTemplateDialog","saveTemplate","deleteTemplate","stopGeneration","handle_generate_table","handle_create_table","handle_hide_messages","handle_show_messages","handle_refresh_hidden","handle_unhide_single","simple","label","abo","originalAiPrompt","showAiModifyDialog","isModifyingAi","showIconPickerFor","originalXmlInput","showXmlModifyDialog","isModifyingXml","originalFieldDescription","showFieldModifyDialog","isModifyingField","showXmlDialog","xmlInput","isParsingXml","showAiFieldDialog","aiFieldDescription","isGeneratingFields","worldbookContent","fieldDefinitions","iconDesc","formatExample","exampleOutput","normalizedRegex","exampleLines","fieldIndex","allCaptures","totalCount","perLine","count","segmentFields","placeholders","parseRegexStructure","previewContent","exampleValue","sanitizeFileContent","raw","fenceMatch","docstringMatch","loadSavedConfig","extendedTimeOut","closeButton","parsedFields","validFields","iconClass","totalFields","firstHalf","fieldsHtml","jsContent","currentFiles","FILE_START_REGEX","matches","matchAll","normalizedPath","uniqueFiles","fileCount","generatedFiles","m","missingFiles","regexPattern","existingCaptureGroups","fill","cleanReplaceString","exportRegex","showIconPicker","addField","showXmlParseDialog","showAiFieldGeneratorDialog","generateFromFields","copyWorldbook","innerHTML","iconList","selectIcon","addFieldInDialog","removeFieldInDialog","parseXmlWithAI","modifyXmlWithAI","generateFieldsWithAI","modifyFieldWithAI","historyStore","summary_history","expandedState","refreshSummaryHistory","getSummaryHistory","tryParentWindowCopy","isSecureContext","clipboardErr","execCommandCopy","showManualCopyDialog","err","parentDoc","parentBody","textarea","cssText","setAttribute","focus","select","setSelectionRange","execCommand","pointerEvents","existingOverlay","getElementById","overlay","container","buttonContainer","textContent","copyButton","onclick","handleKeyDown","removeEventListener","addEventListener","promptForWorldbook","worldbookNames","dialog","$","append","on","selected","current","charError","worldbookName","getWorldbookNames","createWorldbook","rebindChatWorldbook","bindError","summaryIndex","selectedWorldbook","newEntry","toLocaleDateString","enabled","strategy","keys_secondary","logic","scan_depth","insertion_order","case_sensitive","name_is_regex","keys_are_regex","selective_logic","secondary_keys_logic","activation_threshold","local_id","depth_entries","depth_entries_all","search_range","force_activation","exclude_recursion","hidden","priority","comment_is_regex","content_is_regex","secondary_keys_are_regex","keys_secondary_are_regex","createWorldbookEntries","button","btn","outputArea","testCompleteAutoSummary","syncAutoSummaryData","checkCurrentFloor","testFloorCalculation","checkAutoSummaryStatus","handleRefreshData","createSummaryWorldbook","showDebugPanel","isExpanded","copySummary","bindToWorldbook","deleteSummary","tableExpandedState","refreshTableHistory","tableItem","tsv","row","toggleTableExpanded","isTableExpanded","copyTable","deleteTable","rowIdx","cell","cellIdx","lodash","_hoisted_109","toolExpandedState","antiClicheInput","antiClicheOutput","isProcessingAntiCliche","enableAntiClicheStreaming","antiClicheProgressPercent","antiClicheModifyRequest","isModifyingAntiCliche","characterDescription","characterCardOutput","isGeneratingCharacter","modifyRequest","isModifyingCharacter","enableCharacterStreaming","characterProgressPercent","worldbookDescription","worldbookEntryOutput","isGeneratingWorldbook","availableWorldbooks","isInsertingEntry","worldbookModifyRequest","isModifyingWorldbook","enableWorldbookStreaming","worldbookProgressPercent","selectedViewerWorldbook","viewerSearchQuery","viewerSortBy","entryExpandedState","showEditDialog","editingEntry","editingEntryUid","isDataLoaded","loadAvailableWorldbooks","loadToolsData","script_id","tools_antiCliche","enableStreaming","tools_characterCard","tools_worldbookEntry","tools_expandedState","tools_worldbookViewer","searchQuery","sortBy","loadWorldbookEntries","saveToolsDataImmediate","antiCliche_input_length","antiCliche_output_length","character_desc_length","character_output_length","saveToolsData","cancel","extractStreamContent","chunk","generateWithStreaming","requestPayload","progressRef","buffer","processLine","payloadText","payloadJson","deltaText","readerDone","worldbook","getWorldbook","filteredWorldbookEntries","query","entry","nameMatch","contentMatch","keysMatch","toolName","generatedText","modifiedText","modifiedCard","parsedEntry","render","recursion","prevent_incoming","prevent_outgoing","delay_until","effect","updatedWorldbook","updateWorldbookWith","entryIndex","deleteWorldbookEntries","toggleToolExpanded","isToolExpanded","handleAntiClicheProcess","clearAntiClicheForm","copyAntiClicheResult","handleModifyAntiCliche","clearAntiClicheModifyRequest","handleGenerateWorldbookEntry","clearWorldbookForm","handleModifyWorldbookEntry","clearWorldbookModifyRequest","wb","handleInsertEntry","copyWorldbookEntry","toggleEntryExpanded","isEntryExpanded","_hoisted_82","_hoisted_83","_hoisted_84","ki","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","editWorldbookEntry","_hoisted_89","deleteWorldbookEntry","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","for","_hoisted_96","_hoisted_98","_hoisted_101","_hoisted_102","_hoisted_103","checked","_hoisted_105","_hoisted_108","saveEditedEntry","_hoisted_110","_hoisted_111","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","handleGenerateCharacterCard","_hoisted_119","clearCharacterForm","_hoisted_120","_hoisted_121","copyCharacterCard","_hoisted_122","_hoisted_123","_hoisted_124","_hoisted_125","_hoisted_126","_hoisted_127","_hoisted_128","handleModifyCharacterCard","_hoisted_129","clearModifyRequest","activeTab","componentMap","SettingsTab","SummaryTab","table","TableTab","GreetingsTab","StatusBarGenerator","RegexUIGenerator","project","ProjectManager","tools","ToolsTab","mvu","MvuBetaTab","help","HelpTab","currentComponent","componentProps","tabKey","minimizeMemoryPanel","fadeOut","minimizePanel","closePanel","tabs","tab","borderBottom","switchTab","_createBlock","_resolveDynamicComponent","_mergeProps","createMinimizeIcon","existingIcon","fadeIn","isMobile","innerWidth","quickMenu","hover","css","panel","is","tabIndex","eq","trigger","hideMenuTimeout","iconPos","iconWidth","outerWidth","iconHeight","outerHeight","menuWidth","menuHeight","windowWidth","windowHeight","finalLeft","finalTop","updateMenuPosition","hide","draggable","containment","scroll","stop","toggleMemoryPanel","responsiveCSS","existingPanel","panelContainer","app","createApp","use","globalPinia","mount","__vue_app__","stack"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,23,29],"sources":["../node_modules/.vite_external/toastr.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/core.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/util.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/errors.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/parse.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/regexes.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/checks.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/doc.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/versions.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/schemas.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/registries.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/api.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/iso.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/errors.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/parse.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/schemas.js","../src/_with_worldbook/components/AIGenerateDialog.vue","../src/_with_worldbook/components/AIModifyDialog.vue","../src/_with_worldbook/components/GreetingsTab.vue","../src/_with_worldbook/components/HelpTab.vue","../src/_with_worldbook/components/MvuBetaTab.vue","../src/_with_worldbook/components/ProgressDialog.vue","../src/_with_worldbook/components/ProjectManager.vue","../node_modules/.pnpm/@vueuse+shared@13.9.0_vue@3_1b0df22f5013eb4370ba673b7b8532c7/node_modules/@vueuse/shared/index.mjs","../src/_with_worldbook/components/RegexUIGenerator.vue","../src/_with_worldbook/components/SettingsTab.vue","../src/_with_worldbook/components/StatusBarGenerator.vue","../src/_with_worldbook/components/SummaryTab.vue","../src/_with_worldbook/components/TableTab.vue","../node_modules/.vite_external/lodash.js","../src/_with_worldbook/components/ToolsTab.vue","../src/_with_worldbook/components/MainPanel.vue","../src/_with_worldbook/.vue","../src/_with_worldbook/.ts"],"sourcesContent":["module.exports = toastr;","/** A special constant with type `never` */\nexport const NEVER = Object.freeze({\n    status: \"aborted\",\n});\nexport /*@__NO_SIDE_EFFECTS__*/ function $constructor(name, initializer, params) {\n    function init(inst, def) {\n        var _a;\n        Object.defineProperty(inst, \"_zod\", {\n            value: inst._zod ?? {},\n            enumerable: false,\n        });\n        (_a = inst._zod).traits ?? (_a.traits = new Set());\n        inst._zod.traits.add(name);\n        initializer(inst, def);\n        // support prototype modifications\n        for (const k in _.prototype) {\n            if (!(k in inst))\n                Object.defineProperty(inst, k, { value: _.prototype[k].bind(inst) });\n        }\n        inst._zod.constr = _;\n        inst._zod.def = def;\n    }\n    // doesn't work if Parent has a constructor with arguments\n    const Parent = params?.Parent ?? Object;\n    class Definition extends Parent {\n    }\n    Object.defineProperty(Definition, \"name\", { value: name });\n    function _(def) {\n        var _a;\n        const inst = params?.Parent ? new Definition() : this;\n        init(inst, def);\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        for (const fn of inst._zod.deferred) {\n            fn();\n        }\n        return inst;\n    }\n    Object.defineProperty(_, \"init\", { value: init });\n    Object.defineProperty(_, Symbol.hasInstance, {\n        value: (inst) => {\n            if (params?.Parent && inst instanceof params.Parent)\n                return true;\n            return inst?._zod?.traits?.has(name);\n        },\n    });\n    Object.defineProperty(_, \"name\", { value: name });\n    return _;\n}\n//////////////////////////////   UTILITIES   ///////////////////////////////////////\nexport const $brand = Symbol(\"zod_brand\");\nexport class $ZodAsyncError extends Error {\n    constructor() {\n        super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`);\n    }\n}\nexport class $ZodEncodeError extends Error {\n    constructor(name) {\n        super(`Encountered unidirectional transform during encode: ${name}`);\n        this.name = \"ZodEncodeError\";\n    }\n}\nexport const globalConfig = {};\nexport function config(newConfig) {\n    if (newConfig)\n        Object.assign(globalConfig, newConfig);\n    return globalConfig;\n}\n","// functions\nexport function assertEqual(val) {\n    return val;\n}\nexport function assertNotEqual(val) {\n    return val;\n}\nexport function assertIs(_arg) { }\nexport function assertNever(_x) {\n    throw new Error();\n}\nexport function assert(_) { }\nexport function getEnumValues(entries) {\n    const numericValues = Object.values(entries).filter((v) => typeof v === \"number\");\n    const values = Object.entries(entries)\n        .filter(([k, _]) => numericValues.indexOf(+k) === -1)\n        .map(([_, v]) => v);\n    return values;\n}\nexport function joinValues(array, separator = \"|\") {\n    return array.map((val) => stringifyPrimitive(val)).join(separator);\n}\nexport function jsonStringifyReplacer(_, value) {\n    if (typeof value === \"bigint\")\n        return value.toString();\n    return value;\n}\nexport function cached(getter) {\n    const set = false;\n    return {\n        get value() {\n            if (!set) {\n                const value = getter();\n                Object.defineProperty(this, \"value\", { value });\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n    };\n}\nexport function nullish(input) {\n    return input === null || input === undefined;\n}\nexport function cleanRegex(source) {\n    const start = source.startsWith(\"^\") ? 1 : 0;\n    const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n    return source.slice(start, end);\n}\nexport function floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepString = step.toString();\n    let stepDecCount = (stepString.split(\".\")[1] || \"\").length;\n    if (stepDecCount === 0 && /\\d?e-\\d?/.test(stepString)) {\n        const match = stepString.match(/\\d?e-(\\d?)/);\n        if (match?.[1]) {\n            stepDecCount = Number.parseInt(match[1]);\n        }\n    }\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nconst EVALUATING = Symbol(\"evaluating\");\nexport function defineLazy(object, key, getter) {\n    let value = undefined;\n    Object.defineProperty(object, key, {\n        get() {\n            if (value === EVALUATING) {\n                // Circular reference detected, return undefined to break the cycle\n                return undefined;\n            }\n            if (value === undefined) {\n                value = EVALUATING;\n                value = getter();\n            }\n            return value;\n        },\n        set(v) {\n            Object.defineProperty(object, key, {\n                value: v,\n                // configurable: true,\n            });\n            // object[key] = v;\n        },\n        configurable: true,\n    });\n}\nexport function objectClone(obj) {\n    return Object.create(Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj));\n}\nexport function assignProp(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n    });\n}\nexport function mergeDefs(...defs) {\n    const mergedDescriptors = {};\n    for (const def of defs) {\n        const descriptors = Object.getOwnPropertyDescriptors(def);\n        Object.assign(mergedDescriptors, descriptors);\n    }\n    return Object.defineProperties({}, mergedDescriptors);\n}\nexport function cloneDef(schema) {\n    return mergeDefs(schema._zod.def);\n}\nexport function getElementAtPath(obj, path) {\n    if (!path)\n        return obj;\n    return path.reduce((acc, key) => acc?.[key], obj);\n}\nexport function promiseAllObject(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = keys.map((key) => promisesObj[key]);\n    return Promise.all(promises).then((results) => {\n        const resolvedObj = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObj[keys[i]] = results[i];\n        }\n        return resolvedObj;\n    });\n}\nexport function randomString(length = 10) {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    let str = \"\";\n    for (let i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\nexport function esc(str) {\n    return JSON.stringify(str);\n}\nexport const captureStackTrace = (\"captureStackTrace\" in Error ? Error.captureStackTrace : (..._args) => { });\nexport function isObject(data) {\n    return typeof data === \"object\" && data !== null && !Array.isArray(data);\n}\nexport const allowsEval = cached(() => {\n    // @ts-ignore\n    if (typeof navigator !== \"undefined\" && navigator?.userAgent?.includes(\"Cloudflare\")) {\n        return false;\n    }\n    try {\n        const F = Function;\n        new F(\"\");\n        return true;\n    }\n    catch (_) {\n        return false;\n    }\n});\nexport function isPlainObject(o) {\n    if (isObject(o) === false)\n        return false;\n    // modified constructor\n    const ctor = o.constructor;\n    if (ctor === undefined)\n        return true;\n    // modified prototype\n    const prot = ctor.prototype;\n    if (isObject(prot) === false)\n        return false;\n    // ctor doesn't have static `isPrototypeOf`\n    if (Object.prototype.hasOwnProperty.call(prot, \"isPrototypeOf\") === false) {\n        return false;\n    }\n    return true;\n}\nexport function shallowClone(o) {\n    if (isPlainObject(o))\n        return { ...o };\n    if (Array.isArray(o))\n        return [...o];\n    return o;\n}\nexport function numKeys(data) {\n    let keyCount = 0;\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            keyCount++;\n        }\n    }\n    return keyCount;\n}\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return \"undefined\";\n        case \"string\":\n            return \"string\";\n        case \"number\":\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"function\":\n            return \"function\";\n        case \"bigint\":\n            return \"bigint\";\n        case \"symbol\":\n            return \"symbol\";\n        case \"object\":\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return \"promise\";\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return \"map\";\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return \"set\";\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return \"date\";\n            }\n            // @ts-ignore\n            if (typeof File !== \"undefined\" && data instanceof File) {\n                return \"file\";\n            }\n            return \"object\";\n        default:\n            throw new Error(`Unknown data type: ${t}`);\n    }\n};\nexport const propertyKeyTypes = new Set([\"string\", \"number\", \"symbol\"]);\nexport const primitiveTypes = new Set([\"string\", \"number\", \"bigint\", \"boolean\", \"symbol\", \"undefined\"]);\nexport function escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n// zod-specific utils\nexport function clone(inst, def, params) {\n    const cl = new inst._zod.constr(def ?? inst._zod.def);\n    if (!def || params?.parent)\n        cl._zod.parent = inst;\n    return cl;\n}\nexport function normalizeParams(_params) {\n    const params = _params;\n    if (!params)\n        return {};\n    if (typeof params === \"string\")\n        return { error: () => params };\n    if (params?.message !== undefined) {\n        if (params?.error !== undefined)\n            throw new Error(\"Cannot specify both `message` and `error` params\");\n        params.error = params.message;\n    }\n    delete params.message;\n    if (typeof params.error === \"string\")\n        return { ...params, error: () => params.error };\n    return params;\n}\nexport function createTransparentProxy(getter) {\n    let target;\n    return new Proxy({}, {\n        get(_, prop, receiver) {\n            target ?? (target = getter());\n            return Reflect.get(target, prop, receiver);\n        },\n        set(_, prop, value, receiver) {\n            target ?? (target = getter());\n            return Reflect.set(target, prop, value, receiver);\n        },\n        has(_, prop) {\n            target ?? (target = getter());\n            return Reflect.has(target, prop);\n        },\n        deleteProperty(_, prop) {\n            target ?? (target = getter());\n            return Reflect.deleteProperty(target, prop);\n        },\n        ownKeys(_) {\n            target ?? (target = getter());\n            return Reflect.ownKeys(target);\n        },\n        getOwnPropertyDescriptor(_, prop) {\n            target ?? (target = getter());\n            return Reflect.getOwnPropertyDescriptor(target, prop);\n        },\n        defineProperty(_, prop, descriptor) {\n            target ?? (target = getter());\n            return Reflect.defineProperty(target, prop, descriptor);\n        },\n    });\n}\nexport function stringifyPrimitive(value) {\n    if (typeof value === \"bigint\")\n        return value.toString() + \"n\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    return `${value}`;\n}\nexport function optionalKeys(shape) {\n    return Object.keys(shape).filter((k) => {\n        return shape[k]._zod.optin === \"optional\" && shape[k]._zod.optout === \"optional\";\n    });\n}\nexport const NUMBER_FORMAT_RANGES = {\n    safeint: [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\n    int32: [-2147483648, 2147483647],\n    uint32: [0, 4294967295],\n    float32: [-3.4028234663852886e38, 3.4028234663852886e38],\n    float64: [-Number.MAX_VALUE, Number.MAX_VALUE],\n};\nexport const BIGINT_FORMAT_RANGES = {\n    int64: [/* @__PURE__*/ BigInt(\"-9223372036854775808\"), /* @__PURE__*/ BigInt(\"9223372036854775807\")],\n    uint64: [/* @__PURE__*/ BigInt(0), /* @__PURE__*/ BigInt(\"18446744073709551615\")],\n};\nexport function pick(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = {};\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                newShape[key] = currDef.shape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function omit(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = { ...schema._zod.def.shape };\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                delete newShape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function extend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to extend: expected a plain object\");\n    }\n    const checks = schema._zod.def.checks;\n    const hasChecks = checks && checks.length > 0;\n    if (hasChecks) {\n        throw new Error(\"Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.\");\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function safeExtend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to safeExtend: expected a plain object\");\n    }\n    const def = {\n        ...schema._zod.def,\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: schema._zod.def.checks,\n    };\n    return clone(schema, def);\n}\nexport function merge(a, b) {\n    const def = mergeDefs(a._zod.def, {\n        get shape() {\n            const _shape = { ...a._zod.def.shape, ...b._zod.def.shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        get catchall() {\n            return b._zod.def.catchall;\n        },\n        checks: [], // delete existing checks\n    });\n    return clone(a, def);\n}\nexport function partial(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in oldShape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function required(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in shape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\n// invalid_type | too_big | too_small | invalid_format | not_multiple_of | unrecognized_keys | invalid_union | invalid_key | invalid_element | invalid_value | custom\nexport function aborted(x, startIndex = 0) {\n    if (x.aborted === true)\n        return true;\n    for (let i = startIndex; i < x.issues.length; i++) {\n        if (x.issues[i]?.continue !== true) {\n            return true;\n        }\n    }\n    return false;\n}\nexport function prefixIssues(path, issues) {\n    return issues.map((iss) => {\n        var _a;\n        (_a = iss).path ?? (_a.path = []);\n        iss.path.unshift(path);\n        return iss;\n    });\n}\nexport function unwrapMessage(message) {\n    return typeof message === \"string\" ? message : message?.message;\n}\nexport function finalizeIssue(iss, ctx, config) {\n    const full = { ...iss, path: iss.path ?? [] };\n    // for backwards compatibility\n    if (!iss.message) {\n        const message = unwrapMessage(iss.inst?._zod.def?.error?.(iss)) ??\n            unwrapMessage(ctx?.error?.(iss)) ??\n            unwrapMessage(config.customError?.(iss)) ??\n            unwrapMessage(config.localeError?.(iss)) ??\n            \"Invalid input\";\n        full.message = message;\n    }\n    // delete (full as any).def;\n    delete full.inst;\n    delete full.continue;\n    if (!ctx?.reportInput) {\n        delete full.input;\n    }\n    return full;\n}\nexport function getSizableOrigin(input) {\n    if (input instanceof Set)\n        return \"set\";\n    if (input instanceof Map)\n        return \"map\";\n    // @ts-ignore\n    if (input instanceof File)\n        return \"file\";\n    return \"unknown\";\n}\nexport function getLengthableOrigin(input) {\n    if (Array.isArray(input))\n        return \"array\";\n    if (typeof input === \"string\")\n        return \"string\";\n    return \"unknown\";\n}\nexport function issue(...args) {\n    const [iss, input, inst] = args;\n    if (typeof iss === \"string\") {\n        return {\n            message: iss,\n            code: \"custom\",\n            input,\n            inst,\n        };\n    }\n    return { ...iss };\n}\nexport function cleanEnum(obj) {\n    return Object.entries(obj)\n        .filter(([k, _]) => {\n        // return true if NaN, meaning it's not a number, thus a string key\n        return Number.isNaN(Number.parseInt(k, 10));\n    })\n        .map((el) => el[1]);\n}\n// Codec utility functions\nexport function base64ToUint8Array(base64) {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes;\n}\nexport function uint8ArrayToBase64(bytes) {\n    let binaryString = \"\";\n    for (let i = 0; i < bytes.length; i++) {\n        binaryString += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binaryString);\n}\nexport function base64urlToUint8Array(base64url) {\n    const base64 = base64url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    const padding = \"=\".repeat((4 - (base64.length % 4)) % 4);\n    return base64ToUint8Array(base64 + padding);\n}\nexport function uint8ArrayToBase64url(bytes) {\n    return uint8ArrayToBase64(bytes).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\nexport function hexToUint8Array(hex) {\n    const cleanHex = hex.replace(/^0x/, \"\");\n    if (cleanHex.length % 2 !== 0) {\n        throw new Error(\"Invalid hex string length\");\n    }\n    const bytes = new Uint8Array(cleanHex.length / 2);\n    for (let i = 0; i < cleanHex.length; i += 2) {\n        bytes[i / 2] = Number.parseInt(cleanHex.slice(i, i + 2), 16);\n    }\n    return bytes;\n}\nexport function uint8ArrayToHex(bytes) {\n    return Array.from(bytes)\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\");\n}\n// instanceof\nexport class Class {\n    constructor(..._args) { }\n}\n","import { $constructor } from \"./core.js\";\nimport * as util from \"./util.js\";\nconst initializer = (inst, def) => {\n    inst.name = \"$ZodError\";\n    Object.defineProperty(inst, \"_zod\", {\n        value: inst._zod,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"issues\", {\n        value: def,\n        enumerable: false,\n    });\n    inst.message = JSON.stringify(def, util.jsonStringifyReplacer, 2);\n    Object.defineProperty(inst, \"toString\", {\n        value: () => inst.message,\n        enumerable: false,\n    });\n};\nexport const $ZodError = $constructor(\"$ZodError\", initializer);\nexport const $ZodRealError = $constructor(\"$ZodError\", initializer, { Parent: Error });\nexport function flattenError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of error.issues) {\n        if (sub.path.length > 0) {\n            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n            fieldErrors[sub.path[0]].push(mapper(sub));\n        }\n        else {\n            formErrors.push(mapper(sub));\n        }\n    }\n    return { formErrors, fieldErrors };\n}\nexport function formatError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                issue.errors.map((issues) => processError({ issues }));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.path.length === 0) {\n                fieldErrors._errors.push(mapper(issue));\n            }\n            else {\n                let curr = fieldErrors;\n                let i = 0;\n                while (i < issue.path.length) {\n                    const el = issue.path[i];\n                    const terminal = i === issue.path.length - 1;\n                    if (!terminal) {\n                        curr[el] = curr[el] || { _errors: [] };\n                    }\n                    else {\n                        curr[el] = curr[el] || { _errors: [] };\n                        curr[el]._errors.push(mapper(issue));\n                    }\n                    curr = curr[el];\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return fieldErrors;\n}\nexport function treeifyError(error, mapper = (issue) => issue.message) {\n    const result = { errors: [] };\n    const processError = (error, path = []) => {\n        var _a, _b;\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                // regular union error\n                issue.errors.map((issues) => processError({ issues }, issue.path));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else {\n                const fullpath = [...path, ...issue.path];\n                if (fullpath.length === 0) {\n                    result.errors.push(mapper(issue));\n                    continue;\n                }\n                let curr = result;\n                let i = 0;\n                while (i < fullpath.length) {\n                    const el = fullpath[i];\n                    const terminal = i === fullpath.length - 1;\n                    if (typeof el === \"string\") {\n                        curr.properties ?? (curr.properties = {});\n                        (_a = curr.properties)[el] ?? (_a[el] = { errors: [] });\n                        curr = curr.properties[el];\n                    }\n                    else {\n                        curr.items ?? (curr.items = []);\n                        (_b = curr.items)[el] ?? (_b[el] = { errors: [] });\n                        curr = curr.items[el];\n                    }\n                    if (terminal) {\n                        curr.errors.push(mapper(issue));\n                    }\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return result;\n}\n/** Format a ZodError as a human-readable string in the following form.\n *\n * From\n *\n * ```ts\n * ZodError {\n *   issues: [\n *     {\n *       expected: 'string',\n *       code: 'invalid_type',\n *       path: [ 'username' ],\n *       message: 'Invalid input: expected string'\n *     },\n *     {\n *       expected: 'number',\n *       code: 'invalid_type',\n *       path: [ 'favoriteNumbers', 1 ],\n *       message: 'Invalid input: expected number'\n *     }\n *   ];\n * }\n * ```\n *\n * to\n *\n * ```\n * username\n *    Expected number, received string at \"username\n * favoriteNumbers[0]\n *    Invalid input: expected number\n * ```\n */\nexport function toDotPath(_path) {\n    const segs = [];\n    const path = _path.map((seg) => (typeof seg === \"object\" ? seg.key : seg));\n    for (const seg of path) {\n        if (typeof seg === \"number\")\n            segs.push(`[${seg}]`);\n        else if (typeof seg === \"symbol\")\n            segs.push(`[${JSON.stringify(String(seg))}]`);\n        else if (/[^\\w$]/.test(seg))\n            segs.push(`[${JSON.stringify(seg)}]`);\n        else {\n            if (segs.length)\n                segs.push(\".\");\n            segs.push(seg);\n        }\n    }\n    return segs.join(\"\");\n}\nexport function prettifyError(error) {\n    const lines = [];\n    // sort by path length\n    const issues = [...error.issues].sort((a, b) => (a.path ?? []).length - (b.path ?? []).length);\n    // Process each issue\n    for (const issue of issues) {\n        lines.push(` ${issue.message}`);\n        if (issue.path?.length)\n            lines.push(`   at ${toDotPath(issue.path)}`);\n    }\n    // Convert Map to formatted string\n    return lines.join(\"\\n\");\n}\n","import * as core from \"./core.js\";\nimport * as errors from \"./errors.js\";\nimport * as util from \"./util.js\";\nexport const _parse = (_Err) => (schema, value, _ctx, _params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: false }) : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    if (result.issues.length) {\n        const e = new (_params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, _params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parse = /* @__PURE__*/ _parse(errors.$ZodRealError);\nexport const _parseAsync = (_Err) => async (schema, value, _ctx, params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    if (result.issues.length) {\n        const e = new (params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parseAsync = /* @__PURE__*/ _parseAsync(errors.$ZodRealError);\nexport const _safeParse = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? { ..._ctx, async: false } : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    return result.issues.length\n        ? {\n            success: false,\n            error: new (_Err ?? errors.$ZodError)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParse = /* @__PURE__*/ _safeParse(errors.$ZodRealError);\nexport const _safeParseAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    return result.issues.length\n        ? {\n            success: false,\n            error: new _Err(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParseAsync = /* @__PURE__*/ _safeParseAsync(errors.$ZodRealError);\nexport const _encode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parse(_Err)(schema, value, ctx);\n};\nexport const encode = /* @__PURE__*/ _encode(errors.$ZodRealError);\nexport const _decode = (_Err) => (schema, value, _ctx) => {\n    return _parse(_Err)(schema, value, _ctx);\n};\nexport const decode = /* @__PURE__*/ _decode(errors.$ZodRealError);\nexport const _encodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parseAsync(_Err)(schema, value, ctx);\n};\nexport const encodeAsync = /* @__PURE__*/ _encodeAsync(errors.$ZodRealError);\nexport const _decodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _parseAsync(_Err)(schema, value, _ctx);\n};\nexport const decodeAsync = /* @__PURE__*/ _decodeAsync(errors.$ZodRealError);\nexport const _safeEncode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParse(_Err)(schema, value, ctx);\n};\nexport const safeEncode = /* @__PURE__*/ _safeEncode(errors.$ZodRealError);\nexport const _safeDecode = (_Err) => (schema, value, _ctx) => {\n    return _safeParse(_Err)(schema, value, _ctx);\n};\nexport const safeDecode = /* @__PURE__*/ _safeDecode(errors.$ZodRealError);\nexport const _safeEncodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParseAsync(_Err)(schema, value, ctx);\n};\nexport const safeEncodeAsync = /* @__PURE__*/ _safeEncodeAsync(errors.$ZodRealError);\nexport const _safeDecodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _safeParseAsync(_Err)(schema, value, _ctx);\n};\nexport const safeDecodeAsync = /* @__PURE__*/ _safeDecodeAsync(errors.$ZodRealError);\n","export const cuid = /^[cC][^\\s-]{8,}$/;\nexport const cuid2 = /^[0-9a-z]+$/;\nexport const ulid = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/;\nexport const xid = /^[0-9a-vA-V]{20}$/;\nexport const ksuid = /^[A-Za-z0-9]{27}$/;\nexport const nanoid = /^[a-zA-Z0-9_-]{21}$/;\n/** ISO 8601-1 duration regex. Does not support the 8601-2 extensions like negative durations or fractional/negative components. */\nexport const duration = /^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/;\n/** Implements ISO 8601-2 extensions like explicit +- prefixes, mixing weeks with other units, and fractional/negative components. */\nexport const extendedDuration = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n/** A regex for any UUID-like identifier: 8-4-4-4-12 hex pattern */\nexport const guid = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/;\n/** Returns a regex for validating an RFC 9562/4122 UUID.\n *\n * @param version Optionally specify a version 1-8. If no version is specified, all versions are supported. */\nexport const uuid = (version) => {\n    if (!version)\n        return /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;\n    return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${version}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`);\n};\nexport const uuid4 = /*@__PURE__*/ uuid(4);\nexport const uuid6 = /*@__PURE__*/ uuid(6);\nexport const uuid7 = /*@__PURE__*/ uuid(7);\n/** Practical email validation */\nexport const email = /^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/;\n/** Equivalent to the HTML5 input[type=email] validation implemented by browsers. Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email */\nexport const html5Email = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n/** The classic emailregex.com regex for RFC 5322-compliant emails */\nexport const rfc5322Email = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n/** A loose regex that allows Unicode characters, enforces length limits, and that's about it. */\nexport const unicodeEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nexport const idnEmail = unicodeEmail;\nexport const browserEmail = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emoji = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nexport function emoji() {\n    return new RegExp(_emoji, \"u\");\n}\nexport const ipv4 = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nexport const ipv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/;\nexport const cidrv4 = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/;\nexport const cidrv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nexport const base64 = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/;\nexport const base64url = /^[A-Za-z0-9_-]*$/;\n// based on https://stackoverflow.com/questions/106179/regular-expression-to-match-dns-hostname-or-ip-address\n// export const hostname: RegExp = /^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+$/;\nexport const hostname = /^(?=.{1,253}\\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\\.?$/;\nexport const domain = /^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/;\n// https://blog.stevenlevithan.com/archives/validate-phone-number#r4-3 (regex sans spaces)\nexport const e164 = /^\\+(?:[0-9]){6,14}[0-9]$/;\n// const dateSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateSource = `(?:(?:\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\\\d|30)|(?:02)-(?:0[1-9]|1\\\\d|2[0-8])))`;\nexport const date = /*@__PURE__*/ new RegExp(`^${dateSource}$`);\nfunction timeSource(args) {\n    const hhmm = `(?:[01]\\\\d|2[0-3]):[0-5]\\\\d`;\n    const regex = typeof args.precision === \"number\"\n        ? args.precision === -1\n            ? `${hhmm}`\n            : args.precision === 0\n                ? `${hhmm}:[0-5]\\\\d`\n                : `${hhmm}:[0-5]\\\\d\\\\.\\\\d{${args.precision}}`\n        : `${hhmm}(?::[0-5]\\\\d(?:\\\\.\\\\d+)?)?`;\n    return regex;\n}\nexport function time(args) {\n    return new RegExp(`^${timeSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetime(args) {\n    const time = timeSource({ precision: args.precision });\n    const opts = [\"Z\"];\n    if (args.local)\n        opts.push(\"\");\n    // if (args.offset) opts.push(`([+-]\\\\d{2}:\\\\d{2})`);\n    if (args.offset)\n        opts.push(`([+-](?:[01]\\\\d|2[0-3]):[0-5]\\\\d)`);\n    const timeRegex = `${time}(?:${opts.join(\"|\")})`;\n    return new RegExp(`^${dateSource}T(?:${timeRegex})$`);\n}\nexport const string = (params) => {\n    const regex = params ? `[\\\\s\\\\S]{${params?.minimum ?? 0},${params?.maximum ?? \"\"}}` : `[\\\\s\\\\S]*`;\n    return new RegExp(`^${regex}$`);\n};\nexport const bigint = /^-?\\d+n?$/;\nexport const integer = /^-?\\d+$/;\nexport const number = /^-?\\d+(?:\\.\\d+)?/;\nexport const boolean = /^(?:true|false)$/i;\nconst _null = /^null$/i;\nexport { _null as null };\nconst _undefined = /^undefined$/i;\nexport { _undefined as undefined };\n// regex for string with no uppercase letters\nexport const lowercase = /^[^A-Z]*$/;\n// regex for string with no lowercase letters\nexport const uppercase = /^[^a-z]*$/;\n// regex for hexadecimal strings (any length)\nexport const hex = /^[0-9a-fA-F]*$/;\n// Hash regexes for different algorithms and encodings\n// Helper function to create base64 regex with exact length and padding\nfunction fixedBase64(bodyLength, padding) {\n    return new RegExp(`^[A-Za-z0-9+/]{${bodyLength}}${padding}$`);\n}\n// Helper function to create base64url regex with exact length (no padding)\nfunction fixedBase64url(length) {\n    return new RegExp(`^[A-Za-z0-9_-]{${length}}$`);\n}\n// MD5 (16 bytes): base64 = 24 chars total (22 + \"==\")\nexport const md5_hex = /^[0-9a-fA-F]{32}$/;\nexport const md5_base64 = /*@__PURE__*/ fixedBase64(22, \"==\");\nexport const md5_base64url = /*@__PURE__*/ fixedBase64url(22);\n// SHA1 (20 bytes): base64 = 28 chars total (27 + \"=\")\nexport const sha1_hex = /^[0-9a-fA-F]{40}$/;\nexport const sha1_base64 = /*@__PURE__*/ fixedBase64(27, \"=\");\nexport const sha1_base64url = /*@__PURE__*/ fixedBase64url(27);\n// SHA256 (32 bytes): base64 = 44 chars total (43 + \"=\")\nexport const sha256_hex = /^[0-9a-fA-F]{64}$/;\nexport const sha256_base64 = /*@__PURE__*/ fixedBase64(43, \"=\");\nexport const sha256_base64url = /*@__PURE__*/ fixedBase64url(43);\n// SHA384 (48 bytes): base64 = 64 chars total (no padding)\nexport const sha384_hex = /^[0-9a-fA-F]{96}$/;\nexport const sha384_base64 = /*@__PURE__*/ fixedBase64(64, \"\");\nexport const sha384_base64url = /*@__PURE__*/ fixedBase64url(64);\n// SHA512 (64 bytes): base64 = 88 chars total (86 + \"==\")\nexport const sha512_hex = /^[0-9a-fA-F]{128}$/;\nexport const sha512_base64 = /*@__PURE__*/ fixedBase64(86, \"==\");\nexport const sha512_base64url = /*@__PURE__*/ fixedBase64url(86);\n","// import { $ZodType } from \"./schemas.js\";\nimport * as core from \"./core.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nexport const $ZodCheck = /*@__PURE__*/ core.$constructor(\"$ZodCheck\", (inst, def) => {\n    var _a;\n    inst._zod ?? (inst._zod = {});\n    inst._zod.def = def;\n    (_a = inst._zod).onattach ?? (_a.onattach = []);\n});\nconst numericOriginMap = {\n    number: \"number\",\n    bigint: \"bigint\",\n    object: \"date\",\n};\nexport const $ZodCheckLessThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckLessThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.maximum : bag.exclusiveMaximum) ?? Number.POSITIVE_INFINITY;\n        if (def.value < curr) {\n            if (def.inclusive)\n                bag.maximum = def.value;\n            else\n                bag.exclusiveMaximum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value <= def.value : payload.value < def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckGreaterThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckGreaterThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.minimum : bag.exclusiveMinimum) ?? Number.NEGATIVE_INFINITY;\n        if (def.value > curr) {\n            if (def.inclusive)\n                bag.minimum = def.value;\n            else\n                bag.exclusiveMinimum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value >= def.value : payload.value > def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMultipleOf = \n/*@__PURE__*/ core.$constructor(\"$ZodCheckMultipleOf\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        var _a;\n        (_a = inst._zod.bag).multipleOf ?? (_a.multipleOf = def.value);\n    });\n    inst._zod.check = (payload) => {\n        if (typeof payload.value !== typeof def.value)\n            throw new Error(\"Cannot mix number and bigint in multiple_of check.\");\n        const isMultiple = typeof payload.value === \"bigint\"\n            ? payload.value % def.value === BigInt(0)\n            : util.floatSafeRemainder(payload.value, def.value) === 0;\n        if (isMultiple)\n            return;\n        payload.issues.push({\n            origin: typeof payload.value,\n            code: \"not_multiple_of\",\n            divisor: def.value,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckNumberFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    def.format = def.format || \"float64\";\n    const isInt = def.format?.includes(\"int\");\n    const origin = isInt ? \"int\" : \"number\";\n    const [minimum, maximum] = util.NUMBER_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n        if (isInt)\n            bag.pattern = regexes.integer;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (isInt) {\n            if (!Number.isInteger(input)) {\n                // invalid_format issue\n                // payload.issues.push({\n                //   expected: def.format,\n                //   format: def.format,\n                //   code: \"invalid_format\",\n                //   input,\n                //   inst,\n                // });\n                // invalid_type issue\n                payload.issues.push({\n                    expected: origin,\n                    format: def.format,\n                    code: \"invalid_type\",\n                    continue: false,\n                    input,\n                    inst,\n                });\n                return;\n                // not_multiple_of issue\n                // payload.issues.push({\n                //   code: \"not_multiple_of\",\n                //   origin: \"number\",\n                //   input,\n                //   inst,\n                //   divisor: 1,\n                // });\n            }\n            if (!Number.isSafeInteger(input)) {\n                if (input > 0) {\n                    // too_big\n                    payload.issues.push({\n                        input,\n                        code: \"too_big\",\n                        maximum: Number.MAX_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                else {\n                    // too_small\n                    payload.issues.push({\n                        input,\n                        code: \"too_small\",\n                        minimum: Number.MIN_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                return;\n            }\n        }\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_small\",\n                minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckBigIntFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    const [minimum, maximum] = util.BIGINT_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_small\",\n                minimum: minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckMaxSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size <= def.maximum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size >= def.minimum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckSizeEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckSizeEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.size;\n        bag.maximum = def.size;\n        bag.size = def.size;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size === def.size)\n            return;\n        const tooBig = size > def.size;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            ...(tooBig ? { code: \"too_big\", maximum: def.size } : { code: \"too_small\", minimum: def.size }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMaxLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length <= def.maximum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length >= def.minimum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLengthEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckLengthEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.length;\n        bag.maximum = def.length;\n        bag.length = def.length;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length === def.length)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        const tooBig = length > def.length;\n        payload.issues.push({\n            origin,\n            ...(tooBig ? { code: \"too_big\", maximum: def.length } : { code: \"too_small\", minimum: def.length }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckStringFormat\", (inst, def) => {\n    var _a, _b;\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        if (def.pattern) {\n            bag.patterns ?? (bag.patterns = new Set());\n            bag.patterns.add(def.pattern);\n        }\n    });\n    if (def.pattern)\n        (_a = inst._zod).check ?? (_a.check = (payload) => {\n            def.pattern.lastIndex = 0;\n            if (def.pattern.test(payload.value))\n                return;\n            payload.issues.push({\n                origin: \"string\",\n                code: \"invalid_format\",\n                format: def.format,\n                input: payload.value,\n                ...(def.pattern ? { pattern: def.pattern.toString() } : {}),\n                inst,\n                continue: !def.abort,\n            });\n        });\n    else\n        (_b = inst._zod).check ?? (_b.check = () => { });\n});\nexport const $ZodCheckRegex = /*@__PURE__*/ core.$constructor(\"$ZodCheckRegex\", (inst, def) => {\n    $ZodCheckStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        def.pattern.lastIndex = 0;\n        if (def.pattern.test(payload.value))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"regex\",\n            input: payload.value,\n            pattern: def.pattern.toString(),\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLowerCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckLowerCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.lowercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckUpperCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckUpperCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.uppercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckIncludes = /*@__PURE__*/ core.$constructor(\"$ZodCheckIncludes\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const escapedRegex = util.escapeRegex(def.includes);\n    const pattern = new RegExp(typeof def.position === \"number\" ? `^.{${def.position}}${escapedRegex}` : escapedRegex);\n    def.pattern = pattern;\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.includes(def.includes, def.position))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"includes\",\n            includes: def.includes,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStartsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckStartsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`^${util.escapeRegex(def.prefix)}.*`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.startsWith(def.prefix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"starts_with\",\n            prefix: def.prefix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckEndsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckEndsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`.*${util.escapeRegex(def.suffix)}$`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.endsWith(def.suffix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"ends_with\",\n            suffix: def.suffix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n///////////////////////////////////\n/////    $ZodCheckProperty    /////\n///////////////////////////////////\nfunction handleCheckPropertyResult(result, payload, property) {\n    if (result.issues.length) {\n        payload.issues.push(...util.prefixIssues(property, result.issues));\n    }\n}\nexport const $ZodCheckProperty = /*@__PURE__*/ core.$constructor(\"$ZodCheckProperty\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        const result = def.schema._zod.run({\n            value: payload.value[def.property],\n            issues: [],\n        }, {});\n        if (result instanceof Promise) {\n            return result.then((result) => handleCheckPropertyResult(result, payload, def.property));\n        }\n        handleCheckPropertyResult(result, payload, def.property);\n        return;\n    };\n});\nexport const $ZodCheckMimeType = /*@__PURE__*/ core.$constructor(\"$ZodCheckMimeType\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const mimeSet = new Set(def.mime);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.mime = def.mime;\n    });\n    inst._zod.check = (payload) => {\n        if (mimeSet.has(payload.value.type))\n            return;\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.mime,\n            input: payload.value.type,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckOverwrite = /*@__PURE__*/ core.$constructor(\"$ZodCheckOverwrite\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        payload.value = def.tx(payload.value);\n    };\n});\n","export class Doc {\n    constructor(args = []) {\n        this.content = [];\n        this.indent = 0;\n        if (this)\n            this.args = args;\n    }\n    indented(fn) {\n        this.indent += 1;\n        fn(this);\n        this.indent -= 1;\n    }\n    write(arg) {\n        if (typeof arg === \"function\") {\n            arg(this, { execution: \"sync\" });\n            arg(this, { execution: \"async\" });\n            return;\n        }\n        const content = arg;\n        const lines = content.split(\"\\n\").filter((x) => x);\n        const minIndent = Math.min(...lines.map((x) => x.length - x.trimStart().length));\n        const dedented = lines.map((x) => x.slice(minIndent)).map((x) => \" \".repeat(this.indent * 2) + x);\n        for (const line of dedented) {\n            this.content.push(line);\n        }\n    }\n    compile() {\n        const F = Function;\n        const args = this?.args;\n        const content = this?.content ?? [``];\n        const lines = [...content.map((x) => `  ${x}`)];\n        // console.log(lines.join(\"\\n\"));\n        return new F(...args, lines.join(\"\\n\"));\n    }\n}\n","export const version = {\n    major: 4,\n    minor: 1,\n    patch: 12,\n};\n","import * as checks from \"./checks.js\";\nimport * as core from \"./core.js\";\nimport { Doc } from \"./doc.js\";\nimport { parse, parseAsync, safeParse, safeParseAsync } from \"./parse.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nimport { version } from \"./versions.js\";\nexport const $ZodType = /*@__PURE__*/ core.$constructor(\"$ZodType\", (inst, def) => {\n    var _a;\n    inst ?? (inst = {});\n    inst._zod.def = def; // set _def property\n    inst._zod.bag = inst._zod.bag || {}; // initialize _bag object\n    inst._zod.version = version;\n    const checks = [...(inst._zod.def.checks ?? [])];\n    // if inst is itself a checks.$ZodCheck, run it as a check\n    if (inst._zod.traits.has(\"$ZodCheck\")) {\n        checks.unshift(inst);\n    }\n    for (const ch of checks) {\n        for (const fn of ch._zod.onattach) {\n            fn(inst);\n        }\n    }\n    if (checks.length === 0) {\n        // deferred initializer\n        // inst._zod.parse is not yet defined\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        inst._zod.deferred?.push(() => {\n            inst._zod.run = inst._zod.parse;\n        });\n    }\n    else {\n        const runChecks = (payload, checks, ctx) => {\n            let isAborted = util.aborted(payload);\n            let asyncResult;\n            for (const ch of checks) {\n                if (ch._zod.def.when) {\n                    const shouldRun = ch._zod.def.when(payload);\n                    if (!shouldRun)\n                        continue;\n                }\n                else if (isAborted) {\n                    continue;\n                }\n                const currLen = payload.issues.length;\n                const _ = ch._zod.check(payload);\n                if (_ instanceof Promise && ctx?.async === false) {\n                    throw new core.$ZodAsyncError();\n                }\n                if (asyncResult || _ instanceof Promise) {\n                    asyncResult = (asyncResult ?? Promise.resolve()).then(async () => {\n                        await _;\n                        const nextLen = payload.issues.length;\n                        if (nextLen === currLen)\n                            return;\n                        if (!isAborted)\n                            isAborted = util.aborted(payload, currLen);\n                    });\n                }\n                else {\n                    const nextLen = payload.issues.length;\n                    if (nextLen === currLen)\n                        continue;\n                    if (!isAborted)\n                        isAborted = util.aborted(payload, currLen);\n                }\n            }\n            if (asyncResult) {\n                return asyncResult.then(() => {\n                    return payload;\n                });\n            }\n            return payload;\n        };\n        // const handleChecksResult = (\n        //   checkResult: ParsePayload,\n        //   originalResult: ParsePayload,\n        //   ctx: ParseContextInternal\n        // ): util.MaybeAsync<ParsePayload> => {\n        //   // if the checks mutated the value && there are no issues, re-parse the result\n        //   if (checkResult.value !== originalResult.value && !checkResult.issues.length)\n        //     return inst._zod.parse(checkResult, ctx);\n        //   return originalResult;\n        // };\n        const handleCanaryResult = (canary, payload, ctx) => {\n            // abort if the canary is aborted\n            if (util.aborted(canary)) {\n                canary.aborted = true;\n                return canary;\n            }\n            // run checks first, then\n            const checkResult = runChecks(payload, checks, ctx);\n            if (checkResult instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return checkResult.then((checkResult) => inst._zod.parse(checkResult, ctx));\n            }\n            return inst._zod.parse(checkResult, ctx);\n        };\n        inst._zod.run = (payload, ctx) => {\n            if (ctx.skipChecks) {\n                return inst._zod.parse(payload, ctx);\n            }\n            if (ctx.direction === \"backward\") {\n                // run canary\n                // initial pass (no checks)\n                const canary = inst._zod.parse({ value: payload.value, issues: [] }, { ...ctx, skipChecks: true });\n                if (canary instanceof Promise) {\n                    return canary.then((canary) => {\n                        return handleCanaryResult(canary, payload, ctx);\n                    });\n                }\n                return handleCanaryResult(canary, payload, ctx);\n            }\n            // forward\n            const result = inst._zod.parse(payload, ctx);\n            if (result instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return result.then((result) => runChecks(result, checks, ctx));\n            }\n            return runChecks(result, checks, ctx);\n        };\n    }\n    inst[\"~standard\"] = {\n        validate: (value) => {\n            try {\n                const r = safeParse(inst, value);\n                return r.success ? { value: r.data } : { issues: r.error?.issues };\n            }\n            catch (_) {\n                return safeParseAsync(inst, value).then((r) => (r.success ? { value: r.data } : { issues: r.error?.issues }));\n            }\n        },\n        vendor: \"zod\",\n        version: 1,\n    };\n});\nexport { clone } from \"./util.js\";\nexport const $ZodString = /*@__PURE__*/ core.$constructor(\"$ZodString\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = [...(inst?._zod.bag?.patterns ?? [])].pop() ?? regexes.string(inst._zod.bag);\n    inst._zod.parse = (payload, _) => {\n        if (def.coerce)\n            try {\n                payload.value = String(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"string\")\n            return payload;\n        payload.issues.push({\n            expected: \"string\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodStringFormat\", (inst, def) => {\n    // check initialization must come first\n    checks.$ZodCheckStringFormat.init(inst, def);\n    $ZodString.init(inst, def);\n});\nexport const $ZodGUID = /*@__PURE__*/ core.$constructor(\"$ZodGUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.guid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodUUID = /*@__PURE__*/ core.$constructor(\"$ZodUUID\", (inst, def) => {\n    if (def.version) {\n        const versionMap = {\n            v1: 1,\n            v2: 2,\n            v3: 3,\n            v4: 4,\n            v5: 5,\n            v6: 6,\n            v7: 7,\n            v8: 8,\n        };\n        const v = versionMap[def.version];\n        if (v === undefined)\n            throw new Error(`Invalid UUID version: \"${def.version}\"`);\n        def.pattern ?? (def.pattern = regexes.uuid(v));\n    }\n    else\n        def.pattern ?? (def.pattern = regexes.uuid());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodEmail = /*@__PURE__*/ core.$constructor(\"$ZodEmail\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.email);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodURL = /*@__PURE__*/ core.$constructor(\"$ZodURL\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        try {\n            // Trim whitespace from input\n            const trimmed = payload.value.trim();\n            // @ts-ignore\n            const url = new URL(trimmed);\n            if (def.hostname) {\n                def.hostname.lastIndex = 0;\n                if (!def.hostname.test(url.hostname)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid hostname\",\n                        pattern: regexes.hostname.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            if (def.protocol) {\n                def.protocol.lastIndex = 0;\n                if (!def.protocol.test(url.protocol.endsWith(\":\") ? url.protocol.slice(0, -1) : url.protocol)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid protocol\",\n                        pattern: def.protocol.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            // Set the output value based on normalize flag\n            if (def.normalize) {\n                // Use normalized URL\n                payload.value = url.href;\n            }\n            else {\n                // Preserve the original input (trimmed)\n                payload.value = trimmed;\n            }\n            return;\n        }\n        catch (_) {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"url\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodEmoji = /*@__PURE__*/ core.$constructor(\"$ZodEmoji\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.emoji());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodNanoID = /*@__PURE__*/ core.$constructor(\"$ZodNanoID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.nanoid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID = /*@__PURE__*/ core.$constructor(\"$ZodCUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID2 = /*@__PURE__*/ core.$constructor(\"$ZodCUID2\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid2);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodULID = /*@__PURE__*/ core.$constructor(\"$ZodULID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ulid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodXID = /*@__PURE__*/ core.$constructor(\"$ZodXID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.xid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodKSUID = /*@__PURE__*/ core.$constructor(\"$ZodKSUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ksuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODateTime = /*@__PURE__*/ core.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.datetime(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODate = /*@__PURE__*/ core.$constructor(\"$ZodISODate\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.date);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISOTime = /*@__PURE__*/ core.$constructor(\"$ZodISOTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.time(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODuration = /*@__PURE__*/ core.$constructor(\"$ZodISODuration\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.duration);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodIPv4 = /*@__PURE__*/ core.$constructor(\"$ZodIPv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv4);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv4`;\n    });\n});\nexport const $ZodIPv6 = /*@__PURE__*/ core.$constructor(\"$ZodIPv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv6);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv6`;\n    });\n    inst._zod.check = (payload) => {\n        try {\n            // @ts-ignore\n            new URL(`http://[${payload.value}]`);\n            // return;\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"ipv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv4);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv6); // not used for validation\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        const parts = payload.value.split(\"/\");\n        try {\n            if (parts.length !== 2)\n                throw new Error();\n            const [address, prefix] = parts;\n            if (!prefix)\n                throw new Error();\n            const prefixNum = Number(prefix);\n            if (`${prefixNum}` !== prefix)\n                throw new Error();\n            if (prefixNum < 0 || prefixNum > 128)\n                throw new Error();\n            // @ts-ignore\n            new URL(`http://[${address}]`);\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"cidrv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64(data) {\n    if (data === \"\")\n        return true;\n    if (data.length % 4 !== 0)\n        return false;\n    try {\n        // @ts-ignore\n        atob(data);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodBase64 = /*@__PURE__*/ core.$constructor(\"$ZodBase64\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64URL(data) {\n    if (!regexes.base64url.test(data))\n        return false;\n    const base64 = data.replace(/[-_]/g, (c) => (c === \"-\" ? \"+\" : \"/\"));\n    const padded = base64.padEnd(Math.ceil(base64.length / 4) * 4, \"=\");\n    return isValidBase64(padded);\n}\nexport const $ZodBase64URL = /*@__PURE__*/ core.$constructor(\"$ZodBase64URL\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64url);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64url\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64URL(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64url\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodE164 = /*@__PURE__*/ core.$constructor(\"$ZodE164\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.e164);\n    $ZodStringFormat.init(inst, def);\n});\n//////////////////////////////   ZodJWT   //////////////////////////////\nexport function isValidJWT(token, algorithm = null) {\n    try {\n        const tokensParts = token.split(\".\");\n        if (tokensParts.length !== 3)\n            return false;\n        const [header] = tokensParts;\n        if (!header)\n            return false;\n        // @ts-ignore\n        const parsedHeader = JSON.parse(atob(header));\n        if (\"typ\" in parsedHeader && parsedHeader?.typ !== \"JWT\")\n            return false;\n        if (!parsedHeader.alg)\n            return false;\n        if (algorithm && (!(\"alg\" in parsedHeader) || parsedHeader.alg !== algorithm))\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodJWT = /*@__PURE__*/ core.$constructor(\"$ZodJWT\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (isValidJWT(payload.value, def.alg))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"jwt\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCustomStringFormat\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (def.fn(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: def.format,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodNumber = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = inst._zod.bag.pattern ?? regexes.number;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Number(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"number\" && !Number.isNaN(input) && Number.isFinite(input)) {\n            return payload;\n        }\n        const received = typeof input === \"number\"\n            ? Number.isNaN(input)\n                ? \"NaN\"\n                : !Number.isFinite(input)\n                    ? \"Infinity\"\n                    : undefined\n            : undefined;\n        payload.issues.push({\n            expected: \"number\",\n            code: \"invalid_type\",\n            input,\n            inst,\n            ...(received ? { received } : {}),\n        });\n        return payload;\n    };\n});\nexport const $ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    checks.$ZodCheckNumberFormat.init(inst, def);\n    $ZodNumber.init(inst, def); // no format checksp\n});\nexport const $ZodBoolean = /*@__PURE__*/ core.$constructor(\"$ZodBoolean\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.boolean;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Boolean(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"boolean\")\n            return payload;\n        payload.issues.push({\n            expected: \"boolean\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigInt = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.bigint;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = BigInt(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"bigint\")\n            return payload;\n        payload.issues.push({\n            expected: \"bigint\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    checks.$ZodCheckBigIntFormat.init(inst, def);\n    $ZodBigInt.init(inst, def); // no format checks\n});\nexport const $ZodSymbol = /*@__PURE__*/ core.$constructor(\"$ZodSymbol\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"symbol\")\n            return payload;\n        payload.issues.push({\n            expected: \"symbol\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodUndefined = /*@__PURE__*/ core.$constructor(\"$ZodUndefined\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.undefined;\n    inst._zod.values = new Set([undefined]);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"undefined\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodNull = /*@__PURE__*/ core.$constructor(\"$ZodNull\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.null;\n    inst._zod.values = new Set([null]);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input === null)\n            return payload;\n        payload.issues.push({\n            expected: \"null\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodAny = /*@__PURE__*/ core.$constructor(\"$ZodAny\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodUnknown = /*@__PURE__*/ core.$constructor(\"$ZodUnknown\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodNever = /*@__PURE__*/ core.$constructor(\"$ZodNever\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.issues.push({\n            expected: \"never\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodVoid = /*@__PURE__*/ core.$constructor(\"$ZodVoid\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"void\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodDate = /*@__PURE__*/ core.$constructor(\"$ZodDate\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce) {\n            try {\n                payload.value = new Date(payload.value);\n            }\n            catch (_err) { }\n        }\n        const input = payload.value;\n        const isDate = input instanceof Date;\n        const isValidDate = isDate && !Number.isNaN(input.getTime());\n        if (isValidDate)\n            return payload;\n        payload.issues.push({\n            expected: \"date\",\n            code: \"invalid_type\",\n            input,\n            ...(isDate ? { received: \"Invalid Date\" } : {}),\n            inst,\n        });\n        return payload;\n    };\n});\nfunction handleArrayResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodArray = /*@__PURE__*/ core.$constructor(\"$ZodArray\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                expected: \"array\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = Array(input.length);\n        const proms = [];\n        for (let i = 0; i < input.length; i++) {\n            const item = input[i];\n            const result = def.element._zod.run({\n                value: item,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleArrayResult(result, payload, i)));\n            }\n            else {\n                handleArrayResult(result, payload, i);\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload; //handleArrayResultsAsync(parseResults, final);\n    };\n});\nfunction handlePropertyResult(result, final, key, input) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(key, result.issues));\n    }\n    if (result.value === undefined) {\n        if (key in input) {\n            final.value[key] = undefined;\n        }\n    }\n    else {\n        final.value[key] = result.value;\n    }\n}\nfunction normalizeDef(def) {\n    const keys = Object.keys(def.shape);\n    for (const k of keys) {\n        if (!def.shape?.[k]?._zod?.traits?.has(\"$ZodType\")) {\n            throw new Error(`Invalid element at key \"${k}\": expected a Zod schema`);\n        }\n    }\n    const okeys = util.optionalKeys(def.shape);\n    return {\n        ...def,\n        keys,\n        keySet: new Set(keys),\n        numKeys: keys.length,\n        optionalKeys: new Set(okeys),\n    };\n}\nfunction handleCatchall(proms, input, payload, ctx, def, inst) {\n    const unrecognized = [];\n    // iterate over input keys\n    const keySet = def.keySet;\n    const _catchall = def.catchall._zod;\n    const t = _catchall.def.type;\n    for (const key of Object.keys(input)) {\n        if (keySet.has(key))\n            continue;\n        if (t === \"never\") {\n            unrecognized.push(key);\n            continue;\n        }\n        const r = _catchall.run({ value: input[key], issues: [] }, ctx);\n        if (r instanceof Promise) {\n            proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n        }\n        else {\n            handlePropertyResult(r, payload, key, input);\n        }\n    }\n    if (unrecognized.length) {\n        payload.issues.push({\n            code: \"unrecognized_keys\",\n            keys: unrecognized,\n            input,\n            inst,\n        });\n    }\n    if (!proms.length)\n        return payload;\n    return Promise.all(proms).then(() => {\n        return payload;\n    });\n}\nexport const $ZodObject = /*@__PURE__*/ core.$constructor(\"$ZodObject\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodType.init(inst, def);\n    // const sh = def.shape;\n    const desc = Object.getOwnPropertyDescriptor(def, \"shape\");\n    if (!desc?.get) {\n        const sh = def.shape;\n        Object.defineProperty(def, \"shape\", {\n            get: () => {\n                const newSh = { ...sh };\n                Object.defineProperty(def, \"shape\", {\n                    value: newSh,\n                });\n                return newSh;\n            },\n        });\n    }\n    const _normalized = util.cached(() => normalizeDef(def));\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const shape = def.shape;\n        const propValues = {};\n        for (const key in shape) {\n            const field = shape[key]._zod;\n            if (field.values) {\n                propValues[key] ?? (propValues[key] = new Set());\n                for (const v of field.values)\n                    propValues[key].add(v);\n            }\n        }\n        return propValues;\n    });\n    const isObject = util.isObject;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = {};\n        const proms = [];\n        const shape = value.shape;\n        for (const key of value.keys) {\n            const el = shape[key];\n            const r = el._zod.run({ value: input[key], issues: [] }, ctx);\n            if (r instanceof Promise) {\n                proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n            }\n            else {\n                handlePropertyResult(r, payload, key, input);\n            }\n        }\n        if (!catchall) {\n            return proms.length ? Promise.all(proms).then(() => payload) : payload;\n        }\n        return handleCatchall(proms, input, payload, ctx, _normalized.value, inst);\n    };\n});\nexport const $ZodObjectJIT = /*@__PURE__*/ core.$constructor(\"$ZodObjectJIT\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodObject.init(inst, def);\n    const superParse = inst._zod.parse;\n    const _normalized = util.cached(() => normalizeDef(def));\n    const generateFastpass = (shape) => {\n        const doc = new Doc([\"shape\", \"payload\", \"ctx\"]);\n        const normalized = _normalized.value;\n        const parseStr = (key) => {\n            const k = util.esc(key);\n            return `shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`;\n        };\n        doc.write(`const input = payload.value;`);\n        const ids = Object.create(null);\n        let counter = 0;\n        for (const key of normalized.keys) {\n            ids[key] = `key_${counter++}`;\n        }\n        // A: preserve key order {\n        doc.write(`const newResult = {};`);\n        for (const key of normalized.keys) {\n            const id = ids[key];\n            const k = util.esc(key);\n            doc.write(`const ${id} = ${parseStr(key)};`);\n            doc.write(`\n        if (${id}.issues.length) {\n          payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${k}, ...iss.path] : [${k}]\n          })));\n        }\n        \n        \n        if (${id}.value === undefined) {\n          if (${k} in input) {\n            newResult[${k}] = undefined;\n          }\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n        \n      `);\n        }\n        doc.write(`payload.value = newResult;`);\n        doc.write(`return payload;`);\n        const fn = doc.compile();\n        return (payload, ctx) => fn(shape, payload, ctx);\n    };\n    let fastpass;\n    const isObject = util.isObject;\n    const jit = !core.globalConfig.jitless;\n    const allowsEval = util.allowsEval;\n    const fastEnabled = jit && allowsEval.value; // && !def.catchall;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        if (jit && fastEnabled && ctx?.async === false && ctx.jitless !== true) {\n            // always synchronous\n            if (!fastpass)\n                fastpass = generateFastpass(def.shape);\n            payload = fastpass(payload, ctx);\n            if (!catchall)\n                return payload;\n            return handleCatchall([], input, payload, ctx, value, inst);\n        }\n        return superParse(payload, ctx);\n    };\n});\nfunction handleUnionResults(results, final, inst, ctx) {\n    for (const result of results) {\n        if (result.issues.length === 0) {\n            final.value = result.value;\n            return final;\n        }\n    }\n    const nonaborted = results.filter((r) => !util.aborted(r));\n    if (nonaborted.length === 1) {\n        final.value = nonaborted[0].value;\n        return nonaborted[0];\n    }\n    final.issues.push({\n        code: \"invalid_union\",\n        input: final.value,\n        inst,\n        errors: results.map((result) => result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n    });\n    return final;\n}\nexport const $ZodUnion = /*@__PURE__*/ core.$constructor(\"$ZodUnion\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.options.some((o) => o._zod.optin === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"optout\", () => def.options.some((o) => o._zod.optout === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"values\", () => {\n        if (def.options.every((o) => o._zod.values)) {\n            return new Set(def.options.flatMap((option) => Array.from(option._zod.values)));\n        }\n        return undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        if (def.options.every((o) => o._zod.pattern)) {\n            const patterns = def.options.map((o) => o._zod.pattern);\n            return new RegExp(`^(${patterns.map((p) => util.cleanRegex(p.source)).join(\"|\")})$`);\n        }\n        return undefined;\n    });\n    const single = def.options.length === 1;\n    const first = def.options[0]._zod.run;\n    inst._zod.parse = (payload, ctx) => {\n        if (single) {\n            return first(payload, ctx);\n        }\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                if (result.issues.length === 0)\n                    return result;\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nexport const $ZodDiscriminatedUnion = \n/*@__PURE__*/\ncore.$constructor(\"$ZodDiscriminatedUnion\", (inst, def) => {\n    $ZodUnion.init(inst, def);\n    const _super = inst._zod.parse;\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const propValues = {};\n        for (const option of def.options) {\n            const pv = option._zod.propValues;\n            if (!pv || Object.keys(pv).length === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(option)}\"`);\n            for (const [k, v] of Object.entries(pv)) {\n                if (!propValues[k])\n                    propValues[k] = new Set();\n                for (const val of v) {\n                    propValues[k].add(val);\n                }\n            }\n        }\n        return propValues;\n    });\n    const disc = util.cached(() => {\n        const opts = def.options;\n        const map = new Map();\n        for (const o of opts) {\n            const values = o._zod.propValues?.[def.discriminator];\n            if (!values || values.size === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(o)}\"`);\n            for (const v of values) {\n                if (map.has(v)) {\n                    throw new Error(`Duplicate discriminator value \"${String(v)}\"`);\n                }\n                map.set(v, o);\n            }\n        }\n        return map;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isObject(input)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"object\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const opt = disc.value.get(input?.[def.discriminator]);\n        if (opt) {\n            return opt._zod.run(payload, ctx);\n        }\n        if (def.unionFallback) {\n            return _super(payload, ctx);\n        }\n        // no matching discriminator\n        payload.issues.push({\n            code: \"invalid_union\",\n            errors: [],\n            note: \"No matching discriminator\",\n            discriminator: def.discriminator,\n            input,\n            path: [def.discriminator],\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodIntersection = /*@__PURE__*/ core.$constructor(\"$ZodIntersection\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        const left = def.left._zod.run({ value: input, issues: [] }, ctx);\n        const right = def.right._zod.run({ value: input, issues: [] }, ctx);\n        const async = left instanceof Promise || right instanceof Promise;\n        if (async) {\n            return Promise.all([left, right]).then(([left, right]) => {\n                return handleIntersectionResults(payload, left, right);\n            });\n        }\n        return handleIntersectionResults(payload, left, right);\n    };\n});\nfunction mergeValues(a, b) {\n    // const aType = parse.t(a);\n    // const bType = parse.t(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    if (a instanceof Date && b instanceof Date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    if (util.isPlainObject(a) && util.isPlainObject(b)) {\n        const bKeys = Object.keys(b);\n        const sharedKeys = Object.keys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [key, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return { valid: false, mergeErrorPath: [] };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [index, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    return { valid: false, mergeErrorPath: [] };\n}\nfunction handleIntersectionResults(result, left, right) {\n    if (left.issues.length) {\n        result.issues.push(...left.issues);\n    }\n    if (right.issues.length) {\n        result.issues.push(...right.issues);\n    }\n    if (util.aborted(result))\n        return result;\n    const merged = mergeValues(left.value, right.value);\n    if (!merged.valid) {\n        throw new Error(`Unmergable intersection. Error path: ` + `${JSON.stringify(merged.mergeErrorPath)}`);\n    }\n    result.value = merged.data;\n    return result;\n}\nexport const $ZodTuple = /*@__PURE__*/ core.$constructor(\"$ZodTuple\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const items = def.items;\n    const optStart = items.length - [...items].reverse().findIndex((item) => item._zod.optin !== \"optional\");\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"tuple\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        payload.value = [];\n        const proms = [];\n        if (!def.rest) {\n            const tooBig = input.length > items.length;\n            const tooSmall = input.length < optStart - 1;\n            if (tooBig || tooSmall) {\n                payload.issues.push({\n                    ...(tooBig ? { code: \"too_big\", maximum: items.length } : { code: \"too_small\", minimum: items.length }),\n                    input,\n                    inst,\n                    origin: \"array\",\n                });\n                return payload;\n            }\n        }\n        let i = -1;\n        for (const item of items) {\n            i++;\n            if (i >= input.length)\n                if (i >= optStart)\n                    continue;\n            const result = item._zod.run({\n                value: input[i],\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n            }\n            else {\n                handleTupleResult(result, payload, i);\n            }\n        }\n        if (def.rest) {\n            const rest = input.slice(items.length);\n            for (const el of rest) {\n                i++;\n                const result = def.rest._zod.run({\n                    value: el,\n                    issues: [],\n                }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n                }\n                else {\n                    handleTupleResult(result, payload, i);\n                }\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleTupleResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodRecord = /*@__PURE__*/ core.$constructor(\"$ZodRecord\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isPlainObject(input)) {\n            payload.issues.push({\n                expected: \"record\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (def.keyType._zod.values) {\n            const values = def.keyType._zod.values;\n            payload.value = {};\n            for (const key of values) {\n                if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"symbol\") {\n                    const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                    if (result instanceof Promise) {\n                        proms.push(result.then((result) => {\n                            if (result.issues.length) {\n                                payload.issues.push(...util.prefixIssues(key, result.issues));\n                            }\n                            payload.value[key] = result.value;\n                        }));\n                    }\n                    else {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[key] = result.value;\n                    }\n                }\n            }\n            let unrecognized;\n            for (const key in input) {\n                if (!values.has(key)) {\n                    unrecognized = unrecognized ?? [];\n                    unrecognized.push(key);\n                }\n            }\n            if (unrecognized && unrecognized.length > 0) {\n                payload.issues.push({\n                    code: \"unrecognized_keys\",\n                    input,\n                    inst,\n                    keys: unrecognized,\n                });\n            }\n        }\n        else {\n            payload.value = {};\n            for (const key of Reflect.ownKeys(input)) {\n                if (key === \"__proto__\")\n                    continue;\n                const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n                if (keyResult instanceof Promise) {\n                    throw new Error(\"Async schemas not supported in object keys currently\");\n                }\n                if (keyResult.issues.length) {\n                    payload.issues.push({\n                        code: \"invalid_key\",\n                        origin: \"record\",\n                        issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        input: key,\n                        path: [key],\n                        inst,\n                    });\n                    payload.value[keyResult.value] = keyResult.value;\n                    continue;\n                }\n                const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[keyResult.value] = result.value;\n                    }));\n                }\n                else {\n                    if (result.issues.length) {\n                        payload.issues.push(...util.prefixIssues(key, result.issues));\n                    }\n                    payload.value[keyResult.value] = result.value;\n                }\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload;\n    };\n});\nexport const $ZodMap = /*@__PURE__*/ core.$constructor(\"$ZodMap\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Map)) {\n            payload.issues.push({\n                expected: \"map\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Map();\n        for (const [key, value] of input) {\n            const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n            const valueResult = def.valueType._zod.run({ value: value, issues: [] }, ctx);\n            if (keyResult instanceof Promise || valueResult instanceof Promise) {\n                proms.push(Promise.all([keyResult, valueResult]).then(([keyResult, valueResult]) => {\n                    handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n                }));\n            }\n            else {\n                handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleMapResult(keyResult, valueResult, final, key, input, inst, ctx) {\n    if (keyResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, keyResult.issues));\n        }\n        else {\n            final.issues.push({\n                code: \"invalid_key\",\n                origin: \"map\",\n                input,\n                inst,\n                issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    if (valueResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, valueResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_element\",\n                input,\n                inst,\n                key: key,\n                issues: valueResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    final.value.set(keyResult.value, valueResult.value);\n}\nexport const $ZodSet = /*@__PURE__*/ core.$constructor(\"$ZodSet\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Set)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"set\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Set();\n        for (const item of input) {\n            const result = def.valueType._zod.run({ value: item, issues: [] }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleSetResult(result, payload)));\n            }\n            else\n                handleSetResult(result, payload);\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleSetResult(result, final) {\n    if (result.issues.length) {\n        final.issues.push(...result.issues);\n    }\n    final.value.add(result.value);\n}\nexport const $ZodEnum = /*@__PURE__*/ core.$constructor(\"$ZodEnum\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const values = util.getEnumValues(def.entries);\n    const valuesSet = new Set(values);\n    inst._zod.values = valuesSet;\n    inst._zod.pattern = new RegExp(`^(${values\n        .filter((k) => util.propertyKeyTypes.has(typeof k))\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o.toString()))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (valuesSet.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodLiteral = /*@__PURE__*/ core.$constructor(\"$ZodLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    if (def.values.length === 0) {\n        throw new Error(\"Cannot create literal schema with no valid values\");\n    }\n    inst._zod.values = new Set(def.values);\n    inst._zod.pattern = new RegExp(`^(${def.values\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o ? util.escapeRegex(o.toString()) : String(o)))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodFile = /*@__PURE__*/ core.$constructor(\"$ZodFile\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        // @ts-ignore\n        if (input instanceof File)\n            return payload;\n        payload.issues.push({\n            expected: \"file\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodTransform = /*@__PURE__*/ core.$constructor(\"$ZodTransform\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(inst.constructor.name);\n        }\n        const _out = def.transform(payload.value, payload);\n        if (ctx.async) {\n            const output = _out instanceof Promise ? _out : Promise.resolve(_out);\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        if (_out instanceof Promise) {\n            throw new core.$ZodAsyncError();\n        }\n        payload.value = _out;\n        return payload;\n    };\n});\nfunction handleOptionalResult(result, input) {\n    if (result.issues.length && input === undefined) {\n        return { issues: [], value: undefined };\n    }\n    return result;\n}\nexport const $ZodOptional = /*@__PURE__*/ core.$constructor(\"$ZodOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, undefined]) : undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)})?$`) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (def.innerType._zod.optin === \"optional\") {\n            const result = def.innerType._zod.run(payload, ctx);\n            if (result instanceof Promise)\n                return result.then((r) => handleOptionalResult(r, payload.value));\n            return handleOptionalResult(result, payload.value);\n        }\n        if (payload.value === undefined) {\n            return payload;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNullable = /*@__PURE__*/ core.$constructor(\"$ZodNullable\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)}|null)$`) : undefined;\n    });\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, null]) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        // Forward direction (decode): allow null to pass through\n        if (payload.value === null)\n            return payload;\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodDefault = /*@__PURE__*/ core.$constructor(\"$ZodDefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // inst._zod.qin = \"true\";\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply defaults for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n            /**\n             * $ZodDefault returns the default value immediately in forward direction.\n             * It doesn't pass the default value into the validator (\"prefault\"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a \"prefault\" for the pipe.   */\n            return payload;\n        }\n        // Forward direction: continue with default handling\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleDefaultResult(result, def));\n        }\n        return handleDefaultResult(result, def);\n    };\n});\nfunction handleDefaultResult(payload, def) {\n    if (payload.value === undefined) {\n        payload.value = def.defaultValue;\n    }\n    return payload;\n}\nexport const $ZodPrefault = /*@__PURE__*/ core.$constructor(\"$ZodPrefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply prefault for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNonOptional = /*@__PURE__*/ core.$constructor(\"$ZodNonOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => {\n        const v = def.innerType._zod.values;\n        return v ? new Set([...v].filter((x) => x !== undefined)) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleNonOptionalResult(result, inst));\n        }\n        return handleNonOptionalResult(result, inst);\n    };\n});\nfunction handleNonOptionalResult(payload, inst) {\n    if (!payload.issues.length && payload.value === undefined) {\n        payload.issues.push({\n            code: \"invalid_type\",\n            expected: \"nonoptional\",\n            input: payload.value,\n            inst,\n        });\n    }\n    return payload;\n}\nexport const $ZodSuccess = /*@__PURE__*/ core.$constructor(\"$ZodSuccess\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(\"ZodSuccess\");\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.issues.length === 0;\n                return payload;\n            });\n        }\n        payload.value = result.issues.length === 0;\n        return payload;\n    };\n});\nexport const $ZodCatch = /*@__PURE__*/ core.$constructor(\"$ZodCatch\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply catch logic\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.value;\n                if (result.issues.length) {\n                    payload.value = def.catchValue({\n                        ...payload,\n                        error: {\n                            issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        },\n                        input: payload.value,\n                    });\n                    payload.issues = [];\n                }\n                return payload;\n            });\n        }\n        payload.value = result.value;\n        if (result.issues.length) {\n            payload.value = def.catchValue({\n                ...payload,\n                error: {\n                    issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                },\n                input: payload.value,\n            });\n            payload.issues = [];\n        }\n        return payload;\n    };\n});\nexport const $ZodNaN = /*@__PURE__*/ core.$constructor(\"$ZodNaN\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"number\" || !Number.isNaN(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"nan\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPipe = /*@__PURE__*/ core.$constructor(\"$ZodPipe\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handlePipeResult(right, def.in, ctx));\n            }\n            return handlePipeResult(right, def.in, ctx);\n        }\n        const left = def.in._zod.run(payload, ctx);\n        if (left instanceof Promise) {\n            return left.then((left) => handlePipeResult(left, def.out, ctx));\n        }\n        return handlePipeResult(left, def.out, ctx);\n    };\n});\nfunction handlePipeResult(left, next, ctx) {\n    if (left.issues.length) {\n        // prevent further checks\n        left.aborted = true;\n        return left;\n    }\n    return next._zod.run({ value: left.value, issues: left.issues }, ctx);\n}\nexport const $ZodCodec = /*@__PURE__*/ core.$constructor(\"$ZodCodec\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        const direction = ctx.direction || \"forward\";\n        if (direction === \"forward\") {\n            const left = def.in._zod.run(payload, ctx);\n            if (left instanceof Promise) {\n                return left.then((left) => handleCodecAResult(left, def, ctx));\n            }\n            return handleCodecAResult(left, def, ctx);\n        }\n        else {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handleCodecAResult(right, def, ctx));\n            }\n            return handleCodecAResult(right, def, ctx);\n        }\n    };\n});\nfunction handleCodecAResult(result, def, ctx) {\n    if (result.issues.length) {\n        // prevent further checks\n        result.aborted = true;\n        return result;\n    }\n    const direction = ctx.direction || \"forward\";\n    if (direction === \"forward\") {\n        const transformed = def.transform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.out, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.out, ctx);\n    }\n    else {\n        const transformed = def.reverseTransform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.in, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.in, ctx);\n    }\n}\nfunction handleCodecTxResult(left, value, nextSchema, ctx) {\n    // Check if transform added any issues\n    if (left.issues.length) {\n        left.aborted = true;\n        return left;\n    }\n    return nextSchema._zod.run({ value, issues: left.issues }, ctx);\n}\nexport const $ZodReadonly = /*@__PURE__*/ core.$constructor(\"$ZodReadonly\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"propValues\", () => def.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then(handleReadonlyResult);\n        }\n        return handleReadonlyResult(result);\n    };\n});\nfunction handleReadonlyResult(payload) {\n    payload.value = Object.freeze(payload.value);\n    return payload;\n}\nexport const $ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"$ZodTemplateLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const regexParts = [];\n    for (const part of def.parts) {\n        if (typeof part === \"object\" && part !== null) {\n            // is Zod schema\n            if (!part._zod.pattern) {\n                // if (!source)\n                throw new Error(`Invalid template literal part, no pattern found: ${[...part._zod.traits].shift()}`);\n            }\n            const source = part._zod.pattern instanceof RegExp ? part._zod.pattern.source : part._zod.pattern;\n            if (!source)\n                throw new Error(`Invalid template literal part: ${part._zod.traits}`);\n            const start = source.startsWith(\"^\") ? 1 : 0;\n            const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n            regexParts.push(source.slice(start, end));\n        }\n        else if (part === null || util.primitiveTypes.has(typeof part)) {\n            regexParts.push(util.escapeRegex(`${part}`));\n        }\n        else {\n            throw new Error(`Invalid template literal part: ${part}`);\n        }\n    }\n    inst._zod.pattern = new RegExp(`^${regexParts.join(\"\")}$`);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"string\") {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"template_literal\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        inst._zod.pattern.lastIndex = 0;\n        if (!inst._zod.pattern.test(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                code: \"invalid_format\",\n                format: def.format ?? \"template_literal\",\n                pattern: inst._zod.pattern.source,\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodFunction = /*@__PURE__*/ core.$constructor(\"$ZodFunction\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._def = def;\n    inst._zod.def = def;\n    inst.implement = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implement() must be called with a function\");\n        }\n        return function (...args) {\n            const parsedArgs = inst._def.input ? parse(inst._def.input, args) : args;\n            const result = Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return parse(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst.implementAsync = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implementAsync() must be called with a function\");\n        }\n        return async function (...args) {\n            const parsedArgs = inst._def.input ? await parseAsync(inst._def.input, args) : args;\n            const result = await Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return await parseAsync(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"function\") {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"function\",\n                input: payload.value,\n                inst,\n            });\n            return payload;\n        }\n        // Check if output is a promise type to determine if we should use async implementation\n        const hasPromiseOutput = inst._def.output && inst._def.output._zod.def.type === \"promise\";\n        if (hasPromiseOutput) {\n            payload.value = inst.implementAsync(payload.value);\n        }\n        else {\n            payload.value = inst.implement(payload.value);\n        }\n        return payload;\n    };\n    inst.input = (...args) => {\n        const F = inst.constructor;\n        if (Array.isArray(args[0])) {\n            return new F({\n                type: \"function\",\n                input: new $ZodTuple({\n                    type: \"tuple\",\n                    items: args[0],\n                    rest: args[1],\n                }),\n                output: inst._def.output,\n            });\n        }\n        return new F({\n            type: \"function\",\n            input: args[0],\n            output: inst._def.output,\n        });\n    };\n    inst.output = (output) => {\n        const F = inst.constructor;\n        return new F({\n            type: \"function\",\n            input: inst._def.input,\n            output,\n        });\n    };\n    return inst;\n});\nexport const $ZodPromise = /*@__PURE__*/ core.$constructor(\"$ZodPromise\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        return Promise.resolve(payload.value).then((inner) => def.innerType._zod.run({ value: inner, issues: [] }, ctx));\n    };\n});\nexport const $ZodLazy = /*@__PURE__*/ core.$constructor(\"$ZodLazy\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // let _innerType!: any;\n    // util.defineLazy(def, \"getter\", () => {\n    //   if (!_innerType) {\n    //     _innerType = def.getter();\n    //   }\n    //   return () => _innerType;\n    // });\n    util.defineLazy(inst._zod, \"innerType\", () => def.getter());\n    util.defineLazy(inst._zod, \"pattern\", () => inst._zod.innerType._zod.pattern);\n    util.defineLazy(inst._zod, \"propValues\", () => inst._zod.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"optin\", () => inst._zod.innerType._zod.optin ?? undefined);\n    util.defineLazy(inst._zod, \"optout\", () => inst._zod.innerType._zod.optout ?? undefined);\n    inst._zod.parse = (payload, ctx) => {\n        const inner = inst._zod.innerType;\n        return inner._zod.run(payload, ctx);\n    };\n});\nexport const $ZodCustom = /*@__PURE__*/ core.$constructor(\"$ZodCustom\", (inst, def) => {\n    checks.$ZodCheck.init(inst, def);\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _) => {\n        return payload;\n    };\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const r = def.fn(input);\n        if (r instanceof Promise) {\n            return r.then((r) => handleRefineResult(r, payload, input, inst));\n        }\n        handleRefineResult(r, payload, input, inst);\n        return;\n    };\n});\nfunction handleRefineResult(result, payload, input, inst) {\n    if (!result) {\n        const _iss = {\n            code: \"custom\",\n            input,\n            inst, // incorporates params.error into issue reporting\n            path: [...(inst._zod.def.path ?? [])], // incorporates params.error into issue reporting\n            continue: !inst._zod.def.abort,\n            // params: inst._zod.def.params,\n        };\n        if (inst._zod.def.params)\n            _iss.params = inst._zod.def.params;\n        payload.issues.push(util.issue(_iss));\n    }\n}\n","export const $output = Symbol(\"ZodOutput\");\nexport const $input = Symbol(\"ZodInput\");\nexport class $ZodRegistry {\n    constructor() {\n        this._map = new WeakMap();\n        this._idmap = new Map();\n    }\n    add(schema, ..._meta) {\n        const meta = _meta[0];\n        this._map.set(schema, meta);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            if (this._idmap.has(meta.id)) {\n                throw new Error(`ID ${meta.id} already exists in the registry`);\n            }\n            this._idmap.set(meta.id, schema);\n        }\n        return this;\n    }\n    clear() {\n        this._map = new WeakMap();\n        this._idmap = new Map();\n        return this;\n    }\n    remove(schema) {\n        const meta = this._map.get(schema);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.delete(meta.id);\n        }\n        this._map.delete(schema);\n        return this;\n    }\n    get(schema) {\n        // return this._map.get(schema) as any;\n        // inherit metadata\n        const p = schema._zod.parent;\n        if (p) {\n            const pm = { ...(this.get(p) ?? {}) };\n            delete pm.id; // do not inherit id\n            const f = { ...pm, ...this._map.get(schema) };\n            return Object.keys(f).length ? f : undefined;\n        }\n        return this._map.get(schema);\n    }\n    has(schema) {\n        return this._map.has(schema);\n    }\n}\n// registries\nexport function registry() {\n    return new $ZodRegistry();\n}\nexport const globalRegistry = /*@__PURE__*/ registry();\n","import * as checks from \"./checks.js\";\nimport * as schemas from \"./schemas.js\";\nimport * as util from \"./util.js\";\nexport function _string(Class, params) {\n    return new Class({\n        type: \"string\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedString(Class, params) {\n    return new Class({\n        type: \"string\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _email(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"email\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _guid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"guid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v4\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v6\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv7(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v7\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _emoji(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"emoji\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nanoid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"nanoid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid2(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid2\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ulid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ulid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _xid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"xid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ksuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ksuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _e164(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"e164\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _jwt(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"jwt\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport const TimePrecision = {\n    Any: null,\n    Minute: -1,\n    Second: 0,\n    Millisecond: 3,\n    Microsecond: 6,\n};\nexport function _isoDateTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"datetime\",\n        check: \"string_format\",\n        offset: false,\n        local: false,\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDate(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"date\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"time\",\n        check: \"string_format\",\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDuration(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"duration\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _number(Class, params) {\n    return new Class({\n        type: \"number\",\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedNumber(Class, params) {\n    return new Class({\n        type: \"number\",\n        coerce: true,\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"safeint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float64(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"int32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"uint32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _boolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBoolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _bigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"int64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"uint64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _symbol(Class, params) {\n    return new Class({\n        type: \"symbol\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _undefined(Class, params) {\n    return new Class({\n        type: \"undefined\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _null(Class, params) {\n    return new Class({\n        type: \"null\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _any(Class) {\n    return new Class({\n        type: \"any\",\n    });\n}\nexport function _unknown(Class) {\n    return new Class({\n        type: \"unknown\",\n    });\n}\nexport function _never(Class, params) {\n    return new Class({\n        type: \"never\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _void(Class, params) {\n    return new Class({\n        type: \"void\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _date(Class, params) {\n    return new Class({\n        type: \"date\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedDate(Class, params) {\n    return new Class({\n        type: \"date\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nan(Class, params) {\n    return new Class({\n        type: \"nan\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lt(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _lte(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.lte()` instead. */\n_lte as _max, };\nexport function _gt(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _gte(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.gte()` instead. */\n_gte as _min, };\nexport function _positive(params) {\n    return _gt(0, params);\n}\n// negative\nexport function _negative(params) {\n    return _lt(0, params);\n}\n// nonpositive\nexport function _nonpositive(params) {\n    return _lte(0, params);\n}\n// nonnegative\nexport function _nonnegative(params) {\n    return _gte(0, params);\n}\nexport function _multipleOf(value, params) {\n    return new checks.$ZodCheckMultipleOf({\n        check: \"multiple_of\",\n        ...util.normalizeParams(params),\n        value,\n    });\n}\nexport function _maxSize(maximum, params) {\n    return new checks.$ZodCheckMaxSize({\n        check: \"max_size\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n}\nexport function _minSize(minimum, params) {\n    return new checks.$ZodCheckMinSize({\n        check: \"min_size\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _size(size, params) {\n    return new checks.$ZodCheckSizeEquals({\n        check: \"size_equals\",\n        ...util.normalizeParams(params),\n        size,\n    });\n}\nexport function _maxLength(maximum, params) {\n    const ch = new checks.$ZodCheckMaxLength({\n        check: \"max_length\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n    return ch;\n}\nexport function _minLength(minimum, params) {\n    return new checks.$ZodCheckMinLength({\n        check: \"min_length\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _length(length, params) {\n    return new checks.$ZodCheckLengthEquals({\n        check: \"length_equals\",\n        ...util.normalizeParams(params),\n        length,\n    });\n}\nexport function _regex(pattern, params) {\n    return new checks.$ZodCheckRegex({\n        check: \"string_format\",\n        format: \"regex\",\n        ...util.normalizeParams(params),\n        pattern,\n    });\n}\nexport function _lowercase(params) {\n    return new checks.$ZodCheckLowerCase({\n        check: \"string_format\",\n        format: \"lowercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uppercase(params) {\n    return new checks.$ZodCheckUpperCase({\n        check: \"string_format\",\n        format: \"uppercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _includes(includes, params) {\n    return new checks.$ZodCheckIncludes({\n        check: \"string_format\",\n        format: \"includes\",\n        ...util.normalizeParams(params),\n        includes,\n    });\n}\nexport function _startsWith(prefix, params) {\n    return new checks.$ZodCheckStartsWith({\n        check: \"string_format\",\n        format: \"starts_with\",\n        ...util.normalizeParams(params),\n        prefix,\n    });\n}\nexport function _endsWith(suffix, params) {\n    return new checks.$ZodCheckEndsWith({\n        check: \"string_format\",\n        format: \"ends_with\",\n        ...util.normalizeParams(params),\n        suffix,\n    });\n}\nexport function _property(property, schema, params) {\n    return new checks.$ZodCheckProperty({\n        check: \"property\",\n        property,\n        schema,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _mime(types, params) {\n    return new checks.$ZodCheckMimeType({\n        check: \"mime_type\",\n        mime: types,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _overwrite(tx) {\n    return new checks.$ZodCheckOverwrite({\n        check: \"overwrite\",\n        tx,\n    });\n}\n// normalize\nexport function _normalize(form) {\n    return _overwrite((input) => input.normalize(form));\n}\n// trim\nexport function _trim() {\n    return _overwrite((input) => input.trim());\n}\n// toLowerCase\nexport function _toLowerCase() {\n    return _overwrite((input) => input.toLowerCase());\n}\n// toUpperCase\nexport function _toUpperCase() {\n    return _overwrite((input) => input.toUpperCase());\n}\nexport function _array(Class, element, params) {\n    return new Class({\n        type: \"array\",\n        element,\n        // get element() {\n        //   return element;\n        // },\n        ...util.normalizeParams(params),\n    });\n}\nexport function _union(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _discriminatedUnion(Class, discriminator, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _intersection(Class, left, right) {\n    return new Class({\n        type: \"intersection\",\n        left,\n        right,\n    });\n}\n// export function _tuple(\n//   Class: util.SchemaClass<schemas.$ZodTuple>,\n//   items: [],\n//   params?: string | $ZodTupleParams\n// ): schemas.$ZodTuple<[], null>;\nexport function _tuple(Class, items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof schemas.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new Class({\n        type: \"tuple\",\n        items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _record(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"record\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _map(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"map\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _set(Class, valueType, params) {\n    return new Class({\n        type: \"set\",\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _enum(Class, values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    // if (Array.isArray(values)) {\n    //   for (const value of values) {\n    //     entries[value] = value;\n    //   }\n    // } else {\n    //   Object.assign(entries, values);\n    // }\n    // const entries: util.EnumLike = {};\n    // for (const val of values) {\n    //   entries[val] = val;\n    // }\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function _nativeEnum(Class, entries, params) {\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _literal(Class, value, params) {\n    return new Class({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _file(Class, params) {\n    return new Class({\n        type: \"file\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _transform(Class, fn) {\n    return new Class({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport function _optional(Class, innerType) {\n    return new Class({\n        type: \"optional\",\n        innerType,\n    });\n}\nexport function _nullable(Class, innerType) {\n    return new Class({\n        type: \"nullable\",\n        innerType,\n    });\n}\nexport function _default(Class, innerType, defaultValue) {\n    return new Class({\n        type: \"default\",\n        innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport function _nonoptional(Class, innerType, params) {\n    return new Class({\n        type: \"nonoptional\",\n        innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _success(Class, innerType) {\n    return new Class({\n        type: \"success\",\n        innerType,\n    });\n}\nexport function _catch(Class, innerType, catchValue) {\n    return new Class({\n        type: \"catch\",\n        innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport function _pipe(Class, in_, out) {\n    return new Class({\n        type: \"pipe\",\n        in: in_,\n        out,\n    });\n}\nexport function _readonly(Class, innerType) {\n    return new Class({\n        type: \"readonly\",\n        innerType,\n    });\n}\nexport function _templateLiteral(Class, parts, params) {\n    return new Class({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lazy(Class, getter) {\n    return new Class({\n        type: \"lazy\",\n        getter,\n    });\n}\nexport function _promise(Class, innerType) {\n    return new Class({\n        type: \"promise\",\n        innerType,\n    });\n}\nexport function _custom(Class, fn, _params) {\n    const norm = util.normalizeParams(_params);\n    norm.abort ?? (norm.abort = true); // default to abort:false\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...norm,\n    });\n    return schema;\n}\n// same as _custom but defaults to abort:false\nexport function _refine(Class, fn, _params) {\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...util.normalizeParams(_params),\n    });\n    return schema;\n}\nexport function _superRefine(fn) {\n    const ch = _check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort); // abort is always undefined, so this is always true...\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\nexport function _check(fn, params) {\n    const ch = new checks.$ZodCheck({\n        check: \"custom\",\n        ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function _stringbool(Classes, _params) {\n    const params = util.normalizeParams(_params);\n    let truthyArray = params.truthy ?? [\"true\", \"1\", \"yes\", \"on\", \"y\", \"enabled\"];\n    let falsyArray = params.falsy ?? [\"false\", \"0\", \"no\", \"off\", \"n\", \"disabled\"];\n    if (params.case !== \"sensitive\") {\n        truthyArray = truthyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n        falsyArray = falsyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n    }\n    const truthySet = new Set(truthyArray);\n    const falsySet = new Set(falsyArray);\n    const _Codec = Classes.Codec ?? schemas.$ZodCodec;\n    const _Boolean = Classes.Boolean ?? schemas.$ZodBoolean;\n    const _String = Classes.String ?? schemas.$ZodString;\n    const stringSchema = new _String({ type: \"string\", error: params.error });\n    const booleanSchema = new _Boolean({ type: \"boolean\", error: params.error });\n    const codec = new _Codec({\n        type: \"pipe\",\n        in: stringSchema,\n        out: booleanSchema,\n        transform: ((input, payload) => {\n            let data = input;\n            if (params.case !== \"sensitive\")\n                data = data.toLowerCase();\n            if (truthySet.has(data)) {\n                return true;\n            }\n            else if (falsySet.has(data)) {\n                return false;\n            }\n            else {\n                payload.issues.push({\n                    code: \"invalid_value\",\n                    expected: \"stringbool\",\n                    values: [...truthySet, ...falsySet],\n                    input: payload.value,\n                    inst: codec,\n                    continue: false,\n                });\n                return {};\n            }\n        }),\n        reverseTransform: ((input, _payload) => {\n            if (input === true) {\n                return truthyArray[0] || \"true\";\n            }\n            else {\n                return falsyArray[0] || \"false\";\n            }\n        }),\n        error: params.error,\n    });\n    return codec;\n}\nexport function _stringFormat(Class, format, fnOrRegex, _params = {}) {\n    const params = util.normalizeParams(_params);\n    const def = {\n        ...util.normalizeParams(_params),\n        check: \"string_format\",\n        type: \"string\",\n        format,\n        fn: typeof fnOrRegex === \"function\" ? fnOrRegex : (val) => fnOrRegex.test(val),\n        ...params,\n    };\n    if (fnOrRegex instanceof RegExp) {\n        def.pattern = fnOrRegex;\n    }\n    const inst = new Class(def);\n    return inst;\n}\n","import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport const ZodISODateTime = /*@__PURE__*/ core.$constructor(\"ZodISODateTime\", (inst, def) => {\n    core.$ZodISODateTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function datetime(params) {\n    return core._isoDateTime(ZodISODateTime, params);\n}\nexport const ZodISODate = /*@__PURE__*/ core.$constructor(\"ZodISODate\", (inst, def) => {\n    core.$ZodISODate.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function date(params) {\n    return core._isoDate(ZodISODate, params);\n}\nexport const ZodISOTime = /*@__PURE__*/ core.$constructor(\"ZodISOTime\", (inst, def) => {\n    core.$ZodISOTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function time(params) {\n    return core._isoTime(ZodISOTime, params);\n}\nexport const ZodISODuration = /*@__PURE__*/ core.$constructor(\"ZodISODuration\", (inst, def) => {\n    core.$ZodISODuration.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function duration(params) {\n    return core._isoDuration(ZodISODuration, params);\n}\n","import * as core from \"../core/index.js\";\nimport { $ZodError } from \"../core/index.js\";\nimport * as util from \"../core/util.js\";\nconst initializer = (inst, issues) => {\n    $ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => core.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => core.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => {\n                inst.issues.push(issue);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => {\n                inst.issues.push(...issues);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nexport const ZodError = core.$constructor(\"ZodError\", initializer);\nexport const ZodRealError = core.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n","import * as core from \"../core/index.js\";\nimport { ZodRealError } from \"./errors.js\";\nexport const parse = /* @__PURE__ */ core._parse(ZodRealError);\nexport const parseAsync = /* @__PURE__ */ core._parseAsync(ZodRealError);\nexport const safeParse = /* @__PURE__ */ core._safeParse(ZodRealError);\nexport const safeParseAsync = /* @__PURE__ */ core._safeParseAsync(ZodRealError);\n// Codec functions\nexport const encode = /* @__PURE__ */ core._encode(ZodRealError);\nexport const decode = /* @__PURE__ */ core._decode(ZodRealError);\nexport const encodeAsync = /* @__PURE__ */ core._encodeAsync(ZodRealError);\nexport const decodeAsync = /* @__PURE__ */ core._decodeAsync(ZodRealError);\nexport const safeEncode = /* @__PURE__ */ core._safeEncode(ZodRealError);\nexport const safeDecode = /* @__PURE__ */ core._safeDecode(ZodRealError);\nexport const safeEncodeAsync = /* @__PURE__ */ core._safeEncodeAsync(ZodRealError);\nexport const safeDecodeAsync = /* @__PURE__ */ core._safeDecodeAsync(ZodRealError);\n","import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as checks from \"./checks.js\";\nimport * as iso from \"./iso.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodType = /*@__PURE__*/ core.$constructor(\"ZodType\", (inst, def) => {\n    core.$ZodType.init(inst, def);\n    inst.def = def;\n    inst.type = def.type;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone(util.mergeDefs(def, {\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }));\n    };\n    inst.clone = (def, params) => core.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // encoding/decoding\n    inst.encode = (data, params) => parse.encode(inst, data, params);\n    inst.decode = (data, params) => parse.decode(inst, data, params);\n    inst.encodeAsync = async (data, params) => parse.encodeAsync(inst, data, params);\n    inst.decodeAsync = async (data, params) => parse.decodeAsync(inst, data, params);\n    inst.safeEncode = (data, params) => parse.safeEncode(inst, data, params);\n    inst.safeDecode = (data, params) => parse.safeDecode(inst, data, params);\n    inst.safeEncodeAsync = async (data, params) => parse.safeEncodeAsync(inst, data, params);\n    inst.safeDecodeAsync = async (data, params) => parse.safeDecodeAsync(inst, data, params);\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(checks.overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return core.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return core.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    return inst;\n});\n/** @internal */\nexport const _ZodString = /*@__PURE__*/ core.$constructor(\"_ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(checks.regex(...args));\n    inst.includes = (...args) => inst.check(checks.includes(...args));\n    inst.startsWith = (...args) => inst.check(checks.startsWith(...args));\n    inst.endsWith = (...args) => inst.check(checks.endsWith(...args));\n    inst.min = (...args) => inst.check(checks.minLength(...args));\n    inst.max = (...args) => inst.check(checks.maxLength(...args));\n    inst.length = (...args) => inst.check(checks.length(...args));\n    inst.nonempty = (...args) => inst.check(checks.minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(checks.lowercase(params));\n    inst.uppercase = (params) => inst.check(checks.uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(checks.trim());\n    inst.normalize = (...args) => inst.check(checks.normalize(...args));\n    inst.toLowerCase = () => inst.check(checks.toLowerCase());\n    inst.toUpperCase = () => inst.check(checks.toUpperCase());\n});\nexport const ZodString = /*@__PURE__*/ core.$constructor(\"ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(core._email(ZodEmail, params));\n    inst.url = (params) => inst.check(core._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(core._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(core._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(core._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(core._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(core._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(core._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(core._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(core._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(core._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(core._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(core._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(core._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(core._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(core._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(core._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(core._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(core._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(core._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(core._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(iso.datetime(params));\n    inst.date = (params) => inst.check(iso.date(params));\n    inst.time = (params) => inst.check(iso.time(params));\n    inst.duration = (params) => inst.check(iso.duration(params));\n});\nexport function string(params) {\n    return core._string(ZodString, params);\n}\nexport const ZodStringFormat = /*@__PURE__*/ core.$constructor(\"ZodStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nexport const ZodEmail = /*@__PURE__*/ core.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodEmail, params);\n}\nexport const ZodGUID = /*@__PURE__*/ core.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodGUID, params);\n}\nexport const ZodUUID = /*@__PURE__*/ core.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodUUID, params);\n}\nexport const ZodURL = /*@__PURE__*/ core.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodURL, params);\n}\nexport function httpUrl(params) {\n    return core._url(ZodURL, {\n        protocol: /^https?$/,\n        hostname: core.regexes.domain,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEmoji = /*@__PURE__*/ core.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodEmoji, params);\n}\nexport const ZodNanoID = /*@__PURE__*/ core.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodNanoID, params);\n}\nexport const ZodCUID = /*@__PURE__*/ core.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodCUID, params);\n}\nexport const ZodCUID2 = /*@__PURE__*/ core.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodCUID2, params);\n}\nexport const ZodULID = /*@__PURE__*/ core.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodULID, params);\n}\nexport const ZodXID = /*@__PURE__*/ core.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodXID, params);\n}\nexport const ZodKSUID = /*@__PURE__*/ core.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodKSUID, params);\n}\nexport const ZodIPv4 = /*@__PURE__*/ core.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodIPv4, params);\n}\nexport const ZodIPv6 = /*@__PURE__*/ core.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodIPv6, params);\n}\nexport const ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodCIDRv4, params);\n}\nexport const ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodCIDRv6, params);\n}\nexport const ZodBase64 = /*@__PURE__*/ core.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodBase64, params);\n}\nexport const ZodBase64URL = /*@__PURE__*/ core.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodBase64URL, params);\n}\nexport const ZodE164 = /*@__PURE__*/ core.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodE164, params);\n}\nexport const ZodJWT = /*@__PURE__*/ core.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodJWT, params);\n}\nexport const ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nexport function hostname(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hostname\", core.regexes.hostname, _params);\n}\nexport function hex(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hex\", core.regexes.hex, _params);\n}\nexport function hash(alg, params) {\n    const enc = params?.enc ?? \"hex\";\n    const format = `${alg}_${enc}`;\n    const regex = core.regexes[format];\n    if (!regex)\n        throw new Error(`Unrecognized hash format: ${format}`);\n    return core._stringFormat(ZodCustomStringFormat, format, regex, params);\n}\nexport const ZodNumber = /*@__PURE__*/ core.$constructor(\"ZodNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(checks.gt(0, params));\n    inst.nonnegative = (params) => inst.check(checks.gte(0, params));\n    inst.negative = (params) => inst.check(checks.lt(0, params));\n    inst.nonpositive = (params) => inst.check(checks.lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    inst.step = (value, params) => inst.check(checks.multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nexport function number(params) {\n    return core._number(ZodNumber, params);\n}\nexport const ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nexport function int(params) {\n    return core._int(ZodNumberFormat, params);\n}\nexport function float32(params) {\n    return core._float32(ZodNumberFormat, params);\n}\nexport function float64(params) {\n    return core._float64(ZodNumberFormat, params);\n}\nexport function int32(params) {\n    return core._int32(ZodNumberFormat, params);\n}\nexport function uint32(params) {\n    return core._uint32(ZodNumberFormat, params);\n}\nexport const ZodBoolean = /*@__PURE__*/ core.$constructor(\"ZodBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function boolean(params) {\n    return core._boolean(ZodBoolean, params);\n}\nexport const ZodBigInt = /*@__PURE__*/ core.$constructor(\"ZodBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.positive = (params) => inst.check(checks.gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(checks.lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(checks.lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(checks.gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nexport function bigint(params) {\n    return core._bigint(ZodBigInt, params);\n}\nexport const ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodBigIntFormat, params);\n}\nexport const ZodSymbol = /*@__PURE__*/ core.$constructor(\"ZodSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function symbol(params) {\n    return core._symbol(ZodSymbol, params);\n}\nexport const ZodUndefined = /*@__PURE__*/ core.$constructor(\"ZodUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodNull = /*@__PURE__*/ core.$constructor(\"ZodNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _null(params) {\n    return core._null(ZodNull, params);\n}\nexport { _null as null };\nexport const ZodAny = /*@__PURE__*/ core.$constructor(\"ZodAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function any() {\n    return core._any(ZodAny);\n}\nexport const ZodUnknown = /*@__PURE__*/ core.$constructor(\"ZodUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function unknown() {\n    return core._unknown(ZodUnknown);\n}\nexport const ZodNever = /*@__PURE__*/ core.$constructor(\"ZodNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function never(params) {\n    return core._never(ZodNever, params);\n}\nexport const ZodVoid = /*@__PURE__*/ core.$constructor(\"ZodVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _void(params) {\n    return core._void(ZodVoid, params);\n}\nexport { _void as void };\nexport const ZodDate = /*@__PURE__*/ core.$constructor(\"ZodDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nexport function date(params) {\n    return core._date(ZodDate, params);\n}\nexport const ZodArray = /*@__PURE__*/ core.$constructor(\"ZodArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(checks.minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(checks.minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(checks.maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(checks.length(len, params));\n    inst.unwrap = () => inst.element;\n});\nexport function array(element, params) {\n    return core._array(ZodArray, element, params);\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return _enum(Object.keys(shape));\n}\nexport const ZodObject = /*@__PURE__*/ core.$constructor(\"ZodObject\", (inst, def) => {\n    core.$ZodObjectJIT.init(inst, def);\n    ZodType.init(inst, def);\n    util.defineLazy(inst, \"shape\", () => {\n        return def.shape;\n    });\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return util.extend(inst, incoming);\n    };\n    inst.safeExtend = (incoming) => {\n        return util.safeExtend(inst, incoming);\n    };\n    inst.merge = (other) => util.merge(inst, other);\n    inst.pick = (mask) => util.pick(inst, mask);\n    inst.omit = (mask) => util.omit(inst, mask);\n    inst.partial = (...args) => util.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => util.required(ZodNonOptional, inst, args[0]);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        shape: shape ?? {},\n        ...util.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        shape,\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        shape,\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodUnion = /*@__PURE__*/ core.$constructor(\"ZodUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst.options = def.options;\n});\nexport function union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodDiscriminatedUnion.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodIntersection = /*@__PURE__*/ core.$constructor(\"ZodIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodTuple = /*@__PURE__*/ core.$constructor(\"ZodTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodRecord = /*@__PURE__*/ core.$constructor(\"ZodRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nexport function partialRecord(keyType, valueType, params) {\n    const k = core.clone(keyType);\n    k._zod.values = undefined;\n    return new ZodRecord({\n        type: \"record\",\n        keyType: k,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMap = /*@__PURE__*/ core.$constructor(\"ZodMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSet = /*@__PURE__*/ core.$constructor(\"ZodSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEnum = /*@__PURE__*/ core.$constructor(\"ZodEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLiteral = /*@__PURE__*/ core.$constructor(\"ZodLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nexport function literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodFile = /*@__PURE__*/ core.$constructor(\"ZodFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (size, params) => inst.check(core._minSize(size, params));\n    inst.max = (size, params) => inst.check(core._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(core._mime(Array.isArray(types) ? types : [types], params));\n});\nexport function file(params) {\n    return core._file(ZodFile, params);\n}\nexport const ZodTransform = /*@__PURE__*/ core.$constructor(\"ZodTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (_ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(inst.constructor.name);\n        }\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                // _issue.continue ??= true;\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nexport function transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodOptional = /*@__PURE__*/ core.$constructor(\"ZodOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodNullable = /*@__PURE__*/ core.$constructor(\"ZodNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodDefault = /*@__PURE__*/ core.$constructor(\"ZodDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport const ZodPrefault = /*@__PURE__*/ core.$constructor(\"ZodPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport const ZodNonOptional = /*@__PURE__*/ core.$constructor(\"ZodNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSuccess = /*@__PURE__*/ core.$constructor(\"ZodSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodCatch = /*@__PURE__*/ core.$constructor(\"ZodCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodNaN = /*@__PURE__*/ core.$constructor(\"ZodNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function nan(params) {\n    return core._nan(ZodNaN, params);\n}\nexport const ZodPipe = /*@__PURE__*/ core.$constructor(\"ZodPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nexport function pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nexport const ZodCodec = /*@__PURE__*/ core.$constructor(\"ZodCodec\", (inst, def) => {\n    ZodPipe.init(inst, def);\n    core.$ZodCodec.init(inst, def);\n});\nexport function codec(in_, out, params) {\n    return new ZodCodec({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        transform: params.decode,\n        reverseTransform: params.encode,\n    });\n}\nexport const ZodReadonly = /*@__PURE__*/ core.$constructor(\"ZodReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLazy = /*@__PURE__*/ core.$constructor(\"ZodLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nexport function lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport const ZodPromise = /*@__PURE__*/ core.$constructor(\"ZodPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodFunction = /*@__PURE__*/ core.$constructor(\"ZodFunction\", (inst, def) => {\n    core.$ZodFunction.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function _function(params) {\n    return new ZodFunction({\n        type: \"function\",\n        input: Array.isArray(params?.input) ? tuple(params?.input) : (params?.input ?? array(unknown())),\n        output: params?.output ?? unknown(),\n    });\n}\nexport { _function as function };\nexport const ZodCustom = /*@__PURE__*/ core.$constructor(\"ZodCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n});\n// custom checks\nexport function check(fn) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function custom(fn, _params) {\n    return core._custom(ZodCustom, fn ?? (() => true), _params);\n}\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodCustom, fn, _params);\n}\n// superRefine\nexport function superRefine(fn) {\n    return core._superRefine(fn);\n}\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ...util.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Codec: ZodCodec,\n    Boolean: ZodBoolean,\n    String: ZodString,\n}, ...args);\nexport function json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nexport function preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n","<template>\n  <div\n    v-if=\"show\"\n    @click.self=\"handleClose\"\n    style=\"\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.8);\n      z-index: 1000000;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 20px;\n    \"\n  >\n    <div\n      style=\"\n        background: #2a2a2a;\n        border: 2px solid #667eea;\n        border-radius: 12px;\n        padding: 30px;\n        max-width: 500px;\n        width: 100%;\n        text-align: center;\n      \"\n      @click.stop\n    >\n      <h3 style=\"color: #667eea; margin: 0 0 15px 0\">\n        <i class=\"fa-solid fa-wand-magic-sparkles\"></i>\n        {{ title || 'AI ' }}\n      </h3>\n      <p style=\"color: #888; margin: 0 0 25px 0; line-height: 1.6\">\n        {{ description || 'AI ...' }}\n      </p>\n\n      <!--  -->\n      <textarea\n        v-if=\"showInput\"\n        v-model=\"localInput\"\n        :placeholder=\"placeholder || '...'\"\n        style=\"\n          width: 100%;\n          min-height: 120px;\n          background: #1a1a1a;\n          color: #e0e0e0;\n          border: 1px solid #444;\n          border-radius: 4px;\n          padding: 12px;\n          font-size: 14px;\n          margin-bottom: 20px;\n          resize: vertical;\n          box-sizing: border-box;\n        \"\n      ></textarea>\n\n      <!--  -->\n      <div v-if=\"isGenerating\" style=\"margin-bottom: 25px\">\n        <!--  -->\n        <div style=\"position: relative; display: inline-block; width: 80px; height: 80px\">\n          <!--  -->\n          <div\n            style=\"\n              position: absolute;\n              width: 100%;\n              height: 100%;\n              border: 3px solid rgba(102, 126, 234, 0.1);\n              border-radius: 50%;\n            \"\n          ></div>\n          <!--  -->\n          <div\n            style=\"\n              position: absolute;\n              width: 100%;\n              height: 100%;\n              border: 4px solid transparent;\n              border-top-color: #667eea;\n              border-right-color: #764ba2;\n              border-radius: 50%;\n              animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n            \"\n          ></div>\n          <!--  -->\n          <div\n            style=\"\n              position: absolute;\n              top: 50%;\n              left: 50%;\n              transform: translate(-50%, -50%);\n              width: 40%;\n              height: 40%;\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n              border-radius: 50%;\n              animation: pulse 1.5s ease-in-out infinite;\n            \"\n          ></div>\n        </div>\n\n        <!--  -->\n        <p style=\"color: #888; margin-top: 20px; font-size: 14px; font-weight: 500\">\n          <span\n            style=\"\n              background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%);\n              background-size: 200% auto;\n              -webkit-background-clip: text;\n              -webkit-text-fill-color: transparent;\n              background-clip: text;\n              animation: gradient-shift 2s linear infinite;\n            \"\n          >\n            ...\n          </span>\n        </p>\n\n        <!--  -->\n        <div style=\"display: flex; justify-content: center; gap: 8px; margin-top: 10px\">\n          <div\n            style=\"\n              width: 8px;\n              height: 8px;\n              background: #667eea;\n              border-radius: 50%;\n              animation: bounce 1.4s ease-in-out 0s infinite;\n            \"\n          ></div>\n          <div\n            style=\"\n              width: 8px;\n              height: 8px;\n              background: #667eea;\n              border-radius: 50%;\n              animation: bounce 1.4s ease-in-out 0.2s infinite;\n            \"\n          ></div>\n          <div\n            style=\"\n              width: 8px;\n              height: 8px;\n              background: #667eea;\n              border-radius: 50%;\n              animation: bounce 1.4s ease-in-out 0.4s infinite;\n            \"\n          ></div>\n        </div>\n\n        <!--  -->\n        <div\n          v-if=\"progress\"\n          style=\"margin-top: 20px; padding: 15px; background: #1a1a1a; border-radius: 8px; border: 1px solid #444\"\n        >\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px\">\n            <span style=\"color: #667eea; font-size: 13px; font-weight: 600\">\n               {{ progress.step }}/{{ progress.total }}: {{ progress.stepName }}\n            </span>\n            <span style=\"color: #e0e0e0; font-size: 14px; font-weight: 700\"> {{ progress.percentage }}% </span>\n          </div>\n          <div\n            style=\"\n              width: 100%;\n              height: 6px;\n              background: #333;\n              border-radius: 3px;\n              overflow: hidden;\n              margin-bottom: 10px;\n            \"\n          >\n            <div\n              style=\"\n                height: 100%;\n                background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);\n                transition: width 0.4s ease;\n                box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);\n              \"\n              :style=\"{ width: progress.percentage + '%' }\"\n            ></div>\n          </div>\n          <div style=\"display: flex; justify-content: space-between; align-items: center\">\n            <span style=\"color: #888; font-size: 12px\">{{ progress.message }}</span>\n            <span v-if=\"progress.elapsedTime\" style=\"color: #888; font-size: 12px\">\n              : {{ progress.elapsedTime }}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div style=\"display: flex; gap: 12px\">\n        <button\n          v-if=\"!isGenerating\"\n          @click=\"handleConfirm\"\n          :disabled=\"showInput && !localInput\"\n          style=\"\n            flex: 1;\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 10px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 600;\n            transition: all 0.2s;\n          \"\n          :style=\"{ opacity: showInput && !localInput ? 0.5 : 1 }\"\n        >\n          <i class=\"fa-solid fa-check\"></i>\n          \n        </button>\n        <button\n          @click=\"handleClose\"\n          :disabled=\"isGenerating\"\n          style=\"\n            flex: 1;\n            background: #666;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 10px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 600;\n            transition: all 0.2s;\n          \"\n          :style=\"{ opacity: isGenerating ? 0.5 : 1 }\"\n        >\n          {{ isGenerating ? '...' : '' }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch } from 'vue';\n\ninterface ProgressInfo {\n  step: number;\n  total: number;\n  stepName: string;\n  percentage: number;\n  message: string;\n  elapsedTime?: number;\n}\n\nconst props = defineProps<{\n  show: boolean;\n  title?: string;\n  description?: string;\n  placeholder?: string;\n  isGenerating?: boolean;\n  showInput?: boolean; // \n  progress?: ProgressInfo; // \n}>();\n\nconst emit = defineEmits<{\n  (e: 'close'): void;\n  (e: 'confirm', input?: string): void;\n}>();\n\nconst localInput = ref('');\n\n// \nwatch(\n  () => props.show,\n  newVal => {\n    if (newVal) {\n      localInput.value = '';\n    }\n  },\n);\n\nconst handleConfirm = () => {\n  if (!props.isGenerating) {\n    if (props.showInput) {\n      emit('confirm', localInput.value);\n    } else {\n      emit('confirm');\n    }\n  }\n};\n\nconst handleClose = () => {\n  if (!props.isGenerating) {\n    emit('close');\n  }\n};\n</script>\n\n<style scoped>\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes pulse {\n  0%,\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: translate(-50%, -50%) scale(1.3);\n    opacity: 0.7;\n  }\n}\n\n@keyframes bounce {\n  0%,\n  80%,\n  100% {\n    transform: scale(0);\n    opacity: 0.5;\n  }\n  40% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n@keyframes gradient-shift {\n  0% {\n    background-position: 0% center;\n  }\n  100% {\n    background-position: 200% center;\n  }\n}\n\nbutton:disabled {\n  cursor: not-allowed !important;\n}\n\nbutton:not(:disabled):hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n/*  */\ndiv::-webkit-scrollbar {\n  width: 6px;\n}\n\ndiv::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\ndiv::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\ndiv::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n</style>\n","<template>\n  <div\n    v-if=\"show\"\n    @click.self=\"$emit('close')\"\n    style=\"\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.8);\n      z-index: 1000000;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 20px;\n    \"\n  >\n    <div\n      style=\"\n        background: #2a2a2a;\n        border: 2px solid #ffc107;\n        border-radius: 12px;\n        padding: 30px;\n        max-width: 600px;\n        width: 100%;\n        max-height: 80vh;\n        overflow-y: auto;\n      \"\n      @click.stop\n    >\n      <h3 style=\"color: #ffc107; margin: 0 0 20px 0\">\n        <i class=\"fa-solid fa-edit\"></i>\n        {{ title || 'AI ' }}\n      </h3>\n      <p style=\"color: #888; margin: 0 0 15px 0; line-height: 1.6\">\n        {{ description || 'AI ' }}\n      </p>\n      <ul\n        v-if=\"examples && examples.length > 0\"\n        style=\"color: #888; margin: 0 0 20px 0; padding-left: 20px; line-height: 1.8\"\n      >\n        <li v-for=\"(example, index) in examples\" :key=\"index\">{{ example }}</li>\n      </ul>\n      <textarea\n        v-model=\"localInstruction\"\n        :placeholder=\"placeholder || '...'\"\n        style=\"\n          width: 100%;\n          min-height: 150px;\n          background: #1a1a1a;\n          color: #e0e0e0;\n          border: 1px solid #444;\n          border-radius: 4px;\n          padding: 12px;\n          font-size: 14px;\n          margin-bottom: 20px;\n          resize: vertical;\n          box-sizing: border-box;\n        \"\n      ></textarea>\n      <!--  -->\n      <div\n        v-if=\"isModifying\"\n        style=\"margin-bottom: 20px; background: #1a1a1a; border-radius: 8px; padding: 15px; border: 1px solid #444\"\n      >\n        <div style=\"display: flex; align-items: center; gap: 12px; margin-bottom: 10px\">\n          <i\n            class=\"fa-solid fa-wand-magic-sparkles\"\n            style=\"color: #ffc107; font-size: 18px; animation: pulse 1.5s infinite\"\n          ></i>\n          <span style=\"color: #ffc107; font-weight: 600; font-size: 14px\">AI ...</span>\n        </div>\n\n        <!--  -->\n        <template v-if=\"progress\">\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px\">\n            <span style=\"color: #ffc107; font-size: 13px; font-weight: 600\">\n               {{ progress.step }}/{{ progress.total }}: {{ progress.stepName }}\n            </span>\n            <span style=\"color: #e0e0e0; font-size: 14px; font-weight: 700\"> {{ progress.percentage }}% </span>\n          </div>\n          <div\n            style=\"width: 100%; height: 6px; background: #333; border-radius: 3px; overflow: hidden; margin-bottom: 8px\"\n          >\n            <div\n              style=\"\n                height: 100%;\n                background: linear-gradient(90deg, #ffc107 0%, #ffb300 100%);\n                transition: width 0.4s ease;\n                box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);\n              \"\n              :style=\"{ width: progress.percentage + '%' }\"\n            ></div>\n          </div>\n          <div style=\"display: flex; justify-content: space-between; align-items: center\">\n            <span style=\"color: #888; font-size: 12px\">{{ progress.message }}</span>\n            <span v-if=\"progress.elapsedTime\" style=\"color: #888; font-size: 12px\">\n              : {{ progress.elapsedTime }}\n            </span>\n          </div>\n        </template>\n\n        <!--  -->\n        <template v-else>\n          <div\n            style=\"width: 100%; height: 6px; background: #333; border-radius: 3px; overflow: hidden; position: relative\"\n          >\n            <div class=\"progress-bar\"></div>\n          </div>\n          <p style=\"color: #888; font-size: 12px; margin: 8px 0 0 0; text-align: center\"></p>\n        </template>\n      </div>\n\n      <div style=\"display: flex; gap: 12px\">\n        <button\n          @click=\"handleConfirm\"\n          :disabled=\"!localInstruction || isModifying\"\n          style=\"\n            flex: 1;\n            background: #ffc107;\n            color: #000;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 10px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 600;\n            transition: all 0.2s;\n            position: relative;\n            overflow: hidden;\n          \"\n          :style=\"{ opacity: !localInstruction || isModifying ? 0.5 : 1 }\"\n        >\n          <i class=\"fa-solid fa-wand-magic-sparkles\" :class=\"{ 'icon-spin': isModifying }\"></i>\n          {{ isModifying ? '...' : '' }}\n        </button>\n        <button\n          @click=\"$emit('close')\"\n          :disabled=\"isModifying\"\n          style=\"\n            flex: 1;\n            background: #666;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 10px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 600;\n            transition: all 0.2s;\n          \"\n          :style=\"{ opacity: isModifying ? 0.5 : 1 }\"\n        >\n          \n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch } from 'vue';\n\ninterface ProgressInfo {\n  step: number;\n  total: number;\n  stepName: string;\n  percentage: number;\n  message: string;\n  elapsedTime?: number;\n}\n\nconst props = defineProps<{\n  show: boolean;\n  title?: string;\n  description?: string;\n  examples?: string[];\n  placeholder?: string;\n  isModifying?: boolean;\n  progress?: ProgressInfo; // \n}>();\n\nconst emit = defineEmits<{\n  (e: 'close'): void;\n  (e: 'confirm', instruction: string): void;\n}>();\n\nconst localInstruction = ref('');\n\n// \nwatch(\n  () => props.show,\n  newVal => {\n    if (newVal) {\n      localInstruction.value = '';\n    }\n  },\n);\n\nconst handleConfirm = () => {\n  if (localInstruction.value && !props.isModifying) {\n    emit('confirm', localInstruction.value);\n  }\n};\n</script>\n\n<style scoped>\nbutton:disabled {\n  cursor: not-allowed !important;\n}\n\nbutton:not(:disabled):hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n/*  */\ndiv::-webkit-scrollbar {\n  width: 6px;\n}\n\ndiv::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\ndiv::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\ndiv::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n\n/*  */\n.progress-bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  background: linear-gradient(90deg, #ffc107 0%, #ffb300 50%, #ffc107 100%);\n  background-size: 200% 100%;\n  animation: progressMove 2s linear infinite;\n  box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);\n}\n\n@keyframes progressMove {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n/*  */\n@keyframes pulse {\n  0%,\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.7;\n    transform: scale(1.1);\n  }\n}\n\n/*  */\n.icon-spin {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style>\n","<template>\n  <div\n    class=\"greetings-tab\"\n    style=\"display: flex; flex-direction: column; height: 100%; background: #1a1a1a !important\"\n  >\n    <!--  -->\n    <div\n      class=\"section-header\"\n      style=\"\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 20px 25px !important;\n        border-bottom: 1px solid #3a3a3a;\n      \"\n    >\n      <h3\n        style=\"\n          margin: 0;\n          color: #fff;\n          font-size: 15px !important;\n          font-weight: bold;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        \"\n      >\n        <i class=\"fa-solid fa-comments\" style=\"color: #667eea\"></i>\n        \n      </h3>\n      <div class=\"header-actions\" style=\"display: flex; align-items: center; gap: 10px\">\n        <span\n          v-if=\"greetings.length > 0\"\n          class=\"count-badge\"\n          style=\"background: #667eea; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\"\n        >\n          {{ greetings.length }} \n        </span>\n        <button\n          v-if=\"greetings.length > 0\"\n          class=\"mini-button\"\n          style=\"\n            padding: 6px 12px;\n            background: #2a2a2a;\n            border: 1px solid #3a3a3a;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 12px;\n            transition: all 0.2s;\n            display: flex;\n            align-items: center;\n            gap: 6px;\n          \"\n          :style=\"{ color: showHelp ? '#667eea' : '#e0e0e0', borderColor: showHelp ? '#667eea' : '#3a3a3a' }\"\n          @click=\"showHelp = !showHelp\"\n        >\n          <i class=\"fa-solid fa-circle-question\"></i> {{ showHelp ? '' : '' }}\n        </button>\n        <button\n          v-if=\"greetings.length > 0\"\n          class=\"mini-button\"\n          style=\"\n            padding: 6px 12px;\n            background: #dc2626;\n            border: none;\n            border-radius: 4px;\n            color: white;\n            cursor: pointer;\n            font-size: 12px;\n            font-weight: 600;\n            transition: all 0.2s;\n            display: flex;\n            align-items: center;\n            gap: 6px;\n          \"\n          @click=\"clearAllConfig\"\n          @mouseenter=\"($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)'\"\n          @mouseleave=\"($event.currentTarget as HTMLElement).style.transform = 'translateY(0)'\"\n        >\n          <i class=\"fa-solid fa-eraser\"></i> \n        </button>\n        <button\n          v-if=\"greetings.length > 0\"\n          class=\"mini-button\"\n          style=\"\n            padding: 6px 12px;\n            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);\n            border: none;\n            border-radius: 4px;\n            color: white;\n            cursor: pointer;\n            font-size: 12px;\n            font-weight: 600;\n            transition: all 0.2s;\n            display: flex;\n            align-items: center;\n            gap: 6px;\n          \"\n          @click=\"showAiStyleDialog = true\"\n          @mouseenter=\"($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)'\"\n          @mouseleave=\"($event.currentTarget as HTMLElement).style.transform = 'translateY(0)'\"\n        >\n          <i class=\"fa-solid fa-wand-magic-sparkles\"></i> AI\n        </button>\n        <button\n          class=\"mini-button refresh-button\"\n          style=\"\n            padding: 6px 12px;\n            background: #2a2a2a;\n            border: 1px solid #3a3a3a;\n            border-radius: 4px;\n            color: #e0e0e0;\n            cursor: pointer;\n            font-size: 12px;\n            transition: all 0.2s;\n            display: flex;\n            align-items: center;\n            gap: 6px;\n          \"\n          @click=\"loadConfig\"\n        >\n          <i class=\"fa-solid fa-refresh\"></i> \n        </button>\n      </div>\n    </div>\n\n    <!--  -->\n    <div style=\"flex: 1; display: flex; gap: 20px; padding: 20px; overflow: hidden\">\n      <!--  -->\n      <div style=\"flex: 1; overflow-y: auto; padding-right: 10px\">\n        <!--  /  -->\n        <div\n          v-if=\"greetings.length === 0\"\n          style=\"\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            padding: 60px 20px;\n            text-align: center;\n            color: #888;\n          \"\n        >\n          <i class=\"fa-solid fa-comment-dots\" style=\"font-size: 64px; margin-bottom: 20px; opacity: 0.3\"></i>\n          <div style=\"font-size: 18px; font-weight: 600; color: #e0e0e0; margin-bottom: 10px\"></div>\n          <div style=\"font-size: 14px; color: #888; max-width: 400px; line-height: 1.6\">\n            \n          </div>\n        </div>\n\n        <!--  -->\n        <div\n          v-else-if=\"showHelp\"\n          style=\"background: #2a2a2a; border: 1px solid #667eea; border-radius: 8px; padding: 20px; margin-bottom: 20px\"\n        >\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px\">\n            <h4 style=\"color: #667eea; margin: 0; display: flex; align-items: center; gap: 8px\">\n              <i class=\"fa-solid fa-circle-info\"></i>\n              \n            </h4>\n            <button\n              style=\"background: transparent; border: none; color: #888; cursor: pointer; font-size: 18px; padding: 4px\"\n              @click=\"showHelp = false\"\n            >\n              <i class=\"fa-solid fa-times\"></i>\n            </button>\n          </div>\n          <ol style=\"color: #ccc; margin: 0; padding-left: 20px; line-height: 1.8\">\n            <li></li>\n            <li></li>\n            <li>AI</li>\n            <li>\"AI\"</li>\n            <li>AIHTML</li>\n            <li></li>\n            <li>\"\"</li>\n            <li>\"STScript JSON\"</li>\n            <li>JSON / </li>\n          </ol>\n          <div style=\"margin-top: 15px; padding-top: 15px; border-top: 1px solid #3a3a3a\">\n            <p style=\"color: #888; font-size: 13px; margin: 0\">\n              <i class=\"fa-solid fa-lightbulb\" style=\"color: #ffc107\"></i>\n              <strong></strong>0\n            </p>\n          </div>\n        </div>\n\n        <!--  -->\n        <div v-else style=\"display: flex; flex-direction: column; gap: 15px\">\n          <div\n            v-for=\"(greeting, index) in greetings\"\n            :key=\"index\"\n            class=\"greeting-item\"\n            style=\"\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 8px;\n              padding: 15px;\n              transition: all 0.3s ease;\n            \"\n          >\n            <!--  -->\n            <div\n              style=\"\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                margin-bottom: 12px;\n                padding-bottom: 10px;\n                border-bottom: 1px solid #3a3a3a;\n              \"\n            >\n              <span\n                style=\"\n                  background: #667eea;\n                  color: white;\n                  padding: 4px 10px;\n                  border-radius: 6px;\n                  font-size: 12px;\n                  font-weight: bold;\n                  min-width: 35px;\n                  text-align: center;\n                \"\n              >\n                #{{ index }}\n              </span>\n              <input\n                v-model=\"greeting.icon\"\n                style=\"\n                  width: 60px;\n                  text-align: center;\n                  font-size: 20px;\n                  background: #1a1a1a;\n                  border: 1px solid #3a3a3a;\n                  border-radius: 6px;\n                  padding: 6px;\n                  color: #e0e0e0;\n                \"\n                placeholder=\"\"\n                maxlength=\"4\"\n                @input=\"saveConfig\"\n              />\n              <input\n                v-model=\"greeting.title\"\n                style=\"\n                  flex: 1;\n                  background: #1a1a1a;\n                  border: 1px solid #3a3a3a;\n                  border-radius: 6px;\n                  padding: 8px 12px;\n                  color: #e0e0e0;\n                  font-size: 14px;\n                \"\n                :placeholder=\"index === 0 ? '' : ' ' + index\"\n                @input=\"saveConfig\"\n              />\n              <button\n                style=\"\n                  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);\n                  border: none;\n                  color: white;\n                  padding: 8px 16px;\n                  border-radius: 6px;\n                  cursor: pointer;\n                  transition: all 0.2s ease;\n                  display: flex;\n                  align-items: center;\n                  gap: 6px;\n                  font-size: 13px;\n                  font-weight: 600;\n                  box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);\n                \"\n                title=\"\"\n                @click=\"generateDescription(index)\"\n                @mouseenter=\"\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)';\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\n                \"\n                @mouseleave=\"\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.3)';\n                \"\n              >\n                <i class=\"fa-solid fa-wand-magic-sparkles\"></i>\n                <span>AI </span>\n              </button>\n              <button\n                v-if=\"greeting.description\"\n                style=\"\n                  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n                  border: none;\n                  color: white;\n                  padding: 8px 16px;\n                  border-radius: 6px;\n                  cursor: pointer;\n                  transition: all 0.2s ease;\n                  display: flex;\n                  align-items: center;\n                  gap: 6px;\n                  font-size: 13px;\n                  font-weight: 600;\n                  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n                \"\n                title=\"\"\n                @click=\"editDescription(index)\"\n                @mouseenter=\"\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)';\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.5)';\n                \"\n                @mouseleave=\"\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 2px 8px rgba(59, 130, 246, 0.3)';\n                \"\n              >\n                <i class=\"fa-solid fa-edit\"></i>\n                <span>AI </span>\n              </button>\n            </div>\n\n            <!--  -->\n            <textarea\n              v-model=\"greeting.description\"\n              style=\"\n                width: 100%;\n                background: #1a1a1a;\n                border: 1px solid #3a3a3a;\n                border-radius: 6px;\n                padding: 10px;\n                color: #e0e0e0;\n                font-size: 13px;\n                font-family: inherit;\n                resize: vertical;\n                min-height: 60px;\n              \"\n              placeholder=\"...\"\n              @input=\"saveConfig\"\n            >\n            </textarea>\n\n            <!--  -->\n            <button\n              style=\"\n                width: 100%;\n                padding: 10px;\n                background: transparent;\n                border: 1px solid #667eea;\n                border-radius: 6px;\n                color: #667eea;\n                font-size: 13px;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                gap: 6px;\n                margin-top: 10px;\n              \"\n              @click=\"viewOriginalGreeting(index)\"\n              @mouseenter=\"($event.currentTarget as HTMLElement).style.background = 'rgba(102, 126, 234, 0.1)'\"\n              @mouseleave=\"($event.currentTarget as HTMLElement).style.background = 'transparent'\"\n            >\n              <i class=\"fa-solid fa-file-lines\"></i>\n              <span></span>\n            </button>\n          </div>\n        </div>\n\n        <!--  -->\n        <div\n          v-if=\"greetings.length > 0\"\n          style=\"\n            position: sticky;\n            bottom: 0;\n            padding: 20px;\n            background: linear-gradient(to top, #1a1a1a 80%, transparent);\n            border-top: 1px solid #3a3a3a;\n            display: flex;\n            justify-content: center;\n            gap: 15px;\n            margin-top: 20px;\n          \"\n        >\n          <button\n            style=\"\n              padding: 15px 35px;\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n              border: none;\n              border-radius: 10px;\n              color: white;\n              font-size: 15px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              display: flex;\n              align-items: center;\n              gap: 10px;\n              box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n            \"\n            @click=\"generateFrontendCode\"\n            @mouseenter=\"\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(-3px)';\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.6)';\n            \"\n            @mouseleave=\"\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 15px rgba(102, 126, 234, 0.4)';\n            \"\n          >\n            <i class=\"fa-solid fa-code\" style=\"font-size: 16px\"></i>\n            HTML\n          </button>\n          <button\n            style=\"\n              padding: 15px 35px;\n              background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n              border: none;\n              border-radius: 10px;\n              color: white;\n              font-size: 15px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              display: flex;\n              align-items: center;\n              gap: 10px;\n              box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);\n            \"\n            @click=\"downloadAsJson\"\n            @mouseenter=\"\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(-3px)';\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 6px 20px rgba(16, 185, 129, 0.6)';\n            \"\n            @mouseleave=\"\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 15px rgba(16, 185, 129, 0.4)';\n            \"\n          >\n            <i class=\"fa-solid fa-download\" style=\"font-size: 16px\"></i>\n            STScript JSON\n          </button>\n        </div>\n      </div>\n\n      <!--  -->\n      <div\n        style=\"\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          background: #2a2a2a;\n          border-radius: 16px;\n          overflow: hidden;\n          border: 1px solid #3a3a3a;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n        \"\n      >\n        <div\n          style=\"\n            padding: 15px 20px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            border-bottom: 1px solid #3a3a3a;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n          \"\n        >\n          <h4\n            style=\"\n              margin: 0;\n              color: white;\n              font-size: 14px;\n              font-weight: 600;\n              display: flex;\n              align-items: center;\n              gap: 8px;\n            \"\n          >\n            <i class=\"fa-solid fa-eye\"></i>\n            \n          </h4>\n          <button\n            v-if=\"previewHtml\"\n            title=\"\"\n            style=\"\n              width: 32px;\n              height: 32px;\n              background: rgba(255, 255, 255, 0.2);\n              border: none;\n              border-radius: 6px;\n              color: white;\n              font-size: 14px;\n              cursor: pointer;\n              transition: all 0.2s;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n            \"\n            @click=\"openPreviewInNewWindow\"\n          >\n            <i class=\"fa-solid fa-external-link-alt\"></i>\n          </button>\n        </div>\n        <div style=\"flex: 1; position: relative; overflow: hidden; background: #1e1e1e\">\n          <iframe\n            v-if=\"previewHtml\"\n            :srcdoc=\"previewHtml\"\n            sandbox=\"allow-scripts allow-same-origin allow-modals allow-forms\"\n            style=\"width: 100%; height: 100%; border: none; background: white\"\n          ></iframe>\n          <div\n            v-else\n            style=\"\n              width: 100%;\n              height: 100%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              color: #666;\n              font-size: 14px;\n              padding: 20px;\n              text-align: center;\n              line-height: 1.8;\n            \"\n          >\n            <div>\n              <i class=\"fa-solid fa-eye-slash\" style=\"font-size: 48px; margin-bottom: 15px; opacity: 0.3\"></i>\n              <p style=\"margin: 0\"></p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- AI -->\n    <AIGenerateDialog\n      :show=\"showAiGenerateDialog\"\n      :is-generating=\"isGeneratingAi\"\n      title=\"AI \"\n      description=\"AI 20-50...\"\n      :show-input=\"false\"\n      :progress=\"isGeneratingAi ? progressWithElapsedTime : undefined\"\n      @close=\"closeAiGenerateDialog\"\n      @confirm=\"() => {}\"\n    />\n\n    <!-- AI -->\n    <AIModifyDialog\n      :show=\"showAiEditDialog\"\n      :is-modifying=\"isEditingAi\"\n      title=\"AI \"\n      description=\"AI \"\n      :progress=\"isEditingAi ? progressWithElapsedTime : undefined\"\n      :examples=\"['', '', '', '']\"\n      @close=\"showAiEditDialog = false\"\n      @confirm=\"confirmEditDescription\"\n    />\n\n    <!-- AI -->\n    <AIModifyDialog\n      :show=\"showAiStyleDialog\"\n      :is-modifying=\"isGeneratingStyle\"\n      title=\"AI \"\n      description=\"AI HTML\"\n      :progress=\"isGeneratingStyle ? progressWithElapsedTime : undefined\"\n      :examples=\"[\n        '',\n        '',\n        '',\n        '',\n        '',\n      ]\"\n      @close=\"showAiStyleDialog = false\"\n      @confirm=\"generateStyleWithAI\"\n    />\n\n    <!--  -->\n    <div\n      v-if=\"showOriginalDialog\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.7);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n        padding: 20px;\n      \"\n      @click.self=\"showOriginalDialog = false\"\n    >\n      <div\n        style=\"\n          background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);\n          border-radius: 16px;\n          padding: 24px;\n          max-width: 700px;\n          width: 100%;\n          max-height: 80vh;\n          display: flex;\n          flex-direction: column;\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\n        \"\n        @click.stop\n      >\n        <!--  -->\n        <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px\">\n          <h3 style=\"margin: 0; color: white; display: flex; align-items: center; gap: 8px\">\n            <i class=\"fa-solid fa-file-lines\"></i>\n            <span></span>\n          </h3>\n          <button\n            style=\"\n              background: transparent;\n              border: none;\n              color: rgba(255, 255, 255, 0.7);\n              cursor: pointer;\n              font-size: 20px;\n              padding: 4px 8px;\n              transition: all 0.2s;\n            \"\n            @click=\"showOriginalDialog = false\"\n            @mouseenter=\"($event.currentTarget as HTMLElement).style.color = 'white'\"\n            @mouseleave=\"($event.currentTarget as HTMLElement).style.color = 'rgba(255, 255, 255, 0.7)'\"\n          >\n            <i class=\"fa-solid fa-times\"></i>\n          </button>\n        </div>\n\n        <!--  -->\n        <div\n          style=\"\n            background: #1a1a1a;\n            border-radius: 8px;\n            padding: 16px;\n            color: #e0e0e0;\n            font-size: 14px;\n            line-height: 1.6;\n            overflow-y: auto;\n            flex: 1;\n            white-space: pre-wrap;\n            word-wrap: break-word;\n          \"\n        >\n          {{ originalGreetingContent }}\n        </div>\n\n        <!--  -->\n        <div style=\"display: flex; justify-content: flex-end; margin-top: 16px\">\n          <button\n            style=\"\n              padding: 10px 24px;\n              background: white;\n              border: none;\n              border-radius: 6px;\n              color: #1e3a8a;\n              font-size: 14px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.2s;\n            \"\n            @click=\"showOriginalDialog = false\"\n            @mouseenter=\"($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)'\"\n            @mouseleave=\"($event.currentTarget as HTMLElement).style.transform = 'translateY(0)'\"\n          >\n            \n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      v-if=\"showCodeDialog\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.7);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n        backdrop-filter: blur(5px);\n      \"\n      @click=\"closeCodeDialog\"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 15px;\n          max-width: 800px;\n          width: 90%;\n          max-height: 80vh;\n          display: flex;\n          flex-direction: column;\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n        \"\n        @click.stop\n      >\n        <div\n          style=\"\n            padding: 20px;\n            border-bottom: 1px solid #3a3a3a;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n          \"\n        >\n          <h3 style=\"color: #e0e0e0; font-size: 18px; margin: 0; display: flex; align-items: center; gap: 10px\">\n            <i class=\"fa-solid fa-code\"></i>\n            \n          </h3>\n          <button\n            style=\"\n              background: transparent;\n              border: none;\n              color: #888;\n              font-size: 20px;\n              cursor: pointer;\n              padding: 5px 10px;\n              transition: color 0.2s ease;\n            \"\n            @click=\"closeCodeDialog\"\n          >\n            <i class=\"fa-solid fa-times\"></i>\n          </button>\n        </div>\n        <div style=\"padding: 20px; overflow-y: auto; flex: 1\">\n          <div\n            style=\"\n              background: #1a1a1a;\n              border: 1px solid #3a3a3a;\n              border-radius: 8px;\n              padding: 15px;\n              margin-bottom: 20px;\n              color: #e0e0e0;\n            \"\n          >\n            <p style=\"margin-bottom: 10px; font-weight: 600\"><strong></strong></p>\n            <ol style=\"margin-left: 20px; color: #aaa; line-height: 1.8\">\n              <li></li>\n              <li>\n                \n                <code style=\"background: #2a2a2a; padding: 2px 6px; border-radius: 4px; color: #667eea\"></code\n                >\n              </li>\n              <li></li>\n            </ol>\n          </div>\n          <div\n            style=\"\n              background: #1a1a1a;\n              border: 1px solid #3a3a3a;\n              border-radius: 8px;\n              padding: 15px;\n              max-height: 400px;\n              overflow-y: auto;\n              margin-bottom: 15px;\n            \"\n          >\n            <pre\n              style=\"margin: 0; white-space: pre-wrap; word-wrap: break-word\"\n            ><code style=\"color: #e0e0e0; font-family: 'Consolas', 'Monaco', monospace; font-size: 12px; line-height: 1.6\">{{ generatedCode }}</code></pre>\n          </div>\n          <button\n            style=\"\n              width: 100%;\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n              color: white;\n              border: none;\n              padding: 12px;\n              border-radius: 8px;\n              font-size: 14px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 8px;\n            \"\n            @click=\"copyCode\"\n          >\n            <i class=\"fa-solid fa-copy\"></i>\n            {{ copyButtonText }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { klona } from 'klona';\nimport { storeToRefs } from 'pinia';\nimport toastr from 'toastr';\nimport { computed, onMounted, ref } from 'vue';\nimport { z } from 'zod';\nimport { useSettingsStore } from '../settings';\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\nimport { useTaskStore } from '../taskStore';\nimport AIGenerateDialog from './AIGenerateDialog.vue';\nimport AIModifyDialog from './AIModifyDialog.vue';\n\n// \nconst GreetingConfig = z.object({\n  icon: z.string().default(''),\n  title: z.string().default(''),\n  description: z.string().default(''),\n});\n\ntype GreetingConfig = z.infer<typeof GreetingConfig>;\n\n// UIHTML\nconst UIConfig = z.object({\n  customHtml: z.string().default(''), // AIHTML\n});\n\ntype UIConfig = z.infer<typeof UIConfig>;\n\n// settings store\nconst settingsStore = useSettingsStore();\nconst { settings } = storeToRefs(settingsStore);\n\n// task store\nconst taskStore = useTaskStore();\n\n// \nconst greetings = ref<GreetingConfig[]>([]);\nconst uiConfig = ref<UIConfig>(UIConfig.parse({})); // UI\nconst showCodeDialog = ref(false);\nconst generatedCode = ref('');\nconst copyButtonText = ref('');\nconst showAiGenerateDialog = ref(false);\nconst showAiEditDialog = ref(false);\nconst isGeneratingAi = ref(false);\nconst isEditingAi = ref(false);\nconst currentEditingIndex = ref(-1);\nconst showHelp = ref(false); // \nconst previewHtml = ref('');\nconst currentCharacter = ref<any>(null);\nconst showOriginalDialog = ref(false);\nconst originalGreetingContent = ref('');\nconst showAiStyleDialog = ref(false); // AI\nconst isGeneratingStyle = ref(false); // \n\n// AI \ninterface AIProgress {\n  step: number;\n  total: number;\n  stepName: string;\n  percentage: number;\n  message: string;\n  startTime: number;\n}\n\nconst aiProgress = ref<AIProgress>({\n  step: 0,\n  total: 4,\n  stepName: '',\n  percentage: 0,\n  message: '',\n  startTime: 0,\n});\n\n// \nlet elapsedTimer: NodeJS.Timeout | null = null;\n\n// \nfunction updateProgress(step: number, stepName: string, message: string) {\n  aiProgress.value.step = step;\n  aiProgress.value.stepName = stepName;\n  aiProgress.value.message = message;\n  aiProgress.value.percentage = Math.round((step / aiProgress.value.total) * 100);\n\n  console.log(` [ ${aiProgress.value.percentage}%] ${stepName}: ${message}`);\n}\n\n// \nfunction startElapsedTimer() {\n  if (elapsedTimer) {\n    clearInterval(elapsedTimer);\n  }\n  aiProgress.value.startTime = Date.now();\n  elapsedTimer = setInterval(() => {\n    const elapsed = Math.round((Date.now() - aiProgress.value.startTime) / 1000);\n    // \n    aiProgress.value = { ...aiProgress.value };\n  }, 1000);\n}\n\n// \nfunction stopElapsedTimer() {\n  if (elapsedTimer) {\n    clearInterval(elapsedTimer);\n    elapsedTimer = null;\n  }\n}\n\n// \nconst progressWithElapsedTime = computed(() => {\n  const elapsed = Math.round((Date.now() - aiProgress.value.startTime) / 1000);\n  return {\n    ...aiProgress.value,\n    elapsedTime: elapsed,\n  };\n});\n\n//  -  TavernHelper\nfunction getCurrentCharacter() {\n  try {\n    //  TavernHelper \n    if (typeof (window as any).TavernHelper !== 'undefined') {\n      const char = (window as any).TavernHelper.getCharData('current');\n      if (char) {\n        console.log(' (TavernHelper):', char.name);\n        return char;\n      }\n    }\n\n    //  SillyTavern API \n    if (typeof SillyTavern !== 'undefined') {\n      const charData = (SillyTavern as any).getContext?.()?.characters?.[0];\n      if (charData) {\n        console.log(' (SillyTavern):', charData.name);\n        return charData;\n      }\n    }\n\n    console.log('');\n    return null;\n  } catch (error) {\n    console.error(':', error);\n    return null;\n  }\n}\n\n// \nasync function loadConfig() {\n  try {\n    const character = getCurrentCharacter();\n    if (!character) {\n      greetings.value = [];\n      console.log('');\n      return;\n    }\n\n    console.log(':', character.name);\n\n    // \n    const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\n    console.log('', allGreetings.length, '');\n\n    //  localStorage \n    const scriptId = getScriptIdSafe();\n    const storageKey = `${scriptId}_greetings_${character.avatar}`;\n\n    let configs = [];\n    let savedUIConfig = null;\n\n    const savedData = localStorage.getItem(storageKey);\n    if (savedData) {\n      try {\n        const savedConfig = JSON.parse(savedData);\n        configs = savedConfig?.greetings_config || [];\n        savedUIConfig = savedConfig?.ui_config;\n        console.log('  localStorage ');\n      } catch (e) {\n        console.error(':', e);\n      }\n    }\n\n    // \n    greetings.value = allGreetings.map((_, index) => {\n      const saved = configs[index];\n      try {\n        return GreetingConfig.parse(saved || {});\n      } catch (error) {\n        console.warn(':', error);\n        return GreetingConfig.parse({});\n      }\n    });\n\n    // UI\n    try {\n      const uiConfigData = savedUIConfig || {};\n      uiConfig.value = UIConfig.parse(uiConfigData);\n    } catch (error) {\n      console.warn('UI:', error);\n      uiConfig.value = UIConfig.parse({});\n    }\n\n    console.log(':', greetings.value.length, '');\n    console.log('UI, HTML:', uiConfig.value.customHtml.length);\n    currentCharacter.value = character;\n    updatePreview();\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error as Error).message);\n  }\n}\n\n//  -  localStorage\nfunction saveConfig() {\n  try {\n    const character = getCurrentCharacter();\n    if (!character) {\n      console.warn('');\n      return;\n    }\n\n    const scriptId = getScriptIdSafe();\n    const storageKey = `${scriptId}_greetings_${character.avatar}`;\n\n    const configData = {\n      greetings_config: klona(greetings.value),\n      ui_config: klona(uiConfig.value),\n    };\n\n    localStorage.setItem(storageKey, JSON.stringify(configData));\n    console.log('  localStorage');\n    updatePreview(); // \n  } catch (error) {\n    console.error(':', error);\n  }\n}\n\n// \nfunction clearAllConfig() {\n  if (\n    !confirm(\n      `\\n\\n ${greetings.value.length} \\n\\n `,\n    )\n  ) {\n    return;\n  }\n\n  try {\n    // \n    greetings.value = greetings.value.map(() => {\n      return GreetingConfig.parse({\n        icon: '',\n        title: '',\n        description: '',\n      });\n    });\n\n    // UI\n    uiConfig.value.customHtml = '';\n\n    // \n    saveConfig();\n\n    // \n    updatePreview();\n\n    toastr.success('');\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error as Error).message);\n  }\n}\n\n// \nfunction viewOriginalGreeting(index: number) {\n  try {\n    const character = getCurrentCharacter();\n    if (!character) {\n      toastr.error('');\n      return;\n    }\n\n    const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\n    const greetingContent = allGreetings[index] || '';\n\n    if (!greetingContent.trim()) {\n      toastr.warning('');\n      return;\n    }\n\n    originalGreetingContent.value = greetingContent;\n    showOriginalDialog.value = true;\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error as Error).message);\n  }\n}\n\n// AI\nfunction closeAiGenerateDialog() {\n  if (!isGeneratingAi.value) {\n    showAiGenerateDialog.value = false;\n  }\n}\n\n// AI\n// AI\nasync function generateDescription(index: number) {\n  currentEditingIndex.value = index;\n\n  // \n  const taskId = taskStore.createTask('ui_generate', `#${index}`);\n\n  // \n  aiProgress.value.startTime = Date.now();\n  aiProgress.value.total = 4;\n  updateProgress(0, '', ' AI ...');\n  startElapsedTimer(); // \n\n  // \n  showAiGenerateDialog.value = true;\n  isGeneratingAi.value = true;\n\n  const idx = index;\n  if (idx < 0 || idx >= greetings.value.length) {\n    isGeneratingAi.value = false;\n    showAiGenerateDialog.value = false;\n    taskStore.failTask(taskId, '');\n    return;\n  }\n\n  try {\n    updateProgress(1, '', ' API ...');\n    taskStore.updateTaskProgress(taskId, 10, '');\n\n    //  API \n    if (!settings.value.api_endpoint || !settings.value.api_key) {\n      toastr.error(' API  API Key');\n      showAiGenerateDialog.value = false;\n      isGeneratingAi.value = false;\n      taskStore.failTask(taskId, 'API ');\n      return;\n    }\n\n    updateProgress(2, '', ` #${idx} ...`);\n    taskStore.updateTaskProgress(taskId, 30, '');\n\n    // \n    const character = getCurrentCharacter();\n    if (!character) {\n      toastr.error('');\n      showAiGenerateDialog.value = false;\n      isGeneratingAi.value = false;\n      taskStore.failTask(taskId, '');\n      return;\n    }\n\n    const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\n    const greetingContent = allGreetings[idx] || '';\n\n    if (!greetingContent.trim()) {\n      toastr.warning('');\n      showAiGenerateDialog.value = false;\n      isGeneratingAi.value = false;\n      taskStore.failTask(taskId, '');\n      return;\n    }\n\n    updateProgress(3, ' AI', ` ${settings.value.model} ...`);\n    taskStore.updateTaskProgress(taskId, 50, ` AI (${settings.value.model})`);\n\n    // \n    const systemPrompt = `\n\n\n1.  20-50 \n2. \n3. \n4. \"...\"\"...\"\n5. `;\n\n    const userPrompt = `\n\n${greetingContent}\n\n`;\n\n    console.log('  AI API ()...');\n\n    // \n    const { filterApiParams } = await import('../settings');\n\n    const requestParams = {\n      model: settings.value.model,\n      messages: [\n        { role: 'system', content: systemPrompt },\n        { role: 'user', content: userPrompt },\n      ],\n      temperature: settings.value.temperature,\n      max_tokens: settings.value.max_tokens,\n      top_p: settings.value.top_p,\n      presence_penalty: settings.value.presence_penalty,\n      frequency_penalty: settings.value.frequency_penalty,\n    };\n\n    //  API \n    const filteredParams = filterApiParams(requestParams, settings.value.api_endpoint);\n\n    //  API\n    const response = await fetch(settings.value.api_endpoint + '/chat/completions', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify(filteredParams),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.status} ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    let aiDescription = data.choices?.[0]?.message?.content;\n\n    console.log(' [] AI :', aiDescription);\n\n    if (!aiDescription || !aiDescription.trim()) {\n      throw new Error('AI \\n1. API Key \\n2. \\n3. ');\n    }\n\n    updateProgress(4, '', '...');\n    taskStore.updateTaskProgress(taskId, 80, '');\n\n    // AI\n    // \n    aiDescription = aiDescription.replace(/^[\"']|[\"']$/g, '');\n    // markdown\n    aiDescription = aiDescription.replace(/^```.*?\\n?|```$/g, '').trim();\n\n    if (!aiDescription) {\n      throw new Error('AI ');\n    }\n\n    console.log(' [] AI :', aiDescription);\n\n    // \n    greetings.value[idx].description = aiDescription;\n    saveConfig();\n\n    // \n    const elapsed = ((Date.now() - aiProgress.value.startTime) / 1000).toFixed(1);\n    toastr.success(` ${elapsed} `, '', { timeOut: 3000 });\n\n    // \n    taskStore.completeTask(taskId, { description: aiDescription });\n\n    // \n    setTimeout(() => {\n      showAiGenerateDialog.value = false;\n    }, 500);\n  } catch (error) {\n    console.error(' [] AI :', error);\n    const errorMsg = ': ' + (error as Error).message;\n    toastr.error(errorMsg);\n    taskStore.failTask(taskId, errorMsg);\n    // \n    setTimeout(() => {}, 5000);\n  } finally {\n    stopElapsedTimer(); // \n    isGeneratingAi.value = false;\n  }\n}\n\n// AI\nfunction editDescription(index: number) {\n  currentEditingIndex.value = index;\n  showAiEditDialog.value = true;\n}\n\n// AI\nasync function confirmEditDescription(requirement: string) {\n  const index = currentEditingIndex.value;\n  if (index < 0 || index >= greetings.value.length) return;\n\n  // \n  const taskId = taskStore.createTask('ui_modify', `#${index}`);\n\n  // \n  aiProgress.value.startTime = Date.now();\n  aiProgress.value.total = 4;\n  updateProgress(0, '', ' AI ...');\n  startElapsedTimer(); // \n\n  isEditingAi.value = true;\n\n  try {\n    updateProgress(1, '', ' API ...');\n    taskStore.updateTaskProgress(taskId, 10, '');\n\n    //  API \n    if (!settings.value.api_endpoint || !settings.value.api_key) {\n      toastr.error(' API  API Key');\n      showAiEditDialog.value = false;\n      isEditingAi.value = false;\n      stopElapsedTimer();\n      taskStore.failTask(taskId, 'API ');\n      return;\n    }\n\n    updateProgress(2, '', '...');\n    taskStore.updateTaskProgress(taskId, 30, '');\n\n    const currentDesc = greetings.value[index].description;\n\n    if (!currentDesc.trim()) {\n      toastr.warning(' AI ');\n      showAiEditDialog.value = false;\n      isEditingAi.value = false;\n      stopElapsedTimer();\n      taskStore.failTask(taskId, '');\n      return;\n    }\n\n    updateProgress(3, ' AI', ` ${settings.value.model} ...`);\n    taskStore.updateTaskProgress(taskId, 50, ` AI (${settings.value.model})`);\n\n    // \n    const systemPrompt = `\n\n\n1. \n2.  20-50 \n3. \n4. `;\n\n    const userPrompt = `\n${currentDesc}\n\n\n${requirement}\n\n`;\n\n    console.log('  AI API ()...');\n\n    // \n    const { filterApiParams: filterApiParams2 } = await import('../settings');\n\n    const requestParams2 = {\n      model: settings.value.model,\n      messages: [\n        { role: 'system', content: systemPrompt },\n        { role: 'user', content: userPrompt },\n      ],\n      temperature: settings.value.temperature,\n      max_tokens: settings.value.max_tokens,\n      top_p: settings.value.top_p,\n      presence_penalty: settings.value.presence_penalty,\n      frequency_penalty: settings.value.frequency_penalty,\n    };\n\n    //  API \n    const filteredParams2 = filterApiParams2(requestParams2, settings.value.api_endpoint);\n\n    //  API ()\n    const response = await fetch(settings.value.api_endpoint + '/chat/completions', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify(filteredParams2),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.status} ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    let aiDescription = data.choices?.[0]?.message?.content;\n\n    console.log(' [] AI :', aiDescription);\n\n    if (!aiDescription || !aiDescription.trim()) {\n      throw new Error('AI \\n1. API Key \\n2. \\n3. ');\n    }\n\n    updateProgress(4, '', '...');\n    taskStore.updateTaskProgress(taskId, 80, '');\n\n    // AI\n    // \n    aiDescription = aiDescription.replace(/^[\"']|[\"']$/g, '');\n    // markdown\n    aiDescription = aiDescription.replace(/^```.*?\\n?|```$/g, '').trim();\n\n    if (!aiDescription) {\n      throw new Error('AI ');\n    }\n\n    console.log(' [] AI :', aiDescription);\n\n    // \n    greetings.value[index].description = aiDescription;\n    saveConfig();\n\n    // \n    const elapsed = ((Date.now() - aiProgress.value.startTime) / 1000).toFixed(1);\n    toastr.success(` ${elapsed} `, '', { timeOut: 3000 });\n\n    // \n    taskStore.completeTask(taskId, { description: aiDescription });\n\n    // \n    setTimeout(() => {\n      showAiEditDialog.value = false;\n    }, 500);\n  } catch (error) {\n    console.error(' [] AI :', error);\n    const errorMsg = ': ' + (error as Error).message;\n    toastr.error(errorMsg);\n    taskStore.failTask(taskId, errorMsg);\n  } finally {\n    stopElapsedTimer(); // \n    isEditingAi.value = false;\n  }\n}\n\n// AI\nasync function generateStyleWithAI(styleDescription: string) {\n  if (!styleDescription.trim()) {\n    toastr.warning('');\n    return;\n  }\n\n  // \n  const taskId = taskStore.createTask('ui_generate', '');\n\n  // \n  aiProgress.value.startTime = Date.now();\n  aiProgress.value.total = 5;\n  updateProgress(0, '', '...');\n  startElapsedTimer(); // \n\n  //  API \n  if (!settings.value.api_endpoint || !settings.value.api_key) {\n    toastr.error(' API  API Key');\n    showAiStyleDialog.value = false;\n    stopElapsedTimer();\n    taskStore.failTask(taskId, 'API ');\n    return;\n  }\n\n  isGeneratingStyle.value = true;\n\n  try {\n    updateProgress(1, '', '...');\n    taskStore.updateTaskProgress(taskId, 10, '');\n\n    // HTML\n    const cards = greetings.value\n      .map((g, index) => {\n        const icon = g.icon || '';\n        const title = g.title || (index === 0 ? '' : ` ${index}`);\n        const desc = g.description || '';\n        const badge = index === 0 ? '' : String(index).padStart(2, '0');\n        return (\n          '      <' +\n          'div class=\"scene-card\" onclick=\"switchGreeting(' +\n          index +\n          ')\">' +\n          '<' +\n          'div class=\"card-badge\">' +\n          badge +\n          '<' +\n          '/div>' +\n          '<' +\n          'div class=\"card-icon\">' +\n          icon +\n          '<' +\n          '/div>' +\n          '<' +\n          'div class=\"card-title\">' +\n          title +\n          '<' +\n          '/div>' +\n          '<' +\n          'div class=\"card-desc\">' +\n          desc +\n          '<' +\n          '/div>' +\n          '<' +\n          '/div>'\n        );\n      })\n      .join('\\n');\n\n    const systemPrompt =\n      `HTML/CSS\n\nHTML\n\n\n1.  HTML ` +\n      '<' +\n      `html>` +\n      '<' +\n      `head>` +\n      '<' +\n      `body>\n2.  ` +\n      '<' +\n      `head>  Font Awesome ` +\n      '<' +\n      `link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n3.  ` +\n      '<' +\n      `style>  CSS \n4. HTML\n   - body\n   - .container\n   - .header\n     - h1\n     - p\n   - .scene-grid\n   - .scene-card onclick \n   - .card-badge\n   - .card-icon\n   - .card-title\n   - .card-desc\n   - .loading\n5.  switchGreeting(id)  JavaScript \n6. \n7. \n8. HTMLmarkdown\n\n\n- body  \"min-height: 100vh; height: auto;\" \n- body  \"display: flex; align-items: center; justify-content: center;\" \n- .container  \"height: auto;\" \n- .scene-card  \"min-height\"  \"height\"\n- .card-desc  line-clamp \n-  \"overflow: hidden\"  line-clamp \n- \n\nHTML\n-  class=\"scene-grid\" div\n-  scene-grid \n- scene-gridgrid-containercards-grid`;\n\n    //  switchGreeting \n    const switchGreetingCode = `async function switchGreeting(id) {\n      try {\n        const loading = document.getElementById(\"loading\");\n        const mainContainer = document.getElementById(\"mainContainer\");\n        if (loading) loading.classList.add(\"active\");\n        if (mainContainer) mainContainer.style.display = \"none\";\n\n        if (typeof window.getChatMessages !== \"function\") {\n          alert(\"\");\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n          return;\n        }\n\n        //  TavernHelper \n        let messages;\n        if (typeof (window as any).TavernHelper !== 'undefined' && \n            typeof (window as any).TavernHelper.getChatMessages === 'function') {\n          messages = (window as any).TavernHelper.getChatMessages('0');\n        } else {\n          alert(\"TavernHelper \");\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n          return;\n        }\n        \n        if (!messages || messages.length === 0) {\n          alert(\"\");\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n          return;\n        }\n\n        const content = messages[0].swipes[id];\n        if (!content) {\n          alert(\"\");\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n          return;\n        }\n\n        await window.setChatMessage(content, 0, { swipe_id: id, refresh: \"display_and_render_current\" });\n\n        setTimeout(() => {\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n        }, 500);\n      } catch (err) {\n        console.error(\":\", err);\n        alert(\": \" + err.message);\n        const loading = document.getElementById(\"loading\");\n        const mainContainer = document.getElementById(\"mainContainer\");\n        if (loading) loading.classList.remove(\"active\");\n        if (mainContainer) mainContainer.style.display = \"block\";\n      }\n    }`;\n\n    const userPrompt =\n      `${styleDescription}\n\n onclick=\"switchGreeting()\" \n${cards}\n\n ` +\n      '<' +\n      `/body>  JavaScript \n` +\n      '<' +\n      `script>\n${switchGreetingCode}\n` +\n      '<' +\n      `/script>\n\n .scene-card  onclick=\"switchGreeting()\" \n` +\n      '<' +\n      `div class=\"scene-card\" onclick=\"switchGreeting(0)\">\n\n loading \n` +\n      '<' +\n      `div class=\"loading\" id=\"loading\" style=\"display: none; text-align: center; padding: 40px;\">\n  ` +\n      '<' +\n      `p style=\"color: #888; font-size: 18px;\">...` +\n      '<' +\n      `/p>\n` +\n      '<' +\n      `/div>\n\nHTML`;\n\n    updateProgress(2, '', ' AI ...');\n    taskStore.updateTaskProgress(taskId, 30, '');\n\n    console.log('  AI API ()...');\n\n    updateProgress(3, ' AI', ` ${settings.value.model} ...`);\n    taskStore.updateTaskProgress(taskId, 50, ` AI (${settings.value.model})`);\n\n    // \n    const { filterApiParams: filterApiParams3 } = await import('../settings');\n\n    const requestParams3 = {\n      model: settings.value.model,\n      messages: [\n        { role: 'system', content: systemPrompt },\n        { role: 'user', content: userPrompt },\n      ],\n      temperature: settings.value.temperature,\n      max_tokens: settings.value.max_tokens,\n      top_p: settings.value.top_p,\n      presence_penalty: settings.value.presence_penalty,\n      frequency_penalty: settings.value.frequency_penalty,\n    };\n\n    //  API \n    const filteredParams3 = filterApiParams3(requestParams3, settings.value.api_endpoint);\n\n    //  API ()\n    const response = await fetch(settings.value.api_endpoint + '/chat/completions', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify(filteredParams3),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.status} ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    let generatedHtml = data.choices?.[0]?.message?.content;\n\n    console.log(' [] AI :', generatedHtml ? generatedHtml.substring(0, 500) : '()');\n\n    if (!generatedHtml || !generatedHtml.trim()) {\n      throw new Error('AI  API ');\n    }\n\n    updateProgress(4, '', '...');\n    taskStore.updateTaskProgress(taskId, 75, '');\n\n    // AI\n    // markdown\n    generatedHtml = generatedHtml.replace(/^```html\\n?|^```\\n?|```$/gm, '').trim();\n\n    if (!generatedHtml) {\n      throw new Error('AI ');\n    }\n\n    console.log(' [] AI HTML:', generatedHtml.length);\n\n    updateProgress(5, '', '...');\n    taskStore.updateTaskProgress(taskId, 90, '');\n\n    // HTML\n    uiConfig.value.customHtml = generatedHtml;\n    saveConfig();\n\n    // \n    updatePreview();\n\n    // \n    const elapsed = ((Date.now() - aiProgress.value.startTime) / 1000).toFixed(1);\n    toastr.success(` ${elapsed} `, '', { timeOut: 3000 });\n\n    // \n    taskStore.completeTask(taskId, { htmlLength: generatedHtml.length });\n\n    // \n    setTimeout(() => {\n      showAiStyleDialog.value = false;\n    }, 500);\n  } catch (error) {\n    console.error(' [] AI :', error);\n    toastr.error(': ' + (error as Error).message, '', { timeOut: 5000 });\n    taskStore.failTask(taskId, (error as Error).message);\n  } finally {\n    stopElapsedTimer(); // \n    isGeneratingStyle.value = false;\n  }\n}\n\n// \nasync function generateFrontendCode() {\n  const character = getCurrentCharacter();\n  if (!character) {\n    toastr.warning('');\n    return;\n  }\n\n  // AIHTML\n  if (uiConfig.value.customHtml && uiConfig.value.customHtml.trim()) {\n    generatedCode.value = uiConfig.value.customHtml;\n    showCodeDialog.value = true;\n    return;\n  }\n\n  // HTML\n  toastr.warning('\"AI\"HTML');\n}\n\n// \nasync function copyCode() {\n  const success = await copyToClipboard(generatedCode.value, ' ');\n  if (success) {\n    copyButtonText.value = ' ';\n    setTimeout(() => {\n      copyButtonText.value = '';\n    }, 2000);\n  }\n}\n\n// \nfunction updatePreview() {\n  if (greetings.value.length === 0) {\n    previewHtml.value = '';\n    return;\n  }\n\n  // AIHTML\n  if (uiConfig.value.customHtml && uiConfig.value.customHtml.trim()) {\n    console.log(' AIHTML');\n\n    try {\n      // HTML\n      const cardsHtml = greetings.value\n        .map((g, index) => {\n          const icon = g.icon || '';\n          const title = g.title || (index === 0 ? '' : ` ${index}`);\n          const desc = g.description || '';\n          const badge = index === 0 ? '' : String(index).padStart(2, '0');\n\n          return `\n            <div class=\"scene-card\" onclick=\"switchGreeting(${index})\">\n              <span class=\"card-badge\">${badge}</span>\n              <div class=\"card-icon\">${icon}</div>\n              <h3 class=\"card-title\">${title}</h3>\n              <p class=\"card-desc\">${desc}</p>\n            </div>\n          `.trim();\n        })\n        .join('\\n          ');\n\n      // HTML.scenes-grid\n      let html = uiConfig.value.customHtml;\n      html = html.replace(\n        /<div class=\"scenes-grid\">[\\s\\S]*?<\\/div>/,\n        `<div class=\"scenes-grid\">\\n          ${cardsHtml}\\n        </div>`,\n      );\n\n      previewHtml.value = html;\n      console.log(' ');\n    } catch (error) {\n      console.error(' :', error);\n      previewHtml.value = '';\n    }\n    return;\n  }\n\n  // HTML\n  previewHtml.value = '';\n}\n\n// \nfunction closeCodeDialog() {\n  showCodeDialog.value = false;\n}\n\n// \nfunction openPreviewInNewWindow() {\n  if (!previewHtml.value) {\n    toastr.error('');\n    return;\n  }\n\n  const character = getCurrentCharacter();\n  const windowTitle = character ? `${character.name} - ` : '';\n\n  // \n  const newWindow = window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no');\n  if (newWindow) {\n    newWindow.document.write(previewHtml.value);\n    newWindow.document.close();\n    newWindow.document.title = windowTitle;\n    toastr.success('');\n  } else {\n    toastr.error('');\n  }\n}\n\n// STScript JSON\nasync function downloadAsJson() {\n  try {\n    await generateFrontendCode();\n\n    if (!generatedCode.value) {\n      toastr.error('');\n      return;\n    }\n\n    const character = getCurrentCharacter();\n    const characterName = character?.name || '';\n\n    // UUID\n    const uuid = crypto.randomUUID();\n\n    // STScript JSON\n    const stscriptJson = {\n      id: uuid,\n      scriptName: `${characterName}-`,\n      disabled: false,\n      runOnEdit: true,\n      findRegex: '//g',\n      replaceString: '```html\\n' + generatedCode.value + '\\n```',\n      trimStrings: [],\n      placement: [1, 2],\n      substituteRegex: 0,\n      minDepth: null,\n      maxDepth: null,\n      markdownOnly: true,\n      promptOnly: false,\n    };\n\n    // JSON\n    const jsonString = JSON.stringify(stscriptJson, null, 4);\n\n    // Blob\n    const blob = new Blob([jsonString], { type: 'application/json' });\n\n    // \n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${characterName}-.json`;\n\n    // \n    document.body.appendChild(link);\n    link.click();\n\n    // \n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n\n    toastr.success('JSON');\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error as Error).message);\n  }\n}\n\n// \nonMounted(() => {\n  loadConfig();\n});\n</script>\n\n<style scoped lang=\"scss\">\n/*  */\n.greetings-tab {\n  background: #1a1a1a !important;\n  color: #e0e0e0;\n}\n\n/*  */\n* {\n  &::-webkit-scrollbar {\n    width: 6px;\n    height: 6px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #1a1a1a;\n    border-radius: 3px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #4a9eff;\n    border-radius: 3px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #5ab0ff;\n  }\n}\n\n/*  */\n.mini-button {\n  &:hover {\n    transform: translateY(-2px);\n  }\n  &:active {\n    transform: translateY(0);\n  }\n}\n\n/*  */\n.help-info {\n  background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);\n  border: 1px solid #3a3a3a;\n\n  h4 {\n    color: #667eea;\n  }\n\n  p {\n    color: #b0b0b0;\n  }\n\n  li {\n    color: #d0d0d0;\n  }\n}\n\n/*  */\n.preview-section {\n  background: #1a1a1a;\n  border: 1px solid #3a3a3a;\n  border-radius: 8px;\n  padding: 20px;\n  margin-top: 20px;\n}\n\n.preview-container {\n  background: white;\n  border-radius: 4px;\n  min-height: 200px;\n}\n\n/*  */\n.greeting-card {\n  background: #2a2a2a;\n  border: 1px solid #3a3a3a;\n  border-radius: 8px;\n  padding: 16px;\n  transition: all 0.3s;\n\n  &:hover {\n    border-color: #667eea;\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n  }\n}\n\n/*  */\n.dialog-overlay {\n  background: rgba(0, 0, 0, 0.8);\n}\n\n.dialog-box {\n  background: #2a2a2a;\n  border: 1px solid #3a3a3a;\n}\n</style>\n","<template>\n  <div class=\"help-tab\" style=\"padding: 25px !important; background: #1a1a1a !important\">\n    <!--  -->\n    <div\n      style=\"\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n        padding: 35px 30px;\n        border-radius: 20px;\n        margin-bottom: 25px;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n        text-align: center;\n        position: relative;\n        overflow: hidden;\n      \"\n    >\n      <!--  -->\n      <div\n        style=\"\n          position: absolute;\n          top: -50px;\n          right: -50px;\n          width: 150px;\n          height: 150px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 50%;\n        \"\n      ></div>\n      <div\n        style=\"\n          position: absolute;\n          bottom: -30px;\n          left: -30px;\n          width: 100px;\n          height: 100px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 50%;\n        \"\n      ></div>\n\n      <div style=\"position: relative; z-index: 1\">\n        <div style=\"font-size: 48px; margin-bottom: 10px\"></div>\n        <h2 style=\"margin: 0 0 10px 0; color: white; font-size: 24px; font-weight: 600\">mzrodyu</h2>\n        <div style=\"color: rgba(255, 255, 255, 0.9); font-size: 14px\" class=\"version-info\"> v1.36</div>\n\n        <!--  -->\n        <div\n          style=\"\n            margin-top: 25px;\n            padding: 20px;\n            background: rgba(220, 53, 69, 0.15);\n            border: 2px solid rgba(220, 53, 69, 0.3);\n            border-radius: 12px;\n            backdrop-filter: blur(10px);\n          \"\n        >\n          <div style=\"display: flex; align-items: center; gap: 8px; margin-bottom: 10px; justify-content: center\">\n            <i class=\"fa-solid fa-shield-halved\" style=\"color: #ffc107; font-size: 16px\"></i>\n            <span style=\"color: white; font-weight: 600; font-size: 14px\"></span>\n          </div>\n          <div style=\"color: rgba(255, 255, 255, 0.95); font-size: 13px; line-height: 1.8; text-align: left\">\n            <div style=\"margin-bottom: 5px\"> /</div>\n            <div style=\"margin-bottom: 5px\"> </div>\n            <div style=\"margin-bottom: 5px\"> </div>\n            <div> </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      style=\"\n        background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);\n        padding: 25px;\n        border-radius: 20px;\n        margin-bottom: 20px;\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n      \"\n    >\n      <h3\n        @click=\"toggleSection('usageGuide')\"\n        style=\"\n          margin: 0 0 20px 0;\n          color: #fff;\n          font-size: 18px;\n          font-weight: 600;\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          cursor: pointer;\n          user-select: none;\n        \"\n      >\n        <i class=\"fa-solid fa-book\" style=\"color: #17a2b8; font-size: 18px\"></i>\n        \n        <i\n          :class=\"expandedSections.usageGuide ? 'fa-chevron-up' : 'fa-chevron-down'\"\n          class=\"fa-solid\"\n          style=\"margin-left: auto; font-size: 14px; transition: transform 0.3s; color: #888\"\n        ></i>\n      </h3>\n\n      <div\n        v-show=\"expandedSections.usageGuide\"\n        style=\"color: #e0e0e0; font-size: 14px; line-height: 1.8; animation: fadeIn 0.3s ease-in\"\n      >\n        <!--  -->\n        <div style=\"margin-bottom: 20px\">\n          <h4 style=\"color: #4a9eff; margin-bottom: 12px; font-size: 16px\"> </h4>\n          <ul style=\"list-style: none; padding: 0; margin: 0\">\n            <li style=\"margin-bottom: 8px\"><strong></strong>/</li>\n            <li style=\"margin-bottom: 8px\">\n              <strong></strong> AI \n            </li>\n            <li style=\"margin-bottom: 8px\">\n              <strong></strong> JSON \n            </li>\n            <li style=\"margin-bottom: 8px\"><strong>MVU Beta</strong>meta </li>\n            <li><strong></strong></li>\n          </ul>\n        </div>\n\n        <!--  -->\n        <div>\n          <h4 style=\"color: #ffc107; margin-bottom: 12px; font-size: 16px\"> </h4>\n\n          <div style=\"margin-bottom: 15px\">\n            <div style=\"color: #ff6b6b; font-weight: 600; margin-bottom: 8px\"> API </div>\n            <div style=\"margin-bottom: 10px\">\n              <strong></strong>\n              <ul style=\"margin: 8px 0; padding-left: 20px\">\n                <li><code>https://api.openai.com</code>   <code>/v1</code></li>\n                <li><code>https://api.openai.com/v1</code>  </li>\n                <li><code>https://your-proxy.com/v1/chat/completions</code>  </li>\n              </ul>\n            </div>\n          </div>\n\n          <ul style=\"list-style: disc; padding-left: 20px; margin: 0\">\n            <li style=\"margin-bottom: 8px\"><strong></strong>      </li>\n            <li style=\"margin-bottom: 8px\"><strong></strong>\"\" API</li>\n            <li><strong></strong> 20-30 </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      style=\"\n        background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);\n        padding: 25px;\n        border-radius: 20px;\n        margin-bottom: 20px;\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n      \"\n    >\n      <h3\n        @click=\"toggleSection('changelog')\"\n        style=\"\n          margin: 0 0 20px 0;\n          color: #fff;\n          font-size: 18px;\n          font-weight: 600;\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          cursor: pointer;\n          user-select: none;\n        \"\n      >\n        <i class=\"fa-solid fa-clock-rotate-left\" style=\"color: #28a745; font-size: 18px\"></i>\n        \n        <i\n          :class=\"expandedSections.changelog ? 'fa-chevron-up' : 'fa-chevron-down'\"\n          class=\"fa-solid\"\n          style=\"margin-left: auto; font-size: 14px; transition: transform 0.3s; color: #888\"\n        ></i>\n      </h3>\n\n      <div\n        v-show=\"expandedSections.changelog\"\n        style=\"color: #e0e0e0; font-size: 14px; line-height: 1.8; animation: fadeIn 0.3s ease-in\"\n      >\n        <!-- v1.34 -->\n        <div\n          style=\"\n            padding: 20px;\n            background: rgba(76, 175, 80, 0.05);\n            border-left: 4px solid #4caf50;\n            border-radius: 8px;\n            margin-bottom: 15px;\n          \"\n        >\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px\">\n            <div\n              style=\"font-size: 16px; font-weight: 600; color: #4caf50; display: flex; align-items: center; gap: 8px\"\n            >\n              v1.34\n            </div>\n            <div style=\"font-size: 13px; color: #888\">2025118</div>\n          </div>\n          <ul class=\"update-list\">\n            <li class=\"update-item\">  vue-i18n </li>\n            <li class=\"update-item\"> </li>\n            <li class=\"update-item\"> </li>\n          </ul>\n        </div>\n\n        <!-- v1.33 -->\n        <div\n          style=\"\n            padding: 20px;\n            background: rgba(255, 152, 0, 0.05);\n            border-left: 4px solid #ff9800;\n            border-radius: 8px;\n            margin-bottom: 15px;\n          \"\n        >\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px\">\n            <div\n              style=\"font-size: 16px; font-weight: 600; color: #ff9800; display: flex; align-items: center; gap: 8px\"\n            >\n              v1.33 -  \n            </div>\n            <div style=\"font-size: 13px; color: #888\">2025115</div>\n          </div>\n          <ul class=\"update-list\">\n            <li class=\"update-item\"></li>\n            <li class=\"update-item\"></li>\n            <li class=\"update-item\"></li>\n            <li class=\"update-item\">AI </li>\n            <li class=\"update-item\">AI </li>\n            <li class=\"update-item\"> AI AIHTML</li>\n            <li class=\"update-item\"></li>\n            <li class=\"update-item\"> STScript JSON </li>\n            <li class=\"update-item\"></li>\n          </ul>\n        </div>\n\n        <!-- v1.32 -->\n        <div\n          style=\"\n            padding: 20px;\n            background: rgba(99, 102, 241, 0.05);\n            border-left: 4px solid #6366f1;\n            border-radius: 8px;\n            margin-bottom: 15px;\n          \"\n        >\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px\">\n            <div style=\"font-size: 16px; font-weight: 600; color: #6366f1\">v1.32</div>\n            <div style=\"font-size: 13px; color: #888\">2025112</div>\n          </div>\n\n          <div style=\"margin-bottom: 15px\">\n            <div style=\"color: #6366f1; font-weight: 600; margin-bottom: 8px\"> </div>\n            <ul class=\"update-list\">\n              <li class=\"update-item\"></li>\n            </ul>\n          </div>\n        </div>\n\n        <!-- v1.31 -->\n        <div\n          style=\"\n            padding: 20px;\n            background: rgba(99, 102, 241, 0.05);\n            border-left: 4px solid #6366f1;\n            border-radius: 8px;\n            margin-bottom: 15px;\n          \"\n        >\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px\">\n            <div style=\"font-size: 16px; font-weight: 600; color: #6366f1\">v1.31</div>\n            <div style=\"font-size: 13px; color: #888\">20251030</div>\n          </div>\n\n          <div style=\"margin-bottom: 15px\">\n            <div style=\"color: #ffc107; font-weight: 600; margin-bottom: 8px\"> </div>\n            <ul class=\"update-list\">\n              <li class=\"update-item\">AI </li>\n              <li class=\"update-item\"> AI  XML </li>\n            </ul>\n          </div>\n\n          <div>\n            <div style=\"color: #6366f1; font-weight: 600; margin-bottom: 8px\"> </div>\n            <ul class=\"update-list\">\n              <li class=\"update-item\"></li>\n              <li class=\"update-item\"> AI  API </li>\n            </ul>\n          </div>\n        </div>\n\n        <!-- v1.30 -->\n        <div\n          style=\"\n            padding: 20px;\n            background: rgba(99, 102, 241, 0.05);\n            border-left: 4px solid #6366f1;\n            border-radius: 8px;\n            margin-bottom: 15px;\n          \"\n        >\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px\">\n            <div style=\"font-size: 16px; font-weight: 600; color: #6366f1\">v1.30</div>\n            <div style=\"font-size: 13px; color: #888\">20251026</div>\n          </div>\n\n          <div style=\"margin-bottom: 15px\">\n            <div style=\"color: #ffc107; font-weight: 600; margin-bottom: 8px\"> </div>\n            <ul class=\"update-list\">\n              <li class=\"update-item\"> MVU Beta meta </li>\n              <li class=\"update-item\"> JSON </li>\n              <li class=\"update-item\"> ABO </li>\n            </ul>\n          </div>\n\n          <div>\n            <div style=\"color: #6366f1; font-weight: 600; margin-bottom: 8px\"> </div>\n            <ul class=\"update-list\">\n              <li class=\"update-item\"> AI  max_tokens  temperature</li>\n              <li class=\"update-item\">MVU Beta </li>\n            </ul>\n          </div>\n        </div>\n\n        <!-- v1.00 -->\n        <div\n          style=\"\n            padding: 20px;\n            background: rgba(99, 102, 241, 0.05);\n            border-left: 4px solid #6366f1;\n            border-radius: 8px;\n          \"\n        >\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px\">\n            <div style=\"font-size: 16px; font-weight: 600; color: #6366f1\">v1.00</div>\n            <div style=\"font-size: 13px; color: #888\">20251020</div>\n          </div>\n\n          <ul class=\"update-list\">\n            <li class=\"update-item\"> </li>\n            <li class=\"update-item\">//</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      style=\"\n        background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);\n        padding: 25px;\n        border-radius: 20px;\n        text-align: center;\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n      \"\n    >\n      <div style=\"color: #888; font-size: 13px; line-height: 1.8\">\n        <p style=\"margin: 0 0 8px 0\">Made with  by mzrodyu</p>\n        <p style=\"margin: 0\"> Vue  Pinia</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive } from 'vue';\n\nconst expandedSections = reactive({\n  usageGuide: true,\n  changelog: true,\n});\n\nconst toggleSection = (section: keyof typeof expandedSections) => {\n  expandedSections[section] = !expandedSections[section];\n};\n</script>\n\n<style scoped>\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.update-list {\n  margin: 5px 0;\n  padding-left: 20px;\n  font-size: 14px;\n}\n\n.update-item {\n  margin-bottom: 8px;\n  line-height: 1.6;\n}\n</style>\n","<template>\n  <div class=\"tools-tab\" style=\"padding: 25px !important; background: #1a1a1a !important\">\n    <!--  -->\n    <div class=\"tool-section\">\n      <div\n        class=\"section-header\"\n        style=\"\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 15px 20px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 16px;\n          margin-bottom: 15px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          cursor: pointer;\n          transition: all 0.3s ease;\n        \"\n        @click=\"toggleExpanded('structure')\"\n        @mouseenter=\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\"\n        @mouseleave=\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\"\n      >\n        <h4\n          style=\"\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n          \"\n        >\n          <i class=\"fa-solid fa-database\" style=\"color: #4a9eff; font-size: 18px\"></i>\n          [InitVar] \n        </h4>\n        <i\n          :class=\"expanded.structure ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\"\n          style=\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\"\n        ></i>\n      </div>\n\n      <div v-if=\"expanded.structure\" class=\"tool-content\">\n        <div class=\"tool-instructions\" style=\"margin-bottom: 15px\">\n          <p style=\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\">\n            <i class=\"fa-solid fa-info-circle\" style=\"margin-right: 6px; color: #17a2b8\"></i>\n             MVU Beta  <strong style=\"color: #4a9eff\">[InitVar]</strong> \n          </p>\n          <p\n            style=\"\n              margin: 0;\n              color: #ffa500;\n              font-size: 11px;\n              background: #1a1a1a;\n              padding: 6px;\n              border-radius: 4px;\n              border-left: 3px solid #ffa500;\n            \"\n          >\n             InitVar JSON <strong> \"stat_data\" </strong>\n          </p>\n        </div>\n\n        <!-- AI -->\n        <div\n          style=\"\n            background: linear-gradient(135deg, rgba(102, 126, 234, 0.08), rgba(118, 75, 162, 0.08));\n            border: 1px solid rgba(102, 126, 234, 0.3);\n            border-radius: 8px;\n            padding: 15px;\n            margin-bottom: 20px;\n          \"\n        >\n          <h4 style=\"color: #667eea; font-size: 14px; margin: 0 0 12px 0; display: flex; align-items: center; gap: 8px\">\n            <i class=\"fa-solid fa-wand-magic-sparkles\"></i>\n            AI \n          </h4>\n\n          <div class=\"form-group\" style=\"margin: 0 0 12px 0\">\n            <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n              \n            </label>\n            <textarea\n              v-model=\"aiStructurePrompt\"\n              placeholder=\"1-30100\"\n              rows=\"4\"\n              style=\"\n                width: 100%;\n                padding: 12px;\n                background: #2a2a2a;\n                border: 1px solid #3a3a3a;\n                border-radius: 6px;\n                color: #e0e0e0;\n                font-size: 13px;\n                resize: vertical;\n                line-height: 1.5;\n                transition: all 0.2s ease;\n              \"\n              @focus=\"(e: any) => (e.target.style.borderColor = '#667eea')\"\n              @blur=\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\"\n            ></textarea>\n          </div>\n\n          <button\n            class=\"ai-generate-btn\"\n            :disabled=\"isGeneratingAI || !aiStructurePrompt.trim()\"\n            style=\"\n              padding: 12px 24px;\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n              border: none;\n              border-radius: 8px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\n              position: relative;\n              overflow: hidden;\n            \"\n            :style=\"{\n              opacity: isGeneratingAI || !aiStructurePrompt.trim() ? 0.6 : 1,\n              cursor: isGeneratingAI || !aiStructurePrompt.trim() ? 'not-allowed' : 'pointer',\n            }\"\n            @click=\"handleAIGenerateStructure\"\n            @mouseenter=\"\n              (e: any) => {\n                if (!isGeneratingAI && aiStructurePrompt.trim()) {\n                  e.currentTarget.style.transform = 'translateY(-2px)';\n                  e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\n                }\n              }\n            \"\n            @mouseleave=\"\n              (e: any) => {\n                e.currentTarget.style.transform = 'translateY(0)';\n                e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\n              }\n            \"\n          >\n            <div\n              style=\"\n                position: absolute;\n                top: 0;\n                left: -100%;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                transition: left 0.5s;\n              \"\n              class=\"shimmer-effect\"\n            ></div>\n            <i\n              class=\"fa-solid fa-wand-magic-sparkles\"\n              style=\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\"\n            ></i>\n            <span style=\"position: relative; z-index: 1\">{{ isGeneratingAI ? 'AI ...' : 'AI ' }}</span>\n          </button>\n\n          <!-- AI  -->\n          <button\n            v-if=\"generatedStructure && originalStructurePrompt\"\n            style=\"\n              margin-left: 12px;\n              padding: 10px 20px;\n              background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3));\n              border: 1px solid rgba(251, 191, 36, 0.4);\n              border-radius: 8px;\n              color: #fbbf24;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 2px 8px rgba(251, 191, 36, 0.2);\n            \"\n            @click=\"showStructureModifyDialog = true\"\n            @mouseenter=\"\n              (e: any) => {\n                e.currentTarget.style.background =\n                  'linear-gradient(135deg, rgba(251, 191, 36, 0.35), rgba(245, 158, 11, 0.45))';\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.6)';\n                e.currentTarget.style.transform = 'translateY(-2px)';\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.35)';\n              }\n            \"\n            @mouseleave=\"\n              (e: any) => {\n                e.currentTarget.style.background =\n                  'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))';\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.4)';\n                e.currentTarget.style.transform = 'translateY(0)';\n                e.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.2)';\n              }\n            \"\n          >\n            <i class=\"fa-solid fa-edit\" style=\"margin-right: 6px\"></i>\n            AI \n          </button>\n\n          <p style=\"color: #888; font-size: 11px; margin: 8px 0 0 0\">\n             AI  $meta\n          </p>\n        </div>\n\n        <div style=\"text-align: center; margin: 20px 0; position: relative\">\n          <span\n            style=\"background: #1a1a1a; padding: 0 12px; color: #666; font-size: 12px; position: relative; z-index: 1\"\n            ></span\n          >\n          <div\n            style=\"\n              position: absolute;\n              top: 50%;\n              left: 0;\n              right: 0;\n              height: 1px;\n              background: rgba(255, 255, 255, 0.1);\n              z-index: 0;\n            \"\n          ></div>\n        </div>\n\n        <div class=\"form-group\" style=\"margin: 15px 0\">\n          <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n            \n          </label>\n          <input\n            v-model=\"varName\"\n            type=\"text\"\n            placeholder=\"\"\n            style=\"\n              width: 100%;\n              padding: 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: all 0.2s ease;\n            \"\n            @focus=\"(e: any) => (e.target.style.borderColor = '#4a9eff')\"\n            @blur=\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\"\n          />\n        </div>\n\n        <div class=\"form-group\" style=\"margin: 15px 0\">\n          <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n            ::\n          </label>\n          <textarea\n            v-model=\"subFields\"\n            placeholder=\"&#10;:number:[-30,100]&#10;:string:&#10;:array:\"\n            rows=\"5\"\n            style=\"\n              width: 100%;\n              height: 120px;\n              padding: 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              resize: vertical;\n              font-family: 'Courier New', monospace;\n              line-height: 1.5;\n              transition: all 0.2s ease;\n            \"\n            @focus=\"(e: any) => (e.target.style.borderColor = '#4a9eff')\"\n            @blur=\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\"\n          ></textarea>\n          <p style=\"color: #888; font-size: 11px; margin: 6px 0 0 0\"> numberstringarrayobject</p>\n        </div>\n\n        <button\n          class=\"generate-btn\"\n          style=\"\n            padding: 12px 24px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            border: none;\n            border-radius: 8px;\n            color: white;\n            font-size: 13px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\n            position: relative;\n            overflow: hidden;\n          \"\n          @click=\"generateStructure\"\n          @mouseenter=\"\n            (e: any) => {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n              e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\n            }\n          \"\n          @mouseleave=\"\n            (e: any) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\n            }\n          \"\n        >\n          <div\n            style=\"\n              position: absolute;\n              top: 0;\n              left: -100%;\n              width: 100%;\n              height: 100%;\n              background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n              transition: left 0.5s;\n            \"\n            class=\"shimmer-effect\"\n          ></div>\n          <i class=\"fa-solid fa-magic\" style=\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\"></i>\n          <span style=\"position: relative; z-index: 1\"> [InitVar] </span>\n        </button>\n\n        <div v-if=\"generatedStructure\" class=\"output-section\">\n          <h4 style=\"color: #4a9eff; font-size: 14px; margin-bottom: 10px\"> [InitVar] </h4>\n          <div class=\"code-output\">\n            <pre>{{ generatedStructure }}</pre>\n            <button class=\"copy-btn-abs\" @click=\"copyGenerated\">\n              <i class=\"fa-solid fa-copy\"></i>\n            </button>\n          </div>\n\n          <!--  -->\n          <div\n            style=\"\n              margin-top: 15px;\n              padding: 12px;\n              background: rgba(74, 158, 255, 0.05);\n              border: 1px solid rgba(74, 158, 255, 0.2);\n              border-radius: 8px;\n            \"\n          >\n            <p style=\"margin: 0 0 10px 0; color: #4a9eff; font-size: 12px; font-weight: 600\">\n              <i class=\"fa-solid fa-link\"></i> \n            </p>\n            <div style=\"display: flex; gap: 10px; flex-wrap: wrap\">\n              <button\n                style=\"\n                  flex: 1;\n                  min-width: 140px;\n                  padding: 8px 16px;\n                  background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.3));\n                  color: #10b981;\n                  border: 1px solid rgba(16, 185, 129, 0.4);\n                  border-radius: 6px;\n                  font-size: 12px;\n                  cursor: pointer;\n                  transition: all 0.2s;\n                \"\n                @click=\"autoGeneratePrompt\"\n                @mouseenter=\"\n                  (e: any) => {\n                    e.currentTarget.style.transform = 'translateY(-1px)';\n                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.3)';\n                  }\n                \"\n                @mouseleave=\"\n                  (e: any) => {\n                    e.currentTarget.style.transform = 'translateY(0)';\n                    e.currentTarget.style.boxShadow = 'none';\n                  }\n                \"\n              >\n                <i class=\"fa-solid fa-file-alt\"></i>  COT \n              </button>\n              <button\n                style=\"\n                  flex: 1;\n                  min-width: 140px;\n                  padding: 8px 16px;\n                  background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(217, 119, 6, 0.3));\n                  color: #f59e0b;\n                  border: 1px solid rgba(245, 158, 11, 0.4);\n                  border-radius: 6px;\n                  font-size: 12px;\n                  cursor: pointer;\n                  transition: all 0.2s;\n                \"\n                @click=\"exportWorldbook\"\n                @mouseenter=\"\n                  (e: any) => {\n                    e.currentTarget.style.transform = 'translateY(-1px)';\n                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.3)';\n                  }\n                \"\n                @mouseleave=\"\n                  (e: any) => {\n                    e.currentTarget.style.transform = 'translateY(0)';\n                    e.currentTarget.style.boxShadow = 'none';\n                  }\n                \"\n              >\n                <i class=\"fa-solid fa-book\"></i>  JSON\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- COT  -->\n    <div class=\"tool-section\">\n      <div\n        class=\"section-header\"\n        style=\"\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 15px 20px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 16px;\n          margin-bottom: 15px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          cursor: pointer;\n          transition: all 0.3s ease;\n        \"\n        @click=\"toggleExpanded('prompt')\"\n        @mouseenter=\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\"\n        @mouseleave=\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\"\n      >\n        <h4\n          style=\"\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n          \"\n        >\n          <i class=\"fa-solid fa-file-code\" style=\"color: #fbbf24; font-size: 18px\"></i>\n          COT 6 \n        </h4>\n        <i\n          :class=\"expanded.prompt ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\"\n          style=\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\"\n        ></i>\n      </div>\n\n      <div v-if=\"expanded.prompt\" class=\"tool-content\">\n        <div class=\"tool-instructions\" style=\"margin-bottom: 15px\">\n          <p style=\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\">\n            <i class=\"fa-solid fa-info-circle\" style=\"margin-right: 6px; color: #17a2b8\"></i>\n             MVU Beta  <strong style=\"color: #fbbf24\">COT</strong> 6 \n          </p>\n        </div>\n\n        <!-- AI -->\n        <div\n          style=\"\n            background: linear-gradient(135deg, rgba(251, 191, 36, 0.08), rgba(245, 158, 11, 0.08));\n            border: 1px solid rgba(251, 191, 36, 0.3);\n            border-radius: 8px;\n            padding: 15px;\n            margin-bottom: 20px;\n          \"\n        >\n          <h4 style=\"color: #fbbf24; font-size: 14px; margin: 0 0 12px 0; display: flex; align-items: center; gap: 8px\">\n            <i class=\"fa-solid fa-wand-magic-sparkles\"></i>\n            AI \n          </h4>\n\n          <div class=\"form-group\" style=\"margin: 0 0 12px 0\">\n            <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n              \n            </label>\n            <textarea\n              v-model=\"aiPromptDescription\"\n              placeholder=\" AI \"\n              rows=\"4\"\n              style=\"\n                width: 100%;\n                padding: 12px;\n                background: #2a2a2a;\n                border: 1px solid #3a3a3a;\n                border-radius: 6px;\n                color: #e0e0e0;\n                font-size: 13px;\n                resize: vertical;\n                line-height: 1.5;\n                transition: all 0.2s ease;\n              \"\n              @focus=\"(e: any) => (e.target.style.borderColor = '#fbbf24')\"\n              @blur=\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\"\n            ></textarea>\n          </div>\n\n          <button\n            class=\"ai-generate-btn\"\n            :disabled=\"isGeneratingPrompt || !aiPromptDescription.trim()\"\n            style=\"\n              padding: 12px 24px;\n              background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);\n              border: none;\n              border-radius: 8px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 3px 12px rgba(251, 191, 36, 0.3);\n              position: relative;\n              overflow: hidden;\n            \"\n            :style=\"{\n              opacity: isGeneratingPrompt || !aiPromptDescription.trim() ? 0.6 : 1,\n              cursor: isGeneratingPrompt || !aiPromptDescription.trim() ? 'not-allowed' : 'pointer',\n            }\"\n            @click=\"handleAIGeneratePrompt\"\n            @mouseenter=\"\n              (e: any) => {\n                if (!isGeneratingPrompt && aiPromptDescription.trim()) {\n                  e.currentTarget.style.transform = 'translateY(-2px)';\n                  e.currentTarget.style.boxShadow = '0 6px 20px rgba(251, 191, 36, 0.4)';\n                }\n              }\n            \"\n            @mouseleave=\"\n              (e: any) => {\n                e.currentTarget.style.transform = 'translateY(0)';\n                e.currentTarget.style.boxShadow = '0 3px 12px rgba(251, 191, 36, 0.3)';\n              }\n            \"\n          >\n            <div\n              style=\"\n                position: absolute;\n                top: 0;\n                left: -100%;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                transition: left 0.5s;\n              \"\n              class=\"shimmer-effect\"\n            ></div>\n            <i\n              class=\"fa-solid fa-wand-magic-sparkles\"\n              style=\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\"\n            ></i>\n            <span style=\"position: relative; z-index: 1\">{{\n              isGeneratingPrompt ? 'AI ...' : 'AI '\n            }}</span>\n          </button>\n\n          <!-- AI  -->\n          <button\n            v-if=\"generatedPrompt && originalPromptDescription\"\n            style=\"\n              margin-left: 12px;\n              padding: 10px 20px;\n              background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3));\n              border: 1px solid rgba(251, 191, 36, 0.4);\n              border-radius: 8px;\n              color: #fbbf24;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 2px 8px rgba(251, 191, 36, 0.2);\n            \"\n            @click=\"showPromptModifyDialog = true\"\n            @mouseenter=\"\n              (e: any) => {\n                e.currentTarget.style.background =\n                  'linear-gradient(135deg, rgba(251, 191, 36, 0.35), rgba(245, 158, 11, 0.45))';\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.6)';\n                e.currentTarget.style.transform = 'translateY(-2px)';\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.35)';\n              }\n            \"\n            @mouseleave=\"\n              (e: any) => {\n                e.currentTarget.style.background =\n                  'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))';\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.4)';\n                e.currentTarget.style.transform = 'translateY(0)';\n                e.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.2)';\n              }\n            \"\n          >\n            <i class=\"fa-solid fa-edit\" style=\"margin-right: 6px\"></i>\n            AI \n          </button>\n\n          <p style=\"color: #888; font-size: 11px; margin: 8px 0 0 0\">\n             AI  6  COT \n          </p>\n        </div>\n\n        <div style=\"text-align: center; margin: 20px 0; position: relative\">\n          <span\n            style=\"background: #1a1a1a; padding: 0 12px; color: #666; font-size: 12px; position: relative; z-index: 1\"\n            ></span\n          >\n          <div\n            style=\"\n              position: absolute;\n              top: 50%;\n              left: 0;\n              right: 0;\n              height: 1px;\n              background: rgba(255, 255, 255, 0.1);\n              z-index: 0;\n            \"\n          ></div>\n        </div>\n\n        <div v-if=\"generatedStructure\" class=\"form-group\" style=\"margin: 15px 0\">\n          <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n             STEP 3\n          </label>\n          <textarea\n            v-model=\"variableCategories\"\n            placeholder=\"&#10; - 3 fields&#10; - 2 fields&#10; - 1 field\"\n            rows=\"4\"\n            style=\"\n              width: 100%;\n              padding: 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              resize: vertical;\n              font-family: 'Courier New', monospace;\n              line-height: 1.5;\n              transition: all 0.2s ease;\n            \"\n            @focus=\"(e: any) => (e.target.style.borderColor = '#fbbf24')\"\n            @blur=\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\"\n          ></textarea>\n          <p style=\"color: #888; font-size: 11px; margin: 6px 0 0 0\"> AI  STEP 3 </p>\n        </div>\n\n        <button\n          class=\"generate-btn\"\n          style=\"\n            margin-top: 10px;\n            padding: 12px 24px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            border: none;\n            border-radius: 8px;\n            color: white;\n            font-size: 13px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\n            position: relative;\n            overflow: hidden;\n          \"\n          @click=\"generatePrompt\"\n          @mouseenter=\"\n            (e: any) => {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n              e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\n            }\n          \"\n          @mouseleave=\"\n            (e: any) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\n            }\n          \"\n        >\n          <div\n            style=\"\n              position: absolute;\n              top: 0;\n              left: -100%;\n              width: 100%;\n              height: 100%;\n              background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n              transition: left 0.5s;\n            \"\n            class=\"shimmer-effect\"\n          ></div>\n          <i class=\"fa-solid fa-magic\" style=\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\"></i>\n          <span style=\"position: relative; z-index: 1\"> COT </span>\n        </button>\n\n        <div v-if=\"generatedPrompt\" class=\"output-section\">\n          <h4 style=\"color: #fbbf24; font-size: 14px; margin-bottom: 10px\"> COT </h4>\n          <div class=\"code-output\">\n            <pre>{{ generatedPrompt }}</pre>\n            <button class=\"copy-btn-abs\" @click=\"copyPrompt\">\n              <i class=\"fa-solid fa-copy\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- AI  -  -->\n  <AIModifyDialog\n    :show=\"showStructureModifyDialog\"\n    :is-modifying=\"isModifyingStructure\"\n    title=\"AI  [InitVar] \"\n    description=\" AI  MVU \"\n    :examples=\"[\n      ' number',\n      '',\n      '',\n      '',\n    ]\"\n    @close=\"showStructureModifyDialog = false\"\n    @confirm=\"modifyStructureWithAI\"\n  />\n\n  <!-- AI  -  -->\n  <AIModifyDialog\n    :show=\"showPromptModifyDialog\"\n    :is-modifying=\"isModifyingPrompt\"\n    title=\"AI  COT \"\n    description=\" AI \"\n    :examples=\"[\n      ' STEP 2 ',\n      '',\n      '',\n      ' STEP 3 ',\n    ]\"\n    @close=\"showPromptModifyDialog = false\"\n    @confirm=\"modifyPromptWithAI\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref, watch } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { getScriptIdSafe } from '../utils';\nimport AIModifyDialog from './AIModifyDialog.vue';\n\nconst settingsStore = useSettingsStore();\nconst { settings } = storeToRefs(settingsStore);\n\nconst expanded = ref({\n  structure: true,\n  prompt: false,\n});\n\nfunction toggleExpanded(key: keyof typeof expanded.value) {\n  expanded.value[key] = !expanded.value[key];\n}\n\n// AI\nconst aiStructurePrompt = ref('');\nconst isGeneratingAI = ref(false);\nconst aiPromptDescription = ref('');\nconst isGeneratingPrompt = ref(false);\n\n// \nconst originalStructurePrompt = ref('');\nconst originalPromptDescription = ref('');\n\n// \nconst showStructureModifyDialog = ref(false);\nconst isModifyingStructure = ref(false);\nconst showPromptModifyDialog = ref(false);\nconst isModifyingPrompt = ref(false);\n\n// \nconst varName = ref('');\nconst subFields = ref('');\nconst generatedStructure = ref('');\nconst variableCategories = ref('');\nconst generatedPrompt = ref('');\n\nfunction copyToClipboard(text: string) {\n  navigator.clipboard.writeText(text).then(() => {\n    window.toastr.success('');\n  });\n}\n\nfunction generateStructure() {\n  if (!varName.value.trim()) {\n    window.toastr.error('');\n    return;\n  }\n\n  const result: any = {\n    $meta: {\n      extensible: false,\n      strictSet: true,\n    },\n  };\n\n  result[varName.value] = parseSubFields();\n  generatedStructure.value = JSON.stringify(result, null, 2);\n}\n\nfunction parseSubFields(): any {\n  const lines = subFields.value.split('\\n').filter(l => l.trim());\n  const obj: any = {};\n\n  lines.forEach(line => {\n    const parts = line.split(':').map(s => s.trim());\n    const name = parts[0];\n    const type = parts[1] || 'string';\n    const desc = parts[2] || '...';\n\n    if (!name) return;\n\n    if (type === 'number') {\n      obj[name] = [0, desc];\n    } else if (type === 'string') {\n      obj[name] = ['', desc];\n    } else if (type === 'array') {\n      obj[name] = [[], desc];\n    } else if (type === 'object') {\n      obj[name] = [{}, desc];\n    } else {\n      obj[name] = [null, desc];\n    }\n  });\n\n  return obj;\n}\n\nfunction copyGenerated() {\n  copyToClipboard(generatedStructure.value);\n}\n\n// AI\nasync function handleAIGenerateStructure() {\n  if (!aiStructurePrompt.value.trim()) {\n    window.toastr.error('');\n    return;\n  }\n\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\n    window.toastr.error(' API  API Key');\n    return;\n  }\n\n  // \n  originalStructurePrompt.value = aiStructurePrompt.value;\n\n  isGeneratingAI.value = true;\n\n  try {\n    const systemPrompt = ` MVU Beta  [InitVar] \n\n# \n\n##  \n1. ** \"stat_data\" **\n2. ****: \\`[, \"\"]\\`\n3. **$meta **:  JSON \n4. ****: \n5. ****: 15-20\n\n## JSON \n\\`\\`\\`json\n{\n  \"$meta\": {\n    \"extensible\": false,\n    \"strictSet\": true\n  },\n  \"\": {\n    \"1\": [, \"\"],\n    \"2\": [, \"\"]\n  }\n}\n\\`\\`\\`\n\n---\n\n# \n\n## 1 number\n****\n- \n- \n- \n\n****: \\`[, \"\"]\\`\n****:\n- \\`\"\": [0, \"-30100\"]\\`\n- \\`\"\": [1, \"\"]\\`\n- \\`\"\": [100, \"\"]\\`\n\n## 2 string\n****\n- \n-  \"10:00\"\n-  \"\"/\"\"\n\n****: \\`[\"\", \"\"]\\`\n****:\n- \\`\"\": [\"\", \"\"]\\`\n- \\`\"\": [\"09:00\", \"\"]\\`\n- \\`\"\": [\"\", \"user\"]\\`\n\n## 3 array\n****\n- \n- /\n- \n\n****: \\`[[], \"\"]\\`  \\`[[], \"\"]\\`\n****:\n- \\`\"\": [[], \"\"]\\`\n- \\`\"\": [[\"\"], \"\"]\\`\n- \\`\"\": [[], \"\"]\\`\n\n## 4 object\n****\n- \n- \n- \n\n****: \\`[{}, \"\"]\\`  \\`[{\"\": \"\"}, \"\"]\\`\n****:\n- \\`\"\": [{\"\": 3}, \"\"]\\`\n- \\`\"\": [{}, \"NPC\"]\\`\n\n---\n\n# \n\n##  \n- ****: \"\"\"\"\"\"\n- ****: \n- ****: /\n\n##  \n- : \"1\"\"A\"\n- : \"\"\n- : \"favor_value\"\n\n---\n\n# \n\n##  15-20\n- \"-30100\"\n- \"HH:MM\"\n- \"\"\n- \"\"\n\n##  \n- : \"\"\n- : \"...\"\n- : \"...\"\"\"\n\n---\n\n# \n\n## 1\n\\`\\`\\`json\n{\n  \"$meta\": {\n    \"extensible\": false,\n    \"strictSet\": true\n  },\n  \"\": {\n    \"\": [\"\", \"\"],\n    \"\": [1, \"\"],\n    \"\": [0, \"user-30100\"],\n    \"\": [\"\", \"/\"],\n    \"\": [[], \"\"],\n    \"\": [{}, \"\"]\n  }\n}\n\\`\\`\\`\n\n## 2\n\\`\\`\\`json\n{\n  \"$meta\": {\n    \"extensible\": false,\n    \"strictSet\": true\n  },\n  \"\": {\n    \"\": [\"09:00\", \"\"],\n    \"\": [\"202411\", \"\"],\n    \"\": [\"\", \"\"],\n    \"\": [\"\", \"\"],\n    \"\": [[], \"\"]\n  }\n}\n\\`\\`\\`\n\n---\n\n# \n\n1. ** JSON**\n2. ****\n3. ****\n4. ****\n5. ****15-20\n\n [InitVar] JSON`;\n\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: `${aiStructurePrompt.value}\\n\\n [InitVar] JSON` },\n        ],\n        temperature: settings.value.temperature || 0.7,\n        max_tokens: settings.value.max_tokens || 4000,\n      }),\n    });\n\n    // \n    const responseText = await response.text();\n\n    if (!response.ok) {\n      // \n      let errorMessage = `API : ${response.status}`;\n      try {\n        const errorData = JSON.parse(responseText);\n        if (errorData.error) {\n          errorMessage = `${errorMessage} - ${errorData.error.message || JSON.stringify(errorData.error)}`;\n        } else if (errorData.message) {\n          errorMessage = `${errorMessage} - ${errorData.message}`;\n        } else {\n          errorMessage = `${errorMessage} - ${JSON.stringify(errorData)}`;\n        }\n      } catch (e) {\n        errorMessage = `${errorMessage} - ${responseText.slice(0, 200)}`;\n      }\n      console.error('API :', errorMessage);\n      console.error(' URL:', settings.value.api_endpoint);\n      console.error(\n        ':',\n        JSON.stringify(\n          {\n            model: settings.value.model,\n            messages: [\n              { role: 'system', content: systemPrompt.substring(0, 100) + '...' },\n              { role: 'user', content: `${aiStructurePrompt.value.substring(0, 100)}...` },\n            ],\n            temperature: settings.value.temperature || 0.7,\n            max_tokens: settings.value.max_tokens || 4000,\n          },\n          null,\n          2,\n        ),\n      );\n      throw new Error(errorMessage);\n    }\n\n    // \n    const data = JSON.parse(responseText);\n    // \n    let result = '';\n    if (data.choices && data.choices[0] && data.choices[0].message) {\n      result = data.choices[0].message.content || '';\n    } else if (data.data && data.data.choices && data.data.choices[0]) {\n      //  API  data.data.choices \n      result = data.data.choices[0].message?.content || '';\n    } else if (data.content) {\n      result = typeof data.content === 'string' ? data.content : JSON.stringify(data.content);\n    }\n\n    console.log('AI :', result);\n\n    //  JSON\n    let jsonText = result;\n\n    // \n    jsonText = jsonText.replace(/```json\\s*/gi, '').replace(/```\\s*$/g, '');\n\n    //  JSON \n    const jsonMatch = jsonText.match(/\\{[\\s\\S]*$/);\n    if (!jsonMatch) {\n      throw new Error(' JSON ');\n    }\n\n    jsonText = jsonMatch[0];\n\n    //  JSON\n    let bracketCount = 0;\n    let inString = false;\n    let escapeNext = false;\n    let lastValidPos = jsonText.length;\n\n    for (let i = 0; i < jsonText.length; i++) {\n      const char = jsonText[i];\n\n      if (escapeNext) {\n        escapeNext = false;\n        continue;\n      }\n\n      if (char === '\\\\') {\n        escapeNext = true;\n        continue;\n      }\n\n      if (char === '\"' && !inString) {\n        inString = true;\n        continue;\n      } else if (char === '\"' && inString) {\n        inString = false;\n        continue;\n      }\n\n      if (inString) continue;\n\n      if (char === '{') bracketCount++;\n      else if (char === '}') bracketCount--;\n\n      if (bracketCount === 0) {\n        lastValidPos = i + 1;\n        break;\n      }\n    }\n\n    jsonText = jsonText.substring(0, lastValidPos);\n\n    // \n    if (bracketCount > 0) {\n      console.warn(`JSON  ${bracketCount} ...`);\n      jsonText += '}'.repeat(bracketCount);\n    }\n\n    //  JSON\n    // \n    jsonText = jsonText.replace(/,(\\s*[}\\]])/g, '$1');\n    // \n    jsonText = jsonText.replace(/\\/\\/[^\\n]*/g, '');\n    jsonText = jsonText.replace(/\\/\\*[\\s\\S]*?\\*\\//g, '');\n\n    let parsed;\n    try {\n      parsed = JSON.parse(jsonText);\n    } catch (e) {\n      console.error('JSON :', jsonText);\n      throw new Error(`JSON : ${(e as Error).message} AI  JSON`);\n    }\n    const varNameParsed = Object.keys(parsed).find(k => k !== '$meta') || 'myVar';\n    varName.value = varNameParsed;\n\n    const varData = parsed[varNameParsed] || {};\n    const fields: string[] = [];\n\n    for (const key in varData) {\n      if (key === '$meta') continue;\n      const value = varData[key];\n      if (Array.isArray(value) && value.length === 2) {\n        const val = value[0];\n        const type =\n          typeof val === 'number'\n            ? 'number'\n            : typeof val === 'string'\n              ? 'string'\n              : Array.isArray(val)\n                ? 'array'\n                : 'object';\n        const desc = value[1] || '...';\n        fields.push(`${key}:${type}:${desc}`);\n      }\n    }\n\n    subFields.value = fields.join('\\n');\n    generatedStructure.value = JSON.stringify(parsed, null, 2);\n    window.toastr.success('AI ');\n  } catch (error: any) {\n    console.error('AI:', error);\n    window.toastr.error(`AI: ${error.message}`);\n  } finally {\n    isGeneratingAI.value = false;\n  }\n}\n\nfunction autoGeneratePrompt() {\n  if (!generatedStructure.value) {\n    window.toastr.error(' [InitVar] ');\n    return;\n  }\n\n  try {\n    const structure = JSON.parse(generatedStructure.value);\n    const varNameParsed = Object.keys(structure).find(k => k !== '$meta') || 'myVar';\n\n    const varData = structure[varNameParsed] || {};\n    let fieldCount = 0;\n\n    for (const key in varData) {\n      if (key === '$meta') continue;\n      fieldCount++;\n    }\n\n    variableCategories.value = `${varNameParsed} - ${fieldCount} fields`;\n    expanded.value.prompt = true;\n    generatePrompt();\n    window.toastr.success(' COT ');\n\n    setTimeout(() => {\n      const promptSection = document.querySelector('.tool-section:nth-child(2)');\n      promptSection?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }, 100);\n  } catch (error: any) {\n    console.error(':', error);\n    window.toastr.error('');\n  }\n}\n\nfunction generatePrompt() {\n  const categories = variableCategories.value.trim() || ' - X fields';\n\n  const promptTemplate = `<%_ setLocalVar('initialized_lorebooks.-YourLorebook[0]', true); _%>\n\n\n\n\n\n<status_current_variables>\n{{get_message_variable::stat_data}}\n</status_current_variables>\n\n\n\nrule:\n  description:\n    - Output update analysis at the end of response\n    - Variable updates are omitted in context but you must still add them\n    - **CRITICAL**: For MVU format [value, description], ALWAYS use [0] suffix to access the value part\n    - 4 commands available: \\\\\\`_.set\\\\\\` (2-3 args), \\\\\\`_.insert\\\\\\` (2-3 args), \\\\\\`_.remove\\\\\\` (1-2 args), \\\\\\`_.add\\\\\\` (2 args)\n    - **RECOMMENDED**: Use \\\\\\`_.insert\\\\\\` instead of \\\\\\`_.assign\\\\\\`\n    - strictSet enabled: [0] suffix is mandatory for all value access\n\n  command_usage:\n    - \\\\\\`_.set('path[0]', old?, new);//reason\\\\\\` - Replace value\n    - \\\\\\`_.add('path[0]', delta);//reason\\\\\\` - Add/subtract numbers only\n    - \\\\\\`_.insert('path[0]', value);//reason\\\\\\` - Add to array end\n    - \\\\\\`_.insert('path[0]', index, value);//reason\\\\\\` - Insert to array at position\n    - \\\\\\`_.insert('path', key, value);//reason\\\\\\` - Add key-value to object\n    - \\\\\\`_.remove('path[0]', value);//reason\\\\\\` - Remove from array/object\n\n  analysis:\n    You MUST follow this Chain-of-Thought (COT) analysis process step by step:\n\n    **STEP 1: Scene Analysis (50 words max, IN ENGLISH)**\n    - Identify current scene/stage/phase\n    - Describe what happened\n    - Determine what changes occurred (time/location/status/progress)\n\n    **STEP 2: Time & Key Status Check**\n    - Extract current time/status from story context\n    - Read key variables from <status_current_variables>\n    - Calculate changes\n    - Decision: What needs to be updated?\n\n    **STEP 3: Systematic Variable Review (check EVERY variable category)**\n    Go through each variable category systematically and mark Y or N:\n\n    ${categories}:\n      - 1[0]: [Y/N] - explain\n      - 2[0]: [Y/N] - explain\n\n    **STEP 4: Command Selection**\n    For each variable marked Y, determine which command to use\n\n    **STEP 5: Analyze Other Variable Systems**\n    - stat_data detailed COT: COMPLETED\n    - Other variable groups? [YES/NO]\n\n    **STEP 6: Final Validation Checklist**\n    - All [0] suffixes present? [YES/NO]\n    - All Y variables have corresponding commands? [YES/NO]\n    - All commands have clear Chinese comments? [YES/NO]\n\n  format: |-\n    <UpdateVariable>\n        <ThinkingProcess>\n            **STEP 1: Scene Analysis**\n            [50 words]\n\n            **STEP 2: Time & Key Status Check**\n            - Current status: ...\n            - Stored variable[0]: ...\n            - Changes: ...\n            - Update decision: ...\n\n            **STEP 3: Variable Review (stat_data)**\n            [List categories with Y/N]\n\n            **STEP 4: Command Selection**\n            [For each Y variable, state which command]\n\n            **STEP 5: Other Systems**\n            - stat_data COT: COMPLETED\n            - Other groups? NO\n\n            **STEP 6: Final Check**\n            - [0] suffixes? YES\n            - All Y have commands? YES\n            - Chinese comments? YES\n        </ThinkingProcess>\n\n        _.set('path[0]', old?, new);//reason\n        _.add('path[0]', delta);//reason\n        _.insert('path[0]', value);//reason\n        _.remove('path[0]', value);//reason\n    </UpdateVariable>\n\n  example: |-\n    <UpdateVariable>\n        <ThinkingProcess>\n            **STEP 1: Scene Analysis**\n            User and character had conversation at library. User helped find a book. Time advanced from 10:00 to 10:30. Character's impression improved.\n\n            **STEP 2: Time & Key Status Check**\n            - Current time: 10:30\n            - Stored [0]: \"10:00\"\n            - Time passed: 30 minutes\n            - Update decision: Time, Favor\n\n            **STEP 3: Variable Review (stat_data)**\n             - 3 fields:\n              - [0]: Y - Time advanced\n              - [0]: N - Same day\n              - [0]: N - Still at library\n\n             - 1 field:\n              - [0]: Y - Positive interaction\n\n            **STEP 4: Command Selection**\n            - : use _.set\n            - : use _.add\n\n            **STEP 5: Other Systems**\n            - stat_data COT: COMPLETED\n            - Other groups? NO\n\n            **STEP 6: Final Check**\n            - [0] suffixes? YES\n            - All Y have commands? YES\n            - Chinese comments? YES\n        </ThinkingProcess>\n\n        _.set('[0]', '10:00', '10:30');//30\n        _.add('.[0]', 3);//\n    </UpdateVariable>\n\n  specific_rules:\n    -  _.set \n    - /\n    -  _.add \n    -  _.insert _.remove\n    - [0][0]\n    -  $__META_EXTENSIBLE__$  _.insert \n    -  _.insert('', , ) `;\n\n  generatedPrompt.value = promptTemplate;\n}\n\nfunction copyPrompt() {\n  copyToClipboard(generatedPrompt.value);\n}\n\n// AI\nasync function handleAIGeneratePrompt() {\n  if (!aiPromptDescription.value.trim()) {\n    window.toastr.error('');\n    return;\n  }\n\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\n    window.toastr.error(' API  API Key');\n    return;\n  }\n\n  // \n  originalPromptDescription.value = aiPromptDescription.value;\n\n  isGeneratingPrompt.value = true;\n\n  try {\n    const systemPrompt = ` MVU Beta COT 6 \n\n# \n\n##  \n1. ****: \\`{{get_message_variable::stat_data}}\\`\n2. **[0] **: MVU \\`[0]\\` \n3. ****:  \\`_.insert\\`  \\`_.assign\\`\n4. **6COT**: \n\n## \n\n\\`\\`\\`ejs\n<%_ setLocalVar('initialized_lorebooks.-YourLorebook[0]', true); _%>\n\n\n\n\n\n<status_current_variables>\n{{get_message_variable::stat_data}}\n</status_current_variables>\n\n\n\nrule:\n  description:\n    - Output update analysis at the end of response\n    - Variable updates are omitted in context but you must still add them\n    - **CRITICAL**: For MVU format [value, description], ALWAYS use [0] suffix to access the value part\n    - 4 commands available: _.set (2-3 args), _.insert (2-3 args), _.remove (1-2 args), _.add (2 args)\n    - **RECOMMENDED**: Use _.insert instead of _.assign\n    - strictSet enabled: [0] suffix is mandatory for all value access\n\n  command_usage:\n    - _.set('path[0]', old?, new);//reason - Replace value\n    - _.add('path[0]', delta);//reason - Add/subtract numbers only\n    - _.insert('path[0]', value);//reason - Add to array end\n    - _.insert('path[0]', index, value);//reason - Insert to array at position\n    - _.insert('path', key, value);//reason - Add key-value to object\n    - _.remove('path[0]', value);//reason - Remove from array/object\n\n  analysis:\n    You MUST follow this Chain-of-Thought (COT) analysis process step by step:\n\n    **STEP 1: Scene Analysis (50 words max, IN ENGLISH)**\n    - Identify current scene/stage/phase\n    - Describe what happened\n    - Determine what changes occurred (time/location/status/progress)\n\n    **STEP 2: Time & Key Status Check**\n    - Extract current time/status from story context\n    - Read key variables from <status_current_variables>\n    - Calculate changes\n    - Decision: What needs to be updated?\n\n    **STEP 3: Systematic Variable Review (check EVERY variable category)**\n    Go through each variable category systematically and mark Y or N:\n\n    []:\n      - 1[0]: [Y/N] - explain\n      - 2[0]: [Y/N] - explain\n\n    **STEP 4: Command Selection**\n    For each variable marked Y, determine which command to use\n\n    **STEP 5: Analyze Other Variable Systems**\n    - stat_data detailed COT: COMPLETED\n    - Other variable groups? [YES/NO]\n\n    **STEP 6: Final Validation Checklist**\n    - All [0] suffixes present? [YES/NO]\n    - All Y variables have corresponding commands? [YES/NO]\n    - All commands have clear Chinese comments? [YES/NO]\n\n  format: |-\n    <UpdateVariable>\n        <ThinkingProcess>\n            **STEP 1: Scene Analysis**\n            [50 words]\n\n            **STEP 2: Time & Key Status Check**\n            - Current status: ...\n            - Stored variable[0]: ...\n            - Changes: ...\n            - Update decision: ...\n\n            **STEP 3: Variable Review (stat_data)**\n            [List categories with Y/N]\n\n            **STEP 4: Command Selection**\n            [For each Y variable, state which command]\n\n            **STEP 5: Other Systems**\n            - stat_data COT: COMPLETED\n            - Other groups? NO\n\n            **STEP 6: Final Check**\n            - [0] suffixes? YES\n            - All Y have commands? YES\n            - Chinese comments? YES\n        </ThinkingProcess>\n\n        _.set('path[0]', old?, new);//reason\n        _.add('path[0]', delta);//reason\n        _.insert('path[0]', value);//reason\n        _.remove('path[0]', value);//reason\n    </UpdateVariable>\n\n  specific_rules:\n    -  _.set \n    - /\n    -  _.add \n    -  _.insert _.remove\n    - [0][0]\n    -  $__META_EXTENSIBLE__$  _.insert \n    -  _.insert('', , ) \n\\`\\`\\`\n\n---\n\n# \n\n1. ****: 6COT\n2. ****: InitVar\n3. ****: \n4. ****: EJS\n\n COT `;\n\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: `${aiPromptDescription.value}\\n\\n COT ` },\n        ],\n        temperature: settings.value.temperature || 0.7,\n        max_tokens: settings.value.max_tokens || 3000,\n      }),\n    });\n\n    // \n    const responseText2 = await response.text();\n\n    if (!response.ok) {\n      // \n      let errorMessage = `API : ${response.status}`;\n      try {\n        const errorData = JSON.parse(responseText2);\n        if (errorData.error) {\n          errorMessage = `${errorMessage} - ${errorData.error.message || JSON.stringify(errorData.error)}`;\n        } else if (errorData.message) {\n          errorMessage = `${errorMessage} - ${errorData.message}`;\n        } else {\n          errorMessage = `${errorMessage} - ${JSON.stringify(errorData)}`;\n        }\n      } catch (e) {\n        errorMessage = `${errorMessage} - ${responseText2.slice(0, 200)}`;\n      }\n      console.error('API :', errorMessage);\n      console.error(' URL:', settings.value.api_endpoint);\n      console.error(\n        ':',\n        JSON.stringify(\n          {\n            model: settings.value.model,\n            messages: [\n              { role: 'system', content: systemPrompt.substring(0, 100) + '...' },\n              { role: 'user', content: `${aiPromptDescription.value.substring(0, 100)}...` },\n            ],\n            temperature: settings.value.temperature || 0.7,\n            max_tokens: settings.value.max_tokens || 3000,\n          },\n          null,\n          2,\n        ),\n      );\n      throw new Error(errorMessage);\n    }\n\n    // \n    const data = JSON.parse(responseText2);\n    // \n    let result = '';\n    if (data.choices && data.choices[0] && data.choices[0].message) {\n      result = data.choices[0].message.content || '';\n    } else if (data.data && data.data.choices && data.data.choices[0]) {\n      //  API  data.data.choices \n      result = data.data.choices[0].message?.content || '';\n    } else if (data.content) {\n      result = typeof data.content === 'string' ? data.content : JSON.stringify(data.content);\n    }\n\n    generatedPrompt.value = result.trim();\n    window.toastr.success('AI ');\n  } catch (error: any) {\n    console.error('AI:', error);\n    window.toastr.error(`AI: ${error.message}`);\n  } finally {\n    isGeneratingPrompt.value = false;\n  }\n}\n\n// AI \nasync function modifyStructureWithAI(modifyInstruction: string) {\n  if (!originalStructurePrompt.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  isModifyingStructure.value = true;\n\n  try {\n    window.toastr.info('AI ...');\n\n    const systemPrompt = ` MVU Beta  [InitVar] JSON\n\n# \n1. ****\n2. ****\n3. ****\\`[, \"\"]\\`$meta\n4. ****\n\n# \n\n## 1 \n\"XX\"\n- number/string/array/object\n- \n- 15-20\n\n## 2 \n\"XX\"\n- JSON\n- \n\n## 3 \n\"\"\n- \n- \n- 15-20\n\n## 4 \n\"\"\n- \n- \n\n## 5 /\n\"\"\"\"\n- \n- \n\n---\n\n JSON`;\n\n    const userPrompt = `# \n${originalStructurePrompt.value}\n\n# \n${modifyInstruction}\n\n [InitVar] JSON`;\n\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: userPrompt },\n        ],\n        temperature: settings.value.temperature || 0.7,\n        max_tokens: settings.value.max_tokens || 4000,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.status}`);\n    }\n\n    const data = await response.json();\n    let result = data.choices?.[0]?.message?.content || '';\n\n    //  JSON\n    let jsonText = result.replace(/```json\\s*/gi, '').replace(/```\\s*$/g, '');\n    const jsonMatch = jsonText.match(/\\{[\\s\\S]*$/);\n    if (jsonMatch) {\n      jsonText = jsonMatch[0];\n    }\n\n    // \n    jsonText = jsonText.replace(/,(\\s*[}\\]])/g, '$1');\n    const parsed = JSON.parse(jsonText);\n\n    const varNameParsed = Object.keys(parsed).find(k => k !== '$meta') || 'myVar';\n    varName.value = varNameParsed;\n\n    const varData = parsed[varNameParsed] || {};\n    const fields: string[] = [];\n\n    for (const key in varData) {\n      if (key === '$meta') continue;\n      const value = varData[key];\n      if (Array.isArray(value) && value.length === 2) {\n        const val = value[0];\n        const type =\n          typeof val === 'number'\n            ? 'number'\n            : typeof val === 'string'\n              ? 'string'\n              : Array.isArray(val)\n                ? 'array'\n                : 'object';\n        const desc = value[1] || '...';\n        fields.push(`${key}:${type}:${desc}`);\n      }\n    }\n\n    subFields.value = fields.join('\\n');\n    generatedStructure.value = JSON.stringify(parsed, null, 2);\n\n    // \n    originalStructurePrompt.value += `\\n\\n${modifyInstruction}`;\n\n    window.toastr.success(' AI ');\n    showStructureModifyDialog.value = false;\n  } catch (error: any) {\n    console.error('AI :', error);\n    window.toastr.error('AI : ' + error.message);\n  } finally {\n    isModifyingStructure.value = false;\n  }\n}\n\n// AI \nasync function modifyPromptWithAI(modifyInstruction: string) {\n  if (!originalPromptDescription.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  isModifyingPrompt.value = true;\n\n  try {\n    window.toastr.info('AI ...');\n\n    const systemPrompt = ` MVU Beta COT 6 \n\n# \n1. ****\n2. ****\n3. ****EJS\n4. **6**6COT\n\n# \n\n## 1 STEP\n\"STEP X\"\n- STEP\n- STEP\n- \n\n## 2 /\n\"/XX\"\n- specific_rules\n- \n\n## 3 \n\"\"\n- STEP 3\n- \n\n## 4 \n\"XX\"\n- STEP\n- specific_rules\n\n---\n\n\n- \\`{{get_message_variable::stat_data}}\\`\n- [0] \n- 6COT\n- \n\n EJS `;\n\n    const userPrompt = `# \n${originalPromptDescription.value}\n\n# \n${modifyInstruction}\n\n COT `;\n\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: userPrompt },\n        ],\n        temperature: settings.value.temperature || 0.7,\n        max_tokens: settings.value.max_tokens || 3000,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.status}`);\n    }\n\n    const data = await response.json();\n    let result = data.choices?.[0]?.message?.content || '';\n\n    generatedPrompt.value = result.trim();\n\n    // \n    originalPromptDescription.value += `\\n\\n${modifyInstruction}`;\n\n    window.toastr.success(' AI ');\n    showPromptModifyDialog.value = false;\n  } catch (error: any) {\n    console.error('AI :', error);\n    window.toastr.error('AI : ' + error.message);\n  } finally {\n    isModifyingPrompt.value = false;\n  }\n}\n\nfunction exportWorldbook() {\n  if (!generatedStructure.value) {\n    window.toastr.error(' [InitVar] ');\n    return;\n  }\n\n  if (!generatedPrompt.value) {\n    autoGeneratePrompt();\n  }\n\n  setTimeout(() => {\n    exportAsWorldbook();\n  }, 100);\n}\n\nfunction exportAsWorldbook() {\n  if (!generatedStructure.value || !generatedPrompt.value) {\n    window.toastr.error(' [InitVar]  COT ');\n    return;\n  }\n\n  let varNameParsed = 'myVar';\n  try {\n    const structure = JSON.parse(generatedStructure.value);\n    varNameParsed = Object.keys(structure).find(k => k !== '$meta') || 'myVar';\n  } catch (e) {\n    console.error(':', e);\n  }\n\n  const worldbookEntries = [\n    {\n      uid: generateUID(),\n      key: [],\n      keysecondary: [],\n      comment: '[InitVar]',\n      content: generatedStructure.value,\n      constant: false,\n      vectorized: false,\n      selective: true,\n      selectiveLogic: 0,\n      addMemo: false,\n      order: 100,\n      position: 0,\n      disable: false,\n      excludeRecursion: false,\n      delayUntilRecursion: false,\n      probability: 100,\n      useProbability: true,\n      depth: 4,\n      group: '',\n      groupOverride: false,\n      groupWeight: 100,\n      scanDepth: null,\n      caseSensitive: null,\n      matchWholeWords: null,\n      useGroupScoring: false,\n      automationId: '',\n      role: 0,\n      sticky: 0,\n      cooldown: 0,\n      delay: 0,\n    },\n    {\n      uid: generateUID(),\n      key: [],\n      keysecondary: [],\n      comment: '',\n      content: generatedPrompt.value,\n      constant: true,\n      vectorized: false,\n      selective: false,\n      selectiveLogic: 0,\n      addMemo: false,\n      order: 100,\n      position: 1,\n      disable: false,\n      excludeRecursion: false,\n      delayUntilRecursion: false,\n      probability: 100,\n      useProbability: true,\n      depth: 0,\n      group: '',\n      groupOverride: false,\n      groupWeight: 100,\n      scanDepth: null,\n      caseSensitive: null,\n      matchWholeWords: null,\n      useGroupScoring: false,\n      automationId: '',\n      role: 0,\n      sticky: 0,\n      cooldown: 0,\n      delay: 0,\n    },\n  ];\n\n  const jsonStr = JSON.stringify(worldbookEntries, null, 2);\n  const blob = new Blob([jsonStr], { type: 'application/json' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = `${varNameParsed}_MVU_worldbook.json`;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url);\n\n  window.toastr.success(`  JSON[InitVar] + `);\n}\n\nfunction generateUID(): number {\n  return Date.now() + Math.floor(Math.random() * 1000);\n}\n\n// ====================  ====================\n\n//  - localStorage\nfunction loadSavedData() {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      console.warn('script_id  MVU ');\n      return;\n    }\n\n    //  localStorage \n    const storageKey = `${scriptId}_mvu_beta_config`;\n    const savedDataStr = localStorage.getItem(storageKey);\n\n    if (savedDataStr) {\n      const savedData = JSON.parse(savedDataStr);\n      if (savedData.varName) varName.value = savedData.varName;\n      if (savedData.subFields) subFields.value = savedData.subFields;\n      if (savedData.generatedStructure) generatedStructure.value = savedData.generatedStructure;\n      if (savedData.variableCategories) variableCategories.value = savedData.variableCategories;\n      if (savedData.generatedPrompt) generatedPrompt.value = savedData.generatedPrompt;\n      console.log('  MVU Beta ');\n    }\n  } catch (error) {\n    console.error(' MVU Beta :', error);\n  }\n}\n\n//  - localStorage\nfunction saveData() {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      console.warn('script_id  MVU ');\n      return;\n    }\n\n    //  localStorage\n    const storageKey = `${scriptId}_mvu_beta_config`;\n    const dataToSave = {\n      varName: varName.value,\n      subFields: subFields.value,\n      generatedStructure: generatedStructure.value,\n      variableCategories: variableCategories.value,\n      generatedPrompt: generatedPrompt.value,\n    };\n    localStorage.setItem(storageKey, JSON.stringify(dataToSave));\n  } catch (error) {\n    console.error(' MVU Beta :', error);\n  }\n}\n\n// \nonMounted(() => {\n  loadSavedData();\n});\n\n// \nlet saveTimer: number | null = null;\nwatch([varName, subFields, generatedStructure, variableCategories, generatedPrompt], () => {\n  if (saveTimer) clearTimeout(saveTimer);\n  saveTimer = window.setTimeout(() => {\n    saveData();\n  }, 1000); // 1\n});\n</script>\n\n<style scoped>\n.tool-section {\n  margin-bottom: 20px;\n}\n\n.tool-content {\n  padding: 0 20px 20px 20px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.generate-btn:hover .shimmer-effect {\n  left: 100%;\n}\n\n.output-section {\n  margin-top: 15px;\n  padding-top: 15px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.code-output {\n  background: #1a1a1a;\n  border: 1px solid #3a3a3a;\n  border-radius: 6px;\n  padding: 15px;\n  position: relative;\n  max-height: 400px;\n  overflow-y: auto;\n}\n\n/*  */\n.code-output::-webkit-scrollbar {\n  width: 6px;\n}\n\n.code-output::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\n.code-output::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.code-output::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n\n.code-output pre {\n  margin: 0;\n  color: #e0e0e0;\n  font-family: 'Courier New', monospace;\n  font-size: 12px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n\n.copy-btn-abs {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: linear-gradient(135deg, rgba(74, 158, 255, 0.2), rgba(102, 126, 234, 0.3));\n  border: 1px solid rgba(74, 158, 255, 0.4);\n  border-radius: 6px;\n  color: #4a9eff;\n  padding: 8px 14px;\n  cursor: pointer;\n  font-size: 12px;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px rgba(74, 158, 255, 0.2);\n}\n\n.copy-btn-abs:hover {\n  background: linear-gradient(135deg, rgba(74, 158, 255, 0.35), rgba(102, 126, 234, 0.45));\n  border-color: rgba(74, 158, 255, 0.6);\n  box-shadow: 0 4px 12px rgba(74, 158, 255, 0.35);\n  transform: translateY(-2px);\n  color: #fff;\n}\n</style>\n","<template>\n  <div\n    v-if=\"show\"\n    class=\"progress-overlay\"\n    style=\"\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.85);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 999999;\n      animation: fadeIn 0.2s ease;\n    \"\n  >\n    <div\n      class=\"progress-card\"\n      style=\"\n        background: linear-gradient(145deg, #2a2a2a, #1e1e1e);\n        border-radius: 16px;\n        padding: 35px;\n        width: 520px;\n        max-width: 90vw;\n        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\n        border: 1px solid #3a3a3a;\n        animation: slideUp 0.3s ease;\n      \"\n    >\n      <!--  -->\n      <div style=\"display: flex; align-items: center; gap: 12px; margin-bottom: 24px\">\n        <div\n          class=\"spinner\"\n          style=\"\n            width: 28px;\n            height: 28px;\n            border: 3px solid #3a3a3a;\n            border-top-color: #4a9eff;\n            border-radius: 50%;\n            animation: spin 0.8s linear infinite;\n          \"\n        ></div>\n        <h3 style=\"margin: 0; color: #fff; font-size: 18px; font-weight: 600\">\n          {{ title }}\n        </h3>\n      </div>\n\n      <!--  -->\n      <div\n        class=\"progress-bar-container\"\n        style=\"\n          width: 100%;\n          height: 10px;\n          background: rgba(30, 30, 30, 0.8);\n          border-radius: 5px;\n          overflow: hidden;\n          margin-bottom: 20px;\n          box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);\n        \"\n      >\n        <div\n          class=\"progress-bar\"\n          :style=\"{\n            width: displayProgress + '%',\n            height: '100%',\n            background: '#4a9eff',\n            transition: 'width 0.5s ease-out',\n            boxShadow: '0 0 10px rgba(74, 158, 255, 0.5)',\n          }\"\n        ></div>\n      </div>\n\n      <!--  -->\n      <div class=\"current-stage\" style=\"color: #e0e0e0; font-size: 14px; margin-bottom: 12px; min-height: 20px\">\n        {{ currentMessage }}\n      </div>\n\n      <!--  -->\n      <div\n        v-if=\"details.length > 0\"\n        class=\"details-area\"\n        style=\"\n          max-height: 150px;\n          overflow-y: auto;\n          background: rgba(10, 10, 10, 0.5);\n          border-radius: 8px;\n          padding: 12px;\n          margin-bottom: 16px;\n          font-family: 'Consolas', 'Monaco', monospace;\n          font-size: 11px;\n          color: #a0a0a0;\n          line-height: 1.6;\n        \"\n      >\n        <div v-for=\"(detail, i) in details\" :key=\"i\" style=\"margin-bottom: 4px\">\n          <span style=\"color: #4a9eff\"></span> {{ detail }}\n        </div>\n      </div>\n\n      <!--  -->\n      <div style=\"display: flex; justify-content: space-between; align-items: center\">\n        <div class=\"progress-percent\" style=\"color: #4a9eff; font-size: 16px; font-weight: 600\">\n          {{ Math.round(displayProgress) }}%\n        </div>\n\n        <div class=\"elapsed-time\" style=\"color: #888; font-size: 12px\">: {{ elapsedSeconds }}</div>\n      </div>\n\n      <!--  -->\n      <button\n        v-if=\"cancellable\"\n        style=\"\n          width: 100%;\n          margin-top: 20px;\n          padding: 10px;\n          background: #3a3a3a;\n          border: 1px solid #4a4a4a;\n          border-radius: 8px;\n          color: #e0e0e0;\n          font-size: 13px;\n          cursor: pointer;\n          transition: all 0.2s;\n        \"\n        @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\"\n        @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\"\n        @click=\"$emit('cancel')\"\n      >\n        \n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, onUnmounted } from 'vue';\n\ninterface Props {\n  show: boolean;\n  title?: string;\n  initialMessage?: string;\n  cancellable?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  title: 'AI ',\n  initialMessage: '...',\n  cancellable: false,\n});\n\ndefineEmits<{\n  (e: 'cancel'): void;\n}>();\n\n// \nconst progress = ref(0);\nconst displayProgress = ref(0); // \nconst currentMessage = ref(props.initialMessage);\nconst details = ref<string[]>([]);\nconst startTime = ref(0);\nconst elapsedSeconds = ref(0);\n\nlet elapsedInterval: number | null = null;\nlet smoothProgressInterval: number | null = null;\n\n// \nwatch(\n  () => props.show,\n  newVal => {\n    if (newVal) {\n      // \n      progress.value = 0;\n      displayProgress.value = 0;\n      currentMessage.value = props.initialMessage;\n      details.value = [];\n      startTime.value = Date.now();\n      elapsedSeconds.value = 0;\n\n      // \n      if (elapsedInterval) {\n        clearInterval(elapsedInterval);\n      }\n      elapsedInterval = window.setInterval(() => {\n        elapsedSeconds.value = Math.floor((Date.now() - startTime.value) / 1000);\n      }, 1000);\n\n      // \n      if (smoothProgressInterval) {\n        clearInterval(smoothProgressInterval);\n      }\n      smoothProgressInterval = window.setInterval(() => {\n        // \n        if (displayProgress.value < progress.value) {\n          const diff = progress.value - displayProgress.value;\n          displayProgress.value += Math.max(0.5, diff * 0.1);\n          if (displayProgress.value > progress.value) {\n            displayProgress.value = progress.value;\n          }\n        }\n        // 95%\n        else if (progress.value < 95 && displayProgress.value >= progress.value - 0.5) {\n          displayProgress.value += 0.2;\n          if (displayProgress.value > progress.value + 5) {\n            displayProgress.value = progress.value + 5; // 5%\n          }\n        }\n      }, 100);\n    } else {\n      // \n      if (elapsedInterval) {\n        clearInterval(elapsedInterval);\n        elapsedInterval = null;\n      }\n      if (smoothProgressInterval) {\n        clearInterval(smoothProgressInterval);\n        smoothProgressInterval = null;\n      }\n    }\n  },\n);\n\nonUnmounted(() => {\n  if (elapsedInterval) {\n    clearInterval(elapsedInterval);\n  }\n  if (smoothProgressInterval) {\n    clearInterval(smoothProgressInterval);\n  }\n});\n\n// \nfunction setProgress(percent: number) {\n  progress.value = Math.min(100, Math.max(0, percent));\n}\n\nfunction setMessage(message: string) {\n  currentMessage.value = message;\n}\n\nfunction addDetail(detail: string) {\n  details.value.push(detail);\n  // \n  setTimeout(() => {\n    const detailsArea = document.querySelector('.details-area');\n    if (detailsArea) {\n      detailsArea.scrollTop = detailsArea.scrollHeight;\n    }\n  }, 50);\n}\n\nfunction clearDetails() {\n  details.value = [];\n}\n\nfunction complete() {\n  progress.value = 100;\n  currentMessage.value = '';\n}\n\ndefineExpose({\n  setProgress,\n  setMessage,\n  addDetail,\n  clearDetails,\n  complete,\n});\n</script>\n\n<style scoped>\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes slideUp {\n  from {\n    transform: translateY(20px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/*  */\n.details-area::-webkit-scrollbar {\n  width: 6px;\n}\n\n.details-area::-webkit-scrollbar-track {\n  background: rgba(30, 30, 30, 0.5);\n  border-radius: 3px;\n}\n\n.details-area::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.details-area::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n</style>\n","<template>\n  <div class=\"project-tab\">\n    <!--  -->\n    <div\n      class=\"section-header\"\n      style=\"\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 20px 28px;\n        background: #2a2a2a;\n        backdrop-filter: blur(12px);\n        border-radius: 14px;\n        margin-bottom: 20px;\n        border: 1px solid #333;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n      \"\n    >\n      <h3\n        style=\"\n          margin: 0;\n          color: #fff;\n          font-size: 16px !important;\n          font-weight: 600;\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          letter-spacing: 0.5px;\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n        \"\n      >\n        <i class=\"fa-solid fa-laptop-code\" style=\"color: #4a9eff; font-size: 18px\"></i>\n        \n      </h3>\n      <div class=\"project-action-buttons\" style=\"display: flex; gap: 10px\">\n        <button\n          v-if=\"currentId\"\n          style=\"\n            padding: 8px 16px;\n            background: #444;\n            border: none;\n            border-radius: 8px;\n            color: #e0e0e0;\n            font-size: 13px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.2s;\n          \"\n          @click=\"exportToRegex\"\n          @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#555')\"\n          @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#444')\"\n        >\n          <i class=\"fa-solid fa-download\" style=\"margin-right: 6px\"></i>\n          \n        </button>\n        <button\n          v-if=\"currentId\"\n          style=\"\n            padding: 8px 16px;\n            background: #444;\n            border: none;\n            border-radius: 8px;\n            color: #e0e0e0;\n            font-size: 13px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.2s;\n          \"\n          @click=\"showHistoryDialog\"\n          @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#555')\"\n          @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#444')\"\n        >\n          <i class=\"fa-solid fa-history\" style=\"margin-right: 6px\"></i>\n          \n        </button>\n        <button\n          v-if=\"currentId\"\n          style=\"\n            padding: 8px 16px;\n            background: #8b5cf6;\n            border: none;\n            border-radius: 8px;\n            color: white;\n            font-size: 13px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.2s;\n          \"\n          @click=\"showAIDialog\"\n          @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#7c3aed')\"\n          @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#8b5cf6')\"\n        >\n          <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"margin-right: 6px\"></i>\n          AI \n        </button>\n        <button\n          v-if=\"currentId\"\n          style=\"\n            padding: 8px 16px;\n            background: #ef4444;\n            border: none;\n            border-radius: 8px;\n            color: white;\n            font-size: 13px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.2s;\n          \"\n          @click=\"showBugFixDialog\"\n          @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#dc2626')\"\n          @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#ef4444')\"\n        >\n          <i class=\"fa-solid fa-bug\" style=\"margin-right: 6px\"></i>\n          Bug \n        </button>\n        <button\n          style=\"\n            padding: 8px 16px;\n            background: #444;\n            border: none;\n            border-radius: 8px;\n            color: #e0e0e0;\n            font-size: 13px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.2s;\n          \"\n          @click=\"showProjectTemplateDialog\"\n          @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#555')\"\n          @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#444')\"\n        >\n          <i class=\"fa-solid fa-file-lines\" style=\"margin-right: 6px\"></i>\n          \n        </button>\n        <button\n          style=\"\n            padding: 8px 16px;\n            background: #444;\n            border: none;\n            border-radius: 8px;\n            color: #e0e0e0;\n            font-size: 13px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.2s;\n          \"\n          @click=\"triggerFolderImport\"\n          @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#555')\"\n          @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#444')\"\n        >\n          <i class=\"fa-solid fa-folder-open\" style=\"margin-right: 6px\"></i>\n          \n        </button>\n        <button\n          style=\"\n            padding: 8px 16px;\n            background: #10b981;\n            border: none;\n            border-radius: 8px;\n            color: white;\n            font-size: 13px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.2s;\n          \"\n          @click=\"createProject\"\n          @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#059669')\"\n          @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#10b981')\"\n        >\n          <i class=\"fa-solid fa-plus\" style=\"margin-right: 6px\"></i>\n          \n        </button>\n      </div>\n    </div>\n\n    <!--  -->\n    <input\n      ref=\"folderInputRef\"\n      type=\"file\"\n      webkitdirectory\n      directory\n      multiple\n      style=\"display: none\"\n      @change=\"handleFolderImport\"\n    />\n\n    <!--  -->\n    <div style=\"display: grid; grid-template-columns: 220px 1fr 650px; gap: 20px; min-height: 500px\">\n      <!--  -->\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 15px;\n          border: 1px solid #3a3a3a;\n          display: flex;\n          flex-direction: column;\n        \"\n      >\n        <h4 style=\"margin: 0 0 15px 0; color: #fff; font-size: 14px; font-weight: 600\"></h4>\n        <div v-if=\"projects.length === 0\" style=\"text-align: center; color: #666; font-size: 12px; padding: 20px 10px\">\n          <br />\n          \"\"\n        </div>\n        <div\n          v-for=\"proj in projects\"\n          :key=\"proj.id\"\n          :style=\"{\n            padding: '10px 12px',\n            marginBottom: '8px',\n            background: currentId === proj.id ? '#4a9eff' : '#1e1e1e',\n            borderRadius: '8px',\n            cursor: 'pointer',\n            transition: 'all 0.2s ease',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            color: currentId === proj.id ? '#fff' : '#e0e0e0',\n          }\"\n          @click=\"selectProject(proj.id)\"\n          @mouseenter=\"(e: any) => currentId !== proj.id && (e.currentTarget.style.background = '#3a3a3a')\"\n          @mouseleave=\"(e: any) => currentId !== proj.id && (e.currentTarget.style.background = '#1e1e1e')\"\n        >\n          <span style=\"font-size: 13px; flex: 1\">{{ proj.name }}</span>\n          <button\n            style=\"\n              width: 20px;\n              height: 20px;\n              background: rgba(239, 68, 68, 0.2);\n              border: none;\n              border-radius: 4px;\n              color: #ff4444;\n              font-size: 14px;\n              line-height: 1;\n              cursor: pointer;\n              opacity: 0.6;\n              transition: all 0.2s ease;\n            \"\n            @click.stop=\"deleteProject(proj.id)\"\n            @mouseenter=\"\n              (e: any) => (\n                (e.currentTarget.style.opacity = '1'),\n                (e.currentTarget.style.background = '#ef4444'),\n                (e.currentTarget.style.color = '#fff')\n              )\n            \"\n            @mouseleave=\"\n              (e: any) => (\n                (e.currentTarget.style.opacity = '0.6'),\n                (e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'),\n                (e.currentTarget.style.color = '#ff4444')\n              )\n            \"\n          >\n            \n          </button>\n        </div>\n\n        <!--  -->\n        <div\n          v-if=\"currentId && currentProject\"\n          style=\"margin-top: 20px; border-top: 1px solid #3a3a3a; padding-top: 15px\"\n        >\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px\">\n            <h4 style=\"margin: 0; color: #fff; font-size: 13px; font-weight: 600\"></h4>\n            <div style=\"display: flex; gap: 5px\">\n              <button\n                style=\"\n                  padding: 4px 8px;\n                  background: #444;\n                  border: none;\n                  border-radius: 5px;\n                  color: #e0e0e0;\n                  font-size: 11px;\n                  cursor: pointer;\n                  transition: all 0.2s;\n                  display: flex;\n                  align-items: center;\n                  gap: 4px;\n                \"\n                title=\"\"\n                @click=\"createNewFolder\"\n                @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#555')\"\n                @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#444')\"\n              >\n                <i class=\"fa-solid fa-folder-plus\" style=\"font-size: 10px\"></i>\n              </button>\n              <button\n                style=\"\n                  padding: 4px 8px;\n                  background: #10b981;\n                  border: none;\n                  border-radius: 5px;\n                  color: white;\n                  font-size: 11px;\n                  cursor: pointer;\n                  transition: all 0.2s;\n                  display: flex;\n                  align-items: center;\n                  gap: 4px;\n                \"\n                title=\"\"\n                @click=\"showNewFileDialog\"\n                @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#059669')\"\n                @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#10b981')\"\n              >\n                <i class=\"fa-solid fa-plus\" style=\"font-size: 10px\"></i>\n              </button>\n            </div>\n          </div>\n          <div\n            v-for=\"file in currentProject.files\"\n            :key=\"file.path\"\n            :style=\"{\n              padding: '8px 10px',\n              marginBottom: '5px',\n              background: currentFile === file.path ? '#10b981' : '#1e1e1e',\n              borderRadius: '6px',\n              cursor: 'pointer',\n              transition: 'all 0.2s ease',\n              color: currentFile === file.path ? '#fff' : '#e0e0e0',\n              fontSize: '12px',\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n            }\"\n            @click=\"selectFile(file.path)\"\n            @mouseenter=\"(e: any) => currentFile !== file.path && (e.currentTarget.style.background = '#3a3a3a')\"\n            @mouseleave=\"(e: any) => currentFile !== file.path && (e.currentTarget.style.background = '#1e1e1e')\"\n          >\n            <span>\n              <i :class=\"getFileIcon(file.path)\" style=\"margin-right: 6px\"></i>\n              {{ file.name }}\n            </span>\n            <button\n              style=\"\n                width: 18px;\n                height: 18px;\n                background: rgba(239, 68, 68, 0.2);\n                border: none;\n                border-radius: 3px;\n                color: #ff4444;\n                font-size: 12px;\n                line-height: 1;\n                cursor: pointer;\n                opacity: 0;\n                transition: all 0.2s ease;\n              \"\n              title=\"\"\n              @click.stop=\"deleteFile(file.path)\"\n              @mouseenter=\"\n                (e: any) => (\n                  (e.currentTarget.style.opacity = '1'),\n                  (e.currentTarget.style.background = '#ef4444'),\n                  (e.currentTarget.style.color = '#fff')\n                )\n              \"\n              @mouseleave=\"\n                (e: any) => (\n                  (e.currentTarget.style.opacity = '0.6'),\n                  (e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'),\n                  (e.currentTarget.style.color = '#ff4444')\n                )\n              \"\n            >\n              \n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!--  -->\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 15px;\n          border: 1px solid #3a3a3a;\n          display: flex;\n          flex-direction: column;\n        \"\n      >\n        <div\n          v-if=\"!currentId\"\n          style=\"flex: 1; display: flex; align-items: center; justify-content: center; color: #666; font-size: 14px\"\n        >\n           \n        </div>\n        <div\n          v-else-if=\"!currentFile\"\n          style=\"flex: 1; display: flex; align-items: center; justify-content: center; color: #666; font-size: 14px\"\n        >\n           \n        </div>\n        <div v-else style=\"display: flex; flex-direction: column; height: 100%\">\n          <div style=\"margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center\">\n            <div style=\"display: flex; align-items: center; gap: 8px\">\n              <i :class=\"getFileIcon(currentFile)\" style=\"color: #4a9eff\"></i>\n              <span style=\"color: #fff; font-size: 14px; font-weight: 500\">{{ currentFile }}</span>\n            </div>\n            <div style=\"display: flex; align-items: center; gap: 10px\">\n              <span style=\"color: #888; font-size: 11px\">\n                <i class=\"fa-solid fa-circle-check\" style=\"color: #10b981; margin-right: 4px\"></i>\n                \n              </span>\n              <button\n                style=\"\n                  padding: 6px 12px;\n                  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n                  border: none;\n                  border-radius: 6px;\n                  color: white;\n                  font-size: 12px;\n                  font-weight: 600;\n                  cursor: pointer;\n                  transition: all 0.2s ease;\n                \"\n                @click=\"saveCode\"\n                @mouseenter=\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\"\n                @mouseleave=\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\"\n              >\n                <i class=\"fa-solid fa-floppy-disk\" style=\"margin-right: 4px\"></i>\n                \n              </button>\n            </div>\n          </div>\n          <textarea\n            v-model=\"code\"\n            :placeholder=\"` ${currentFile.split('.').pop()?.toUpperCase()} ...`\"\n            style=\"\n              flex: 1;\n              background: #1e1e1e;\n              border: 1px solid #3a3a3a;\n              border-radius: 8px;\n              color: #e0e0e0;\n              font-family: 'Consolas', 'Monaco', monospace;\n              font-size: 13px;\n              line-height: 1.6;\n              padding: 15px;\n              resize: none;\n              outline: none;\n              min-height: 400px;\n            \"\n          ></textarea>\n        </div>\n      </div>\n\n      <!--  -->\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 15px;\n          border: 1px solid #3a3a3a;\n          display: flex;\n          flex-direction: column;\n        \"\n      >\n        <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px\">\n          <h4 style=\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\">\n            <i class=\"fa-solid fa-eye\" style=\"margin-right: 8px; color: #4a9eff\"></i>\n            \n          </h4>\n          <div style=\"display: flex; gap: 8px\">\n            <button\n              v-if=\"previewHtml\"\n              title=\"\"\n              style=\"\n                width: 28px;\n                height: 28px;\n                padding: 0;\n                background: #3a3a3a;\n                border: none;\n                border-radius: 6px;\n                color: #e0e0e0;\n                cursor: pointer;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                transition: all 0.2s ease;\n              \"\n              @click=\"openInNewWindow\"\n              @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#4a9eff')\"\n              @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\"\n            >\n              <i class=\"fa-solid fa-external-link-alt\" style=\"font-size: 12px\"></i>\n            </button>\n          </div>\n        </div>\n        <div\n          style=\"\n            flex: 1;\n            background: #1e1e1e;\n            border-radius: 8px;\n            overflow: auto;\n            position: relative;\n            min-height: 400px;\n          \"\n        >\n          <iframe\n            v-if=\"previewHtml\"\n            :srcdoc=\"previewHtml\"\n            sandbox=\"allow-scripts allow-same-origin allow-modals allow-forms\"\n            style=\"width: 100%; height: 100%; border: none; background: white\"\n          ></iframe>\n          <div\n            v-else\n            style=\"\n              position: absolute;\n              top: 50%;\n              left: 50%;\n              transform: translate(-50%, -50%);\n              color: #666;\n              font-size: 12px;\n              text-align: center;\n            \"\n          >\n            \n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- AI  -->\n    <div\n      v-if=\"showAI\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n      \"\n      @click.self=\"closeAIDialog\"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 25px;\n          width: 90%;\n          max-width: 600px;\n          border: 1px solid #3a3a3a;\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\n        \"\n      >\n        <h3\n          style=\"\n            margin: 0 0 20px 0;\n            color: #fff;\n            font-size: 18px;\n            font-weight: 600;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n          \"\n        >\n          <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"color: #8b5cf6\"></i>\n          AI \n        </h3>\n\n        <div style=\"margin-bottom: 15px\">\n          <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px\">\n            <i class=\"fa-solid fa-pencil\" style=\"color: #8b5cf6; margin-right: 6px\"></i>\n            \n          </label>\n          <div\n            style=\"\n              margin-bottom: 10px;\n              padding: 10px 12px;\n              background: rgba(139, 92, 246, 0.1);\n              border-left: 3px solid #8b5cf6;\n              border-radius: 4px;\n              font-size: 12px;\n              color: #ccc;\n              line-height: 1.6;\n            \"\n          >\n            <strong style=\"color: #8b5cf6\"> </strong>\n            \"\"\"\"\n          </div>\n          <textarea\n            v-model=\"aiPrompt\"\n            placeholder=\"...\"\n            style=\"\n              width: 100%;\n              height: 120px;\n              background: #1e1e1e;\n              border: 1px solid #3a3a3a;\n              border-radius: 8px;\n              color: #e0e0e0;\n              font-size: 13px;\n              line-height: 1.6;\n              padding: 12px;\n              resize: none;\n              outline: none;\n            \"\n          ></textarea>\n\n          <!--  -->\n          <div style=\"margin-top: 12px\">\n            <div style=\"color: #888; font-size: 12px; margin-bottom: 8px\">\n              <i class=\"fa-solid fa-lightbulb\" style=\"color: #fbbf24; margin-right: 4px\"></i>\n              \n            </div>\n            <div style=\"display: flex; flex-wrap: wrap; gap: 8px\">\n              <button\n                v-for=\"suggestion in quickSuggestions\"\n                :key=\"suggestion\"\n                style=\"\n                  padding: 6px 12px;\n                  background: #2a2a2a;\n                  border: 1px solid #3a3a3a;\n                  border-radius: 6px;\n                  color: #ccc;\n                  font-size: 12px;\n                  cursor: pointer;\n                  transition: all 0.2s;\n                \"\n                @click=\"aiPrompt = suggestion\"\n                @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\"\n                @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#2a2a2a')\"\n              >\n                {{ suggestion }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!--  -->\n        <div\n          style=\"\n            display: flex;\n            align-items: center;\n            gap: 10px;\n            margin-bottom: 15px;\n            padding: 10px;\n            background: #252525;\n            border-radius: 6px;\n          \"\n        >\n          <label\n            style=\"\n              display: flex;\n              align-items: center;\n              gap: 8px;\n              cursor: pointer;\n              color: #ccc;\n              font-size: 13px;\n              user-select: none;\n            \"\n          >\n            <input v-model=\"enableStream\" type=\"checkbox\" style=\"width: 16px; height: 16px; cursor: pointer\" />\n            <i class=\"fa-solid fa-water\" style=\"color: #4a9eff\"></i>\n            \n          </label>\n          <span style=\"color: #888; font-size: 12px\">  </span>\n        </div>\n\n        <!--  -->\n        <div\n          v-if=\"aiGenerating && enableStream && streamingText\"\n          style=\"\n            margin-bottom: 15px;\n            padding: 15px;\n            background: #1e1e1e;\n            border: 1px solid #3a3a3a;\n            border-radius: 6px;\n            max-height: 200px;\n            overflow-y: auto;\n            font-family: 'Consolas', monospace;\n            font-size: 12px;\n            color: #e0e0e0;\n            line-height: 1.5;\n            white-space: pre-wrap;\n          \"\n        >\n          {{ streamingText }}\n          <span style=\"animation: blink 1s infinite\"></span>\n        </div>\n\n        <div style=\"display: flex; gap: 10px; justify-content: flex-end\">\n          <button\n            style=\"\n              padding: 8px 16px;\n              background: #3a3a3a;\n              border: none;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              cursor: pointer;\n              transition: all 0.2s ease;\n            \"\n            @click=\"closeAIDialog\"\n            @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\"\n            @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\"\n          >\n            \n          </button>\n          <button\n            :disabled=\"aiGenerating || !aiPrompt.trim()\"\n            style=\"\n              padding: 8px 16px;\n              background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\n              border: none;\n              border-radius: 6px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.2s ease;\n            \"\n            :style=\"{\n              opacity: aiGenerating || !aiPrompt.trim() ? 0.5 : 1,\n              cursor: aiGenerating || !aiPrompt.trim() ? 'not-allowed' : 'pointer',\n            }\"\n            @click=\"generateWithAI\"\n          >\n            <i v-if=\"!aiGenerating\" class=\"fa-solid fa-wand-magic-sparkles\" style=\"margin-right: 6px\"></i>\n            <i v-else class=\"fa-solid fa-spinner fa-spin\" style=\"margin-right: 6px\"></i>\n            {{ aiGenerating ? '...' : '' }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Bug  -->\n    <div\n      v-if=\"showBugFix\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n      \"\n      @click.self=\"closeBugFixDialog\"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 25px;\n          width: 90%;\n          max-width: 650px;\n          border: 1px solid #3a3a3a;\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\n        \"\n      >\n        <h3\n          style=\"\n            margin: 0 0 20px 0;\n            color: #fff;\n            font-size: 18px;\n            font-weight: 600;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n          \"\n        >\n          <i class=\"fa-solid fa-bug\" style=\"color: #ef4444\"></i>\n          Bug \n        </h3>\n\n        <!--  -->\n        <div style=\"margin-bottom: 15px\">\n          <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 600\">\n            <i class=\"fa-solid fa-circle-exclamation\" style=\"color: #f59e0b; margin-right: 6px\"></i>\n            \n          </label>\n          <textarea\n            v-model=\"bugDescription\"\n            placeholder=\"&#10;&#10;\"\n            style=\"\n              width: 100%;\n              height: 90px;\n              background: #1e1e1e;\n              border: 1px solid #3a3a3a;\n              border-radius: 8px;\n              color: #e0e0e0;\n              font-size: 13px;\n              line-height: 1.6;\n              padding: 12px;\n              resize: none;\n              outline: none;\n            \"\n          ></textarea>\n        </div>\n\n        <!-- Console  -->\n        <div style=\"margin-bottom: 15px\">\n          <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 600\">\n            <i class=\"fa-solid fa-terminal\" style=\"color: #ef4444; margin-right: 6px\"></i>\n             Console  F12 \n          </label>\n          <textarea\n            v-model=\"consoleError\"\n            placeholder=\" Console &#10;Uncaught TypeError: xxx is not a function&#10;&#10;\"\n            style=\"\n              width: 100%;\n              height: 80px;\n              background: #1e1e1e;\n              border: 1px solid #3a3a3a;\n              border-radius: 8px;\n              color: #ff6b6b;\n              font-size: 12px;\n              font-family: 'Consolas', monospace;\n              line-height: 1.5;\n              padding: 12px;\n              resize: none;\n              outline: none;\n            \"\n          ></textarea>\n        </div>\n\n        <!--  -->\n        <div style=\"margin-bottom: 15px\">\n          <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 600\">\n            <i class=\"fa-solid fa-file-code\" style=\"color: #4a9eff; margin-right: 6px\"></i>\n            \n          </label>\n          <select\n            v-model=\"bugFile\"\n            style=\"\n              width: 100%;\n              background: #1e1e1e;\n              border: 1px solid #3a3a3a;\n              border-radius: 8px;\n              color: #e0e0e0;\n              font-size: 13px;\n              padding: 10px 12px;\n              outline: none;\n              cursor: pointer;\n            \"\n          >\n            <option value=\"\"> AI </option>\n            <option value=\"index.html\">HTML index.html</option>\n            <option value=\"style.css\">CSS style.css</option>\n            <option value=\"script.js\">JavaScript script.js</option>\n          </select>\n        </div>\n\n        <!--  -->\n        <div\n          style=\"\n            padding: 12px;\n            background: rgba(74, 158, 255, 0.1);\n            border: 1px solid rgba(74, 158, 255, 0.3);\n            border-radius: 6px;\n            margin-bottom: 15px;\n          \"\n        >\n          <p style=\"margin: 0; color: #4a9eff; font-size: 12px; line-height: 1.6\">\n            <i class=\"fa-solid fa-lightbulb\" style=\"margin-right: 6px\"></i>\n            <strong></strong>AI  bug Console\n            \n          </p>\n        </div>\n\n        <div style=\"display: flex; gap: 10px; justify-content: flex-end\">\n          <button\n            style=\"\n              padding: 8px 16px;\n              background: #3a3a3a;\n              border: none;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              cursor: pointer;\n              transition: all 0.2s ease;\n            \"\n            @click=\"closeBugFixDialog\"\n            @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\"\n            @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\"\n          >\n            \n          </button>\n          <button\n            :disabled=\"aiGenerating || !bugDescription.trim()\"\n            style=\"\n              padding: 8px 16px;\n              background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\n              border: none;\n              border-radius: 6px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.2s ease;\n            \"\n            :style=\"{\n              opacity: aiGenerating || !bugDescription.trim() ? 0.5 : 1,\n              cursor: aiGenerating || !bugDescription.trim() ? 'not-allowed' : 'pointer',\n            }\"\n            @click=\"fixBugWithAI\"\n          >\n            <i v-if=\"!aiGenerating\" class=\"fa-solid fa-wrench\" style=\"margin-right: 6px\"></i>\n            <i v-else class=\"fa-solid fa-spinner fa-spin\" style=\"margin-right: 6px\"></i>\n            {{ aiGenerating ? '...' : '' }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- AI  -->\n    <div\n      v-if=\"showComparison\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.9);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10001;\n        padding: 20px;\n      \"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          width: 95%;\n          height: 90%;\n          border: 1px solid #3a3a3a;\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\n          display: flex;\n          flex-direction: column;\n        \"\n      >\n        <!--  -->\n        <div\n          style=\"\n            padding: 20px 25px;\n            border-bottom: 1px solid #3a3a3a;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n          \"\n        >\n          <h3\n            style=\"\n              margin: 0;\n              color: #fff;\n              font-size: 18px;\n              font-weight: 600;\n              display: flex;\n              align-items: center;\n              gap: 10px;\n            \"\n          >\n            <i class=\"fa-solid fa-code-compare\" style=\"color: #8b5cf6\"></i>\n            AI \n          </h3>\n          <div style=\"display: flex; gap: 10px\">\n            <button\n              style=\"\n                padding: 8px 16px;\n                background: #ef4444;\n                border: none;\n                border-radius: 6px;\n                color: white;\n                font-size: 13px;\n                cursor: pointer;\n                transition: all 0.2s ease;\n              \"\n              @click=\"rejectChanges\"\n              @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#dc2626')\"\n              @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#ef4444')\"\n            >\n              <i class=\"fa-solid fa-xmark\" style=\"margin-right: 6px\"></i>\n              \n            </button>\n            <button\n              style=\"\n                padding: 8px 16px;\n                background: #10b981;\n                border: none;\n                border-radius: 6px;\n                color: white;\n                font-size: 13px;\n                font-weight: 500;\n                cursor: pointer;\n                transition: all 0.2s;\n              \"\n              @click=\"acceptChanges\"\n              @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#059669')\"\n              @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#10b981')\"\n            >\n              <i class=\"fa-solid fa-check\" style=\"margin-right: 6px\"></i>\n              \n            </button>\n          </div>\n        </div>\n\n        <!--  -->\n        <div\n          style=\"\n            flex: 1;\n            display: grid;\n            grid-template-columns: 1fr 1fr 1.5fr;\n            gap: 15px;\n            padding: 20px;\n            overflow: hidden;\n          \"\n        >\n          <!--  -->\n          <div style=\"display: flex; flex-direction: column; background: #1e1e1e; border-radius: 8px; overflow: hidden\">\n            <div style=\"padding: 12px 15px; background: #2a2a2a; border-bottom: 1px solid #3a3a3a\">\n              <h4 style=\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\">\n                <i class=\"fa-solid fa-file-code\" style=\"margin-right: 8px; color: #ef4444\"></i>\n                \n              </h4>\n            </div>\n            <div style=\"flex: 1; overflow-y: auto; padding: 15px\">\n              <div v-for=\"change in aiChanges\" :key=\"change.path\" style=\"margin-bottom: 20px\">\n                <div\n                  style=\"\n                    color: #4a9eff;\n                    font-size: 12px;\n                    font-weight: 600;\n                    margin-bottom: 8px;\n                    display: flex;\n                    align-items: center;\n                    gap: 6px;\n                  \"\n                >\n                  <i :class=\"getFileIcon(change.path)\"></i>\n                  {{ change.path }}\n                </div>\n                <pre\n                  style=\"\n                    margin: 0;\n                    padding: 12px;\n                    background: #1a1a1a;\n                    border-radius: 6px;\n                    color: #e0e0e0;\n                    font-family: 'Consolas', 'Monaco', monospace;\n                    font-size: 12px;\n                    line-height: 1.5;\n                    overflow-x: auto;\n                    border: 1px solid #3a3a3a;\n                  \"\n                  >{{ change.oldContent }}</pre\n                >\n              </div>\n            </div>\n          </div>\n\n          <!--  -->\n          <div style=\"display: flex; flex-direction: column; background: #1e1e1e; border-radius: 8px; overflow: hidden\">\n            <div style=\"padding: 12px 15px; background: #2a2a2a; border-bottom: 1px solid #3a3a3a\">\n              <h4 style=\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\">\n                <i class=\"fa-solid fa-file-code\" style=\"margin-right: 8px; color: #10b981\"></i>\n                \n              </h4>\n            </div>\n            <div style=\"flex: 1; overflow-y: auto; padding: 15px\">\n              <div v-for=\"change in aiChanges\" :key=\"change.path\" style=\"margin-bottom: 20px\">\n                <div\n                  style=\"\n                    color: #4a9eff;\n                    font-size: 12px;\n                    font-weight: 600;\n                    margin-bottom: 8px;\n                    display: flex;\n                    align-items: center;\n                    gap: 6px;\n                  \"\n                >\n                  <i :class=\"getFileIcon(change.path)\"></i>\n                  {{ change.path }}\n                </div>\n                <pre\n                  style=\"\n                    margin: 0;\n                    padding: 12px;\n                    background: #1a1a1a;\n                    border-radius: 6px;\n                    color: #e0e0e0;\n                    font-family: 'Consolas', 'Monaco', monospace;\n                    font-size: 12px;\n                    line-height: 1.5;\n                    overflow-x: auto;\n                    border: 1px solid #3a3a3a;\n                  \"\n                  >{{ change.newContent }}</pre\n                >\n              </div>\n            </div>\n          </div>\n\n          <!--  -->\n          <div style=\"display: flex; flex-direction: column; background: #1e1e1e; border-radius: 8px; overflow: hidden\">\n            <div\n              style=\"\n                padding: 12px 15px;\n                background: #2a2a2a;\n                border-bottom: 1px solid #3a3a3a;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n              \"\n            >\n              <h4 style=\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\">\n                <i class=\"fa-solid fa-eye\" style=\"margin-right: 8px; color: #4a9eff\"></i>\n                \n              </h4>\n              <div style=\"display: flex; gap: 8px\">\n                <button\n                  :style=\"{\n                    padding: '4px 10px',\n                    background: previewMode === 'before' ? '#ef4444' : '#3a3a3a',\n                    border: 'none',\n                    borderRadius: '4px',\n                    color: 'white',\n                    fontSize: '11px',\n                    cursor: 'pointer',\n                    transition: 'all 0.2s ease',\n                  }\"\n                  @click=\"previewMode = 'before'\"\n                >\n                  \n                </button>\n                <button\n                  :style=\"{\n                    padding: '4px 10px',\n                    background: previewMode === 'after' ? '#10b981' : '#3a3a3a',\n                    border: 'none',\n                    borderRadius: '4px',\n                    color: 'white',\n                    fontSize: '11px',\n                    cursor: 'pointer',\n                    transition: 'all 0.2s ease',\n                  }\"\n                  @click=\"previewMode = 'after'\"\n                >\n                  \n                </button>\n              </div>\n            </div>\n            <div style=\"flex: 1; background: white; overflow: hidden\">\n              <iframe\n                :srcdoc=\"comparisonPreviewHtml\"\n                sandbox=\"allow-scripts allow-same-origin allow-modals allow-forms\"\n                style=\"width: 100%; height: 100%; border: none\"\n              ></iframe>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      v-if=\"showHistory\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n        padding: 20px;\n      \"\n      @click.self=\"closeHistoryDialog\"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          width: 90%;\n          max-width: 900px;\n          max-height: 80%;\n          border: 1px solid #3a3a3a;\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\n          display: flex;\n          flex-direction: column;\n        \"\n      >\n        <div\n          style=\"\n            padding: 20px 25px;\n            border-bottom: 1px solid #3a3a3a;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n          \"\n        >\n          <h3\n            style=\"\n              margin: 0;\n              color: #fff;\n              font-size: 18px;\n              font-weight: 600;\n              display: flex;\n              align-items: center;\n              gap: 10px;\n            \"\n          >\n            <i class=\"fa-solid fa-history\" style=\"color: #f59e0b\"></i>\n            AI \n          </h3>\n          <button\n            style=\"\n              width: 28px;\n              height: 28px;\n              background: #3a3a3a;\n              border: none;\n              border-radius: 6px;\n              color: #e0e0e0;\n              cursor: pointer;\n              transition: all 0.2s ease;\n            \"\n            @click=\"closeHistoryDialog\"\n            @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\"\n            @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\"\n          >\n            \n          </button>\n        </div>\n        <div style=\"flex: 1; overflow-y: auto; padding: 20px\">\n          <div v-if=\"currentProjectHistory.length === 0\" style=\"text-align: center; color: #666; padding: 40px 20px\">\n            <i class=\"fa-solid fa-inbox\" style=\"font-size: 48px; margin-bottom: 15px; opacity: 0.3\"></i>\n            <p></p>\n          </div>\n          <div\n            v-for=\"(record, index) in currentProjectHistory\"\n            :key=\"index\"\n            style=\"\n              background: #1e1e1e;\n              border-radius: 8px;\n              padding: 15px;\n              margin-bottom: 15px;\n              border: 1px solid #3a3a3a;\n            \"\n          >\n            <div style=\"display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px\">\n              <div>\n                <div style=\"color: #fff; font-size: 14px; font-weight: 600; margin-bottom: 5px\">\n                  {{ record.prompt }}\n                </div>\n                <div style=\"color: #888; font-size: 12px\">\n                  {{ new Date(record.timestamp).toLocaleString('zh-CN') }}\n                </div>\n              </div>\n              <button\n                style=\"\n                  padding: 6px 12px;\n                  background: #4a9eff;\n                  border: none;\n                  border-radius: 6px;\n                  color: white;\n                  font-size: 12px;\n                  font-weight: 500;\n                  cursor: pointer;\n                  transition: all 0.2s;\n                \"\n                @click=\"restoreHistory(record)\"\n                @mouseenter=\"(e: any) => (e.currentTarget.style.background = '#3b82f6')\"\n                @mouseleave=\"(e: any) => (e.currentTarget.style.background = '#4a9eff')\"\n              >\n                <i class=\"fa-solid fa-undo\" style=\"margin-right: 4px\"></i>\n                \n              </button>\n            </div>\n            <div style=\"color: #ccc; font-size: 13px; margin-top: 10px\">\n              <strong></strong>\n              <div style=\"margin-top: 5px; display: flex; flex-wrap: wrap; gap: 8px\">\n                <span\n                  v-for=\"change in record.changes\"\n                  :key=\"change.path\"\n                  style=\"\n                    background: #2a2a2a;\n                    padding: 4px 10px;\n                    border-radius: 4px;\n                    font-size: 12px;\n                    display: inline-flex;\n                    align-items: center;\n                    gap: 6px;\n                  \"\n                >\n                  <i :class=\"getFileIcon(change.path)\"></i>\n                  {{ change.path }}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      v-if=\"showProjectTemplate\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n        padding: 20px;\n      \"\n      @click.self=\"showProjectTemplate = false\"\n    >\n      <div\n        style=\"\n          background: #1e1e1e;\n          border-radius: 16px;\n          max-width: 850px;\n          width: 100%;\n          max-height: 90vh;\n          overflow-y: auto;\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);\n          border: 1px solid #333;\n        \"\n      >\n        <!--  -->\n        <div\n          style=\"\n            padding: 24px 28px;\n            border-bottom: 1px solid #2a2a2a;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n          \"\n        >\n          <h3\n            style=\"\n              margin: 0;\n              color: #fff;\n              font-size: 20px;\n              font-weight: 600;\n              display: flex;\n              align-items: center;\n              gap: 12px;\n            \"\n          >\n            <span\n              style=\"\n                width: 40px;\n                height: 40px;\n                background: #2a2a2a;\n                border-radius: 10px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 20px;\n              \"\n            >\n              \n            </span>\n            \n          </h3>\n          <button\n            style=\"\n              width: 36px;\n              height: 36px;\n              background: #2a2a2a;\n              border: none;\n              border-radius: 8px;\n              color: #888;\n              font-size: 18px;\n              cursor: pointer;\n              transition: all 0.2s;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n            \"\n            @click=\"showProjectTemplate = false\"\n            @mouseenter=\"\n              (e: any) => {\n                e.currentTarget.style.background = '#333';\n                e.currentTarget.style.color = '#fff';\n              }\n            \"\n            @mouseleave=\"\n              (e: any) => {\n                e.currentTarget.style.background = '#2a2a2a';\n                e.currentTarget.style.color = '#888';\n              }\n            \"\n          >\n            <i class=\"fa-solid fa-times\"></i>\n          </button>\n        </div>\n\n        <!--  -->\n        <div style=\"padding: 28px\">\n          <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px\">\n            <!--  -->\n            <div\n              style=\"\n                background: #252525;\n                border: 1px solid transparent;\n                border-radius: 16px;\n                padding: 24px;\n                cursor: pointer;\n                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n              \"\n              @click=\"createProjectFromTemplate('')\"\n              @mouseenter=\"\n                (e: any) => {\n                  e.currentTarget.style.transform = 'translateY(-4px)';\n                  e.currentTarget.style.borderColor = '#555';\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\n                }\n              \"\n              @mouseleave=\"\n                (e: any) => {\n                  e.currentTarget.style.transform = 'translateY(0)';\n                  e.currentTarget.style.borderColor = 'transparent';\n                  e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\n                }\n              \"\n            >\n              <div\n                style=\"\n                  width: 56px;\n                  height: 56px;\n                  background: #2a2a2a;\n                  border-radius: 16px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  font-size: 28px;\n                  margin-bottom: 16px;\n                \"\n              >\n                \n              </div>\n              <h4 style=\"margin: 0 0 8px 0; color: #fff; font-size: 17px; font-weight: 600\"></h4>\n              <p style=\"margin: 0; color: #999; font-size: 13px; line-height: 1.6\"></p>\n            </div>\n\n            <!--  -->\n            <div\n              style=\"\n                background: #252525;\n                border: 1px solid transparent;\n                border-radius: 16px;\n                padding: 24px;\n                cursor: pointer;\n                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n              \"\n              @click=\"createProjectFromTemplate('')\"\n              @mouseenter=\"\n                (e: any) => {\n                  e.currentTarget.style.transform = 'translateY(-4px)';\n                  e.currentTarget.style.borderColor = '#555';\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\n                }\n              \"\n              @mouseleave=\"\n                (e: any) => {\n                  e.currentTarget.style.transform = 'translateY(0)';\n                  e.currentTarget.style.borderColor = 'transparent';\n                  e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\n                }\n              \"\n            >\n              <div\n                style=\"\n                  width: 56px;\n                  height: 56px;\n                  background: #2a2a2a;\n                  border-radius: 16px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  font-size: 28px;\n                  margin-bottom: 16px;\n                \"\n              >\n                \n              </div>\n              <h4 style=\"margin: 0 0 8px 0; color: #fff; font-size: 17px; font-weight: 600\"></h4>\n              <p style=\"margin: 0; color: #999; font-size: 13px; line-height: 1.6\">HP/MP/</p>\n            </div>\n\n            <!--  -->\n            <div\n              style=\"\n                background: #252525;\n                border: 1px solid transparent;\n                border-radius: 16px;\n                padding: 24px;\n                cursor: pointer;\n                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n              \"\n              @click=\"createProjectFromTemplate('')\"\n              @mouseenter=\"\n                (e: any) => {\n                  e.currentTarget.style.transform = 'translateY(-4px)';\n                  e.currentTarget.style.borderColor = '#555';\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\n                }\n              \"\n              @mouseleave=\"\n                (e: any) => {\n                  e.currentTarget.style.transform = 'translateY(0)';\n                  e.currentTarget.style.borderColor = 'transparent';\n                  e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\n                }\n              \"\n            >\n              <div\n                style=\"\n                  width: 56px;\n                  height: 56px;\n                  background: #2a2a2a;\n                  border-radius: 16px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  font-size: 28px;\n                  margin-bottom: 16px;\n                \"\n              >\n                \n              </div>\n              <h4 style=\"margin: 0 0 8px 0; color: #fff; font-size: 17px; font-weight: 600\"></h4>\n              <p style=\"margin: 0; color: #999; font-size: 13px; line-height: 1.6\"></p>\n            </div>\n          </div>\n\n          <div\n            style=\"\n              margin-top: 24px;\n              padding: 16px 18px;\n              background: #252525;\n              border: 1px solid #333;\n              border-radius: 10px;\n            \"\n          >\n            <div\n              style=\"\n                color: #ccc;\n                font-weight: 500;\n                margin-bottom: 6px;\n                font-size: 13px;\n                display: flex;\n                align-items: center;\n                gap: 8px;\n              \"\n            >\n              <span style=\"color: #fbbf24; font-size: 16px\"></span>\n              \n            </div>\n            <p style=\"margin: 0; color: #888; font-size: 13px; line-height: 1.7\">\n              \n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <ProgressDialog ref=\"progressDialogRef\" :show=\"showProgress\" title=\"AI \" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onBeforeUnmount, ref, watch, watchEffect } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { getScriptIdSafe, getChatIdSafe } from '../utils';\nimport { useTaskStore } from '../taskStore';\nimport ProgressDialog from './ProgressDialog.vue';\n\ninterface ProjectFile {\n  path: string;\n  name: string;\n  content: string;\n}\n\ninterface Project {\n  id: string;\n  name: string;\n  files: ProjectFile[];\n}\n\ninterface AIChange {\n  path: string;\n  oldContent: string;\n  newContent: string;\n}\n\ninterface AIHistoryRecord {\n  timestamp: string;\n  prompt: string;\n  changes: AIChange[];\n}\n\nconst projects = ref<Project[]>([]);\nconst currentId = ref('');\nconst currentFile = ref('');\nconst code = ref('');\nconst previewHtml = ref('');\nconst showAI = ref(false);\nconst aiPrompt = ref('');\nconst aiGenerating = ref(false);\nconst enableStream = ref(false); // \nconst streamingText = ref(''); // \nconst showComparison = ref(false);\nconst aiChanges = ref<AIChange[]>([]);\nconst previewMode = ref<'before' | 'after'>('after');\nconst showHistory = ref(false);\nconst aiHistory = ref<Record<string, AIHistoryRecord[]>>({});\n\n// AI \nconst quickSuggestions = [\n  '',\n  '/',\n  '',\n  '',\n  '',\n  '',\n  '',\n  'ARIA',\n];\n\n// \nconst showProgress = ref(false);\nconst progressDialogRef = ref<InstanceType<typeof ProgressDialog> | null>(null);\n\n// \nconst taskStore = useTaskStore();\n\n// \nconst showProjectTemplate = ref(false);\n\n// Bug \nconst showBugFix = ref(false);\nconst bugDescription = ref('');\nconst consoleError = ref('');\nconst bugFile = ref('');\n\n// \nconst folderInputRef = ref<HTMLInputElement | null>(null);\n\nconst currentProject = computed(() => {\n  return projects.value.find(p => p.id === currentId.value);\n});\n\nconst currentProjectHistory = computed(() => {\n  return aiHistory.value[currentId.value] || [];\n});\n\nconst comparisonPreviewHtml = computed(() => {\n  if (aiChanges.value.length === 0) return '';\n\n  const proj = currentProject.value;\n  if (!proj) return '';\n\n  // \n  const tempFiles: ProjectFile[] = proj.files.map(f => {\n    const change = aiChanges.value.find(c => c.path === f.path);\n    return {\n      ...f,\n      content: change ? (previewMode.value === 'after' ? change.newContent : change.oldContent) : f.content,\n    };\n  });\n\n  return buildPreviewFromFiles(tempFiles);\n});\n\n// \nconst projectTemplates = {\n  : {\n    name: '',\n    description: '',\n    icon: '',\n    color: '#4a9eff',\n    files: {\n      'index.html': `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title></title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div id=\"app\">\n    <div class=\"chat-container\">\n      <div class=\"message-list\" id=\"messageList\"></div>\n      <div class=\"input-area\">\n        <textarea id=\"userInput\" placeholder=\"...\"></textarea>\n        <button id=\"sendBtn\"></button>\n      </div>\n    </div>\n  </div>\n  <${'script'} src=\"https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js\"></${'script'}>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`,\n      'style.css': `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', sans-serif;\n  background: #1a1a1a;\n  color: #e0e0e0;\n}\n\n.chat-container {\n  max-width: 800px;\n  margin: 20px auto;\n  height: calc(100vh - 40px);\n  display: flex;\n  flex-direction: column;\n  background: #2a2a2a;\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.message-list {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n.message {\n  margin-bottom: 15px;\n  padding: 10px 15px;\n  border-radius: 8px;\n  max-width: 70%;\n}\n\n.message.user {\n  background: #4a9eff;\n  margin-left: auto;\n  text-align: right;\n}\n\n.message.assistant {\n  background: #3a3a3a;\n}\n\n.input-area {\n  padding: 15px;\n  background: #2a2a2a;\n  border-top: 1px solid #3a3a3a;\n  display: flex;\n  gap: 10px;\n}\n\n#userInput {\n  flex: 1;\n  padding: 10px;\n  background: #1a1a1a;\n  border: 1px solid #3a3a3a;\n  border-radius: 6px;\n  color: #e0e0e0;\n  resize: none;\n  height: 60px;\n}\n\n#sendBtn {\n  padding: 10px 20px;\n  background: #4a9eff;\n  border: none;\n  border-radius: 6px;\n  color: white;\n  cursor: pointer;\n  font-weight: 600;\n}\n\n#sendBtn:hover {\n  background: #357abd;\n}`,\n      'script.js': `// \nlet chatHistory = [];\n\n//  localStorage \nfunction loadHistory() {\n  try {\n    const saved = localStorage.getItem('chat_history_demo');\n    chatHistory = saved ? JSON.parse(saved) : [];\n  } catch (e) {\n    console.error(':', e);\n    chatHistory = [];\n  }\n  renderMessages();\n}\n\n//  localStorage\nfunction saveHistory() {\n  try {\n    localStorage.setItem('chat_history_demo', JSON.stringify(chatHistory));\n  } catch (e) {\n    console.error(':', e);\n  }\n}\n\n// \nfunction renderMessages() {\n  const list = document.getElementById('messageList');\n  list.innerHTML = '';\n  chatHistory.forEach(msg => {\n    const div = document.createElement('div');\n    div.className = 'message ' + msg.sender;\n    div.textContent = msg.content;\n    list.appendChild(div);\n  });\n  list.scrollTop = list.scrollHeight;\n}\n\n// \nasync function sendMessage() {\n  const input = document.getElementById('userInput');\n  const text = input.value.trim();\n  if (!text) return;\n\n  // \n  chatHistory.push({\n    id: Date.now(),\n    sender: 'user',\n    content: text,\n    timestamp: new Date().toLocaleTimeString()\n  });\n  input.value = '';\n  renderMessages();\n  saveHistory();\n\n  //  AI\n  const prompt = '\\\\n' + chatHistory.map(m => m.sender + ': ' + m.content).join('\\\\n');\n\n  let aiText = '';\n  await generate({\n    should_stream: true,\n    prompt: prompt,\n    on_stream_chunk: (chunk) => {\n      aiText += chunk;\n      // \n      const tempMsg = { id: 'temp', sender: 'assistant', content: aiText };\n      const tempIndex = chatHistory.findIndex(m => m.id === 'temp');\n      if (tempIndex >= 0) {\n        chatHistory[tempIndex] = tempMsg;\n      } else {\n        chatHistory.push(tempMsg);\n      }\n      renderMessages();\n    },\n    on_stream_end: () => {\n      // \n      const tempIndex = chatHistory.findIndex(m => m.id === 'temp');\n      if (tempIndex >= 0) {\n        chatHistory[tempIndex] = {\n          id: Date.now(),\n          sender: 'assistant',\n          content: aiText,\n          timestamp: new Date().toLocaleTimeString()\n        };\n      }\n      renderMessages();\n      saveHistory();\n    }\n  });\n}\n\n// \n$(() => {\n  loadHistory();\n  document.getElementById('sendBtn').addEventListener('click', sendMessage);\n  document.getElementById('userInput').addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  });\n});`,\n    },\n  },\n  : {\n    name: '',\n    description: 'HP/MP/',\n    icon: '',\n    color: '#10b981',\n    files: {\n      'index.html': `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title></title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div id=\"app\">\n    <div class=\"status-panel\">\n      <h2></h2>\n      <div class=\"stat-item\">\n        <label> (HP)</label>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill hp\" id=\"hpBar\"></div>\n        </div>\n        <span id=\"hpText\">0/0</span>\n      </div>\n      <div class=\"stat-item\">\n        <label> (MP)</label>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill mp\" id=\"mpBar\"></div>\n        </div>\n        <span id=\"mpText\">0/0</span>\n      </div>\n      <div class=\"stat-item\">\n        <label> (EXP)</label>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill exp\" id=\"expBar\"></div>\n        </div>\n        <span id=\"expText\">0/0</span>\n      </div>\n    </div>\n  </div>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`,\n      'style.css': `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', sans-serif;\n  background: #1a1a1a;\n  color: #e0e0e0;\n  padding: 20px;\n}\n\n.status-panel {\n  max-width: 500px;\n  margin: 0 auto;\n  background: #2a2a2a;\n  border-radius: 12px;\n  padding: 25px;\n  border: 1px solid #3a3a3a;\n}\n\nh2 {\n  margin-bottom: 20px;\n  color: #4a9eff;\n}\n\n.stat-item {\n  margin-bottom: 20px;\n}\n\n.stat-item label {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.progress-bar {\n  width: 100%;\n  height: 24px;\n  background: #1a1a1a;\n  border-radius: 12px;\n  overflow: hidden;\n  margin-bottom: 5px;\n}\n\n.progress-fill {\n  height: 100%;\n  transition: width 0.5s ease;\n  border-radius: 12px;\n}\n\n.progress-fill.hp {\n  background: linear-gradient(90deg, #ef4444, #10b981);\n}\n\n.progress-fill.mp {\n  background: linear-gradient(90deg, #3b82f6, #06b6d4);\n}\n\n.progress-fill.exp {\n  background: linear-gradient(90deg, #fbbf24, #f59e0b);\n}\n\n.stat-item span {\n  font-size: 13px;\n  color: #94a3b8;\n}`,\n      'script.js': `//  localStorage \nfunction loadStats() {\n  const saved = localStorage.getItem('rpg_stats_demo');\n  const data = saved ? JSON.parse(saved) : {};\n\n  const hp = data.hp || 850;\n  const maxHp = data.maxHp || 1000;\n  const mp = data.mp || 340;\n  const maxMp = data.maxMp || 500;\n  const exp = data.exp || 1250;\n  const maxExp = data.maxExp || 2000;\n\n  // \n  updateBar('hp', hp, maxHp);\n  updateBar('mp', mp, maxMp);\n  updateBar('exp', exp, maxExp);\n}\n\nfunction updateBar(type, current, max) {\n  const percent = (current / max) * 100;\n  document.getElementById(type + 'Bar').style.width = percent + '%';\n  document.getElementById(type + 'Text').textContent = current + '/' + max;\n}\n\n// \ndocument.addEventListener('DOMContentLoaded', loadStats);`,\n    },\n  },\n  : {\n    name: '',\n    description: '',\n    icon: '',\n    color: '#ec4899',\n    files: {\n      'index.html': `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title></title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div id=\"app\">\n    <div class=\"affection-container\">\n      <h2></h2>\n      <div class=\"character-grid\" id=\"characterGrid\"></div>\n    </div>\n  </div>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`,\n      'style.css': `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', sans-serif;\n  background: #1a1a1a;\n  color: #e0e0e0;\n  padding: 20px;\n}\n\n.affection-container {\n  max-width: 900px;\n  margin: 0 auto;\n}\n\nh2 {\n  margin-bottom: 25px;\n  color: #ec4899;\n  text-align: center;\n}\n\n.character-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 20px;\n}\n\n.character-card {\n  background: #2a2a2a;\n  border-radius: 12px;\n  padding: 20px;\n  border: 2px solid #3a3a3a;\n  transition: all 0.3s ease;\n}\n\n.character-card:hover {\n  transform: translateY(-5px);\n  border-color: #ec4899;\n  box-shadow: 0 10px 25px rgba(236, 72, 153, 0.3);\n}\n\n.character-name {\n  font-size: 18px;\n  font-weight: 600;\n  margin-bottom: 15px;\n  color: #e0e0e0;\n}\n\n.affection-bar {\n  width: 100%;\n  height: 20px;\n  background: #1a1a1a;\n  border-radius: 10px;\n  overflow: hidden;\n  margin-bottom: 8px;\n}\n\n.affection-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #ec4899, #f472b6);\n  transition: width 0.5s ease;\n  border-radius: 10px;\n}\n\n.affection-text {\n  font-size: 13px;\n  color: #94a3b8;\n}`,\n      'script.js': `//  localStorage \nfunction loadCharacters() {\n  const saved = localStorage.getItem('characters_affection_demo');\n  const data = saved ? JSON.parse(saved) : {};\n  const characters = data.characters || [\n    { name: ' A', affection: 75 },\n    { name: ' B', affection: 50 },\n    { name: ' C', affection: 90 }\n  ];\n\n  const grid = document.getElementById('characterGrid');\n  grid.innerHTML = '';\n\n  characters.forEach(char => {\n    const card = document.createElement('div');\n    card.className = 'character-card';\n    card.innerHTML = \\`\n      <div class=\"character-name\">\\${char.name}</div>\n      <div class=\"affection-bar\">\n        <div class=\"affection-fill\" style=\"width: \\${char.affection}%\"></div>\n      </div>\n      <div class=\"affection-text\">: \\${char.affection}/100</div>\n    \\`;\n    grid.appendChild(card);\n  });\n}\n\n// \ndocument.addEventListener('DOMContentLoaded', loadCharacters);`,\n    },\n  },\n};\n\n// \nfunction showProjectTemplateDialog() {\n  showProjectTemplate.value = true;\n}\n\n// \nfunction createProjectFromTemplate(templateKey: string) {\n  const template = projectTemplates[templateKey as keyof typeof projectTemplates];\n  if (!template) return;\n\n  const name = prompt(':', template.name);\n  if (!name || !name.trim()) return;\n\n  const newProj: Project = {\n    id: Date.now().toString(),\n    name: name.trim(),\n    files: Object.entries(template.files).map(([filename, content]) => ({\n      path: filename,\n      name: filename,\n      content: content,\n    })),\n  };\n\n  projects.value.push(newProj);\n  currentId.value = newProj.id;\n  currentFile.value = newProj.files[0]?.name || '';\n  code.value = newProj.files[0]?.content || '';\n  saveToChatVar();\n\n  showProjectTemplate.value = false;\n  window.toastr.success(' \"' + name.trim() + '\"');\n}\n\n// \nfunction triggerFolderImport() {\n  if (folderInputRef.value) {\n    folderInputRef.value.value = ''; // \n    folderInputRef.value.click();\n  }\n}\n\nasync function handleFolderImport(event: Event) {\n  const input = event.target as HTMLInputElement;\n  const files = input.files;\n\n  if (!files || files.length === 0) {\n    return;\n  }\n\n  try {\n    // \n    const firstFile = files[0];\n    const pathParts = firstFile.webkitRelativePath.split('/');\n    const folderName = pathParts[0] || '';\n\n    // \n    const projectName = prompt(':', folderName);\n    if (!projectName || !projectName.trim()) {\n      return;\n    }\n\n    // \n    const supportedExtensions = ['.html', '.css', '.js', '.ts', '.scss', '.sass', '.json', '.txt', '.md'];\n\n    // \n    const projectFiles: ProjectFile[] = [];\n    const fileReadPromises: Promise<void>[] = [];\n\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      const relativePath = file.webkitRelativePath.split('/').slice(1).join('/'); // \n\n      // /\n      if (!relativePath || relativePath.startsWith('.') || relativePath.includes('/.')) {\n        continue;\n      }\n\n      //  node_modulesdist \n      if (\n        relativePath.includes('node_modules/') ||\n        relativePath.includes('dist/') ||\n        relativePath.includes('.git/') ||\n        relativePath.includes('build/')\n      ) {\n        continue;\n      }\n\n      // \n      const extension = '.' + relativePath.split('.').pop()?.toLowerCase();\n      if (!supportedExtensions.includes(extension)) {\n        continue;\n      }\n\n      // \n      const readPromise = new Promise<void>((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = e => {\n          const content = e.target?.result as string;\n          const fileName = relativePath.split('/').pop() || relativePath;\n          projectFiles.push({\n            path: relativePath,\n            name: fileName,\n            content: content || '',\n          });\n          resolve();\n        };\n        reader.onerror = () => reject(new Error(`: ${relativePath}`));\n        reader.readAsText(file);\n      });\n\n      fileReadPromises.push(readPromise);\n    }\n\n    // \n    await Promise.all(fileReadPromises);\n\n    if (projectFiles.length === 0) {\n      window.toastr.warning('HTMLCSSJSTSSCSS ');\n      return;\n    }\n\n    // \n    const newProj: Project = {\n      id: Date.now().toString(),\n      name: projectName.trim(),\n      files: projectFiles,\n    };\n\n    projects.value.push(newProj);\n    currentId.value = newProj.id;\n    currentFile.value = newProj.files[0]?.path || '';\n    code.value = newProj.files[0]?.content || '';\n\n    saveToChatVar();\n    updatePreview();\n\n    window.toastr.success(`\"${projectName}\" ${projectFiles.length} `);\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error(': ' + (error as Error).message);\n  }\n}\n\nfunction createProject() {\n  const name = prompt(':');\n  if (!name || !name.trim()) return;\n\n  const htmlContent = `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>${name.trim()}</title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div class=\"container\">\n    <h1> ${name.trim()}!</h1>\n    <p></p>\n  </div>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`;\n\n  const cssContent = `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: #333;\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.container {\n  background: white;\n  padding: 60px 40px;\n  border-radius: 20px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  text-align: center;\n  max-width: 600px;\n}\n\nh1 {\n  font-size: 2.5em;\n  color: #667eea;\n  margin-bottom: 20px;\n}\n\np {\n  font-size: 1.2em;\n  color: #666;\n  line-height: 1.6;\n}`;\n\n  const jsContent = `console.log('');\n\n//  jQuery  DOM \n$(function() {\n  console.log('');\n\n  // ==========  ==========\n  const isInTavern = typeof SillyTavern !== 'undefined';\n\n  if (!isInTavern) {\n    console.log(' API ');\n  }\n\n  // ==========  localStorage==========\n  const storageKey = 'my_project_data'; // \n\n  // \n  function loadData() {\n    try {\n      const stored = localStorage.getItem(storageKey);\n      return stored ? JSON.parse(stored) : { count: 0 };\n    } catch (e) {\n      console.error(':', e);\n      return { count: 0 };\n    }\n  }\n\n  //  localStorage\n  function saveData(data) {\n    try {\n      localStorage.setItem(storageKey, JSON.stringify(data));\n      console.log(' localStorage:', data);\n    } catch (e) {\n      console.error(':', e);\n    }\n  }\n\n  // \n  let myData = loadData();\n  console.log(':', myData);\n\n  // ==========  ==========\n  const container = $('.container');\n  if (container.length) {\n    container.on('click', function() {\n      myData.count++;\n      saveData(myData);\n      if (typeof toastr !== 'undefined') {\n        toastr.success(\\`: \\${myData.count}\\`);\n      } else {\n        alert(\\`: \\${myData.count}\\`);\n      }\n    });\n  }\n\n  // \n  $(window).on('pagehide', function() {\n    saveData(myData);\n  });\n});`;\n\n  const newProj: Project = {\n    id: Date.now().toString(),\n    name: name.trim(),\n    files: [\n      { path: 'index.html', name: 'index.html', content: htmlContent },\n      { path: 'style.css', name: 'style.css', content: cssContent },\n      { path: 'script.js', name: 'script.js', content: jsContent },\n    ],\n  };\n\n  projects.value.push(newProj);\n  console.log(':', newProj.name, ':', projects.value.length);\n\n  // \n  saveToChatVar();\n\n  currentId.value = newProj.id;\n  currentFile.value = 'index.html';\n  code.value = htmlContent;\n  updatePreview();\n  toastr.success(` \"${newProj.name}\" `);\n}\n\nfunction selectProject(id: string) {\n  currentId.value = id;\n  const proj = currentProject.value;\n  if (proj && proj.files.length > 0) {\n    currentFile.value = proj.files[0].path;\n    code.value = proj.files[0].content;\n    updatePreview();\n  } else {\n    currentFile.value = '';\n    code.value = '';\n    previewHtml.value = '';\n  }\n}\n\nfunction selectFile(path: string) {\n  currentFile.value = path;\n  const proj = currentProject.value;\n  if (proj) {\n    const file = proj.files.find(f => f.path === path);\n    if (file) {\n      code.value = file.content;\n    }\n  }\n}\n\nfunction saveCode() {\n  const proj = currentProject.value;\n  if (!proj || !currentFile.value) {\n    toastr.error('');\n    return;\n  }\n\n  const file = proj.files.find(f => f.path === currentFile.value);\n  if (file) {\n    file.content = code.value;\n\n    // \n    if (autoSaveTimer) {\n      clearTimeout(autoSaveTimer);\n      autoSaveTimer = null;\n    }\n\n    saveToChatVar();\n    updatePreview();\n    toastr.success('');\n  }\n}\n\nfunction deleteProject(id: string) {\n  const proj = projects.value.find(p => p.id === id);\n  if (!proj) return;\n\n  if (!confirm(` \"${proj.name}\" `)) return;\n\n  projects.value = projects.value.filter(p => p.id !== id);\n  console.log(':', projects.value.length);\n\n  if (currentId.value === id) {\n    currentId.value = '';\n    currentFile.value = '';\n    code.value = '';\n    previewHtml.value = '';\n  }\n\n  // \n  saveToChatVar();\n  toastr.success(` \"${proj.name}\" `);\n}\n\n// \nfunction createNewFolder() {\n  const proj = currentProject.value;\n  if (!proj) return;\n\n  const folderPath = prompt('\\ncss  js/utils', '');\n  if (!folderPath || !folderPath.trim()) return;\n\n  const trimmedPath = folderPath.trim().replace(/\\/$/, ''); // \n\n  //  .gitkeep \n  const gitkeepPath = `${trimmedPath}/.gitkeep`;\n\n  // \n  if (proj.files.some(f => f.path.startsWith(`${trimmedPath}/`))) {\n    window.toastr.warning(` \"${trimmedPath}\" `);\n    return;\n  }\n\n  // \n  const newFile: ProjectFile = {\n    path: gitkeepPath,\n    name: '.gitkeep',\n    content: '# \\n',\n  };\n\n  proj.files.push(newFile);\n  saveToChatVar();\n\n  window.toastr.success(` \"${trimmedPath}\" `);\n}\n\n// \nfunction showNewFileDialog() {\n  const proj = currentProject.value;\n  if (!proj) return;\n\n  // \n  const folders = new Set<string>();\n  folders.add(''); // \n\n  proj.files.forEach(file => {\n    const parts = file.path.split('/');\n    if (parts.length > 1) {\n      // \n      for (let i = 1; i < parts.length; i++) {\n        const folderPath = parts.slice(0, i).join('/');\n        if (folderPath) folders.add(folderPath);\n      }\n    }\n  });\n\n  const folderList = Array.from(folders).sort();\n\n  // 1. \n  const fileTypes = [\n    { name: 'HTML ', ext: '.html', icon: '' },\n    { name: 'CSS ', ext: '.css', icon: '' },\n    { name: 'JavaScript ', ext: '.js', icon: '' },\n    { name: 'TypeScript ', ext: '.ts', icon: '' },\n    { name: 'JSON ', ext: '.json', icon: '' },\n    { name: 'Markdown ', ext: '.md', icon: '' },\n    { name: '', ext: '', icon: '' },\n  ];\n\n  const typeOptions = fileTypes.map((t, i) => `${i + 1}. ${t.icon} ${t.name} (${t.ext || ''})`).join('\\n');\n  const typeChoice = prompt(` 1-${fileTypes.length}\\n\\n${typeOptions}`, '1');\n\n  if (!typeChoice) return;\n\n  const typeIndex = parseInt(typeChoice) - 1;\n  if (typeIndex < 0 || typeIndex >= fileTypes.length) {\n    window.toastr.error('');\n    return;\n  }\n\n  const selectedType = fileTypes[typeIndex];\n\n  // 2. \n  let targetFolder = '';\n  if (folderList.length > 1) {\n    const folderOptions =\n      folderList.length > 5\n        ? ''\n        : `\\n\\n${folderList.map((f, i) => `${i + 1}. ${f || ''}`).join('\\n')}\\n\\n`;\n\n    const folderChoice = prompt(folderOptions, '1');\n    if (!folderChoice) return;\n\n    // \n    const folderIndex = parseInt(folderChoice) - 1;\n    if (folderIndex >= 0 && folderIndex < folderList.length) {\n      targetFolder = folderList[folderIndex];\n    } else {\n      // \n      targetFolder = folderChoice.trim().replace(/\\/$/, '');\n    }\n  }\n\n  // 3. \n  const fileName = prompt(\n    `${selectedType.ext ? ` ${selectedType.ext}` : ''}`,\n    selectedType.ext ? `new-file` : 'newfile.txt',\n  );\n\n  if (!fileName || !fileName.trim()) return;\n\n  let trimmedName = fileName.trim();\n\n  // \n  if (selectedType.ext && !trimmedName.endsWith(selectedType.ext)) {\n    trimmedName += selectedType.ext;\n  }\n\n  // \n  const fullPath = targetFolder ? `${targetFolder}/${trimmedName}` : trimmedName;\n\n  // \n  if (proj.files.some(f => f.path === fullPath)) {\n    window.toastr.error(` \"${fullPath}\" `);\n    return;\n  }\n\n  // \n  const extension = trimmedName.split('.').pop()?.toLowerCase();\n  let defaultContent = '';\n\n  switch (extension) {\n    case 'html':\n      defaultContent =\n        '<!DOCTYPE html>\\n' +\n        '<html lang=\"zh-CN\">\\n' +\n        '<head>\\n' +\n        '  <meta charset=\"UTF-8\">\\n' +\n        '  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n' +\n        '  <title>' +\n        trimmedName.replace('.html', '') +\n        '</title>\\n' +\n        '  <link rel=\"stylesheet\" href=\"style.css\">\\n' +\n        '</head>\\n' +\n        '<body>\\n' +\n        '  <div class=\"container\">\\n' +\n        '    <h1></h1>\\n' +\n        '  </div>\\n' +\n        '  <' +\n        'script src=\"script.js\"></' +\n        'script>\\n' +\n        '</body>\\n' +\n        '</html>';\n      break;\n    case 'css':\n    case 'scss':\n    case 'sass':\n      defaultContent = `/* ${trimmedName} */\\n\\n* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n`;\n      break;\n    case 'js':\n    case 'ts':\n      defaultContent =\n        `// ${trimmedName}\\n\\nconsole.log('${trimmedName} ');\\n\\n$` + `(function() {\\n  // \\n});\\n`;\n      break;\n    case 'json':\n      defaultContent = `{\\n  \"name\": \"${trimmedName.replace('.json', '')}\",\\n  \"version\": \"1.0.0\"\\n}`;\n      break;\n    case 'md':\n      defaultContent = `# ${trimmedName.replace(/\\.md$/, '')}\\n\\n`;\n      break;\n    default:\n      defaultContent = '';\n  }\n\n  // \n  const newFile: ProjectFile = {\n    path: fullPath,\n    name: trimmedName,\n    content: defaultContent,\n  };\n\n  proj.files.push(newFile);\n  currentFile.value = fullPath;\n  code.value = defaultContent;\n\n  saveToChatVar();\n  updatePreview();\n\n  window.toastr.success(` \"${fullPath}\" `);\n}\n\n// \nfunction deleteFile(filePath: string) {\n  const proj = currentProject.value;\n  if (!proj) return;\n\n  const file = proj.files.find(f => f.path === filePath);\n  if (!file) return;\n\n  if (!confirm(` \"${file.path}\" `)) return;\n\n  proj.files = proj.files.filter(f => f.path !== filePath);\n\n  // \n  if (currentFile.value === filePath) {\n    if (proj.files.length > 0) {\n      currentFile.value = proj.files[0].path;\n      code.value = proj.files[0].content;\n    } else {\n      currentFile.value = '';\n      code.value = '';\n    }\n  }\n\n  saveToChatVar();\n  updatePreview();\n\n  window.toastr.success(` \"${file.path}\" `);\n}\n\nfunction getFileIcon(path: string): string {\n  const ext = path.split('.').pop()?.toLowerCase();\n  if (ext === 'html') return 'fa-brands fa-html5';\n  if (ext === 'css') return 'fa-brands fa-css3-alt';\n  if (ext === 'js') return 'fa-brands fa-js';\n  return 'fa-solid fa-file-code';\n}\n\nfunction buildPreviewFromFiles(files: ProjectFile[]): string {\n  const htmlFile = files.find(f => f.path.endsWith('.html'));\n  const cssFile = files.find(f => f.path.endsWith('.css'));\n  const jsFile = files.find(f => f.path.endsWith('.js'));\n\n  if (!htmlFile) return '';\n\n  const html = htmlFile.content;\n  const headTag = 'head';\n  const bodyTag = 'body';\n  const headMatch = html.match(new RegExp(`<${headTag}[^>]*>([\\\\s\\\\S]*?)</${headTag}>`, 'i'));\n  const bodyMatch = html.match(new RegExp(`<${bodyTag}[^>]*>([\\\\s\\\\S]*?)</${bodyTag}>`, 'i'));\n\n  let headContent = headMatch ? headMatch[1] : '';\n  let bodyContent = bodyMatch ? bodyMatch[1] : html;\n\n  const linkTagRegex = /<link[^>]*rel=[\"']stylesheet[\"'][^>]*>/gi;\n  const scriptTagRegex = new RegExp('<' + 'script[^>]*></' + 'script>', 'gi');\n  headContent = headContent.replace(linkTagRegex, '');\n  bodyContent = bodyContent.replace(scriptTagRegex, '');\n\n  const scriptTag = 'script';\n  const styleTag = 'style';\n  return `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  ${headContent}\n  <${styleTag}>\n    html, body {\n      margin: 0 !important;\n      padding: 0 !important;\n      width: 100% !important;\n      height: auto !important;\n      min-height: 800px !important;\n      overflow: visible !important;\n    }\n    ${cssFile?.content || ''}\n  </${styleTag}>\n  <${scriptTag} src=\"https://code.jquery.com/jquery-3.7.1.min.js\"></${scriptTag}>\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\">\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js\"></${scriptTag}>\n</head>\n<body>\n  ${bodyContent}\n  <${scriptTag}>${jsFile?.content || ''}</${scriptTag}>\n</body>\n</html>`;\n}\n\nfunction updatePreview() {\n  const proj = currentProject.value;\n  if (!proj) {\n    previewHtml.value = '';\n    return;\n  }\n  previewHtml.value = buildPreviewFromFiles(proj.files);\n}\n\nfunction saveToChatVar() {\n  try {\n    //  SillyTavern.chatId  getCurrentChatId() \n    const chatId = SillyTavern.chatId;\n    console.log(' localStorage ID:', chatId);\n\n    const dataToSave = {\n      frontend_projects_files: projects.value,\n      frontend_ai_history: aiHistory.value,\n    };\n\n    //  localStorage\n    const scriptId = getScriptIdSafe();\n    const storageKey = chatId ? `${scriptId}_frontend_projects_${chatId}` : `${scriptId}_frontend_projects_global`;\n\n    localStorage.setItem(storageKey, JSON.stringify(dataToSave));\n    console.log(' localStorage', dataToSave.frontend_projects_files.length, '');\n  } catch (e) {\n    console.error(':', e);\n  }\n}\n\nfunction loadFromChatVar() {\n  try {\n    //  getChatIdSafe() \n    const chatId = getChatIdSafe();\n    console.log(' localStorage  ID:', chatId);\n\n    //  localStorage \n    const scriptId = getScriptIdSafe();\n    const storageKey = chatId ? `${scriptId}_frontend_projects_${chatId}` : `${scriptId}_frontend_projects_global`;\n\n    const savedData = localStorage.getItem(storageKey);\n    let data = null;\n\n    if (savedData) {\n      try {\n        data = JSON.parse(savedData);\n        console.log(' localStorage :', data);\n      } catch (parseError) {\n        console.error(' localStorage :', parseError);\n      }\n    }\n\n    if (data?.frontend_projects_files && Array.isArray(data.frontend_projects_files)) {\n      projects.value = data.frontend_projects_files;\n      console.log(':', projects.value.length, '');\n    } else {\n      console.log('');\n      projects.value = [];\n    }\n\n    if (data?.frontend_ai_history) {\n      aiHistory.value = data.frontend_ai_history;\n      console.log('');\n    } else {\n      aiHistory.value = {};\n    }\n  } catch (e) {\n    console.error(':', e);\n  }\n}\n\n// \nloadFromChatVar();\n\n//  getChatIdSafe\nwatch(\n  () => getChatIdSafe(),\n  () => {\n    loadFromChatVar();\n    currentId.value = '';\n    currentFile.value = '';\n    code.value = '';\n    previewHtml.value = '';\n  },\n);\n\n// \nlet autoSaveTimer: ReturnType<typeof setTimeout> | null = null;\nwatchEffect(() => {\n  // \n  if (currentFile.value && code.value !== undefined) {\n    const proj = currentProject.value;\n    if (proj) {\n      const file = proj.files.find(f => f.path === currentFile.value);\n      if (file && file.content !== code.value) {\n        // \n        file.content = code.value;\n\n        // \n        if (autoSaveTimer) {\n          clearTimeout(autoSaveTimer);\n        }\n\n        //  1 \n        autoSaveTimer = setTimeout(() => {\n          saveToChatVar();\n          console.log(':', currentFile.value);\n        }, 1000);\n      }\n    }\n  }\n});\n\n// \nlet previewTimer: ReturnType<typeof setTimeout> | null = null;\nwatch(\n  () => [currentFile.value, code.value],\n  () => {\n    if (previewTimer) {\n      clearTimeout(previewTimer);\n    }\n    previewTimer = setTimeout(updatePreview, 500);\n  },\n  { deep: true },\n);\n\n// \nonBeforeUnmount(() => {\n  console.log('...');\n\n  // \n  if (autoSaveTimer) {\n    clearTimeout(autoSaveTimer);\n  }\n  if (previewTimer) {\n    clearTimeout(previewTimer);\n  }\n\n  // \n  if (currentFile.value && code.value !== undefined) {\n    const proj = currentProject.value;\n    if (proj) {\n      const file = proj.files.find(f => f.path === currentFile.value);\n      if (file) {\n        file.content = code.value;\n      }\n    }\n  }\n\n  // \n  saveToChatVar();\n  console.log('');\n});\n\nfunction showAIDialog() {\n  showAI.value = true;\n  aiPrompt.value = '';\n}\n\nfunction closeAIDialog() {\n  showAI.value = false;\n  aiPrompt.value = '';\n}\n\n// Bug \nfunction showBugFixDialog() {\n  showBugFix.value = true;\n  bugDescription.value = '';\n  consoleError.value = '';\n  bugFile.value = '';\n}\n\nfunction closeBugFixDialog() {\n  showBugFix.value = false;\n  bugDescription.value = '';\n  consoleError.value = '';\n  bugFile.value = '';\n}\n\nasync function fixBugWithAI() {\n  const proj = currentProject.value;\n  if (!proj) {\n    window.toastr.error('');\n    return;\n  }\n\n  if (!bugDescription.value.trim()) {\n    window.toastr.error('');\n    return;\n  }\n\n  aiGenerating.value = true;\n  showProgress.value = true;\n  let normalizedEndpoint = '';\n\n  // \n  const taskId = taskStore.createTask('ui_modify', `  Bug: ${bugDescription.value.slice(0, 30)}...`);\n\n  try {\n    //  1: \n    progressDialogRef.value?.setProgress(5);\n    progressDialogRef.value?.setMessage(' Bug ...');\n    taskStore.updateTaskProgress(taskId, 5, ' Bug ...');\n    await new Promise(r => setTimeout(r, 100));\n\n    //  API \n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      throw new Error(' ID');\n    }\n\n    //  settings store  API \n    const settings = useSettingsStore().settings;\n    const apiEndpoint = settings.api_endpoint;\n    const apiKey = settings.api_key;\n    const model = settings.model || 'gpt-4o-mini';\n\n    if (!apiEndpoint || !apiKey) {\n      throw new Error('\"\" API');\n    }\n\n    normalizedEndpoint = normalizeApiEndpoint(apiEndpoint);\n\n    progressDialogRef.value?.setProgress(15);\n    progressDialogRef.value?.setMessage(' Bug ...');\n    taskStore.updateTaskProgress(taskId, 15, ' Bug ...');\n    await new Promise(r => setTimeout(r, 100));\n\n    //  Bug \n    const systemPrompt = ` Bug \n\n# \n\n1. ****\n2. ****\n3. **** Console \n4. ****\n\n#  Bug \n\n****\n- ID \n-  \\`$(function() {})\\` \n-  JavaScript \n\n****\n-  CSS displayvisibilityz-index\n-  DOM \n- \n\n****\n-  insertOrAssignVariables \n- \n- \n\n****\n- \n- \n- \n\n# \n\n\n\n\\`\\`\\`\nFILE_START: \n[]\nFILE_END\n\\`\\`\\`\n\n`;\n\n    const currentFiles = proj.files.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n\n    const userPrompt = `# \n${currentFiles}\n\n# Bug \n${bugDescription.value}\n\n${\n  consoleError.value.trim()\n    ? `# Console \n\\`\\`\\`\n${consoleError.value}\n\\`\\`\\`\n`\n    : ''\n}\n\n${\n  bugFile.value\n    ? `# \n${bugFile.value}\n`\n    : ''\n}\n\n# \n1.  bug\n2. \n3. \n4. \n\n system `;\n\n    progressDialogRef.value?.setProgress(25);\n    progressDialogRef.value?.setMessage(' AI ...');\n    taskStore.updateTaskProgress(taskId, 25, ' AI ...');\n    await new Promise(r => setTimeout(r, 100));\n\n    // \n    progressDialogRef.value?.setProgress(30);\n    progressDialogRef.value?.setMessage(' AI  bug...');\n    taskStore.updateTaskProgress(taskId, 30, ' AI  bug...');\n    await new Promise(r => setTimeout(r, 100));\n\n    const response = await fetch(normalizedEndpoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${apiKey}`,\n      },\n      body: JSON.stringify({\n        model: model,\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: userPrompt },\n        ],\n        temperature: 0.3, // \n      }),\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`API  (${response.status}): ${errorText}`);\n    }\n\n    progressDialogRef.value?.setProgress(60);\n    progressDialogRef.value?.setMessage(' AI ...');\n    taskStore.updateTaskProgress(taskId, 60, ' AI ...');\n    await new Promise(r => setTimeout(r, 100));\n\n    const data = await response.json();\n    const resultText = data.choices?.[0]?.message?.content || '';\n\n    if (!resultText) {\n      throw new Error('AI ');\n    }\n\n    progressDialogRef.value?.setProgress(75);\n    progressDialogRef.value?.setMessage('...');\n    taskStore.updateTaskProgress(taskId, 75, '...');\n    await new Promise(r => setTimeout(r, 100));\n\n    //  AI \n    const fileRegex = /FILE_START:\\s*(.+?)\\s*\\n([\\s\\S]*?)\\nFILE_END/g;\n    const changes: AIChange[] = [];\n    let match;\n\n    while ((match = fileRegex.exec(resultText)) !== null) {\n      const path = match[1].trim();\n      const newContent = match[2].trim();\n      const existingFile = proj.files.find(f => f.path === path);\n\n      if (existingFile) {\n        changes.push({\n          path,\n          oldContent: existingFile.content,\n          newContent,\n        });\n      }\n    }\n\n    if (changes.length === 0) {\n      throw new Error('AI ');\n    }\n\n    progressDialogRef.value?.setProgress(85);\n    progressDialogRef.value?.setMessage('...');\n    taskStore.updateTaskProgress(taskId, 85, '...');\n    await new Promise(r => setTimeout(r, 100));\n\n    // \n    if (!aiHistory.value[proj.id]) {\n      aiHistory.value[proj.id] = [];\n    }\n    aiHistory.value[proj.id].unshift({\n      timestamp: new Date().toISOString(),\n      prompt: `Bug : ${bugDescription.value}`,\n      changes: klona(changes),\n    });\n\n    // \n    aiChanges.value = changes;\n    showComparison.value = true;\n    previewMode.value = 'after';\n\n    progressDialogRef.value?.setProgress(95);\n    progressDialogRef.value?.setMessage(`Bug  (${changes.length} )`);\n    taskStore.updateTaskProgress(taskId, 95, `Bug  (${changes.length} )`);\n    await new Promise(r => setTimeout(r, 100));\n\n    // \n    progressDialogRef.value?.setProgress(100);\n    progressDialogRef.value?.setMessage('Bug ');\n    taskStore.updateTaskProgress(taskId, 100, 'Bug ');\n    taskStore.completeTask(taskId, { changedFiles: changes.length });\n    setTimeout(() => {\n      showProgress.value = false;\n      showBugFix.value = false;\n      window.toastr.success(`AI `);\n    }, 800);\n  } catch (error: any) {\n    console.error('Bug :', error);\n    const errorMsg = error?.message || String(error);\n    window.toastr.error(`Bug : ${errorMsg}`);\n    taskStore.failTask(taskId, errorMsg);\n    showProgress.value = false;\n  } finally {\n    aiGenerating.value = false;\n  }\n}\n\nasync function generateWithAI() {\n  if (!aiPrompt.value.trim() || aiGenerating.value) return;\n\n  const proj = currentProject.value;\n  if (!proj) {\n    toastr.error('');\n    return;\n  }\n\n  // \n  const vaguePhrases = ['', '', '', '', '', '', ''];\n  const prompt = aiPrompt.value.trim();\n  const isVague = vaguePhrases.some(phrase => {\n    const regex = new RegExp(`^${phrase}[\\\\s]*$`, 'i');\n    return regex.test(prompt);\n  });\n\n  if (isVague) {\n    toastr.warning(\n      '\\n\\n\\n' +\n        ' \"\"\\n' +\n        ' \"\"\\n\\n' +\n        ' \"\"\\n' +\n        ' \"\"',\n      '',\n      { timeOut: 6000 },\n    );\n    return;\n  }\n\n  aiGenerating.value = true;\n  showProgress.value = true;\n  let normalizedEndpoint = ''; // \n\n  // \n  const taskId = taskStore.createTask('ui_generate', ` AI : ${aiPrompt.value.slice(0, 30)}...`);\n\n  try {\n    // 1: \n    progressDialogRef.value?.setProgress(5);\n    progressDialogRef.value?.setMessage(' AI ...');\n    taskStore.updateTaskProgress(taskId, 5, ' AI ...');\n    await new Promise(r => setTimeout(r, 100)); //  DOM \n\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      toastr.error(' ID');\n      aiGenerating.value = false;\n      showProgress.value = false;\n      return;\n    }\n\n    //  settings store  API \n    const settings = useSettingsStore().settings;\n    const apiEndpoint = settings.api_endpoint;\n    const apiKey = settings.api_key;\n    const model = settings.model || 'gpt-4o-mini';\n    const temperature = settings.temperature || 0.7;\n    const maxTokens = settings.max_tokens || 4000;\n\n    if (!apiEndpoint || !apiKey) {\n      toastr.error('\"\" API');\n      aiGenerating.value = false;\n      showProgress.value = false;\n      return;\n    }\n\n    //  API \n    try {\n      normalizedEndpoint = normalizeApiEndpoint(apiEndpoint);\n      console.log(' :', apiEndpoint);\n      console.log(' :', normalizedEndpoint);\n    } catch (e) {\n      toastr.error('API ' + (e as Error).message);\n      aiGenerating.value = false;\n      showProgress.value = false;\n      return;\n    }\n\n    //  max_tokens \n    if (maxTokens < 2000) {\n      toastr.warning(` max_tokens  ${maxTokens} AI  4000 `);\n    }\n\n    progressDialogRef.value?.setProgress(15);\n    progressDialogRef.value?.setMessage('...');\n    taskStore.updateTaskProgress(taskId, 15, '...');\n    await new Promise(r => setTimeout(r, 100)); //  DOM \n\n    const systemPrompt = ` SillyTavern\n\n# \n${proj.files.map(f => `- ${f.path}`).join('\\n')}\n\n#  API \n## \n- jQuery ($): DOM \n- toastr: \n- gsap: \n- lodash (_): \n- zod (z): \n\n##  API\n****\n- \\`getVariables({ type: 'chat' })\\`: \n- \\`insertOrAssignVariables(data, { type: 'chat' })\\`: \n- \\`replaceVariables(data, { type: 'chat' })\\`: \n\n****\n\\`\\`\\`javascript\n//   API \nconst isInTavern = typeof SillyTavern !== 'undefined' && typeof getVariables !== 'undefined';\n\n// \nfunction loadData() {\n  if (isInTavern) {\n    const data = getVariables({ type: 'chat' });\n    return data.my_key || { count: 0 };\n  } else {\n    //  localStorage\n    const stored = localStorage.getItem('my_key');\n    return stored ? JSON.parse(stored) : { count: 0 };\n  }\n}\n\n// \nfunction saveData(data) {\n  if (isInTavern) {\n    insertOrAssignVariables({ my_key: data }, { type: 'chat' });\n  } else {\n    localStorage.setItem('my_key', JSON.stringify(data));\n  }\n}\n\n// \nlet myData = loadData();\nmyData.count++;\nsaveData(myData);\n\\`\\`\\`\n\n** API**\n- getChatMessages(): \n- getCurrentCharacter(): \n- getWorldbook(): \n- replaceWorldbook(data): \n- eventOn(event, callback): \n- getIframeName():  iframe \n- triggerSlash(command):  STScript \n- SillyTavern.getCurrentChatId():  ID\n\n## \n\n****  AI \n\n****\n\n\\`\\`\\`javascript\n// 1. \nasync function updateStatusFromMessages() {\n  //  TavernHelper \n  if (typeof (window as any).TavernHelper === 'undefined' || \n      typeof (window as any).TavernHelper.getChatMessages !== 'function') {\n    return; // TavernHelper \n  }\n\n  const messages = (window as any).TavernHelper.getChatMessages('0-{{lastMessageId}}');\n  if (!messages || messages.length === 0) return;\n\n  //  AI  is_user: false\n  const latestAIMessage = messages.slice().reverse().find(m => !m.is_user);\n  if (!latestAIMessage) return;\n\n  const content = latestAIMessage.mes; // \n\n  // 2. \n  const statusMatch = content.match(/\\`\\`\\`json([\\\\s\\\\S]*?)\\`\\`\\`/);\n  if (statusMatch) {\n    try {\n      const status = JSON.parse(statusMatch[1]);\n      // 3. \n      $('#health').text(status.health || 100);\n      $('#level').text(status.level || 1);\n    } catch (e) {\n      console.error(':', e);\n    }\n  }\n\n  // 80\n  const healthMatch = content.match(/[:](\\\\d+)/);\n  if (healthMatch) {\n    $('#health').text(healthMatch[1]);\n  }\n}\n\n// 4. \n$(function() {\n  updateStatusFromMessages();\n});\n\n// 5. \nif (typeof eventOn === 'function') {\n  eventOn('MESSAGE_RECEIVED', () => {\n    updateStatusFromMessages();\n  });\n}\n\\`\\`\\`\n\n---\n\n##   XML \n\n**** AI  XML  \\`<state_bar><i></i></state_bar>\\`\n\n****\n1.  \\`<state_bar>\\` \n2.  XML  HTML\n3. \n\n****\n\n\\`\\`\\`typescript\n// ===== 1.  =====\nfunction extractStateBar(text: string): string | null {\n  const match = text.match(/<state_bar>([\\\\s\\\\S]*?)<\\\\/state_bar>/i);\n  return match ? match[1].trim() : null;\n}\n\n// ===== 2. XML  HTML=====\nfunction convertXmlToHtml(xml: string): string {\n  let html = xml;\n\n  // <i><2i><3i> \n  html = html.replace(/<i>([\\\\s\\\\S]*?)<\\\\/i>/g, '<div class=\"state-item indent-1\">$1</div>');\n  html = html.replace(/<2i>([\\\\s\\\\S]*?)<\\\\/2i>/g, '<div class=\"state-item indent-2\">$1</div>');\n  html = html.replace(/<3i>([\\\\s\\\\S]*?)<\\\\/3i>/g, '<div class=\"state-item indent-3\">$1</div>');\n\n  // \n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-date\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-time\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-location\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-physical\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-mental\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-current\"> $1</div>');\n\n  //  <></>\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g,\n    '<div class=\"state-colored\" style=\"border-left: 3px solid #ff6b6b; background: rgba(255,107,107,0.1);\">$1</div>');\n\n  // \n  html = html.replace(/<([^>\\\\/\\\\s]+)>([\\\\s\\\\S]*?)<\\\\/\\\\1>/g, '<div class=\"state-generic\">$2</div>');\n\n  return html;\n}\n\n// ===== 3.  =====\nasync function updateStateBar() {\n  //  TavernHelper \n  if (typeof (window as any).TavernHelper === 'undefined' || \n      typeof (window as any).TavernHelper.getChatMessages !== 'function') {\n    return; // TavernHelper \n  }\n\n  const messages = (window as any).TavernHelper.getChatMessages('0-{{lastMessageId}}');\n  if (!messages || messages.length === 0) return;\n\n  //  AI \n  const latestAI = messages.slice().reverse().find(m => !m.is_user);\n  if (!latestAI) return;\n\n  // \n  const stateBarXml = extractStateBar(latestAI.mes);\n  if (stateBarXml) {\n    const stateBarHtml = convertXmlToHtml(stateBarXml);\n\n    // \n    const container = $('#state-bar-container');\n    container.fadeOut(200, () => {\n      container.html(stateBarHtml);\n      container.fadeIn(200);\n    });\n  }\n}\n\n// ===== 4.  =====\n$(function() {\n  updateStateBar(); // \n\n  // \n  if (typeof eventOn === 'function') {\n    eventOn('MESSAGE_RECEIVED', updateStateBar);\n  }\n});\n\\`\\`\\`\n\n** CSS **\n\n\\`\\`\\`scss\n#state-bar-container {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 12px;\n  padding: 16px;\n  color: white;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n  margin-bottom: 16px;\n}\n\n.state-item {\n  padding: 8px 12px;\n  margin: 6px 0;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  backdrop-filter: blur(10px);\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.15);\n    transform: translateX(4px);\n  }\n}\n\n// \n.indent-1 { margin-left: 20px; }\n.indent-2 { margin-left: 40px; }\n.indent-3 { margin-left: 60px; }\n\n// \n.state-date, .state-time, .state-location {\n  font-weight: 600;\n  font-size: 14px;\n  padding: 8px 12px;\n  margin: 8px 0;\n  border-radius: 6px;\n}\n\n.state-date { background: rgba(100, 181, 246, 0.2); }\n.state-time { background: rgba(129, 199, 132, 0.2); }\n.state-location { background: rgba(255, 167, 38, 0.2); }\n\n.state-physical {\n  padding: 10px 14px;\n  margin: 8px 0;\n  background: rgba(255, 107, 107, 0.15);\n  border-left: 4px solid #ff6b6b;\n  border-radius: 4px;\n}\n\n.state-mental {\n  padding: 10px 14px;\n  margin: 8px 0;\n  background: rgba(149, 117, 205, 0.15);\n  border-left: 4px solid #9575cd;\n  border-radius: 4px;\n}\n\n.state-colored {\n  padding: 10px 14px;\n  margin: 8px 0;\n  border-radius: 4px;\n  backdrop-filter: blur(5px);\n}\n\n.state-generic {\n  padding: 6px 10px;\n  margin: 4px 0;\n  opacity: 0.9;\n}\n\\`\\`\\`\n\n** GSAP **\n\n\\`\\`\\`typescript\n//  GSAP \nfunction updateStateBarWithAnimation(stateBarHtml: string) {\n  const container = $('#state-bar-container');\n\n  // \n  gsap.to(container, {\n    opacity: 0,\n    y: -10,\n    duration: 0.2,\n    onComplete: () => {\n      container.html(stateBarHtml);\n\n      // \n      gsap.to(container, {\n        opacity: 1,\n        y: 0,\n        duration: 0.3,\n        ease: 'power2.out'\n      });\n\n      // \n      gsap.from('.state-item', {\n        opacity: 0,\n        x: -20,\n        duration: 0.4,\n        stagger: 0.05,\n        ease: 'back.out(1.2)'\n      });\n    }\n  });\n}\n\\`\\`\\`\n\\`\\`\\`\n\n****\n-  \\`getChatMessages()\\` \n- \n-  jQuery  DOM \n-  MESSAGE_RECEIVED \n\n## \n\n****\n**** index.html\n\n** **\n\n\\`\\`\\`javascript\n//  \n$(function() {\n  let chatHistory = [];           //  \n  function renderMessages() {}    //  \n  function handleSend() {}        //  \n\n  //  \n});\n\n//  \nlet chatHistory = [];              //  \nfunction renderMessages() {}       //  \nfunction handleSend() {}           //  \n\n$(function() {\n  // \n  loadChatHistory();\n  setupStreamListeners();\n});\n\\`\\`\\`\n\n****\n1. let/const\n2. function\n3. \\`$(function() {})\\` - \n4. \\`$(window).on('pagehide', ...)\\` - \n\n** generation_id **\n****** generation_id **\n-  AI \n- \n- \n\n****\n1. ****index.html + index.ts\n2. \n3.  \\`generate(text)\\`** generation_id**\n4. **** \\`id === currentGenerationId\\`\n   - \\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\`:  token \n   - \\`iframe_events.STREAM_TOKEN_RECEIVED_FULLY\\`: \n   - \\`iframe_events.GENERATION_ENDED\\`: \n5.  \\`setChatMessages\\`\\`createChatMessages\\`  \\`{ refresh: 'none' }\\` \n\n**  API generate()**\n- **\\`triggerSlashWithResult(command)\\`**:  STScript \n  - \\`Promise<string>\\`AI \n  - \\`const result = await triggerSlashWithResult('/gen lock=on \"\"');\\`\n  - **** \\`/gen\\` \n  - **** generation_id\n- **\\`getRegexScripts()\\`**: \n  - \n  - ** AI **\n- **** API \n- **\\`triggerSlash(command)\\`**:  STScript \n\n** AI **\nAI \\`<guide>\\`\\`<dream>\\`\\`<plot>\\`\\`<status>\\`\\`<think>\\` \n****\n\n****\n1. **** AI  \\`<gametxt>\\`\n2. ****\n3. ****\n\n****\n\\`\\`\\`typescript\n// \nfunction extractLastTagContent(tagName: string, text: string, ignoreCase = false): string | null {\n  if (!text || typeof text !== 'string') return null;\n\n  const endTag = \\`</\\${tagName}>\\`;\n  let searchPool = text;\n  let endTagPattern = endTag;\n\n  if (ignoreCase) {\n    searchPool = text.toLowerCase();\n    endTagPattern = endTag.toLowerCase();\n  }\n\n  const lastEndIndex = searchPool.lastIndexOf(endTagPattern);\n  if (lastEndIndex !== -1) {\n    const startTag = \\`<\\${tagName}>\\`;\n    let startTagPattern = startTag;\n    if (ignoreCase) startTagPattern = startTag.toLowerCase();\n\n    const lastStartIndex = searchPool.lastIndexOf(startTagPattern, lastEndIndex);\n    if (lastStartIndex !== -1) {\n      const startIndex = lastStartIndex + startTag.length;\n      return text.substring(startIndex, lastEndIndex).trim();\n    }\n  }\n  return null;\n}\n\n// \nfunction applyRegexFilters(text: string): string {\n  console.log(' :', text.length);\n\n  if (!text || typeof text !== 'string') return '';\n\n  // =====  0: =====\n  // \"\"\"\"\n  // \n  //  dream  gametxt \n  const criticalTags = ['thinking', 'UpdateVariable', 'guide', 'plot', 'status', 'dream', 'gametxt'];\n  criticalTags.forEach(tag => {\n    const openTagRegex = new RegExp(\\`<\\${tag}([^>]*)>\\`, 'gi');\n    const closeTagRegex = new RegExp(\\`</\\${tag}>\\`, 'gi');\n\n    const openMatches = text.match(openTagRegex);\n    const closeMatches = text.match(closeTagRegex);\n\n    const openCount = openMatches ? openMatches.length : 0;\n    const closeCount = closeMatches ? closeMatches.length : 0;\n\n    if (openCount > closeCount) {\n      // \n      const missing = openCount - closeCount;\n      console.log(\\`  \\${missing}  <\\${tag}> \\`);\n      text = text + \\`</\\${tag}>\\`.repeat(missing);\n    }\n  });\n\n  // =====  1: =====\n  //  AI \n  //  dream \n  const gameTextTags = ['dream', 'gametxt', 'output', 'display', 'text', 'content'];\n  for (const tag of gameTextTags) {\n    const extracted = extractLastTagContent(tag, text);\n    if (extracted !== null) {\n      console.log(\\`  <\\${tag}> :\\`, extracted.length);\n      return extracted; // \n    }\n  }\n\n  // =====  2:  -  =====\n  let cleanedText = text;\n\n  // dream/gametxt \n  const tagsToRemove = [\n    'guide', 'plot', 'status',\n    'UpdateVariable', '', '', ''\n  ];\n\n  tagsToRemove.forEach(tag => {\n    //  <tag>...</tag> \n    const regexWithContent = new RegExp(\\`<\\${tag}[^>]*>[\\\\\\\\s\\\\\\\\S]*?</\\${tag}>\\`, 'gi');\n    const before = cleanedText;\n    cleanedText = cleanedText.replace(regexWithContent, '');\n\n    //  <tag/> \n    const regexSelfClosing = new RegExp(\\`<\\${tag}\\\\\\\\s*\\\\\\\\/>\\`, 'gi');\n    cleanedText = cleanedText.replace(regexSelfClosing, '');\n\n    if (before !== cleanedText) {\n      console.log(\\`    <\\${tag}> \\`);\n    }\n  });\n\n  //   think/thinking \n  //  <xxx_think><thinking_xxx><think><thinking> \n  const thinkingRegex = /<[^>]*think[^>]*>[\\\\\\\\s\\\\\\\\S]*?<\\\\/[^>]*think[^>]*>/gi;\n  const beforeThinking = cleanedText;\n  cleanedText = cleanedText.replace(thinkingRegex, '');\n  if (beforeThinking !== cleanedText) {\n    console.log('    think/thinking ');\n  }\n\n  //  think \n  const thinkingSelfClosing = /<[^>]*think[^>]*\\\\\\\\/>/gi;\n  cleanedText = cleanedText.replace(thinkingSelfClosing, '');\n\n  //  HTML \n  cleanedText = cleanedText.replace(/<!--[\\\\s\\\\S]*?-->/g, '');\n\n  if (cleanedText !== text) {\n    console.log(' :', cleanedText.length);\n    text = cleanedText;\n  }\n\n  // =====  2-3: =====\n  let allRegexScripts: any[] = [];\n\n  //  1: \n  if (typeof getRegexScripts === 'function') {\n    try {\n      const globalRegexes = getRegexScripts();\n      if (globalRegexes && globalRegexes.length > 0) {\n        console.log(' ', globalRegexes.length, '');\n        allRegexScripts = allRegexScripts.concat(globalRegexes);\n      }\n    } catch (e) {\n      console.warn(' :', e);\n    }\n  }\n\n  //  2:  SoliUmbra \n  try {\n    const parentST = (window as any).parent?.SillyTavern || (window as any).SillyTavern;\n    if (parentST && typeof parentST.getContext === 'function') {\n      const context = parentST.getContext();\n      const prompts = context?.chatCompletionSettings?.prompts;\n\n      if (prompts && Array.isArray(prompts)) {\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\n\n        for (const identifier of possibleIdentifiers) {\n          const regexPrompt = prompts.find((p: any) => p.identifier === identifier);\n          if (regexPrompt?.content) {\n            try {\n              const data = JSON.parse(regexPrompt.content);\n              let presetRegexes: any = null;\n\n              if (Array.isArray(data)) {\n                presetRegexes = data;\n              } else if (data && typeof data === 'object') {\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\n                  presetRegexes = data.RegexBinding.regexes;\n                } else if (data.regexes && Array.isArray(data.regexes)) {\n                  presetRegexes = data.regexes;\n                }\n              }\n\n              if (presetRegexes && presetRegexes.length > 0) {\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\n                break;\n              }\n            } catch (parseError) {\n              console.warn('  identifier', identifier, ':', parseError);\n            }\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn(' :', e);\n  }\n\n  if (allRegexScripts.length > 0) {\n    console.log(' ', allRegexScripts.length, '');\n\n    //  AI placement  2\n    //   disabled  placement promptOnly\n    //  promptOnly \n    const activeScripts = allRegexScripts.filter((script: any) => {\n      if (script.disabled) return false;\n      if (!script.placement || !Array.isArray(script.placement)) return false;\n      if (!script.placement.includes(2)) return false;\n      return true;\n    });\n\n    console.log(' ', activeScripts.length, '');\n\n    let result = text;\n    activeScripts.forEach((script: any, index: number) => {\n      try {\n        const regex = new RegExp(script.findRegex, 'gim');\n        const beforeLength = result.length;\n        result = result.replace(regex, script.replaceString || '');\n\n        if (beforeLength !== result.length) {\n          console.log(' ', index + 1, '(', script.scriptName, ') ');\n        }\n      } catch (e) {\n        console.error(' ', index + 1, ':', e);\n      }\n    });\n\n    text = result;\n  }\n\n  console.log(' :', text.length);\n  return text;\n}\n\\`\\`\\`\n\n****\n\\`\\`\\`typescript\n// \nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\n\n// \nasync function handleSend() {\n  const input = $('#user-input');\n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  // 1. \n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  renderMessages();\n\n  // 2. \n  isGenerating = true;\n  $('#send-btn').prop('disabled', true).text('...');\n\n  try {\n    // 3. \n    let prompt = '';\n    chatHistory.slice(-10).forEach(msg => {\n      prompt += (msg.role === 'user' ? '' : 'AI') + ': ' + msg.content + '\\\\n';\n    });\n\n    // 4.  AI\n    const rawResult = await triggerSlashWithResult('/gen lock=on \"' + prompt.replace(/\"/g, '\\\\\\\\\"') + '\"');\n\n    // 5.  \n    const cleanedResult = applyRegexFilters(rawResult);\n\n    // 6. \n    chatHistory.push({ role: 'assistant', content: cleanedResult });\n    renderMessages();\n    saveChatHistory(); // \n\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error?.message || String(error)));\n  } finally {\n    isGenerating = false;\n    $('#send-btn').prop('disabled', false).text('');\n  }\n}\n\n// \nfunction renderMessages() {\n  const container = $('#messages');\n  container.empty();\n\n  chatHistory.forEach(msg => {\n    const div = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .text(msg.content); //  text()  XSS\n    container.append(div);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// \nfunction saveChatHistory() {\n  if (typeof insertOrAssignVariables === 'function') {\n    insertOrAssignVariables({ chat_history: chatHistory }, { type: 'chat' });\n  } else {\n    localStorage.setItem('chat_history', JSON.stringify(chatHistory));\n  }\n}\n\\`\\`\\`\n\n** **\n\n** **\n\n###  \n-  \\`generate({ should_stream: true, generation_id })\\` \n-  \\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\` \n- \n-   AI \n-   AI \n\n###  \n-  \\`triggerSlashWithResult\\`\n-  \n-  \\`generateRaw\\`\n\n** **\n\n\\`\\`\\`typescript\n// =====  =====\nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\nlet currentGenerationId: string | null = null;\n\n// ===== =====\nfunction setupStreamListeners() {\n  //  \n  eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text: string, id: string) => {\n    if (!isGenerating || id !== currentGenerationId) return;\n\n    //  \n    const cleanedText = applyRegexFilters(text);\n\n    //  DOM\n    const container = $('#inner-messages');  //  ID \n    const charName = SillyTavern?.name2 || 'AI';\n    const lastMsg = container.find('.message:last-child');\n\n    if (lastMsg.length && !lastMsg.hasClass('user-message')) {\n      //  AI \n      lastMsg.html('<strong>' + charName + ':</strong> ' + cleanedText);\n    } else {\n      //  AI \n      const msgDiv = $('<div>')\n        .addClass('message ai-message')\n        .html('<strong>' + charName + ':</strong> ' + cleanedText);\n      container.append(msgDiv);\n    }\n\n    // \n    container.scrollTop(container[0].scrollHeight);\n  });\n\n  //  \n  eventOn(iframe_events.GENERATION_ENDED, (text: string, id: string) => {\n    if (id === currentGenerationId) {\n      console.log(' ');\n\n      //  \n      const cleanedText = applyRegexFilters(text);\n\n      // \n      chatHistory.push({ role: 'assistant', content: cleanedText });\n      saveChatHistory();\n\n      // \n      renderMessages();\n\n      // \n      isGenerating = false;\n      currentGenerationId = null;\n      $('#inner-send-btn').prop('disabled', false).text('');  //  ID \n    }\n  });\n}\n\n// ===== =====\nasync function handleSend() {\n  const input = $('#inner-input');  //  ID \n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  // 1. \n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  saveChatHistory();\n  renderMessages();\n\n  // 2.  ID\n  currentGenerationId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\n\n  // 3. \n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');  //  ID \n\n  try {\n    // 4.   generate \n    await generate({\n      user_input: userInput,\n      should_stream: true,           //  \n      generation_id: currentGenerationId,  //   ID \n      overrides: {\n        chat_history: {\n          prompts: chatHistory.map(msg => ({\n            role: msg.role === 'user' ? 'user' : 'assistant',\n            content: msg.content\n          }))\n        }\n      }\n    });\n\n    // \n    // GENERATION_ENDED  AI \n\n  } catch (error) {\n    console.error(' :', error);\n    toastr.error(': ' + error.message);\n\n    // \n    isGenerating = false;\n    currentGenerationId = null;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// =====  =====\nfunction renderMessages() {\n  const container = $('#messages');\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    const div = $('<div>')\n      .attr('id', \\\\\\`message-\\\\\\${index}\\\\\\`)  //   id\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .text(msg.content);\n    container.append(div);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// =====  =====\n$(() => {\n  loadChatHistory();\n  setupStreamListeners();  //  \n\n  $('#send-btn').on('click', handleSend);\n  $('#user-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n});\n\\\\\\`\\\\\\`\\\\\\`\n\n** CSS **\n\\\\\\`\\\\\\`\\\\\\`css\n.streaming {\n  border-right: 2px solid #165DFF;\n  animation: blink 1s infinite;\n}\n\n@keyframes blink {\n  0%, 50% { border-right-color: transparent; }\n  51%, 100% { border-right-color: #165DFF; }\n}\n\\\\\\`\\\\\\`\\\\\\`\n\n** **\n- **** 3\n- **** triggerSlashWithResult\n- **** AI \n- **** \n\n** **\n1.   \\`generate({ should_stream: true, generation_id: uniqueId })\\`\n2.  \\`setupStreamListeners()\\`\n3.  \\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => ...)\\`\n4.   ID \\`generation_id\\`\n5.   \\`overrides.chat_history.prompts\\` \n\n**  \\`applyRegexFilters\\`**\n1.  **STREAM_TOKEN_RECEIVED_INCREMENTALLY **\n   \\`\\`\\`typescript\n   const cleanedText = applyRegexFilters(text);  // \n   lastMsg.html('<strong>' + charName + ':</strong> ' + cleanedText);\n   \\`\\`\\`\n\n2.  **GENERATION_ENDED **\n   \\`\\`\\`typescript\n   const cleanedText = applyRegexFilters(text);  // \n   chatHistory.push({ role: 'assistant', content: cleanedText });\n   \\`\\`\\`\n\n** \\`applyRegexFilters\\` **\n1.  ****\"\"\"\"\n2.  **** \\`<dream>\\`\\`<gametxt>\\` \n3.  **** \\`think\\` \n4.  ****\n\n** **\n- ****\\`<dream>\\`\\`<gametxt>\\`\\`<output>\\` \n- ****\\`['dream', 'gametxt', 'output', 'display', 'text', 'content']\\`\n- ****\n- ****\n  \\`\\`\\`\n  <guide></guide><dream></dream><plot></plot>\n      <dream> \n  \\`\\`\\`\n\n** **\n-  \\`think\\`  \\`thinking\\`\n- \\`/<[^>]*think[^>]*>[\\\\s\\\\S]*?<\\\\/[^>]*think[^>]*>/gi\\`\n- \\`<think>\\`\\`<thinking>\\`\\`<xxx_think>\\`\\`<thinking_xxx>\\` \n- \n\n****\n-    \\`<thinking>\\`    + \n-    \\`<UpdateVariable>\\`    + \n-     \\`<UpdateVariable>\\`   \\`<UpdateVariable>\\` \n\n** **\n-  / text \\`applyRegexFilters\\`\n-   text\n-   text\n-   \\`should_stream: true\\`\n-   \\`generation_id\\`\n-   ID\n-  \n\n** **\n**** \\`$(function() {})\\` \n\n\\`\\`\\`javascript\n//  \n$(function() {\n  let chatHistory = [];  //  \n  function renderMessages() {}  //  \n});\n\n//  \nlet chatHistory = [];  //  \nfunction renderMessages() {}  //  \n\n$(function() {\n  // \n  loadChatHistory();\n});\n\\`\\`\\`\n\n** **\n\n\\`\\`\\`javascript\n// index.ts \n//\n// 1  1-10 \n//    let chatHistory = [];\n//    let isGenerating = false;\n//    ...\n//\n// 2  10-250 \n//    function loadChatHistory() { ... }\n//    function saveChatHistory() { ... }\n//    function renderMessages() { ... }\n//    function applyRegexFilters(text) { ... }  //  \n//    function handleSend() { ... }\n//\n// 3 jQuery  250-270 \n//    $(function() {\n//      // \n//      loadChatHistory();\n//      $('#btn').on('click', handleSend);\n//    });\n//\n// 4  270-275 \n//    $(window).on('pagehide', () => { ... });\n\\`\\`\\`\n\n** 100% **\n\n\\`\\`\\`javascript\n// =====================================================\n//   $(function() {}) \n// =====================================================\n\n// ===== 1. =====\nlet chatHistory = []; // { role: 'user'|'assistant', content: string }\nlet isGenerating = false;\n\n// ===== 2.  =====\nfunction loadChatHistory() {\n  const isInTavern = typeof getVariables === 'function';\n  if (!isInTavern) {\n    // \n    const saved = localStorage.getItem('inner_chat_history');\n    chatHistory = saved ? JSON.parse(saved) : [];\n  } else {\n    // \n    const data = getVariables({ type: 'chat' });\n    chatHistory = data?.inner_chat_history || [];\n  }\n  renderMessages();\n}\n\nfunction saveChatHistory() {\n  const isInTavern = typeof insertOrAssignVariables === 'function';\n  if (!isInTavern) {\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\n  } else {\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\n  }\n}\n\n// ===== 3.  =====\nfunction renderMessages() {\n  console.log(' renderMessages :', chatHistory.length, '');\n\n  const container = $('#inner-messages');\n  console.log(' :', container.length > 0 ? ' ' : ' ');\n\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    // \n    const name = msg.role === 'user'\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n\n    console.log(' ', index + 1, ':', msg.role, '-', name, '- :', msg.content.length);\n\n    const msgDiv = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .html('<strong>' + name + ':</strong> ' + msg.content);\n    container.append(msgDiv);\n  });\n\n  console.log(' renderMessages :', container.find('.message').length);\n\n  // \n  container.scrollTop(container[0].scrollHeight);\n}\n\n// ===== 4.  =====\n/**\n *  AI \n * \n * 1.  getRegexScripts\n * 2.  SoliUmbra \n * 3. \n */\nfunction applyRegexFilters(text) {\n  console.log(' :', text.length);\n\n  // =====  0: =====\n  // <guide><dream><plot><status><think> \n  let cleanedText = text;\n  const commonTags = [\n    'guide', 'dream', 'plot', 'status', 'think', 'thinking',\n    'thought', 'reasoning', 'analysis', 'plan', 'reflection',\n    'meta', 'ooc', 'system', 'debug'\n  ];\n\n  commonTags.forEach(tag => {\n    //  <tag>...</tag> \n    const regex = new RegExp(\\`<\\${tag}[^>]*>[\\\\\\\\s\\\\\\\\S]*?</\\${tag}>\\`, 'gi');\n    const before = cleanedText;\n    cleanedText = cleanedText.replace(regex, '');\n    if (before !== cleanedText) {\n      console.log(\\`   :  <\\${tag}> \\`);\n    }\n  });\n\n  //  HTML \n  cleanedText = cleanedText.replace(/<!--[\\\\s\\\\S]*?-->/g, '');\n\n  // \n  if (cleanedText !== text) {\n    console.log(' :', cleanedText.length);\n    text = cleanedText;\n  }\n\n  // =====  1-2:  =====\n  let allRegexScripts = [];\n\n  //  1: \n  if (typeof getRegexScripts === 'function') {\n    try {\n      const globalRegex = getRegexScripts();\n      console.log(' ', globalRegex.length, '');\n      allRegexScripts = allRegexScripts.concat(globalRegex);\n    } catch (e) {\n      console.warn(' :', e);\n    }\n  }\n\n  //  2: SoliUmbra \n  //   iframe  window.parent.SillyTavern.getContext() \n  try {\n    const parentST = window.parent?.SillyTavern || window.SillyTavern;\n    if (parentST && typeof parentST.getContext === 'function') {\n      const context = parentST.getContext();\n      const prompts = context?.chatCompletionSettings?.prompts;\n\n      if (prompts && Array.isArray(prompts)) {\n        //  identifier\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\n\n        for (const identifier of possibleIdentifiers) {\n          const regexPrompt = prompts.find(p => p.identifier === identifier);\n          if (regexPrompt?.content) {\n            try {\n              const data = JSON.parse(regexPrompt.content);\n              let presetRegexes = null;\n\n              // \n              if (Array.isArray(data)) {\n                //  regexes-bindings\n                presetRegexes = data;\n              } else if (data && typeof data === 'object') {\n                //  SPresetSettings.RegexBinding.regexes\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\n                  presetRegexes = data.RegexBinding.regexes;\n                } else if (data.regexes && Array.isArray(data.regexes)) {\n                  presetRegexes = data.regexes;\n                }\n              }\n\n              if (presetRegexes && presetRegexes.length > 0) {\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\n                break; // \n              }\n            } catch (parseError) {\n              console.warn('  identifier', identifier, ':', parseError);\n            }\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn(' :', e);\n  }\n\n  if (allRegexScripts.length === 0) {\n    console.log(' ');\n    return text;\n  }\n\n  console.log(' ', allRegexScripts.length, '');\n\n  //  AI \n  // placement :\n  //   0 = \n  //   1 =  AI \n  //   2 = AI  \n  // promptOnly: true = \n  // promptOnly: false =   \n  const activeScripts = allRegexScripts.filter(script => {\n    return !script.disabled &&\n           !script.promptOnly &&  //  promptOnly  false \n           script.placement &&\n           script.placement.includes(2);  //  placement  2 AI \n  });\n\n  console.log(' ', activeScripts.length, '');\n\n  let result = text;\n\n  // \n  activeScripts.forEach((script, index) => {\n    try {\n      const regex = new RegExp(script.findRegex, 'gim');\n      const beforeLength = result.length;\n      result = result.replace(regex, script.replaceString || '');\n\n      if (beforeLength !== result.length) {\n        console.log(' ', index + 1, '(', script.scriptName, ') ', beforeLength - result.length, '');\n      }\n    } catch (e) {\n      console.error(' ', index + 1, '(', script.scriptName, ') :', e);\n    }\n  });\n\n  console.log(' :', text.length, ':', result.length);\n\n  return result;\n}\n\n// ===== 5.  =====\n//   sendChatMessage\n//  \nasync function handleSend() {\n  const input = $('#inner-user-input');\n  const text = input.val().trim();\n\n  if (!text || isGenerating) return;\n\n  // \n  chatHistory.push({ role: 'user', content: text });\n  input.val('');\n  renderMessages();\n  saveChatHistory();\n\n  // \n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');\n\n  try {\n    //   STScript API \n    if (typeof triggerSlashWithResult !== 'function') {\n      throw new Error('');\n    }\n\n    // \n    const userName = SillyTavern?.name1 || 'You';\n    const charName = SillyTavern?.name2 || 'AI';\n\n    // \n    let fullPrompt = '';\n    if (chatHistory.length > 0) {\n      fullPrompt += '\\\\n';\n      chatHistory.forEach((msg) => {\n        const name = msg.role === 'user' ? userName : charName;\n        fullPrompt += name + ': ' + msg.content + '\\\\n';\n      });\n      fullPrompt += '\\\\n';\n    }\n    fullPrompt += userName + ': ' + text;\n\n    console.log(' :', fullPrompt.length);\n\n    //   /gen \n    const command = '/gen lock=on \"' + fullPrompt.replace(/\"/g, '\\\\\\\\\"') + '\"';\n    const result = await triggerSlashWithResult(command);\n\n    console.log(' AI :', result ? result.length : 0);\n\n    if (result && result.length > 0) {\n      //  \n      const cleanedResult = applyRegexFilters(result);\n      console.log(' :', cleanedResult.length);\n\n      //  AI \n      chatHistory.push({ role: 'assistant', content: cleanedResult });\n      saveChatHistory();\n      renderMessages();\n      toastr.success('');\n    } else {\n      toastr.warning('AI ');\n    }\n\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error?.message || String(error)));\n  } finally {\n    // \n    isGenerating = false;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// =====================================================\n//   $(function() {})\n// =====================================================\n\n// ===== 6.  =====\n//  \n$(function() {\n  // \n  console.log(' ');\n  console.log(' chatHistory :', typeof chatHistory !== 'undefined');\n  console.log(' renderMessages :', typeof renderMessages === 'function');\n  console.log(' handleSend :', typeof handleSend === 'function');\n\n  //   false $(function() {}) \n  if (typeof chatHistory === 'undefined' || typeof renderMessages !== 'function') {\n    console.error(' /');\n    console.error(' $(function() {}) ');\n    toastr.error('');\n    return;\n  }\n\n  loadChatHistory();\n\n  // \n  $('#inner-send-btn').on('click', handleSend);\n  $('#inner-user-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n\n  // \n  $('#inner-clear-btn').on('click', () => {\n    if (confirm('')) {\n      chatHistory = [];\n      renderMessages();\n      saveChatHistory();\n    }\n  });\n\n  console.log(' ');\n  console.log(' :', $('#inner-messages').length > 0 ? ' ' : ' ');\n});\n\n// ===== 7.  =====\n$(window).on('pagehide', () => {\n  saveChatHistory();\n});\n\\`\\`\\`\n\n**HTML **\n\\`\\`\\`html\n<div class=\"inner-chat-container\">\n  <div class=\"inner-chat-header\">\n    <h3></h3>\n    <button id=\"inner-clear-btn\"></button>\n  </div>\n\n  <!--  ID  inner-messages -->\n  <div id=\"inner-messages\" class=\"inner-messages\"></div>\n\n  <div class=\"inner-input-area\">\n    <!--  ID  inner-user-input -->\n    <textarea id=\"inner-user-input\" placeholder=\"...\"></textarea>\n    <!--  ID  inner-send-btn -->\n    <button id=\"inner-send-btn\"></button>\n  </div>\n</div>\n\\`\\`\\`\n\n** HTML **\n- [ ]  \\`id=\"inner-messages\"\\` \n- [ ]  \\`id=\"inner-user-input\"\\` \n- [ ]  \\`id=\"inner-send-btn\"\\` \n- [ ]  \\`id=\"inner-clear-btn\"\\` \n- [ ] ID  JS \n\n**CSS **\n\\`\\`\\`css\n/*  */\n.inner-messages {\n  height: 400px;\n  overflow-y: auto;\n  padding: 15px;\n  display: flex;  /*   flex */\n  flex-direction: column;\n  gap: 10px;\n}\n\n/*  */\n.message {\n  max-width: 70%;\n  padding: 10px 15px;\n  border-radius: 12px;\n  word-wrap: break-word;\n}\n\n/*   */\n.user-message {\n  align-self: flex-end;  /*  */\n  background: #4a9eff;\n  color: white;\n}\n\n/*  AI  */\n.ai-message {\n  align-self: flex-start;  /*  */\n  background: #2a2a2a;\n  color: #e0e0e0;\n}\n\\`\\`\\`\n\n** **\n- ID \\`inner-\\`\n-  \\`display: flex; flex-direction: column\\`\n-  \\`align-self: flex-end\\` \n- AI  \\`align-self: flex-start\\` \n\n** API**\n- **\\`generate(prompt)\\`**: ** AI **\n- \\`generateRaw(prompt)\\`:  AI \n- \\`getVariables({ type: 'message', message_id })\\`: \n- \\`insertOrAssignVariables(data, { type: 'message', message_id })\\`: \n- \\`getChatMessages()\\`: \n\n****\n- **\\`generate\\`**: \n- **\\`generateRaw\\`**: \n\n** **\n1. **80% **\n   -  **** \\`$(function() {})\\`  \\`let\\`/\\`const\\`/\\`function\\` \n   -  ********\\`$(function() {})\\` \n   - **** \\`console.log(typeof chatHistory)\\` \\`'object'\\`  \\`'undefined'\\`\n\n1.5. **/**\n   -  ****\\`chatHistory.push({ role: 'assistant', content: '' });\\`\n   -  ****\\`chatHistory.push({ role: 'assistant', content: ' AI ' });\\`\n   -  **** AI \n   -  **** \\`generate()\\`AI  \\`STREAM_TOKEN_RECEIVED_FULLY\\` \n   - ****\\`generate()\\`  AI API\n\n2. **generation_id **\n   -  \\`const result = await generate(...); const id = result.generation_id;\\`\n   -  \n     \\`\\`\\`javascript\n     const myId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\n     await generate({ user_input: text, generation_id: myId });\n     //  id  myId\n     \\`\\`\\`\n   - \\`generate()\\`  \\`Promise<string>\\`\n   -  ID \n\n3. ****\n   -  \\`index.html\\` + \\`index.ts\\`\n   - \n   -  \\`setChatMessages(..., { refresh: 'none' })\\` \n\n4. ****\n   -   \\`sendChatMessage\\`\n   -   \\`generate\\`\\`getChatMessages\\`  API \n   -  \\`handleSend\\`\\`innerSendMessage\\`\\`sendInnerMessage\\`\n   - **** \\`sk()\\` \n\n5. ** ID **\n   -  \\`inner-\\` \n   -  \\`send-button\\`\\`user-input\\` \n   - **** \\`$('#inner-messages').length\\`  1 0\n\n6. ****\n   -  ** \\`iframe_events.XXX\\` \\`'iframe_events.XXX'\\`**\n   -  ** \\`(text, id)\\` \\`(data)\\` \\`text\\`  \\`data.text\\`**\n   -  **\\`generate({ user_input: text, should_stream: true, generation_id: myId })\\`**\n   -  \\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, id) => ...)\\` \n   -  \\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => ...)\\` \n\n7. **API **\n   -  \\`generate(prompt)\\`\n   -  \\`generateRaw(prompt)\\`\n   - \n\n8. ****\n   -  \\`getVariables({ type: 'chat' })\\`  \\`insertOrAssignVariables(data, { type: 'chat' })\\`\n   - \\`{ type: 'message', message_id }\\`\n   - \n\n****\n\\`\\`\\`javascript\n// ==========  ==========\n\n//  \n// eventOn('iframe_events.STREAM_TOKEN_RECEIVED_FULLY', (data) => { ... })\n//   'iframe_events.XXX'\n//   (data)\n\n//  \neventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => {\n  // text \n  $('#ai-reply').text(text); //   text text.text  data.text\n  console.log(':', text);\n});\n\neventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, id) => {\n  // text \n  console.log(' :', text); //   text\n  chatHistory.push({ role: 'assistant', content: text });\n  saveChatHistory();\n  isGenerating = false;\n  $('#send-btn').prop('disabled', false).text('');\n});\n\n//  GENERATION_ENDED\neventOn(iframe_events.GENERATION_ENDED, (text, id) => {\n  console.log(' :', text);\n  chatHistory.push({ role: 'assistant', content: text });\n  saveChatHistory();\n  isGenerating = false;\n  $('#send-btn').prop('disabled', false).text('');\n});\n\n// ==========  ==========\nasync function handleSend() {\n  const userInput = $('#user-input').val();\n  chatHistory.push({ role: 'user', content: userInput });\n\n  isGenerating = true;\n  $('#send-btn').prop('disabled', true).text('...');\n\n  //   STScript \n  const command = '/gen lock=on \"' + userInput.replace(/\"/g, '\\\\\\\\\"') + '\"';\n  const result = await triggerSlashWithResult(command);\n\n  if (result) {\n    chatHistory.push({ role: 'assistant', content: result });\n    renderMessages();\n  }\n\n  //   generate API\n  // await generate({ user_input: userInput });  //  \n}\n\\`\\`\\`\n\n** triggerSlashWithResult**\n-  \\`/gen\\` \n- \n-  generation_id \n\n**\\`/gen\\` **\n- \\`/gen lock=on \"\"\\`\n- \n-  AI \n\n---\n\n#  AI \n\n**\"\"\"\"\"\"\"\"******B\n****A\n\n##  \n\n### 1. \n-  **** \\`insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' })\\`\n-  **** \\`$(function() {})\\`  \\`loadChatHistory()\\`\n-  **** \\`SillyTavern.getCurrentChatId()\\` \n-  **** \\`$(window).on('pagehide', ...)\\` \n-  ****/ \\`saveChatHistory()\\`\n\n### 2. \n-  ****\\`display: none\\`iframe \n-  ****\n-  **** \\`chatHistory\\`\n\n### 3. \n-  **** \\`{ type: 'chat' }\\`\n-  **** \\`getCurrentChatId()\\` \n\n##  triggerSlashWithResult\n\n**** \n\n****\n\n\\`\\`\\`typescript\n// ===== 1. =====\nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\n\n// ===== 2.  =====\nfunction loadChatHistory() {\n  const isInTavern = typeof getVariables === 'function';\n  if (!isInTavern) {\n    const saved = localStorage.getItem('inner_chat_history');\n    chatHistory = saved ? JSON.parse(saved) : [];\n  } else {\n    const data = getVariables({ type: 'chat' });\n    chatHistory = data?.inner_chat_history || [];\n  }\n  renderMessages();\n}\n\nfunction saveChatHistory() {\n  const isInTavern = typeof insertOrAssignVariables === 'function';\n  if (!isInTavern) {\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\n  } else {\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\n  }\n}\n\n// ===== 3. =====\nfunction applyRegexFilters(text: string): string {\n  console.log(' :', text.length);\n\n  if (!text || typeof text !== 'string') return '';\n\n  // =====  0:  =====\n  const criticalTags = ['thinking', 'UpdateVariable', 'guide', 'plot', 'status', 'dream', 'gametxt'];\n  criticalTags.forEach(tag => {\n    const openTagRegex = new RegExp(\\\\\\`<\\\\\\${tag}([^>]*)>\\\\\\`, 'gi');\n    const closeTagRegex = new RegExp(\\\\\\`</\\\\\\${tag}>\\\\\\`, 'gi');\n\n    const openMatches = text.match(openTagRegex);\n    const closeMatches = text.match(closeTagRegex);\n\n    const openCount = openMatches ? openMatches.length : 0;\n    const closeCount = closeMatches ? closeMatches.length : 0;\n\n    if (openCount > closeCount) {\n      const missing = openCount - closeCount;\n      console.log(\\\\\\`  \\\\\\${missing}  <\\\\\\${tag}> \\\\\\`);\n      text = text + \\\\\\`</\\\\\\${tag}>\\\\\\`.repeat(missing);\n    }\n  });\n\n  // =====  1: =====\n  function extractLastTagContent(tagName: string, text: string): string | null {\n    if (!text || typeof text !== 'string') return null;\n\n    const endTag = \\\\\\`</\\\\\\${tagName}>\\\\\\`;\n    const searchPool = text.toLowerCase();\n    const endTagPattern = endTag.toLowerCase();\n\n    const lastEndIndex = searchPool.lastIndexOf(endTagPattern);\n    if (lastEndIndex !== -1) {\n      const startTag = \\\\\\`<\\\\\\${tagName}>\\\\\\`;\n      const startTagPattern = startTag.toLowerCase();\n\n      const lastStartIndex = searchPool.lastIndexOf(startTagPattern, lastEndIndex);\n      if (lastStartIndex !== -1) {\n        const startIndex = lastStartIndex + startTag.length;\n        return text.substring(startIndex, lastEndIndex).trim();\n      }\n    }\n    return null;\n  }\n\n  const gameTextTags = ['dream', 'gametxt', 'output', 'display', 'text', 'content'];\n  for (const tag of gameTextTags) {\n    const extracted = extractLastTagContent(tag, text);\n    if (extracted !== null) {\n      console.log(\\\\\\`  <\\\\\\${tag}> :\\\\\\`, extracted.length);\n      return extracted;\n    }\n  }\n\n  // =====  2:  =====\n  let cleanedText = text;\n\n  const tagsToRemove = [\n    'guide', 'plot', 'status',\n    'UpdateVariable', '', '', ''\n  ];\n\n  tagsToRemove.forEach(tag => {\n    const regexWithContent = new RegExp(\\\\\\`<\\\\\\${tag}[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?</\\\\\\${tag}>\\\\\\`, 'gi');\n    const before = cleanedText;\n    cleanedText = cleanedText.replace(regexWithContent, '');\n\n    const regexSelfClosing = new RegExp(\\\\\\`<\\\\\\${tag}\\\\\\\\\\\\\\\\s*\\\\\\\\\\\\\\\\/>\\\\\\`, 'gi');\n    cleanedText = cleanedText.replace(regexSelfClosing, '');\n\n    if (before !== cleanedText) {\n      console.log(\\\\\\`    <\\\\\\${tag}> \\\\\\`);\n    }\n  });\n\n  //  think/thinking \n  const thinkingRegex = /<[^>]*think[^>]*>[\\\\\\\\s\\\\\\\\S]*?<\\\\\\\\/[^>]*think[^>]*>/gi;\n  const beforeThinking = cleanedText;\n  cleanedText = cleanedText.replace(thinkingRegex, '');\n  if (beforeThinking !== cleanedText) {\n    console.log('    think/thinking ');\n  }\n\n  const thinkingSelfClosing = /<[^>]*think[^>]*\\\\\\\\/>/gi;\n  cleanedText = cleanedText.replace(thinkingSelfClosing, '');\n\n  cleanedText = cleanedText.replace(/<!--[\\\\s\\\\S]*?-->/g, '');\n\n  if (cleanedText !== text) {\n    console.log(' :', cleanedText.length);\n    text = cleanedText;\n  }\n\n  // =====  3: =====\n  let allRegexScripts: any[] = [];\n\n  if (typeof getRegexScripts === 'function') {\n    try {\n      const globalRegexes = getRegexScripts();\n      if (globalRegexes && globalRegexes.length > 0) {\n        console.log(' ', globalRegexes.length, '');\n        allRegexScripts = allRegexScripts.concat(globalRegexes);\n      }\n    } catch (e) {\n      console.warn(' :', e);\n    }\n  }\n\n  try {\n    const parentST = (window as any).parent?.SillyTavern || (window as any).SillyTavern;\n    if (parentST && typeof parentST.getContext === 'function') {\n      const context = parentST.getContext();\n      const prompts = context?.chatCompletionSettings?.prompts;\n\n      if (prompts && Array.isArray(prompts)) {\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\n\n        for (const identifier of possibleIdentifiers) {\n          const regexPrompt = prompts.find((p: any) => p.identifier === identifier);\n          if (regexPrompt?.content) {\n            try {\n              const data = JSON.parse(regexPrompt.content);\n              let presetRegexes: any = null;\n\n              if (Array.isArray(data)) {\n                presetRegexes = data;\n              } else if (data && typeof data === 'object') {\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\n                  presetRegexes = data.RegexBinding.regexes;\n                } else if (data.regexes && Array.isArray(data.regexes)) {\n                  presetRegexes = data.regexes;\n                }\n              }\n\n              if (presetRegexes && presetRegexes.length > 0) {\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\n                break;\n              }\n            } catch (parseError) {\n              console.warn('  identifier', identifier, ':', parseError);\n            }\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn(' :', e);\n  }\n\n  if (allRegexScripts.length > 0) {\n    console.log(' ', allRegexScripts.length, '');\n\n    const activeScripts = allRegexScripts.filter((script: any) => {\n      if (script.disabled) return false;\n      if (!script.placement || !Array.isArray(script.placement)) return false;\n      if (!script.placement.includes(2)) return false;\n      return true;\n    });\n\n    console.log(' ', activeScripts.length, '');\n\n    let result = text;\n    activeScripts.forEach((script: any, index: number) => {\n      try {\n        const regex = new RegExp(script.findRegex, 'gim');\n        const beforeLength = result.length;\n        result = result.replace(regex, script.replaceString || '');\n\n        if (beforeLength !== result.length) {\n          console.log(' ', index + 1, '(', script.scriptName, ') ');\n        }\n      } catch (e) {\n        console.error(' ', index + 1, ':', e);\n      }\n    });\n\n    text = result;\n  }\n\n  console.log(' :', text.length);\n  return text;\n}\n\n// ===== 4.  =====\nasync function handleSend() {\n  const input = $('#inner-input');\n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  saveChatHistory();\n  renderMessages();\n\n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');\n\n  try {\n    if (typeof triggerSlashWithResult !== 'function') {\n      throw new Error('');\n    }\n\n    const userName = SillyTavern?.name1 || 'You';\n    const charName = SillyTavern?.name2 || 'AI';\n\n    let fullPrompt = '';\n    if (chatHistory.length > 1) {\n      fullPrompt += '\\\\n';\n      chatHistory.slice(0, -1).forEach((msg) => {\n        const name = msg.role === 'user' ? userName : charName;\n        fullPrompt += name + ': ' + msg.content + '\\\\n';\n      });\n      fullPrompt += '\\\\n';\n    }\n    fullPrompt += userName + ': ' + userInput;\n\n    console.log(' :', fullPrompt.length);\n\n    const command = '/gen lock=on \"' + fullPrompt.replace(/\"/g, '\\\\\\\\\"') + '\"';\n    const result = await triggerSlashWithResult(command);\n\n    console.log(' AI :', result ? result.length : 0);\n\n    if (result && result.length > 0) {\n      const cleanedResult = applyRegexFilters(result);\n      console.log(' :', cleanedResult.length);\n\n      chatHistory.push({ role: 'assistant', content: cleanedResult });\n      saveChatHistory();\n      renderMessages();\n      toastr.success('');\n    } else {\n      toastr.warning('AI ');\n    }\n\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error?.message || String(error)));\n  } finally {\n    isGenerating = false;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// ===== 5.  =====\nfunction renderMessages() {\n  const container = $('#inner-messages');\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    const name = msg.role === 'user'\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n\n    const msgDiv = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .html('<strong>' + name + ':</strong> ' + msg.content);\n    container.append(msgDiv);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// ===== 6. =====\nlet currentChatId = SillyTavern.getCurrentChatId();\nif (typeof eventOn === 'function') {\n  eventOn('CHAT_CHANGED', (newChatId: string) => {\n    if (currentChatId !== newChatId) {\n      console.log(' :', currentChatId, '->', newChatId);\n      currentChatId = newChatId;\n\n      // \n      loadChatHistory();\n\n      // \n      if (isGenerating) {\n        isGenerating = false;\n        $('#inner-send-btn').prop('disabled', false).text('');\n        console.log(' ');\n      }\n    }\n  });\n}\n\n// ===== 7.  =====\n$(function() {\n  console.log(' A');\n  console.log('  ID:', currentChatId);\n\n  // \n  loadChatHistory();\n\n  $('#inner-send-btn').on('click', handleSend);\n  $('#inner-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n\n  $('#inner-clear-btn').on('click', () => {\n    if (confirm('')) {\n      chatHistory = [];\n      renderMessages();\n      saveChatHistory();\n    }\n  });\n\n  console.log(' A');\n  console.log(' ', chatHistory.length, '');\n});\n\n// ===== 8.  =====\n$(window).on('pagehide', () => {\n  console.log(' ');\n  saveChatHistory();\n});\n\\`\\`\\`\n\n---\n\n##  generate + \n\n****  AI \n\n****\n\n\\`\\`\\`typescript\n// ===== 1. =====\nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\nlet currentGenerationId: string | null = null;\n\n// ===== 2. A=====\nfunction loadChatHistory() {\n  const isInTavern = typeof getVariables === 'function';\n  if (!isInTavern) {\n    const saved = localStorage.getItem('inner_chat_history');\n    chatHistory = saved ? JSON.parse(saved) : [];\n  } else {\n    const data = getVariables({ type: 'chat' });\n    chatHistory = data?.inner_chat_history || [];\n  }\n  renderMessages();\n}\n\nfunction saveChatHistory() {\n  const isInTavern = typeof insertOrAssignVariables === 'function';\n  if (!isInTavern) {\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\n  } else {\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\n  }\n}\n\n// ===== 3. A=====\nfunction applyRegexFilters(text: string): string {\n  // ... A ...\n  // A applyRegexFilters \n  return text;\n}\n\n// ===== 4. =====\nfunction setupStreamListeners() {\n  //  \n  eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text: string, id: string) => {\n    if (!isGenerating || id !== currentGenerationId) return;\n\n    console.log(' :', text.length);\n\n    //  \n    const cleanedText = applyRegexFilters(text);\n\n    //  DOM\n    const container = $('#inner-messages');\n    const charName = (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n    const lastMsg = container.find('.message:last-child');\n\n    if (lastMsg.length && lastMsg.hasClass('ai-message')) {\n      //  AI \n      lastMsg.html('<strong>' + charName + ':</strong> <span class=\"streaming\">' + cleanedText + '</span>');\n    } else {\n      //  AI \n      const msgDiv = $('<div>')\n        .addClass('message ai-message')\n        .html('<strong>' + charName + ':</strong> <span class=\"streaming\">' + cleanedText + '</span>');\n      container.append(msgDiv);\n    }\n\n    // \n    container.scrollTop(container[0].scrollHeight);\n  });\n\n  //  \n  eventOn(iframe_events.GENERATION_ENDED, (text: string, id: string) => {\n    if (id === currentGenerationId) {\n      console.log(' :', text.length);\n\n      //  \n      const cleanedText = applyRegexFilters(text);\n\n      // \n      chatHistory.push({ role: 'assistant', content: cleanedText });\n      saveChatHistory();\n\n      // \n      renderMessages();\n\n      // \n      isGenerating = false;\n      currentGenerationId = null;\n      $('#inner-send-btn').prop('disabled', false).text('');\n\n      toastr.success('');\n    }\n  });\n}\n\n// ===== 5. =====\nasync function handleSend() {\n  const input = $('#inner-input');\n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  // \n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  saveChatHistory();\n  renderMessages();\n\n  //  ID\n  currentGenerationId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\n\n  // \n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');\n\n  try {\n    if (typeof generate !== 'function') {\n      throw new Error('');\n    }\n\n    console.log(' generation_id:', currentGenerationId);\n\n    //   generate \n    await generate({\n      user_input: userInput,\n      should_stream: true,           //  \n      generation_id: currentGenerationId,  //   ID\n      overrides: {\n        chat_history: {\n          prompts: chatHistory.map(msg => ({\n            role: msg.role === 'user' ? 'user' : 'assistant',\n            content: msg.content\n          }))\n        }\n      }\n    });\n\n    // \n    // GENERATION_ENDED  AI \n\n  } catch (error) {\n    console.error(' :', error);\n    toastr.error(': ' + (error?.message || String(error)));\n\n    // \n    isGenerating = false;\n    currentGenerationId = null;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// ===== 6. A=====\nfunction renderMessages() {\n  const container = $('#inner-messages');\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    const name = msg.role === 'user'\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n\n    const msgDiv = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .html('<strong>' + name + ':</strong> ' + msg.content);\n    container.append(msgDiv);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// ===== 7. =====\nlet currentChatId = SillyTavern.getCurrentChatId();\nif (typeof eventOn === 'function') {\n  eventOn('CHAT_CHANGED', (newChatId: string) => {\n    if (currentChatId !== newChatId) {\n      console.log(' :', currentChatId, '->', newChatId);\n      currentChatId = newChatId;\n\n      // \n      loadChatHistory();\n\n      // \n      if (isGenerating) {\n        isGenerating = false;\n        currentGenerationId = null;\n        $('#inner-send-btn').prop('disabled', false).text('');\n        console.log(' ');\n      }\n    }\n  });\n}\n\n// ===== 8.  =====\n$(function() {\n  console.log(' B - ');\n  console.log('  ID:', currentChatId);\n\n  // \n  loadChatHistory();\n\n  //  \n  setupStreamListeners();\n\n  $('#inner-send-btn').on('click', handleSend);\n  $('#inner-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n\n  $('#inner-clear-btn').on('click', () => {\n    if (confirm('')) {\n      chatHistory = [];\n      renderMessages();\n      saveChatHistory();\n    }\n  });\n\n  console.log(' B');\n  console.log(' ', chatHistory.length, '');\n});\n\n// ===== 9.  =====\n$(window).on('pagehide', () => {\n  console.log(' ');\n  saveChatHistory();\n});\n\\`\\`\\`\n\n**CSS B**\n\n\\`\\`\\`css\n.streaming {\n  border-right: 2px solid #165DFF;\n  padding-right: 4px;\n  animation: blink 1s infinite;\n}\n\n@keyframes blink {\n  0%, 50% { border-right-color: #165DFF; }\n  51%, 100% { border-right-color: transparent; }\n}\n\\`\\`\\`\n\n---\n\n##  AI \n\n****\n\n1. ****\n   - \"\"\"\"\n   - \"\"\"\"\n   - \"\"\"\"\n   - \n\n2. ****\n   - \n   - \"\"\n\n** ** \"\"****\n\n## \n\n****\n\n### AI \n\n**1**\n\n\n- \n- /\n- \n- \n\n**2**\n\n### A\"\"\"\"\n\n****\n\n\n\\`\\`\\`\nFILE_START: NEED_MORE_INFO\n\n\n-  AI \n- \n- \n\n\n\n**1. **\n- \n- \n- \n- \n\n**2. **\n- \n- \n-  AI \n\n**3. **\n- \n- \n- \n\n**4. **\n- \n- \n- /\n- \n- \n\n---\n\n****\n\n### \n\n\n\n1. ****\n2. ****\n3. ****\n\n### \n\n****\n1.    \\`generate({ should_stream: true, generation_id })\\`\n2.  \\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\` \n3.     \n4.    \\`chatHistory\\`  \n\n****\n-  \\`generation_id\\` \n- \\`applyRegexFilters\\`\n- \n\n### \n\n****\n\\`\\`\\`javascript\nlet chatHistory = [\n  { role: 'user', content: '', timestamp: '...' },\n  { role: 'assistant', content: 'AI', timestamp: '...' }\n];\n\\`\\`\\`\n\n****\n- \n- AI \n\n****\n \\`insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' })\\` \n\n### \n\n**\\`applyRegexFilters\\` **\n1. \"\"\n2. \\`<dream>\\`\\`<gametxt>\\` \n3. \\`<think>\\`\\`<guide>\\`\\`<plot>\\` \n4. \n\n****\n- \n- \n\n---\n\n****\n\n\"\"\n-  #1a1a1a\n- #4a9eff\n- AI #3a3a3a\n-  + \n- \n\nFILE_END\n\\`\\`\\`\n\n### B\n\n****\n\n\n\\`\\`\\`\nFILE_START: index.html\n[ HTML ]\nFILE_END\n\nFILE_START: style.css\n[ CSS ]\nFILE_END\n\nFILE_START: script.js\n[ JavaScript ]\nFILE_END\n\\`\\`\\`\n\n### C\"\"\"\"\n\n****\n\n****\n-  #1a1a1a #2a2a2a\n- #4a9eff\n- AI #3a3a3a\n- border-radius: 12px\n- fadeIn/fadeOut\n- \n- \n- \n\n---\n\n### \n\n\n\n\\`\\`\\`typescript\n// \nconst regexPresets = {\n  \"\": [\n    { pattern: /<tag1>/g, replacement: \"\" },\n    { pattern: /\\\\[tag2\\\\]/g, replacement: \"\" },\n  ],\n  \"\": [\n    { pattern: /\\\\{\\\\{some_meta_data\\\\}\\\\}/g, replacement: \"\" },\n  ]\n};\n\nlet currentPreset = \"\";\n\nfunction applyRegexFilters(text: string, presetName?: string): string {\n  const preset = presetName || currentPreset;\n  const rules = regexPresets[preset] || regexPresets[\"\"];\n\n  let cleanedText = text;\n  rules.forEach(rule => {\n    cleanedText = cleanedText.replace(rule.pattern, rule.replacement);\n  });\n\n  // \n  // ...  ...\n\n  return cleanedText;\n}\n\nfunction switchPreset(presetName: string) {\n  currentPreset = presetName;\n  renderMessages(); // \n}\n\\`\\`\\`\n\n****\n\n---\n\n# \n FILE_START  FILE_END \n\n****\n\nFILE_START: index.html\n[ HTML  headbody CSS  JS]\nFILE_END\n\nFILE_START: style.css\n[ CSS ]\nFILE_END\n\nFILE_START: script.js\n[ JavaScript  jQuery]\nFILE_END\n\n** **\n1. **** \\`inner\\`\\`my\\`\n   -  \\`sendChatMessage\\`\\`generate\\`\\`getChatMessages\\`\n   -  \\`innerSendMessage\\`\\`handleSendMessage\\`\\`sendInnerMessage\\`\n2. ** ID** \\`inner-\\`\\`my-\\`\n   -  \\`#send-button\\`\\`#user-input\\`\n   -  \\`#inner-send-btn\\`\\`#inner-user-input\\`\n3. ****\n\n#  \n**\"\"\"\"\"\"**\n\n-  \"\"  ** style.css**\n-  \"\"  ** script.js**\n-  \"\"  ** script.js**\n-  \n\n# \n## \n- ///  ** style.css**\n- / bug  ** script.js**\n- /  ** index.html**\n- /  ** index.html**\n\n## \n- /  ** index.htmlstyle.cssscript.js**\n- /  ****\n-   ****\n\n# \n1. **  getVariables/insertOrAssignVariables**\n2. **  \\`typeof SillyTavern !== 'undefined'\\` localStorage  API**\n3. \n4. \n5. CSS \n6. JavaScript  \\`$(function() { ... })\\`  DOM \n7. \\`{ type: 'chat' }\\` \\`{ type: 'global' }\\` \n8. `;\n\n    const currentFiles = proj.files.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n    const userPrompt = `# \n${currentFiles}\n\n# \n${aiPrompt.value}\n\n#  \n1. ****\n2. **** 1 \n3. ****\n4. **** getVariables/insertOrAssignVariables\n\n system `;\n\n    // \n    streamingText.value = ''; // \n    let resultText = '';\n\n    progressDialogRef.value?.setProgress(25);\n    progressDialogRef.value?.setMessage(' AI ...');\n    taskStore.updateTaskProgress(taskId, 25, ' AI ...');\n    await new Promise(r => setTimeout(r, 100)); //  DOM \n\n    if (enableStream.value) {\n      // \n      progressDialogRef.value?.setProgress(30);\n      progressDialogRef.value?.setMessage(' AI ...');\n      taskStore.updateTaskProgress(taskId, 30, ' AI ...');\n      await new Promise(r => setTimeout(r, 100)); //  DOM \n\n      const response = await fetch(normalizedEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: model,\n          messages: [\n            { role: 'system', content: systemPrompt },\n            { role: 'user', content: userPrompt },\n          ],\n          temperature: temperature,\n          max_tokens: maxTokens,\n          stream: true, // \n        }),\n      });\n\n      if (!response.ok) {\n        let errorMsg = `API : ${response.status} ${response.statusText}`;\n        try {\n          const errorData = await response.json();\n          console.error('API :', errorData);\n          errorMsg += `\\n${JSON.stringify(errorData, null, 2)}`;\n        } catch (e) {\n          console.error('');\n        }\n        throw new Error(errorMsg);\n      }\n\n      // \n      const reader = response.body?.getReader();\n      const decoder = new TextDecoder();\n\n      if (!reader) {\n        throw new Error('');\n      }\n\n      let chunkCount = 0;\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        const chunk = decoder.decode(value, { stream: true });\n        const lines = chunk.split('\\n');\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') continue;\n\n            try {\n              const json = JSON.parse(data);\n              const content = json.choices?.[0]?.delta?.content || '';\n              if (content) {\n                resultText += content;\n                streamingText.value += content;\n                chunkCount++;\n\n                // 30%  60%\n                const progress = Math.min(60, 30 + chunkCount / 10);\n                progressDialogRef.value?.setProgress(progress);\n\n                // 10chunk\n                if (chunkCount % 10 === 0) {\n                  progressDialogRef.value?.setMessage(` AI ... (${resultText.length} )`);\n                }\n              }\n            } catch (e) {\n              // \n            }\n          }\n        }\n      }\n    } else {\n      // \n      progressDialogRef.value?.setProgress(30);\n      progressDialogRef.value?.setMessage(' AI ...');\n      taskStore.updateTaskProgress(taskId, 30, ' AI ...');\n      await new Promise(r => setTimeout(r, 100)); //  DOM \n\n      const response = await fetch(normalizedEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: model,\n          messages: [\n            { role: 'system', content: systemPrompt },\n            { role: 'user', content: userPrompt },\n          ],\n          temperature: temperature,\n          max_tokens: maxTokens,\n        }),\n      });\n\n      if (!response.ok) {\n        let errorMsg = `API : ${response.status} ${response.statusText}`;\n        try {\n          const errorData = await response.json();\n          console.error('API :', errorData);\n          errorMsg += `\\n${JSON.stringify(errorData, null, 2)}`;\n        } catch (e) {\n          console.error('');\n        }\n        throw new Error(errorMsg);\n      }\n\n      progressDialogRef.value?.setProgress(60);\n      progressDialogRef.value?.setMessage(' AI ...');\n      taskStore.updateTaskProgress(taskId, 60, ' AI ...');\n\n      const data = await response.json();\n      resultText = data.choices?.[0]?.message?.content || '';\n    }\n\n    progressDialogRef.value?.setProgress(75);\n    progressDialogRef.value?.setMessage(' AI ...');\n    taskStore.updateTaskProgress(taskId, 75, ' AI ...');\n\n    console.log('AI :', resultText);\n    console.log('AI :', resultText.length);\n\n    if (!resultText || resultText.trim().length === 0) {\n      throw new Error('AI  API ');\n    }\n\n    // \n    const changes: AIChange[] = [];\n    // FILE_START: filename\\n...FILE_END  FILE_START:filename\\n...FILE_END\n    const fileRegex = /FILE_START:\\s*(.+?)[\\r\\n]+([\\s\\S]*?)FILE_END/gi;\n    let match;\n\n    console.log(' AI ...');\n\n    // \n    const needMoreInfoMatch = resultText.match(/FILE_START:\\s*NEED_MORE_INFO\\s*[\\r\\n]+([\\s\\S]*?)FILE_END/i);\n    if (needMoreInfoMatch) {\n      const guideContent = needMoreInfoMatch[1].trim();\n      console.log(' AI ');\n\n      //  AI \n      closeAIDialog();\n\n      // \n      toastr.info('AI ', '', { timeOut: 3000 });\n\n      // alert\n      alert(guideContent);\n\n      // \n      aiGenerating.value = false;\n      return;\n    }\n\n    while ((match = fileRegex.exec(resultText)) !== null) {\n      const path = match[1].trim();\n      const content = match[2].trim();\n\n      console.log(`: ${path}, : ${content.length}`);\n\n      const file = proj.files.find(f => f.path === path);\n      if (file) {\n        changes.push({\n          path: path,\n          oldContent: file.content,\n          newContent: content,\n        });\n      } else {\n        console.warn(` ${path} `);\n      }\n    }\n\n    if (changes.length === 0) {\n      console.error(' AI ');\n      console.error('AI :', resultText.substring(0, 500));\n\n      // \n      if (resultText.length < 500 || !resultText.includes('FILE_END')) {\n        throw new Error(\n          `AI  ${resultText.length} \"\" max_tokens 4000 `,\n        );\n      }\n\n      throw new Error('AI  AI  FILE_START  FILE_END ');\n    }\n\n    console.log(':', changes.length, '');\n\n    progressDialogRef.value?.setProgress(85);\n    progressDialogRef.value?.setMessage('...');\n    taskStore.updateTaskProgress(taskId, 85, '...');\n\n    // \n    if (changes.length === 1 && changes[0].path === 'index.html') {\n      toastr.warning('AI  HTML CSS/JS');\n    }\n\n    //  FILE_END\n    const lastFile = resultText.trim().split('FILE_START').pop() || '';\n    if (!lastFile.includes('FILE_END')) {\n      toastr.error('AI ');\n    }\n\n    const result = { changes };\n\n    if (!result.changes || !Array.isArray(result.changes)) {\n      throw new Error('AI ');\n    }\n\n    // \n    aiChanges.value = result.changes;\n\n    progressDialogRef.value?.setProgress(95);\n    progressDialogRef.value?.setMessage(`... (${changes.length} )`);\n    taskStore.updateTaskProgress(taskId, 95, `... (${changes.length} )`);\n\n    closeAIDialog();\n    showComparison.value = true;\n    previewMode.value = 'after';\n\n    // \n    progressDialogRef.value?.setProgress(100);\n    progressDialogRef.value?.setMessage(' AI ');\n    taskStore.updateTaskProgress(taskId, 100, ' AI ');\n    taskStore.completeTask(taskId, { changedFiles: changes.length });\n\n    setTimeout(() => {\n      showProgress.value = false;\n      toastr.success(` AI  ${changes.length} `);\n    }, 800);\n  } catch (error: any) {\n    console.error('AI :', error);\n    const errorMessage = error.message || String(error);\n    taskStore.failTask(taskId, errorMessage);\n    showProgress.value = false;\n\n    //  CORS \n    if (\n      errorMessage.includes('CORS') ||\n      errorMessage.includes('Failed to fetch') ||\n      errorMessage.includes('Access-Control-Allow-Origin')\n    ) {\n      toastr.error(\n        ` CORS  API\\n\\n` +\n          `API ${new URL(normalizedEndpoint).origin} CORS \\n\\n` +\n          `\\n` +\n          `1.  API  CORS\\n` +\n          `2.  CORS  API \\n` +\n          `3.  API `,\n      );\n    } else if (errorMessage.includes('307') || errorMessage.includes('Temporary Redirect')) {\n      toastr.error(\n        ` URL \\n\\n` +\n          `${normalizedEndpoint}\\n\\n` +\n          `URL \\n` +\n          `https:///v1`,\n      );\n    } else {\n      toastr.error(`AI : ${errorMessage}`);\n    }\n  } finally {\n    aiGenerating.value = false;\n  }\n}\n\nfunction acceptChanges() {\n  const proj = currentProject.value;\n  if (!proj) return;\n\n  // \n  const historyRecord: AIHistoryRecord = {\n    timestamp: new Date().toISOString(),\n    prompt: aiPrompt.value,\n    changes: aiChanges.value,\n  };\n\n  if (!aiHistory.value[currentId.value]) {\n    aiHistory.value[currentId.value] = [];\n  }\n  aiHistory.value[currentId.value].unshift(historyRecord);\n  console.log(' AI :', aiHistory.value[currentId.value].length);\n\n  // \n  aiChanges.value.forEach(change => {\n    const file = proj.files.find(f => f.path === change.path);\n    if (file) {\n      file.content = change.newContent;\n    }\n  });\n\n  // \n  saveToChatVar();\n  updatePreview();\n\n  // \n  if (currentFile.value) {\n    const file = proj.files.find(f => f.path === currentFile.value);\n    if (file) {\n      code.value = file.content;\n    }\n  }\n\n  showComparison.value = false;\n  aiChanges.value = [];\n  toastr.success('');\n}\n\nfunction rejectChanges() {\n  showComparison.value = false;\n  aiChanges.value = [];\n  toastr.info('');\n}\n\nfunction showHistoryDialog() {\n  showHistory.value = true;\n}\n\nfunction closeHistoryDialog() {\n  showHistory.value = false;\n}\n\nfunction restoreHistory(record: AIHistoryRecord) {\n  if (!confirm(`\\n\\n\"${record.prompt}\"\\n\\n`)) {\n    return;\n  }\n\n  const proj = currentProject.value;\n  if (!proj) return;\n\n  // \n  record.changes.forEach(change => {\n    const file = proj.files.find(f => f.path === change.path);\n    if (file) {\n      file.content = change.newContent;\n    }\n  });\n\n  console.log(':', record.prompt);\n\n  // \n  saveToChatVar();\n  updatePreview();\n\n  // \n  if (currentFile.value) {\n    const file = proj.files.find(f => f.path === currentFile.value);\n    if (file) {\n      code.value = file.content;\n    }\n  }\n\n  closeHistoryDialog();\n  toastr.success('');\n}\n\nfunction exportToRegex() {\n  const proj = currentProject.value;\n  if (!proj) {\n    toastr.error('');\n    return;\n  }\n\n  // \n  const fileObj = proj.files.find(f => f.name === currentFile.value);\n  if (fileObj && code.value !== fileObj.content) {\n    const shouldContinue = confirm('\\n\\n');\n    if (!shouldContinue) {\n      return;\n    }\n  }\n\n  // \n  const triggerWord = prompt(\n    `${proj.name}\\n\\n\\n  //g`,\n    `${proj.name}`,\n  );\n  if (!triggerWord) {\n    toastr.info('');\n    return;\n  }\n\n  try {\n    //  HTML proj.files \n    const fullHtml = buildPreviewFromFiles(proj.files);\n\n    //  UUID\n    const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      const r = (Math.random() * 16) | 0;\n      const v = c === 'x' ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n\n    //  JSON\n    // 1.  Windows  \\r\n    // 2.  <!DOCTYPE html>\\n <html> \n    // 3. ```html\\n\\n<html>...</html>\\n```\n    let cleanHtml = fullHtml.replace(/\\r/g, '');\n    cleanHtml = cleanHtml.replace(/^<!DOCTYPE html>\\n/, '');\n\n    const regexJson = {\n      id: uuid,\n      scriptName: proj.name,\n      findRegex: triggerWord.startsWith('/') ? triggerWord : `/${triggerWord}/g`,\n      replaceString: '```html\\n\\n' + cleanHtml + '\\n```',\n      trimStrings: [],\n      placement: [1, 2],\n      disabled: false,\n      markdownOnly: true,\n      promptOnly: false,\n      runOnEdit: true,\n      substituteRegex: 0,\n      minDepth: null,\n      maxDepth: null,\n    };\n\n    // \n    const dataStr = JSON.stringify(regexJson, null, 4);\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\n    const url = URL.createObjectURL(dataBlob);\n\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${proj.name}_regex.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n\n    console.log(' JSON:', regexJson);\n    toastr.success(` \"${proj.name}\"  JSON`);\n  } catch (error: any) {\n    console.error(':', error);\n    toastr.error(`: ${error.message}`);\n  }\n}\n\nfunction openInNewWindow() {\n  if (!previewHtml.value) {\n    toastr.error('');\n    return;\n  }\n\n  const proj = currentProject.value;\n  const windowTitle = proj ? proj.name : '';\n\n  // \n  const newWindow = window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no');\n\n  if (newWindow) {\n    newWindow.document.write(previewHtml.value);\n    newWindow.document.close();\n    newWindow.document.title = windowTitle;\n    toastr.success('');\n  } else {\n    toastr.error('');\n  }\n}\n</script>\n\n<style scoped>\n/*  */\n@keyframes blink {\n  0%,\n  50% {\n    opacity: 1;\n  }\n  51%,\n  100% {\n    opacity: 0;\n  }\n}\n\n.project-tab {\n  padding: 25px !important;\n  background: #1a1a1a !important;\n}\n\n/*  */\n.project-tab ::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n}\n\n.project-tab ::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\n.project-tab ::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.project-tab ::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n</style>\n","import { shallowRef, watchEffect, readonly, watch, customRef, getCurrentScope, onScopeDispose, effectScope, getCurrentInstance, hasInjectionContext, inject, provide, ref, isRef, unref, toValue as toValue$1, computed, reactive, toRefs as toRefs$1, toRef as toRef$1, shallowReadonly, onBeforeMount, nextTick, onBeforeUnmount, onMounted, onUnmounted, isReactive } from 'vue';\n\nfunction computedEager(fn, options) {\n  var _a;\n  const result = shallowRef();\n  watchEffect(() => {\n    result.value = fn();\n  }, {\n    ...options,\n    flush: (_a = options == null ? void 0 : options.flush) != null ? _a : \"sync\"\n  });\n  return readonly(result);\n}\n\nfunction computedWithControl(source, fn, options = {}) {\n  let v = void 0;\n  let track;\n  let trigger;\n  let dirty = true;\n  const update = () => {\n    dirty = true;\n    trigger();\n  };\n  watch(source, update, { flush: \"sync\", ...options });\n  const get = typeof fn === \"function\" ? fn : fn.get;\n  const set = typeof fn === \"function\" ? void 0 : fn.set;\n  const result = customRef((_track, _trigger) => {\n    track = _track;\n    trigger = _trigger;\n    return {\n      get() {\n        if (dirty) {\n          v = get(v);\n          dirty = false;\n        }\n        track();\n        return v;\n      },\n      set(v2) {\n        set == null ? void 0 : set(v2);\n      }\n    };\n  });\n  result.trigger = update;\n  return result;\n}\n\nfunction tryOnScopeDispose(fn) {\n  if (getCurrentScope()) {\n    onScopeDispose(fn);\n    return true;\n  }\n  return false;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createEventHook() {\n  const fns = /* @__PURE__ */ new Set();\n  const off = (fn) => {\n    fns.delete(fn);\n  };\n  const clear = () => {\n    fns.clear();\n  };\n  const on = (fn) => {\n    fns.add(fn);\n    const offFn = () => off(fn);\n    tryOnScopeDispose(offFn);\n    return {\n      off: offFn\n    };\n  };\n  const trigger = (...args) => {\n    return Promise.all(Array.from(fns).map((fn) => fn(...args)));\n  };\n  return {\n    on,\n    off,\n    trigger,\n    clear\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createGlobalState(stateFactory) {\n  let initialized = false;\n  let state;\n  const scope = effectScope(true);\n  return (...args) => {\n    if (!initialized) {\n      state = scope.run(() => stateFactory(...args));\n      initialized = true;\n    }\n    return state;\n  };\n}\n\nconst localProvidedStateMap = /* @__PURE__ */ new WeakMap();\n\nconst injectLocal = /* @__NO_SIDE_EFFECTS__ */ (...args) => {\n  var _a;\n  const key = args[0];\n  const instance = (_a = getCurrentInstance()) == null ? void 0 : _a.proxy;\n  if (instance == null && !hasInjectionContext())\n    throw new Error(\"injectLocal must be called in setup\");\n  if (instance && localProvidedStateMap.has(instance) && key in localProvidedStateMap.get(instance))\n    return localProvidedStateMap.get(instance)[key];\n  return inject(...args);\n};\n\nfunction provideLocal(key, value) {\n  var _a;\n  const instance = (_a = getCurrentInstance()) == null ? void 0 : _a.proxy;\n  if (instance == null)\n    throw new Error(\"provideLocal must be called in setup\");\n  if (!localProvidedStateMap.has(instance))\n    localProvidedStateMap.set(instance, /* @__PURE__ */ Object.create(null));\n  const localProvidedState = localProvidedStateMap.get(instance);\n  localProvidedState[key] = value;\n  return provide(key, value);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createInjectionState(composable, options) {\n  const key = (options == null ? void 0 : options.injectionKey) || Symbol(composable.name || \"InjectionState\");\n  const defaultValue = options == null ? void 0 : options.defaultValue;\n  const useProvidingState = (...args) => {\n    const state = composable(...args);\n    provideLocal(key, state);\n    return state;\n  };\n  const useInjectedState = () => injectLocal(key, defaultValue);\n  return [useProvidingState, useInjectedState];\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createRef(value, deep) {\n  if (deep === true) {\n    return ref(value);\n  } else {\n    return shallowRef(value);\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createSharedComposable(composable) {\n  let subscribers = 0;\n  let state;\n  let scope;\n  const dispose = () => {\n    subscribers -= 1;\n    if (scope && subscribers <= 0) {\n      scope.stop();\n      state = void 0;\n      scope = void 0;\n    }\n  };\n  return (...args) => {\n    subscribers += 1;\n    if (!scope) {\n      scope = effectScope(true);\n      state = scope.run(() => composable(...args));\n    }\n    tryOnScopeDispose(dispose);\n    return state;\n  };\n}\n\nfunction extendRef(ref, extend, { enumerable = false, unwrap = true } = {}) {\n  for (const [key, value] of Object.entries(extend)) {\n    if (key === \"value\")\n      continue;\n    if (isRef(value) && unwrap) {\n      Object.defineProperty(ref, key, {\n        get() {\n          return value.value;\n        },\n        set(v) {\n          value.value = v;\n        },\n        enumerable\n      });\n    } else {\n      Object.defineProperty(ref, key, { value, enumerable });\n    }\n  }\n  return ref;\n}\n\nfunction get(obj, key) {\n  if (key == null)\n    return unref(obj);\n  return unref(obj)[key];\n}\n\nfunction isDefined(v) {\n  return unref(v) != null;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction makeDestructurable(obj, arr) {\n  if (typeof Symbol !== \"undefined\") {\n    const clone = { ...obj };\n    Object.defineProperty(clone, Symbol.iterator, {\n      enumerable: false,\n      value() {\n        let index = 0;\n        return {\n          next: () => ({\n            value: arr[index++],\n            done: index > arr.length\n          })\n        };\n      }\n    });\n    return clone;\n  } else {\n    return Object.assign([...arr], obj);\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction reactify(fn, options) {\n  const unrefFn = (options == null ? void 0 : options.computedGetter) === false ? unref : toValue$1;\n  return function(...args) {\n    return computed(() => fn.apply(this, args.map((i) => unrefFn(i))));\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction reactifyObject(obj, optionsOrKeys = {}) {\n  let keys = [];\n  let options;\n  if (Array.isArray(optionsOrKeys)) {\n    keys = optionsOrKeys;\n  } else {\n    options = optionsOrKeys;\n    const { includeOwnProperties = true } = optionsOrKeys;\n    keys.push(...Object.keys(obj));\n    if (includeOwnProperties)\n      keys.push(...Object.getOwnPropertyNames(obj));\n  }\n  return Object.fromEntries(\n    keys.map((key) => {\n      const value = obj[key];\n      return [\n        key,\n        typeof value === \"function\" ? reactify(value.bind(obj), options) : value\n      ];\n    })\n  );\n}\n\nfunction toReactive(objectRef) {\n  if (!isRef(objectRef))\n    return reactive(objectRef);\n  const proxy = new Proxy({}, {\n    get(_, p, receiver) {\n      return unref(Reflect.get(objectRef.value, p, receiver));\n    },\n    set(_, p, value) {\n      if (isRef(objectRef.value[p]) && !isRef(value))\n        objectRef.value[p].value = value;\n      else\n        objectRef.value[p] = value;\n      return true;\n    },\n    deleteProperty(_, p) {\n      return Reflect.deleteProperty(objectRef.value, p);\n    },\n    has(_, p) {\n      return Reflect.has(objectRef.value, p);\n    },\n    ownKeys() {\n      return Object.keys(objectRef.value);\n    },\n    getOwnPropertyDescriptor() {\n      return {\n        enumerable: true,\n        configurable: true\n      };\n    }\n  });\n  return reactive(proxy);\n}\n\nfunction reactiveComputed(fn) {\n  return toReactive(computed(fn));\n}\n\nfunction reactiveOmit(obj, ...keys) {\n  const flatKeys = keys.flat();\n  const predicate = flatKeys[0];\n  return reactiveComputed(() => typeof predicate === \"function\" ? Object.fromEntries(Object.entries(toRefs$1(obj)).filter(([k, v]) => !predicate(toValue$1(v), k))) : Object.fromEntries(Object.entries(toRefs$1(obj)).filter((e) => !flatKeys.includes(e[0]))));\n}\n\nconst isClient = typeof window !== \"undefined\" && typeof document !== \"undefined\";\nconst isWorker = typeof WorkerGlobalScope !== \"undefined\" && globalThis instanceof WorkerGlobalScope;\nconst isDef = (val) => typeof val !== \"undefined\";\nconst notNullish = (val) => val != null;\nconst assert = (condition, ...infos) => {\n  if (!condition)\n    console.warn(...infos);\n};\nconst toString = Object.prototype.toString;\nconst isObject = (val) => toString.call(val) === \"[object Object]\";\nconst now = () => Date.now();\nconst timestamp = () => +Date.now();\nconst clamp = (n, min, max) => Math.min(max, Math.max(min, n));\nconst noop = () => {\n};\nconst rand = (min, max) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\nconst hasOwn = (val, key) => Object.prototype.hasOwnProperty.call(val, key);\nconst isIOS = /* @__PURE__ */ getIsIOS();\nfunction getIsIOS() {\n  var _a, _b;\n  return isClient && ((_a = window == null ? void 0 : window.navigator) == null ? void 0 : _a.userAgent) && (/iP(?:ad|hone|od)/.test(window.navigator.userAgent) || ((_b = window == null ? void 0 : window.navigator) == null ? void 0 : _b.maxTouchPoints) > 2 && /iPad|Macintosh/.test(window == null ? void 0 : window.navigator.userAgent));\n}\n\nfunction toRef(...args) {\n  if (args.length !== 1)\n    return toRef$1(...args);\n  const r = args[0];\n  return typeof r === \"function\" ? readonly(customRef(() => ({ get: r, set: noop }))) : ref(r);\n}\nconst resolveRef = toRef;\n\nfunction reactivePick(obj, ...keys) {\n  const flatKeys = keys.flat();\n  const predicate = flatKeys[0];\n  return reactiveComputed(() => typeof predicate === \"function\" ? Object.fromEntries(Object.entries(toRefs$1(obj)).filter(([k, v]) => predicate(toValue$1(v), k))) : Object.fromEntries(flatKeys.map((k) => [k, toRef(obj, k)])));\n}\n\nfunction refAutoReset(defaultValue, afterMs = 1e4) {\n  return customRef((track, trigger) => {\n    let value = toValue$1(defaultValue);\n    let timer;\n    const resetAfter = () => setTimeout(() => {\n      value = toValue$1(defaultValue);\n      trigger();\n    }, toValue$1(afterMs));\n    tryOnScopeDispose(() => {\n      clearTimeout(timer);\n    });\n    return {\n      get() {\n        track();\n        return value;\n      },\n      set(newValue) {\n        value = newValue;\n        trigger();\n        clearTimeout(timer);\n        timer = resetAfter();\n      }\n    };\n  });\n}\n\nfunction createFilterWrapper(filter, fn) {\n  function wrapper(...args) {\n    return new Promise((resolve, reject) => {\n      Promise.resolve(filter(() => fn.apply(this, args), { fn, thisArg: this, args })).then(resolve).catch(reject);\n    });\n  }\n  return wrapper;\n}\nconst bypassFilter = (invoke) => {\n  return invoke();\n};\nfunction debounceFilter(ms, options = {}) {\n  let timer;\n  let maxTimer;\n  let lastRejector = noop;\n  const _clearTimeout = (timer2) => {\n    clearTimeout(timer2);\n    lastRejector();\n    lastRejector = noop;\n  };\n  let lastInvoker;\n  const filter = (invoke) => {\n    const duration = toValue$1(ms);\n    const maxDuration = toValue$1(options.maxWait);\n    if (timer)\n      _clearTimeout(timer);\n    if (duration <= 0 || maxDuration !== void 0 && maxDuration <= 0) {\n      if (maxTimer) {\n        _clearTimeout(maxTimer);\n        maxTimer = void 0;\n      }\n      return Promise.resolve(invoke());\n    }\n    return new Promise((resolve, reject) => {\n      lastRejector = options.rejectOnCancel ? reject : resolve;\n      lastInvoker = invoke;\n      if (maxDuration && !maxTimer) {\n        maxTimer = setTimeout(() => {\n          if (timer)\n            _clearTimeout(timer);\n          maxTimer = void 0;\n          resolve(lastInvoker());\n        }, maxDuration);\n      }\n      timer = setTimeout(() => {\n        if (maxTimer)\n          _clearTimeout(maxTimer);\n        maxTimer = void 0;\n        resolve(invoke());\n      }, duration);\n    });\n  };\n  return filter;\n}\nfunction throttleFilter(...args) {\n  let lastExec = 0;\n  let timer;\n  let isLeading = true;\n  let lastRejector = noop;\n  let lastValue;\n  let ms;\n  let trailing;\n  let leading;\n  let rejectOnCancel;\n  if (!isRef(args[0]) && typeof args[0] === \"object\")\n    ({ delay: ms, trailing = true, leading = true, rejectOnCancel = false } = args[0]);\n  else\n    [ms, trailing = true, leading = true, rejectOnCancel = false] = args;\n  const clear = () => {\n    if (timer) {\n      clearTimeout(timer);\n      timer = void 0;\n      lastRejector();\n      lastRejector = noop;\n    }\n  };\n  const filter = (_invoke) => {\n    const duration = toValue$1(ms);\n    const elapsed = Date.now() - lastExec;\n    const invoke = () => {\n      return lastValue = _invoke();\n    };\n    clear();\n    if (duration <= 0) {\n      lastExec = Date.now();\n      return invoke();\n    }\n    if (elapsed > duration && (leading || !isLeading)) {\n      lastExec = Date.now();\n      invoke();\n    } else if (trailing) {\n      lastValue = new Promise((resolve, reject) => {\n        lastRejector = rejectOnCancel ? reject : resolve;\n        timer = setTimeout(() => {\n          lastExec = Date.now();\n          isLeading = true;\n          resolve(invoke());\n          clear();\n        }, Math.max(0, duration - elapsed));\n      });\n    }\n    if (!leading && !timer)\n      timer = setTimeout(() => isLeading = true, duration);\n    isLeading = false;\n    return lastValue;\n  };\n  return filter;\n}\nfunction pausableFilter(extendFilter = bypassFilter, options = {}) {\n  const {\n    initialState = \"active\"\n  } = options;\n  const isActive = toRef(initialState === \"active\");\n  function pause() {\n    isActive.value = false;\n  }\n  function resume() {\n    isActive.value = true;\n  }\n  const eventFilter = (...args) => {\n    if (isActive.value)\n      extendFilter(...args);\n  };\n  return { isActive: readonly(isActive), pause, resume, eventFilter };\n}\n\nfunction promiseTimeout(ms, throwOnTimeout = false, reason = \"Timeout\") {\n  return new Promise((resolve, reject) => {\n    if (throwOnTimeout)\n      setTimeout(() => reject(reason), ms);\n    else\n      setTimeout(resolve, ms);\n  });\n}\nfunction identity(arg) {\n  return arg;\n}\nfunction createSingletonPromise(fn) {\n  let _promise;\n  function wrapper() {\n    if (!_promise)\n      _promise = fn();\n    return _promise;\n  }\n  wrapper.reset = async () => {\n    const _prev = _promise;\n    _promise = void 0;\n    if (_prev)\n      await _prev;\n  };\n  return wrapper;\n}\nfunction invoke(fn) {\n  return fn();\n}\nfunction containsProp(obj, ...props) {\n  return props.some((k) => k in obj);\n}\nfunction increaseWithUnit(target, delta) {\n  var _a;\n  if (typeof target === \"number\")\n    return target + delta;\n  const value = ((_a = target.match(/^-?\\d+\\.?\\d*/)) == null ? void 0 : _a[0]) || \"\";\n  const unit = target.slice(value.length);\n  const result = Number.parseFloat(value) + delta;\n  if (Number.isNaN(result))\n    return target;\n  return result + unit;\n}\nfunction pxValue(px) {\n  return px.endsWith(\"rem\") ? Number.parseFloat(px) * 16 : Number.parseFloat(px);\n}\nfunction objectPick(obj, keys, omitUndefined = false) {\n  return keys.reduce((n, k) => {\n    if (k in obj) {\n      if (!omitUndefined || obj[k] !== void 0)\n        n[k] = obj[k];\n    }\n    return n;\n  }, {});\n}\nfunction objectOmit(obj, keys, omitUndefined = false) {\n  return Object.fromEntries(Object.entries(obj).filter(([key, value]) => {\n    return (!omitUndefined || value !== void 0) && !keys.includes(key);\n  }));\n}\nfunction objectEntries(obj) {\n  return Object.entries(obj);\n}\nfunction toArray(value) {\n  return Array.isArray(value) ? value : [value];\n}\n\nfunction cacheStringFunction(fn) {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n}\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, \"-$1\").toLowerCase());\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction((str) => {\n  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n});\n\nfunction getLifeCycleTarget(target) {\n  return target || getCurrentInstance();\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useDebounceFn(fn, ms = 200, options = {}) {\n  return createFilterWrapper(\n    debounceFilter(ms, options),\n    fn\n  );\n}\n\nfunction refDebounced(value, ms = 200, options = {}) {\n  const debounced = ref(toValue$1(value));\n  const updater = useDebounceFn(() => {\n    debounced.value = value.value;\n  }, ms, options);\n  watch(value, () => updater());\n  return shallowReadonly(debounced);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction refDefault(source, defaultValue) {\n  return computed({\n    get() {\n      var _a;\n      return (_a = source.value) != null ? _a : defaultValue;\n    },\n    set(value) {\n      source.value = value;\n    }\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useThrottleFn(fn, ms = 200, trailing = false, leading = true, rejectOnCancel = false) {\n  return createFilterWrapper(\n    throttleFilter(ms, trailing, leading, rejectOnCancel),\n    fn\n  );\n}\n\nfunction refThrottled(value, delay = 200, trailing = true, leading = true) {\n  if (delay <= 0)\n    return value;\n  const throttled = ref(toValue$1(value));\n  const updater = useThrottleFn(() => {\n    throttled.value = value.value;\n  }, delay, trailing, leading);\n  watch(value, () => updater());\n  return throttled;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction refWithControl(initial, options = {}) {\n  let source = initial;\n  let track;\n  let trigger;\n  const ref = customRef((_track, _trigger) => {\n    track = _track;\n    trigger = _trigger;\n    return {\n      get() {\n        return get();\n      },\n      set(v) {\n        set(v);\n      }\n    };\n  });\n  function get(tracking = true) {\n    if (tracking)\n      track();\n    return source;\n  }\n  function set(value, triggering = true) {\n    var _a, _b;\n    if (value === source)\n      return;\n    const old = source;\n    if (((_a = options.onBeforeChange) == null ? void 0 : _a.call(options, value, old)) === false)\n      return;\n    source = value;\n    (_b = options.onChanged) == null ? void 0 : _b.call(options, value, old);\n    if (triggering)\n      trigger();\n  }\n  const untrackedGet = () => get(false);\n  const silentSet = (v) => set(v, false);\n  const peek = () => get(false);\n  const lay = (v) => set(v, false);\n  return extendRef(\n    ref,\n    {\n      get,\n      set,\n      untrackedGet,\n      silentSet,\n      peek,\n      lay\n    },\n    { enumerable: true }\n  );\n}\nconst controlledRef = refWithControl;\n\nfunction set(...args) {\n  if (args.length === 2) {\n    const [ref, value] = args;\n    ref.value = value;\n  }\n  if (args.length === 3) {\n    const [target, key, value] = args;\n    target[key] = value;\n  }\n}\n\nfunction watchWithFilter(source, cb, options = {}) {\n  const {\n    eventFilter = bypassFilter,\n    ...watchOptions\n  } = options;\n  return watch(\n    source,\n    createFilterWrapper(\n      eventFilter,\n      cb\n    ),\n    watchOptions\n  );\n}\n\nfunction watchPausable(source, cb, options = {}) {\n  const {\n    eventFilter: filter,\n    initialState = \"active\",\n    ...watchOptions\n  } = options;\n  const { eventFilter, pause, resume, isActive } = pausableFilter(filter, { initialState });\n  const stop = watchWithFilter(\n    source,\n    cb,\n    {\n      ...watchOptions,\n      eventFilter\n    }\n  );\n  return { stop, pause, resume, isActive };\n}\n\nfunction syncRef(left, right, ...[options]) {\n  const {\n    flush = \"sync\",\n    deep = false,\n    immediate = true,\n    direction = \"both\",\n    transform = {}\n  } = options || {};\n  const watchers = [];\n  const transformLTR = \"ltr\" in transform && transform.ltr || ((v) => v);\n  const transformRTL = \"rtl\" in transform && transform.rtl || ((v) => v);\n  if (direction === \"both\" || direction === \"ltr\") {\n    watchers.push(watchPausable(\n      left,\n      (newValue) => {\n        watchers.forEach((w) => w.pause());\n        right.value = transformLTR(newValue);\n        watchers.forEach((w) => w.resume());\n      },\n      { flush, deep, immediate }\n    ));\n  }\n  if (direction === \"both\" || direction === \"rtl\") {\n    watchers.push(watchPausable(\n      right,\n      (newValue) => {\n        watchers.forEach((w) => w.pause());\n        left.value = transformRTL(newValue);\n        watchers.forEach((w) => w.resume());\n      },\n      { flush, deep, immediate }\n    ));\n  }\n  const stop = () => {\n    watchers.forEach((w) => w.stop());\n  };\n  return stop;\n}\n\nfunction syncRefs(source, targets, options = {}) {\n  const {\n    flush = \"sync\",\n    deep = false,\n    immediate = true\n  } = options;\n  const targetsArray = toArray(targets);\n  return watch(\n    source,\n    (newValue) => targetsArray.forEach((target) => target.value = newValue),\n    { flush, deep, immediate }\n  );\n}\n\nfunction toRefs(objectRef, options = {}) {\n  if (!isRef(objectRef))\n    return toRefs$1(objectRef);\n  const result = Array.isArray(objectRef.value) ? Array.from({ length: objectRef.value.length }) : {};\n  for (const key in objectRef.value) {\n    result[key] = customRef(() => ({\n      get() {\n        return objectRef.value[key];\n      },\n      set(v) {\n        var _a;\n        const replaceRef = (_a = toValue$1(options.replaceRef)) != null ? _a : true;\n        if (replaceRef) {\n          if (Array.isArray(objectRef.value)) {\n            const copy = [...objectRef.value];\n            copy[key] = v;\n            objectRef.value = copy;\n          } else {\n            const newObject = { ...objectRef.value, [key]: v };\n            Object.setPrototypeOf(newObject, Object.getPrototypeOf(objectRef.value));\n            objectRef.value = newObject;\n          }\n        } else {\n          objectRef.value[key] = v;\n        }\n      }\n    }));\n  }\n  return result;\n}\n\nconst toValue = toValue$1;\nconst resolveUnref = toValue$1;\n\nfunction tryOnBeforeMount(fn, sync = true, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onBeforeMount(fn, target);\n  else if (sync)\n    fn();\n  else\n    nextTick(fn);\n}\n\nfunction tryOnBeforeUnmount(fn, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onBeforeUnmount(fn, target);\n}\n\nfunction tryOnMounted(fn, sync = true, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onMounted(fn, target);\n  else if (sync)\n    fn();\n  else\n    nextTick(fn);\n}\n\nfunction tryOnUnmounted(fn, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onUnmounted(fn, target);\n}\n\nfunction createUntil(r, isNot = false) {\n  function toMatch(condition, { flush = \"sync\", deep = false, timeout, throwOnTimeout } = {}) {\n    let stop = null;\n    const watcher = new Promise((resolve) => {\n      stop = watch(\n        r,\n        (v) => {\n          if (condition(v) !== isNot) {\n            if (stop)\n              stop();\n            else\n              nextTick(() => stop == null ? void 0 : stop());\n            resolve(v);\n          }\n        },\n        {\n          flush,\n          deep,\n          immediate: true\n        }\n      );\n    });\n    const promises = [watcher];\n    if (timeout != null) {\n      promises.push(\n        promiseTimeout(timeout, throwOnTimeout).then(() => toValue$1(r)).finally(() => stop == null ? void 0 : stop())\n      );\n    }\n    return Promise.race(promises);\n  }\n  function toBe(value, options) {\n    if (!isRef(value))\n      return toMatch((v) => v === value, options);\n    const { flush = \"sync\", deep = false, timeout, throwOnTimeout } = options != null ? options : {};\n    let stop = null;\n    const watcher = new Promise((resolve) => {\n      stop = watch(\n        [r, value],\n        ([v1, v2]) => {\n          if (isNot !== (v1 === v2)) {\n            if (stop)\n              stop();\n            else\n              nextTick(() => stop == null ? void 0 : stop());\n            resolve(v1);\n          }\n        },\n        {\n          flush,\n          deep,\n          immediate: true\n        }\n      );\n    });\n    const promises = [watcher];\n    if (timeout != null) {\n      promises.push(\n        promiseTimeout(timeout, throwOnTimeout).then(() => toValue$1(r)).finally(() => {\n          stop == null ? void 0 : stop();\n          return toValue$1(r);\n        })\n      );\n    }\n    return Promise.race(promises);\n  }\n  function toBeTruthy(options) {\n    return toMatch((v) => Boolean(v), options);\n  }\n  function toBeNull(options) {\n    return toBe(null, options);\n  }\n  function toBeUndefined(options) {\n    return toBe(void 0, options);\n  }\n  function toBeNaN(options) {\n    return toMatch(Number.isNaN, options);\n  }\n  function toContains(value, options) {\n    return toMatch((v) => {\n      const array = Array.from(v);\n      return array.includes(value) || array.includes(toValue$1(value));\n    }, options);\n  }\n  function changed(options) {\n    return changedTimes(1, options);\n  }\n  function changedTimes(n = 1, options) {\n    let count = -1;\n    return toMatch(() => {\n      count += 1;\n      return count >= n;\n    }, options);\n  }\n  if (Array.isArray(toValue$1(r))) {\n    const instance = {\n      toMatch,\n      toContains,\n      changed,\n      changedTimes,\n      get not() {\n        return createUntil(r, !isNot);\n      }\n    };\n    return instance;\n  } else {\n    const instance = {\n      toMatch,\n      toBe,\n      toBeTruthy,\n      toBeNull,\n      toBeNaN,\n      toBeUndefined,\n      changed,\n      changedTimes,\n      get not() {\n        return createUntil(r, !isNot);\n      }\n    };\n    return instance;\n  }\n}\nfunction until(r) {\n  return createUntil(r);\n}\n\nfunction defaultComparator(value, othVal) {\n  return value === othVal;\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayDifference(...args) {\n  var _a, _b;\n  const list = args[0];\n  const values = args[1];\n  let compareFn = (_a = args[2]) != null ? _a : defaultComparator;\n  const {\n    symmetric = false\n  } = (_b = args[3]) != null ? _b : {};\n  if (typeof compareFn === \"string\") {\n    const key = compareFn;\n    compareFn = (value, othVal) => value[key] === othVal[key];\n  }\n  const diff1 = computed(() => toValue$1(list).filter((x) => toValue$1(values).findIndex((y) => compareFn(x, y)) === -1));\n  if (symmetric) {\n    const diff2 = computed(() => toValue$1(values).filter((x) => toValue$1(list).findIndex((y) => compareFn(x, y)) === -1));\n    return computed(() => symmetric ? [...toValue$1(diff1), ...toValue$1(diff2)] : toValue$1(diff1));\n  } else {\n    return diff1;\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayEvery(list, fn) {\n  return computed(() => toValue$1(list).every((element, index, array) => fn(toValue$1(element), index, array)));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFilter(list, fn) {\n  return computed(() => toValue$1(list).map((i) => toValue$1(i)).filter(fn));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFind(list, fn) {\n  return computed(() => toValue$1(\n    toValue$1(list).find((element, index, array) => fn(toValue$1(element), index, array))\n  ));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFindIndex(list, fn) {\n  return computed(() => toValue$1(list).findIndex((element, index, array) => fn(toValue$1(element), index, array)));\n}\n\nfunction findLast(arr, cb) {\n  let index = arr.length;\n  while (index-- > 0) {\n    if (cb(arr[index], index, arr))\n      return arr[index];\n  }\n  return void 0;\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFindLast(list, fn) {\n  return computed(() => toValue$1(\n    !Array.prototype.findLast ? findLast(toValue$1(list), (element, index, array) => fn(toValue$1(element), index, array)) : toValue$1(list).findLast((element, index, array) => fn(toValue$1(element), index, array))\n  ));\n}\n\nfunction isArrayIncludesOptions(obj) {\n  return isObject(obj) && containsProp(obj, \"formIndex\", \"comparator\");\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayIncludes(...args) {\n  var _a;\n  const list = args[0];\n  const value = args[1];\n  let comparator = args[2];\n  let formIndex = 0;\n  if (isArrayIncludesOptions(comparator)) {\n    formIndex = (_a = comparator.fromIndex) != null ? _a : 0;\n    comparator = comparator.comparator;\n  }\n  if (typeof comparator === \"string\") {\n    const key = comparator;\n    comparator = (element, value2) => element[key] === toValue$1(value2);\n  }\n  comparator = comparator != null ? comparator : (element, value2) => element === toValue$1(value2);\n  return computed(() => toValue$1(list).slice(formIndex).some((element, index, array) => comparator(\n    toValue$1(element),\n    toValue$1(value),\n    index,\n    toValue$1(array)\n  )));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayJoin(list, separator) {\n  return computed(() => toValue$1(list).map((i) => toValue$1(i)).join(toValue$1(separator)));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayMap(list, fn) {\n  return computed(() => toValue$1(list).map((i) => toValue$1(i)).map(fn));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayReduce(list, reducer, ...args) {\n  const reduceCallback = (sum, value, index) => reducer(toValue$1(sum), toValue$1(value), index);\n  return computed(() => {\n    const resolved = toValue$1(list);\n    return args.length ? resolved.reduce(reduceCallback, typeof args[0] === \"function\" ? toValue$1(args[0]()) : toValue$1(args[0])) : resolved.reduce(reduceCallback);\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArraySome(list, fn) {\n  return computed(() => toValue$1(list).some((element, index, array) => fn(toValue$1(element), index, array)));\n}\n\nfunction uniq(array) {\n  return Array.from(new Set(array));\n}\nfunction uniqueElementsBy(array, fn) {\n  return array.reduce((acc, v) => {\n    if (!acc.some((x) => fn(v, x, array)))\n      acc.push(v);\n    return acc;\n  }, []);\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayUnique(list, compareFn) {\n  return computed(() => {\n    const resolvedList = toValue$1(list).map((element) => toValue$1(element));\n    return compareFn ? uniqueElementsBy(resolvedList, compareFn) : uniq(resolvedList);\n  });\n}\n\nfunction useCounter(initialValue = 0, options = {}) {\n  let _initialValue = unref(initialValue);\n  const count = shallowRef(initialValue);\n  const {\n    max = Number.POSITIVE_INFINITY,\n    min = Number.NEGATIVE_INFINITY\n  } = options;\n  const inc = (delta = 1) => count.value = Math.max(Math.min(max, count.value + delta), min);\n  const dec = (delta = 1) => count.value = Math.min(Math.max(min, count.value - delta), max);\n  const get = () => count.value;\n  const set = (val) => count.value = Math.max(min, Math.min(max, val));\n  const reset = (val = _initialValue) => {\n    _initialValue = val;\n    return set(val);\n  };\n  return { count: shallowReadonly(count), inc, dec, get, set, reset };\n}\n\nconst REGEX_PARSE = /^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[T\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/i;\nconst REGEX_FORMAT = /[YMDHhms]o|\\[([^\\]]+)\\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|z{1,4}|SSS/g;\nfunction defaultMeridiem(hours, minutes, isLowercase, hasPeriod) {\n  let m = hours < 12 ? \"AM\" : \"PM\";\n  if (hasPeriod)\n    m = m.split(\"\").reduce((acc, curr) => acc += `${curr}.`, \"\");\n  return isLowercase ? m.toLowerCase() : m;\n}\nfunction formatOrdinal(num) {\n  const suffixes = [\"th\", \"st\", \"nd\", \"rd\"];\n  const v = num % 100;\n  return num + (suffixes[(v - 20) % 10] || suffixes[v] || suffixes[0]);\n}\nfunction formatDate(date, formatStr, options = {}) {\n  var _a;\n  const years = date.getFullYear();\n  const month = date.getMonth();\n  const days = date.getDate();\n  const hours = date.getHours();\n  const minutes = date.getMinutes();\n  const seconds = date.getSeconds();\n  const milliseconds = date.getMilliseconds();\n  const day = date.getDay();\n  const meridiem = (_a = options.customMeridiem) != null ? _a : defaultMeridiem;\n  const stripTimeZone = (dateString) => {\n    var _a2;\n    return (_a2 = dateString.split(\" \")[1]) != null ? _a2 : \"\";\n  };\n  const matches = {\n    Yo: () => formatOrdinal(years),\n    YY: () => String(years).slice(-2),\n    YYYY: () => years,\n    M: () => month + 1,\n    Mo: () => formatOrdinal(month + 1),\n    MM: () => `${month + 1}`.padStart(2, \"0\"),\n    MMM: () => date.toLocaleDateString(toValue$1(options.locales), { month: \"short\" }),\n    MMMM: () => date.toLocaleDateString(toValue$1(options.locales), { month: \"long\" }),\n    D: () => String(days),\n    Do: () => formatOrdinal(days),\n    DD: () => `${days}`.padStart(2, \"0\"),\n    H: () => String(hours),\n    Ho: () => formatOrdinal(hours),\n    HH: () => `${hours}`.padStart(2, \"0\"),\n    h: () => `${hours % 12 || 12}`.padStart(1, \"0\"),\n    ho: () => formatOrdinal(hours % 12 || 12),\n    hh: () => `${hours % 12 || 12}`.padStart(2, \"0\"),\n    m: () => String(minutes),\n    mo: () => formatOrdinal(minutes),\n    mm: () => `${minutes}`.padStart(2, \"0\"),\n    s: () => String(seconds),\n    so: () => formatOrdinal(seconds),\n    ss: () => `${seconds}`.padStart(2, \"0\"),\n    SSS: () => `${milliseconds}`.padStart(3, \"0\"),\n    d: () => day,\n    dd: () => date.toLocaleDateString(toValue$1(options.locales), { weekday: \"narrow\" }),\n    ddd: () => date.toLocaleDateString(toValue$1(options.locales), { weekday: \"short\" }),\n    dddd: () => date.toLocaleDateString(toValue$1(options.locales), { weekday: \"long\" }),\n    A: () => meridiem(hours, minutes),\n    AA: () => meridiem(hours, minutes, false, true),\n    a: () => meridiem(hours, minutes, true),\n    aa: () => meridiem(hours, minutes, true, true),\n    z: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"shortOffset\" })),\n    zz: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"shortOffset\" })),\n    zzz: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"shortOffset\" })),\n    zzzz: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"longOffset\" }))\n  };\n  return formatStr.replace(REGEX_FORMAT, (match, $1) => {\n    var _a2, _b;\n    return (_b = $1 != null ? $1 : (_a2 = matches[match]) == null ? void 0 : _a2.call(matches)) != null ? _b : match;\n  });\n}\nfunction normalizeDate(date) {\n  if (date === null)\n    return new Date(Number.NaN);\n  if (date === void 0)\n    return /* @__PURE__ */ new Date();\n  if (date instanceof Date)\n    return new Date(date);\n  if (typeof date === \"string\" && !/Z$/i.test(date)) {\n    const d = date.match(REGEX_PARSE);\n    if (d) {\n      const m = d[2] - 1 || 0;\n      const ms = (d[7] || \"0\").substring(0, 3);\n      return new Date(d[1], m, d[3] || 1, d[4] || 0, d[5] || 0, d[6] || 0, ms);\n    }\n  }\n  return new Date(date);\n}\n// @__NO_SIDE_EFFECTS__\nfunction useDateFormat(date, formatStr = \"HH:mm:ss\", options = {}) {\n  return computed(() => formatDate(normalizeDate(toValue$1(date)), toValue$1(formatStr), options));\n}\n\nfunction useIntervalFn(cb, interval = 1e3, options = {}) {\n  const {\n    immediate = true,\n    immediateCallback = false\n  } = options;\n  let timer = null;\n  const isActive = shallowRef(false);\n  function clean() {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n  }\n  function pause() {\n    isActive.value = false;\n    clean();\n  }\n  function resume() {\n    const intervalValue = toValue$1(interval);\n    if (intervalValue <= 0)\n      return;\n    isActive.value = true;\n    if (immediateCallback)\n      cb();\n    clean();\n    if (isActive.value)\n      timer = setInterval(cb, intervalValue);\n  }\n  if (immediate && isClient)\n    resume();\n  if (isRef(interval) || typeof interval === \"function\") {\n    const stopWatch = watch(interval, () => {\n      if (isActive.value && isClient)\n        resume();\n    });\n    tryOnScopeDispose(stopWatch);\n  }\n  tryOnScopeDispose(pause);\n  return {\n    isActive: shallowReadonly(isActive),\n    pause,\n    resume\n  };\n}\n\nfunction useInterval(interval = 1e3, options = {}) {\n  const {\n    controls: exposeControls = false,\n    immediate = true,\n    callback\n  } = options;\n  const counter = shallowRef(0);\n  const update = () => counter.value += 1;\n  const reset = () => {\n    counter.value = 0;\n  };\n  const controls = useIntervalFn(\n    callback ? () => {\n      update();\n      callback(counter.value);\n    } : update,\n    interval,\n    { immediate }\n  );\n  if (exposeControls) {\n    return {\n      counter: shallowReadonly(counter),\n      reset,\n      ...controls\n    };\n  } else {\n    return shallowReadonly(counter);\n  }\n}\n\nfunction useLastChanged(source, options = {}) {\n  var _a;\n  const ms = shallowRef((_a = options.initialValue) != null ? _a : null);\n  watch(\n    source,\n    () => ms.value = timestamp(),\n    options\n  );\n  return shallowReadonly(ms);\n}\n\nfunction useTimeoutFn(cb, interval, options = {}) {\n  const {\n    immediate = true,\n    immediateCallback = false\n  } = options;\n  const isPending = shallowRef(false);\n  let timer;\n  function clear() {\n    if (timer) {\n      clearTimeout(timer);\n      timer = void 0;\n    }\n  }\n  function stop() {\n    isPending.value = false;\n    clear();\n  }\n  function start(...args) {\n    if (immediateCallback)\n      cb();\n    clear();\n    isPending.value = true;\n    timer = setTimeout(() => {\n      isPending.value = false;\n      timer = void 0;\n      cb(...args);\n    }, toValue$1(interval));\n  }\n  if (immediate) {\n    isPending.value = true;\n    if (isClient)\n      start();\n  }\n  tryOnScopeDispose(stop);\n  return {\n    isPending: shallowReadonly(isPending),\n    start,\n    stop\n  };\n}\n\nfunction useTimeout(interval = 1e3, options = {}) {\n  const {\n    controls: exposeControls = false,\n    callback\n  } = options;\n  const controls = useTimeoutFn(\n    callback != null ? callback : noop,\n    interval,\n    options\n  );\n  const ready = computed(() => !controls.isPending.value);\n  if (exposeControls) {\n    return {\n      ready,\n      ...controls\n    };\n  } else {\n    return ready;\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useToNumber(value, options = {}) {\n  const {\n    method = \"parseFloat\",\n    radix,\n    nanToZero\n  } = options;\n  return computed(() => {\n    let resolved = toValue$1(value);\n    if (typeof method === \"function\")\n      resolved = method(resolved);\n    else if (typeof resolved === \"string\")\n      resolved = Number[method](resolved, radix);\n    if (nanToZero && Number.isNaN(resolved))\n      resolved = 0;\n    return resolved;\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useToString(value) {\n  return computed(() => `${toValue$1(value)}`);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useToggle(initialValue = false, options = {}) {\n  const {\n    truthyValue = true,\n    falsyValue = false\n  } = options;\n  const valueIsRef = isRef(initialValue);\n  const _value = shallowRef(initialValue);\n  function toggle(value) {\n    if (arguments.length) {\n      _value.value = value;\n      return _value.value;\n    } else {\n      const truthy = toValue$1(truthyValue);\n      _value.value = _value.value === truthy ? toValue$1(falsyValue) : truthy;\n      return _value.value;\n    }\n  }\n  if (valueIsRef)\n    return toggle;\n  else\n    return [_value, toggle];\n}\n\nfunction watchArray(source, cb, options) {\n  let oldList = (options == null ? void 0 : options.immediate) ? [] : [...typeof source === \"function\" ? source() : Array.isArray(source) ? source : toValue$1(source)];\n  return watch(source, (newList, _, onCleanup) => {\n    const oldListRemains = Array.from({ length: oldList.length });\n    const added = [];\n    for (const obj of newList) {\n      let found = false;\n      for (let i = 0; i < oldList.length; i++) {\n        if (!oldListRemains[i] && obj === oldList[i]) {\n          oldListRemains[i] = true;\n          found = true;\n          break;\n        }\n      }\n      if (!found)\n        added.push(obj);\n    }\n    const removed = oldList.filter((_2, i) => !oldListRemains[i]);\n    cb(newList, oldList, added, removed, onCleanup);\n    oldList = [...newList];\n  }, options);\n}\n\nfunction watchAtMost(source, cb, options) {\n  const {\n    count,\n    ...watchOptions\n  } = options;\n  const current = shallowRef(0);\n  const stop = watchWithFilter(\n    source,\n    (...args) => {\n      current.value += 1;\n      if (current.value >= toValue$1(count))\n        nextTick(() => stop());\n      cb(...args);\n    },\n    watchOptions\n  );\n  return { count: current, stop };\n}\n\nfunction watchDebounced(source, cb, options = {}) {\n  const {\n    debounce = 0,\n    maxWait = void 0,\n    ...watchOptions\n  } = options;\n  return watchWithFilter(\n    source,\n    cb,\n    {\n      ...watchOptions,\n      eventFilter: debounceFilter(debounce, { maxWait })\n    }\n  );\n}\n\nfunction watchDeep(source, cb, options) {\n  return watch(\n    source,\n    cb,\n    {\n      ...options,\n      deep: true\n    }\n  );\n}\n\nfunction watchIgnorable(source, cb, options = {}) {\n  const {\n    eventFilter = bypassFilter,\n    ...watchOptions\n  } = options;\n  const filteredCb = createFilterWrapper(\n    eventFilter,\n    cb\n  );\n  let ignoreUpdates;\n  let ignorePrevAsyncUpdates;\n  let stop;\n  if (watchOptions.flush === \"sync\") {\n    let ignore = false;\n    ignorePrevAsyncUpdates = () => {\n    };\n    ignoreUpdates = (updater) => {\n      ignore = true;\n      updater();\n      ignore = false;\n    };\n    stop = watch(\n      source,\n      (...args) => {\n        if (!ignore)\n          filteredCb(...args);\n      },\n      watchOptions\n    );\n  } else {\n    const disposables = [];\n    let ignoreCounter = 0;\n    let syncCounter = 0;\n    ignorePrevAsyncUpdates = () => {\n      ignoreCounter = syncCounter;\n    };\n    disposables.push(\n      watch(\n        source,\n        () => {\n          syncCounter++;\n        },\n        { ...watchOptions, flush: \"sync\" }\n      )\n    );\n    ignoreUpdates = (updater) => {\n      const syncCounterPrev = syncCounter;\n      updater();\n      ignoreCounter += syncCounter - syncCounterPrev;\n    };\n    disposables.push(\n      watch(\n        source,\n        (...args) => {\n          const ignore = ignoreCounter > 0 && ignoreCounter === syncCounter;\n          ignoreCounter = 0;\n          syncCounter = 0;\n          if (ignore)\n            return;\n          filteredCb(...args);\n        },\n        watchOptions\n      )\n    );\n    stop = () => {\n      disposables.forEach((fn) => fn());\n    };\n  }\n  return { stop, ignoreUpdates, ignorePrevAsyncUpdates };\n}\n\nfunction watchImmediate(source, cb, options) {\n  return watch(\n    source,\n    cb,\n    {\n      ...options,\n      immediate: true\n    }\n  );\n}\n\nfunction watchOnce(source, cb, options) {\n  return watch(\n    source,\n    cb,\n    {\n      ...options,\n      once: true\n    }\n  );\n}\n\nfunction watchThrottled(source, cb, options = {}) {\n  const {\n    throttle = 0,\n    trailing = true,\n    leading = true,\n    ...watchOptions\n  } = options;\n  return watchWithFilter(\n    source,\n    cb,\n    {\n      ...watchOptions,\n      eventFilter: throttleFilter(throttle, trailing, leading)\n    }\n  );\n}\n\nfunction watchTriggerable(source, cb, options = {}) {\n  let cleanupFn;\n  function onEffect() {\n    if (!cleanupFn)\n      return;\n    const fn = cleanupFn;\n    cleanupFn = void 0;\n    fn();\n  }\n  function onCleanup(callback) {\n    cleanupFn = callback;\n  }\n  const _cb = (value, oldValue) => {\n    onEffect();\n    return cb(value, oldValue, onCleanup);\n  };\n  const res = watchIgnorable(source, _cb, options);\n  const { ignoreUpdates } = res;\n  const trigger = () => {\n    let res2;\n    ignoreUpdates(() => {\n      res2 = _cb(getWatchSources(source), getOldValue(source));\n    });\n    return res2;\n  };\n  return {\n    ...res,\n    trigger\n  };\n}\nfunction getWatchSources(sources) {\n  if (isReactive(sources))\n    return sources;\n  if (Array.isArray(sources))\n    return sources.map((item) => toValue$1(item));\n  return toValue$1(sources);\n}\nfunction getOldValue(source) {\n  return Array.isArray(source) ? source.map(() => void 0) : void 0;\n}\n\nfunction whenever(source, cb, options) {\n  const stop = watch(\n    source,\n    (v, ov, onInvalidate) => {\n      if (v) {\n        if (options == null ? void 0 : options.once)\n          nextTick(() => stop());\n        cb(v, ov, onInvalidate);\n      }\n    },\n    {\n      ...options,\n      once: false\n    }\n  );\n  return stop;\n}\n\nexport { assert, refAutoReset as autoResetRef, bypassFilter, camelize, clamp, computedEager, computedWithControl, containsProp, computedWithControl as controlledComputed, controlledRef, createEventHook, createFilterWrapper, createGlobalState, createInjectionState, reactify as createReactiveFn, createRef, createSharedComposable, createSingletonPromise, debounceFilter, refDebounced as debouncedRef, watchDebounced as debouncedWatch, computedEager as eagerComputed, extendRef, formatDate, get, getLifeCycleTarget, hasOwn, hyphenate, identity, watchIgnorable as ignorableWatch, increaseWithUnit, injectLocal, invoke, isClient, isDef, isDefined, isIOS, isObject, isWorker, makeDestructurable, noop, normalizeDate, notNullish, now, objectEntries, objectOmit, objectPick, pausableFilter, watchPausable as pausableWatch, promiseTimeout, provideLocal, pxValue, rand, reactify, reactifyObject, reactiveComputed, reactiveOmit, reactivePick, refAutoReset, refDebounced, refDefault, refThrottled, refWithControl, resolveRef, resolveUnref, set, syncRef, syncRefs, throttleFilter, refThrottled as throttledRef, watchThrottled as throttledWatch, timestamp, toArray, toReactive, toRef, toRefs, toValue, tryOnBeforeMount, tryOnBeforeUnmount, tryOnMounted, tryOnScopeDispose, tryOnUnmounted, until, useArrayDifference, useArrayEvery, useArrayFilter, useArrayFind, useArrayFindIndex, useArrayFindLast, useArrayIncludes, useArrayJoin, useArrayMap, useArrayReduce, useArraySome, useArrayUnique, useCounter, useDateFormat, refDebounced as useDebounce, useDebounceFn, useInterval, useIntervalFn, useLastChanged, refThrottled as useThrottle, useThrottleFn, useTimeout, useTimeoutFn, useToNumber, useToString, useToggle, watchArray, watchAtMost, watchDebounced, watchDeep, watchIgnorable, watchImmediate, watchOnce, watchPausable, watchThrottled, watchTriggerable, watchWithFilter, whenever };\n","<template>\n  <div class=\"regex-ui-generator\" style=\"padding: 25px !important; background: #1a1a1a !important\">\n    <!--  -->\n    <div\n      style=\"\n        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\n        padding: 20px;\n        border-radius: 16px;\n        margin-bottom: 20px;\n        border: 1px solid rgba(102, 126, 234, 0.2);\n      \"\n    >\n      <h3 style=\"color: #4a9eff; margin: 0 0 10px 0; font-size: 20px; font-weight: 600\"> </h3>\n      <p style=\"color: #888; margin: 0; font-size: 14px; line-height: 1.6\">\n        AI  HTML/CSS/JS \n      </p>\n    </div>\n\n    <!--  -->\n    <div\n      style=\"\n        background: #2a2a2a;\n        padding: 20px;\n        border-radius: 8px;\n        margin-bottom: 20px;\n        border-left: 4px solid #ffc107;\n      \"\n    >\n      <h4 style=\"color: #ffc107; margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center; gap: 8px\">\n        <i class=\"fa-solid fa-lightbulb\"></i>\n        \n      </h4>\n      <ol style=\"margin: 0; padding-left: 20px; color: #ccc; line-height: 2\">\n        <li>\n          <strong style=\"color: #fff\">1</strong> \n          <code style=\"background: #1a1a1a; padding: 2px 6px; border-radius: 3px; color: #4a9eff\"></code>\n          \n        </li>\n        <li><strong style=\"color: #fff\">2</strong> </li>\n        <li><strong style=\"color: #fff\">3</strong> \"AI \"AI </li>\n        <li>\n          <strong style=\"color: #fff\">4</strong> <strong style=\"color: #51cf66\"></strong\n          >\"AI \"\n        </li>\n        <li><strong style=\"color: #fff\">5</strong> \"\"</li>\n        <li>\n          <strong style=\"color: #fff\"></strong> \n          <code style=\"background: #1a1a1a; padding: 2px 6px; border-radius: 3px; color: #51cf66\"></code>\n          \n        </li>\n      </ol>\n    </div>\n\n    <!--  -->\n    <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px\">\n      <!--  -->\n      <div style=\"display: flex; flex-direction: column; gap: 20px\">\n        <!--  -->\n        <div style=\"background: #2a2a2a; padding: 20px; border-radius: 8px\">\n          <h4 style=\"color: #4a9eff; margin: 0 0 15px 0; font-size: 16px\">\n            <i class=\"fa-solid fa-key\"></i>\n            :\n          </h4>\n          <input\n            v-model=\"triggerKeyword\"\n            type=\"text\"\n            placeholder=\"\"\n            style=\"\n              width: 100%;\n              background: #1a1a1a;\n              color: #e0e0e0;\n              border: 1px solid #444;\n              border-radius: 4px;\n              padding: 12px;\n              font-size: 14px;\n            \"\n          />\n        </div>\n\n        <!-- AI  -->\n        <div\n          style=\"background: #2a2a2a; padding: 20px; border-radius: 8px; flex: 1; display: flex; flex-direction: column\"\n        >\n          <h4 style=\"color: #4a9eff; margin: 0 0 15px 0; font-size: 16px\">\n            <i class=\"fa-solid fa-magic\"></i>\n            AI :\n          </h4>\n          <p style=\"color: #888; margin: 0 0 10px 0; font-size: 13px\">\n            RPG...\n          </p>\n          <textarea\n            v-model=\"interfaceDescription\"\n            placeholder=\"&#10;- &#10;- RPG&#10;- &#10;&#10;&#10;\"\n            style=\"\n              width: 100%;\n              flex: 1;\n              min-height: 200px;\n              background: #1a1a1a;\n              color: #e0e0e0;\n              border: 1px solid #444;\n              border-radius: 4px;\n              padding: 12px;\n              font-size: 14px;\n              font-family: 'Consolas', monospace;\n              resize: none;\n              line-height: 1.6;\n            \"\n          />\n\n          <!-- AI / -->\n          <div style=\"display: flex; gap: 12px; margin-top: 15px\">\n            <button\n              :disabled=\"!triggerKeyword || !interfaceDescription || isGenerating\"\n              style=\"\n                flex: 1;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                color: white;\n                border: none;\n                padding: 12px 24px;\n                border-radius: 6px;\n                cursor: pointer;\n                font-size: 14px;\n                font-weight: 600;\n                transition: all 0.3s;\n              \"\n              :style=\"{ opacity: !triggerKeyword || !interfaceDescription || isGenerating ? 0.5 : 1 }\"\n              @click=\"generateWithAI\"\n            >\n              <i class=\"fa-solid fa-wand-magic-sparkles\"></i>\n              {{ isGenerating ? 'AI ...' : generatedCode ? 'AI ' : 'AI ' }}\n            </button>\n            <button\n              v-if=\"generatedCode\"\n              :disabled=\"isModifying\"\n              style=\"\n                flex: 1;\n                background: #ffc107;\n                color: #000;\n                border: none;\n                padding: 12px 24px;\n                border-radius: 6px;\n                cursor: pointer;\n                font-size: 14px;\n                font-weight: 600;\n                transition: all 0.3s;\n              \"\n              :style=\"{ opacity: isModifying ? 0.5 : 1 }\"\n              @click=\"showModifyDialog\"\n            >\n              <i class=\"fa-solid fa-edit\"></i>\n              {{ isModifying ? '...' : 'AI ' }}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!--  -->\n      <div style=\"background: #2a2a2a; padding: 20px; border-radius: 8px; display: flex; flex-direction: column\">\n        <h4 style=\"color: #51cf66; margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center; gap: 8px\">\n          <i class=\"fa-solid fa-eye\"></i>\n          \n          <span\n            v-if=\"generatedCode\"\n            style=\"\n              margin-left: auto;\n              background: #51cf66;\n              color: white;\n              padding: 4px 12px;\n              border-radius: 16px;\n              font-size: 12px;\n            \"\n            ></span\n          >\n        </h4>\n        <div\n          style=\"\n            flex: 1;\n            background: #1a1a1a;\n            border: 2px solid #444;\n            border-radius: 6px;\n            overflow: hidden;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            min-height: 400px;\n          \"\n        >\n          <div v-if=\"!generatedCode\" style=\"text-align: center; color: #666; padding: 40px\">\n            <i class=\"fa-solid fa-image\" style=\"font-size: 64px; margin-bottom: 20px; opacity: 0.3\"></i>\n            <p style=\"font-size: 16px; margin: 0\">...</p>\n            <p style=\"font-size: 14px; margin: 10px 0 0 0\">\"AI \"</p>\n          </div>\n          <iframe\n            v-else\n            ref=\"previewFrame\"\n            :srcdoc=\"generatedCode\"\n            sandbox=\"allow-scripts allow-same-origin\"\n            style=\"width: 100%; height: 100%; border: none; background: white\"\n          ></iframe>\n        </div>\n\n        <!--  -->\n        <button\n          v-if=\"generatedCode\"\n          style=\"\n            margin-top: 15px;\n            background: #51cf66;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 6px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 600;\n            transition: all 0.2s;\n          \"\n          @click=\"copyRegex\"\n        >\n          <i class=\"fa-solid fa-copy\"></i> \n        </button>\n      </div>\n    </div>\n\n    <!--  -->\n    <div v-if=\"generatedRegex\" style=\"background: #2a2a2a; padding: 20px; border-radius: 8px\">\n      <div\n        style=\"display: flex; justify-content: space-between; align-items: center; cursor: pointer; margin-bottom: 15px\"\n        @click=\"showCode = !showCode\"\n      >\n        <h4 style=\"color: #4a9eff; margin: 0\">\n          <i class=\"fa-solid fa-code\"></i>\n          \n        </h4>\n        <i\n          :class=\"showCode ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\"\n          style=\"color: #888; transition: transform 0.3s\"\n        ></i>\n      </div>\n      <div\n        v-if=\"showCode\"\n        style=\"\n          background: #1a1a1a;\n          padding: 15px;\n          border-radius: 4px;\n          border: 1px solid #444;\n          max-height: 300px;\n          overflow-y: auto;\n        \"\n      >\n        <pre\n          style=\"\n            margin: 0;\n            color: #e0e0e0;\n            font-family: 'Consolas', monospace;\n            font-size: 13px;\n            white-space: pre-wrap;\n            word-wrap: break-word;\n          \"\n          >{{ generatedRegex }}</pre\n        >\n      </div>\n    </div>\n\n    <!-- AI  -->\n    <div\n      v-if=\"showModify\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.8);\n        z-index: 1000000;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 20px;\n      \"\n      @click.self=\"showModify = false\"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border: 2px solid #ffc107;\n          border-radius: 16px;\n          padding: 30px;\n          max-width: 600px;\n          width: 100%;\n        \"\n        @click.stop\n      >\n        <h3 style=\"color: #ffc107; margin: 0 0 20px 0\">\n          <i class=\"fa-solid fa-edit\"></i>\n          AI \n        </h3>\n        <p style=\"color: #888; margin: 0 0 15px 0; line-height: 1.6\">\n          AI \n        </p>\n        <ul style=\"color: #888; margin: 0 0 20px 0; padding-left: 20px; line-height: 1.8\">\n          <li></li>\n          <li></li>\n          <li></li>\n          <li></li>\n        </ul>\n        <textarea\n          v-model=\"modifyInstruction\"\n          placeholder=\"...\"\n          style=\"\n            width: 100%;\n            min-height: 150px;\n            background: #1a1a1a;\n            color: #e0e0e0;\n            border: 1px solid #444;\n            border-radius: 4px;\n            padding: 12px;\n            font-size: 14px;\n            margin-bottom: 20px;\n            resize: vertical;\n          \"\n        ></textarea>\n        <div style=\"display: flex; gap: 12px\">\n          <button\n            :disabled=\"!modifyInstruction || isModifying\"\n            style=\"\n              flex: 1;\n              background: #ffc107;\n              color: #000;\n              border: none;\n              padding: 12px 24px;\n              border-radius: 6px;\n              cursor: pointer;\n              font-size: 14px;\n              font-weight: 600;\n            \"\n            :style=\"{ opacity: !modifyInstruction || isModifying ? 0.5 : 1 }\"\n            @click=\"modifyWithAI\"\n          >\n            <i class=\"fa-solid fa-wand-magic-sparkles\"></i>\n            {{ isModifying ? '...' : '' }}\n          </button>\n          <button\n            style=\"\n              flex: 1;\n              background: #666;\n              color: white;\n              border: none;\n              padding: 12px 24px;\n              border-radius: 6px;\n              cursor: pointer;\n              font-size: 14px;\n              font-weight: 600;\n            \"\n            @click=\"showModify = false\"\n          >\n            \n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { watchDebounced } from '@vueuse/core';\nimport { klona } from 'klona';\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { useTaskStore } from '../taskStore';\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\n\nconst settingsStore = useSettingsStore();\nconst { settings } = storeToRefs(settingsStore);\nconst taskStore = useTaskStore();\n\nconst triggerKeyword = ref('');\nconst interfaceDescription = ref('');\nconst generatedCode = ref('');\nconst generatedRegex = ref('');\nconst isGenerating = ref(false);\nconst isModifying = ref(false);\nconst showCode = ref(false);\nconst showModify = ref(false);\nconst modifyInstruction = ref('');\nconst previewFrame = ref<HTMLIFrameElement | null>(null);\n\n//  localStorage \nconst loadData = () => {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) return;\n\n    const storageKey = `${scriptId}_regex_ui_generator`;\n    const savedDataString = localStorage.getItem(storageKey);\n\n    if (savedDataString) {\n      try {\n        const savedData = JSON.parse(savedDataString);\n        triggerKeyword.value = savedData.triggerKeyword || '';\n        interfaceDescription.value = savedData.interfaceDescription || '';\n        generatedCode.value = savedData.generatedCode || '';\n        generatedRegex.value = savedData.generatedRegex || '';\n        console.log(' []  localStorage ');\n      } catch (parseError) {\n        console.error(' [] :', parseError);\n      }\n    }\n  } catch (error) {\n    console.error(' [] :', error);\n  }\n};\n\n//  localStorage\nconst saveData = () => {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) return;\n\n    const dataToSave = {\n      triggerKeyword: triggerKeyword.value,\n      interfaceDescription: interfaceDescription.value,\n      generatedCode: generatedCode.value,\n      generatedRegex: generatedRegex.value,\n    };\n\n    const storageKey = `${scriptId}_regex_ui_generator`;\n    localStorage.setItem(storageKey, JSON.stringify(dataToSave));\n    console.log(' []  localStorage');\n  } catch (error) {\n    console.error(' [] :', error);\n  }\n};\n\n// \nonMounted(() => {\n  loadData();\n});\n\n// \n// \nwatchDebounced(\n  [triggerKeyword, interfaceDescription, generatedCode, generatedRegex],\n  () => {\n    saveData();\n  },\n  { debounce: 500 },\n);\n\n// AI \nconst generateWithAI = async () => {\n  if (!triggerKeyword.value || !interfaceDescription.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  // \n  const taskId = taskStore.createTask('ui_generate', `${triggerKeyword.value}`);\n  isGenerating.value = true;\n\n  try {\n    taskStore.updateTaskProgress(taskId, 10, '...');\n\n    const systemPrompt = ` HTML \n\n# \n**** HTML  CSS  JS\n\n# \n1. **HTML** \\`<!DOCTYPE html>\\`  \\`</html>\\` \n2. **** \\`<style>\\` CSS\n3. **** \\`<script>\\` JS\n4. **** CDN \n\n# \n1. ****\n2. **** CSS flexbox, grid, \n3. ****\n4. ****\n\n# \n \n  markdown \\`\\`\\`html\n \n \"......\"\n \n\n# \n HTML  \\`<!DOCTYPE html>\\` `;\n\n    const userPrompt = `****${triggerKeyword.value}\n\n****\n${interfaceDescription.value}\n\n---\n\n****\n1.  HTML <style>  <script>\n2. ${interfaceDescription.value.includes('') ? '' : ''}\n3. \n4. \n\nHTML`;\n\n    taskStore.updateTaskProgress(taskId, 20, ' AI ...');\n    taskStore.addTaskDetail(taskId, `: ${triggerKeyword.value}`);\n\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n\n    const requestParams = {\n      model: settings.value.model,\n      messages: [\n        {\n          role: 'system',\n          content: systemPrompt,\n        },\n        { role: 'user', content: userPrompt },\n      ],\n      temperature: settings.value.temperature || 0.7,\n      max_tokens: settings.value.max_tokens || 16000,\n      top_p: settings.value.top_p,\n      presence_penalty: settings.value.presence_penalty,\n      frequency_penalty: settings.value.frequency_penalty,\n    };\n\n    // \n    const { filterApiParams } = await import('../settings');\n    const filteredParams = filterApiParams(requestParams, settings.value.api_endpoint);\n\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify(filteredParams),\n    });\n\n    taskStore.updateTaskProgress(taskId, 40, 'AI...');\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.status}`);\n    }\n\n    taskStore.updateTaskProgress(taskId, 50, ' AI ...');\n    taskStore.addTaskDetail(taskId, 'AI HTML...');\n\n    const data = await response.json();\n    let result = data.choices?.[0]?.message?.content || '';\n\n    taskStore.updateTaskProgress(taskId, 70, ' AI ...');\n\n    console.log(' [] AI :', result.length);\n    console.log(' [] AI 500:', result.substring(0, 500));\n\n    //  markdown \n    result = result\n      .replace(/```html\\n?/g, '')\n      .replace(/```\\n?/g, '')\n      .trim();\n\n    // HTMLAI\n    // 1.  <!DOCTYPE html \n    const doctypeMatch = result.match(/<!DOCTYPE html>[\\s\\S]*/i);\n    if (doctypeMatch) {\n      result = doctypeMatch[0].trim();\n      console.log(' [] HTMLDOCTYPE');\n    } else {\n      // 2. DOCTYPE <html \n      const htmlMatch = result.match(/<html[\\s\\S]*/i);\n      if (htmlMatch) {\n        result = htmlMatch[0].trim();\n        console.log(' [] HTMLDOCTYPE');\n      } else if (result.includes('<') && result.includes('>')) {\n        // 3. htmlHTML\n        console.log(' [] HTML');\n        // \n        if (!result.includes('<html')) {\n          result = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body>\n${result}\n</body>\n</html>`;\n          console.log(' [] HTML');\n        }\n      } else {\n        // 4. HTMLAI\n        console.error(' [] AIHTML');\n        console.error('AI:', result);\n        throw new Error('AIHTML');\n      }\n    }\n\n    console.log(' [] HTML:', result.length);\n\n    taskStore.updateTaskProgress(taskId, 85, '...');\n\n    generatedCode.value = result;\n\n    // \n    const findRegex = triggerKeyword.value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    const regexJson = {\n      id: `regex_ui_${Date.now()}`,\n      scriptName: `_${triggerKeyword.value}`,\n      findRegex: findRegex,\n      replaceString: result,\n      trimStrings: [],\n      placement: [2], // AI\n      disabled: false,\n      markdownOnly: true,\n      promptOnly: false,\n      runOnEdit: true,\n      substituteRegex: 0,\n      minDepth: null,\n      maxDepth: null,\n    };\n    generatedRegex.value = JSON.stringify(regexJson, null, 2);\n\n    taskStore.addTaskDetail(taskId, ` HTML: ${result.length} `);\n    taskStore.completeTask(taskId, { code: result, regex: generatedRegex.value });\n\n    window.toastr.success('AI ');\n  } catch (error) {\n    console.error('AI :', error);\n    taskStore.failTask(taskId, (error as Error).message);\n    window.toastr.error('AI : ' + (error as Error).message);\n  } finally {\n    isGenerating.value = false;\n  }\n};\n\n// \nconst showModifyDialog = () => {\n  modifyInstruction.value = '';\n  showModify.value = true;\n};\n\n// AI \nconst modifyWithAI = async () => {\n  if (!modifyInstruction.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  // \n  const taskId = taskStore.createTask('ui_modify', `${triggerKeyword.value}`);\n  isModifying.value = true;\n\n  try {\n    taskStore.updateTaskProgress(taskId, 10, '...');\n\n    const systemPrompt = `\n\n# \n**** HTML \n\n# \n1. ****\n2. ****\n3. ****\n4. ****\n\n# \n \n  markdown \\`\\`\\`html\n \n \n\n# \n HTML  \\`<!DOCTYPE html>\\` `;\n\n    const userPrompt = `****${triggerKeyword.value}\n\n****\n${interfaceDescription.value}\n\n****\n${modifyInstruction.value}\n\n---\n\n****\n1. \n2. \n3. \n\nHTML`;\n\n    taskStore.updateTaskProgress(taskId, 20, '...');\n    taskStore.addTaskDetail(taskId, `: ${modifyInstruction.value}`);\n\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          {\n            role: 'system',\n            content: systemPrompt,\n          },\n          { role: 'user', content: userPrompt },\n        ],\n        temperature: settings.value.temperature || 0.7,\n        max_tokens: settings.value.max_tokens || 16000,\n        top_p: settings.value.top_p,\n        presence_penalty: settings.value.presence_penalty,\n        frequency_penalty: settings.value.frequency_penalty,\n      }),\n    });\n\n    taskStore.updateTaskProgress(taskId, 40, 'AI...');\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.status}`);\n    }\n\n    taskStore.updateTaskProgress(taskId, 50, ' AI ...');\n    taskStore.addTaskDetail(taskId, 'AI ...');\n\n    const data = await response.json();\n    let result = data.choices?.[0]?.message?.content || '';\n\n    taskStore.updateTaskProgress(taskId, 70, '...');\n\n    console.log(' [] AI :', result.length);\n    console.log(' [] AI 500:', result.substring(0, 500));\n\n    //  markdown \n    result = result\n      .replace(/```html\\n?/g, '')\n      .replace(/```\\n?/g, '')\n      .trim();\n\n    // HTMLAI\n    // 1.  <!DOCTYPE html \n    const doctypeMatch = result.match(/<!DOCTYPE html>[\\s\\S]*/i);\n    if (doctypeMatch) {\n      result = doctypeMatch[0].trim();\n      console.log(' [] HTMLDOCTYPE');\n    } else {\n      // 2. DOCTYPE <html \n      const htmlMatch = result.match(/<html[\\s\\S]*/i);\n      if (htmlMatch) {\n        result = htmlMatch[0].trim();\n        console.log(' [] HTMLDOCTYPE');\n      } else if (result.includes('<') && result.includes('>')) {\n        // 3. htmlHTML\n        console.log(' [] HTML');\n        // \n        if (!result.includes('<html')) {\n          result = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body>\n${result}\n</body>\n</html>`;\n          console.log(' [] HTML');\n        }\n      } else {\n        // 4. HTMLAI\n        console.error(' [] AIHTML');\n        console.error('AI:', result);\n        throw new Error('AIHTML');\n      }\n    }\n\n    console.log(' [] HTML:', result.length);\n\n    taskStore.updateTaskProgress(taskId, 85, '...');\n\n    generatedCode.value = result;\n\n    // \n    const findRegex = triggerKeyword.value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    const regexJson = {\n      id: `regex_ui_${Date.now()}`,\n      scriptName: `_${triggerKeyword.value}`,\n      findRegex: findRegex,\n      replaceString: result,\n      trimStrings: [],\n      placement: [2], // AI\n      disabled: false,\n      markdownOnly: true,\n      promptOnly: false,\n      runOnEdit: true,\n      substituteRegex: 0,\n      minDepth: null,\n      maxDepth: null,\n    };\n    generatedRegex.value = JSON.stringify(regexJson, null, 2);\n\n    // \n    interfaceDescription.value = `${interfaceDescription.value}\\n\\n\\n${modifyInstruction.value}`;\n\n    taskStore.addTaskDetail(taskId, ` : ${result.length} `);\n    taskStore.completeTask(taskId, { code: result, regex: generatedRegex.value });\n\n    window.toastr.success('AI ');\n    showModify.value = false;\n  } catch (error) {\n    console.error('AI :', error);\n    taskStore.failTask(taskId, (error as Error).message);\n    window.toastr.error('AI : ' + (error as Error).message);\n  } finally {\n    isModifying.value = false;\n  }\n};\n\n// \nconst copyRegex = () => {\n  copyToClipboard(generatedRegex.value, '');\n};\n</script>\n\n<style scoped>\n.regex-ui-generator {\n  height: 100%;\n  overflow-y: auto;\n}\n\nbutton:disabled {\n  cursor: not-allowed !important;\n  opacity: 0.5 !important;\n}\n\nbutton:not(:disabled):hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\ncode {\n  background: #1a1a1a;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-family: 'Consolas', monospace;\n}\n\npre::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n}\n\npre::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\npre::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\npre::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n</style>\n","<template>\n  <div class=\"settings-tab\" style=\"padding: 25px !important; background: #1a1a1a !important\">\n    <!-- API  -->\n    <div\n      class=\"config-section\"\n      style=\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\"\n    >\n      <div\n        style=\"\n          cursor: pointer;\n          user-select: none;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 20px 28px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 18px;\n          margin-bottom: 20px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          position: relative;\n          overflow: hidden;\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n        \"\n        @click=\"toggleSection('api')\"\n        @mouseenter=\"\n          ($event.currentTarget as HTMLElement).style.background =\n            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n        \"\n        @mouseleave=\"\n          ($event.currentTarget as HTMLElement).style.background =\n            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n        \"\n      >\n        <h3\n          style=\"\n            position: relative;\n            z-index: 1;\n            display: flex;\n            align-items: center;\n            gap: 12px;\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            letter-spacing: 0.5px;\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n          \"\n        >\n          <i class=\"fa-solid fa-cog\" style=\"color: #17a2b8; font-size: 18px\"></i>\n          API \n        </h3>\n        <i\n          :class=\"expandedSections['api'] ? 'fa-chevron-up' : 'fa-chevron-down'\"\n          class=\"fa-solid\"\n          style=\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\"\n        ></i>\n      </div>\n\n      <div v-show=\"expandedSections['api']\">\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\">API </label>\n          <select\n            v-model=\"settings.api_provider\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n              cursor: pointer;\n            \"\n            @change=\"handleProviderChange\"\n          >\n            <option value=\"openai\">OpenAI</option>\n            <option value=\"gemini\">Gemini AI Studio</option>\n          </select>\n        </div>\n\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\">\n            API \n            <span style=\"color: #888; font-size: 11px; margin-left: 8px\"> ( base URL ) </span>\n          </label>\n          <input\n            v-model=\"settings.api_endpoint\"\n            type=\"text\"\n            placeholder=\"https:///v1\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n          <div\n            style=\"\n              margin-top: 8px;\n              padding: 8px 12px;\n              background: rgba(74, 158, 255, 0.1);\n              border-radius: 4px;\n              border-left: 3px solid #4a9eff;\n            \"\n          >\n            <div style=\"color: #4a9eff; font-size: 12px; font-weight: bold; margin-bottom: 4px\">\n               \n            </div>\n            <div style=\"color: #999; font-size: 11px; line-height: 1.6\">\n               <strong>OpenAI :</strong> https://api.openai.com/v1<br />\n               <strong>Gemini AI Studio:</strong> https://generativelanguage.googleapis.com/v1beta/openai/<br />\n               <strong>NewAPI / One API:</strong> https:///v1<br />\n               <strong> (Ollama):</strong> http://localhost:11434/v1<br />\n               <strong></strong> /chat/completions\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\">API Key</label>\n          <input\n            v-model=\"settings.api_key\"\n            type=\"password\"\n            placeholder=\"sk-...\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n        </div>\n\n        <div class=\"form-group\">\n          <div class=\"model-controls\" style=\"display: flex; flex-direction: column; gap: 10px\">\n            <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\">\n              \n              <span v-if=\"available_models.length === 0\" style=\"color: #888; font-size: 11px; margin-left: 8px\">\n                ( gpt-4o-mini)\n              </span>\n            </label>\n            <div class=\"button-group\" style=\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\">\n              <button\n                :disabled=\"loading_models\"\n                class=\"fetch-button\"\n                style=\"\n                  flex: 1;\n                  min-width: 120px;\n                  padding: 12px 16px;\n                  border: none;\n                  border-radius: 12px;\n                  cursor: pointer;\n                  font-weight: 500;\n                  font-size: 13px;\n                  transition: all 0.2s;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  gap: 6px;\n                  background: #4a9eff;\n                  box-shadow: 0 2px 8px rgba(74, 158, 255, 0.3);\n                  color: white;\n                \"\n                onmouseover=\"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(74, 158, 255, 0.4)'\"\n                onmouseout=\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(74, 158, 255, 0.3)'\"\n                @click=\"handle_fetch_models\"\n              >\n                {{ loading_models ? '...' : ' ' }}\n              </button>\n              <button\n                class=\"save-button\"\n                style=\"\n                  flex: 1;\n                  min-width: 120px;\n                  padding: 12px 16px;\n                  border: none;\n                  border-radius: 12px;\n                  cursor: pointer;\n                  font-weight: 500;\n                  font-size: 13px;\n                  transition: all 0.2s;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  gap: 6px;\n                  background: #51cf66;\n                  box-shadow: 0 2px 8px rgba(81, 207, 102, 0.3);\n                  color: white;\n                \"\n                onmouseover=\"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(81, 207, 102, 0.4)'\"\n                onmouseout=\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(81, 207, 102, 0.3)'\"\n                @click=\"handleSaveApiConfig\"\n              >\n                 \n              </button>\n            </div>\n          </div>\n          <input\n            v-if=\"available_models.length === 0\"\n            v-model=\"settings.model\"\n            type=\"text\"\n            placeholder=\"gpt-4o-mini  deepseek-chat \"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n          <select\n            v-else\n            v-model=\"settings.model\"\n            class=\"model-select\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          >\n            <option v-for=\"model in available_models\" :key=\"model\" :value=\"model\">{{ model }}</option>\n          </select>\n        </div>\n\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\"\n            > Token 4000</label\n          >\n          <input\n            v-model.number=\"settings.max_tokens\"\n            type=\"number\"\n            min=\"100\"\n            max=\"16000\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n        </div>\n\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\">\n            Temperature () <span style=\"color: #888; font-size: 11px\">(0-2 0.7)</span>\n          </label>\n          <input\n            v-model.number=\"settings.temperature\"\n            type=\"number\"\n            min=\"0\"\n            max=\"2\"\n            step=\"0.1\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n          <div style=\"margin-top: 4px; color: #888; font-size: 11px\">\n             0.8 0.2\n          </div>\n        </div>\n\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\">\n            Top P () <span style=\"color: #888; font-size: 11px\">(0-1 1.0)</span>\n          </label>\n          <input\n            v-model.number=\"settings.top_p\"\n            type=\"number\"\n            min=\"0\"\n            max=\"1\"\n            step=\"0.01\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n          <div style=\"margin-top: 4px; color: #888; font-size: 11px\">\n              Temperature  Top P\n          </div>\n        </div>\n\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\">\n            Presence Penalty () <span style=\"color: #888; font-size: 11px\">(-2.0 to 2.0 0)</span>\n          </label>\n          <input\n            v-model.number=\"settings.presence_penalty\"\n            type=\"number\"\n            min=\"-2\"\n            max=\"2\"\n            step=\"0.1\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n          <div style=\"margin-top: 4px; color: #888; font-size: 11px\">\n            \n          </div>\n        </div>\n\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\">\n            Frequency Penalty () <span style=\"color: #888; font-size: 11px\">(-2.0 to 2.0 0)</span>\n          </label>\n          <input\n            v-model.number=\"settings.frequency_penalty\"\n            type=\"number\"\n            min=\"-2\"\n            max=\"2\"\n            step=\"0.1\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n          <div style=\"margin-top: 4px; color: #888; font-size: 11px\">\n            \n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      class=\"config-section\"\n      style=\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\"\n    >\n      <div\n        style=\"\n          cursor: pointer;\n          user-select: none;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 20px 28px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 18px;\n          margin-bottom: 20px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          position: relative;\n          overflow: hidden;\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n        \"\n        @click=\"toggleSection('autoSummary')\"\n        @mouseenter=\"\n          ($event.currentTarget as HTMLElement).style.background =\n            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n        \"\n        @mouseleave=\"\n          ($event.currentTarget as HTMLElement).style.background =\n            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n        \"\n      >\n        <h3\n          style=\"\n            position: relative;\n            z-index: 1;\n            display: flex;\n            align-items: center;\n            gap: 12px;\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            letter-spacing: 0.5px;\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n          \"\n        >\n          <i class=\"fa-solid fa-bolt\" style=\"color: #ffc107; font-size: 18px\"></i>\n          \n        </h3>\n        <i\n          :class=\"expandedSections['autoSummary'] ? 'fa-chevron-up' : 'fa-chevron-down'\"\n          class=\"fa-solid\"\n          style=\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\"\n        ></i>\n      </div>\n\n      <div v-show=\"expandedSections['autoSummary']\">\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label\n            class=\"checkbox-label\"\n            style=\"display: flex; align-items: center; gap: 10px; color: #ccc; font-size: 13px; cursor: pointer\"\n          >\n            <input\n              v-model=\"settings.auto_summarize_enabled\"\n              type=\"checkbox\"\n              style=\"width: 18px; height: 18px; cursor: pointer; accent-color: #4a9eff; border-radius: 4px\"\n            />\n            \n          </label>\n        </div>\n        <div v-if=\"settings.auto_summarize_enabled\" class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\"></label>\n          <input\n            v-model.number=\"settings.summarize_interval\"\n            type=\"number\"\n            min=\"1\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n          <div style=\"margin-top: 10px; display: flex; gap: 10px\">\n            <button\n              style=\"\n                padding: 8px 16px;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                border: none;\n                border-radius: 6px;\n                color: white;\n                font-size: 12px;\n                cursor: pointer;\n                transition: all 0.3s ease;\n                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n              \"\n              onmouseover=\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\"\n              onmouseout=\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\"\n              @click=\"handleSaveSettings\"\n            >\n               \n            </button>\n            <button\n              style=\"\n                padding: 8px 16px;\n                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n                border: none;\n                border-radius: 6px;\n                color: white;\n                font-size: 12px;\n                cursor: pointer;\n                transition: all 0.3s ease;\n                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n              \"\n              onmouseover=\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\"\n              onmouseout=\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\"\n              @click=\"handleReloadSettings\"\n            >\n               \n            </button>\n            <button\n              style=\"\n                padding: 8px 16px;\n                background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);\n                border: none;\n                border-radius: 6px;\n                color: white;\n                font-size: 12px;\n                cursor: pointer;\n                transition: all 0.3s ease;\n                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n              \"\n              onmouseover=\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\"\n              onmouseout=\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\"\n              @click=\"handleResetAutoSummaryStart\"\n            >\n               \n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      class=\"config-section\"\n      style=\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\"\n    >\n      <div\n        style=\"\n          cursor: pointer;\n          user-select: none;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 20px 28px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 18px;\n          margin-bottom: 20px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          position: relative;\n          overflow: hidden;\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n        \"\n        @click=\"toggleSection('manualSummary')\"\n        @mouseenter=\"\n          ($event.currentTarget as HTMLElement).style.background =\n            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n        \"\n        @mouseleave=\"\n          ($event.currentTarget as HTMLElement).style.background =\n            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n        \"\n      >\n        <h3\n          style=\"\n            position: relative;\n            z-index: 1;\n            display: flex;\n            align-items: center;\n            gap: 12px;\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            letter-spacing: 0.5px;\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n          \"\n        >\n          <i class=\"fa-solid fa-pen-to-square\" style=\"color: #28a745; font-size: 18px\"></i>\n          \n        </h3>\n        <i\n          :class=\"expandedSections['manualSummary'] ? 'fa-chevron-up' : 'fa-chevron-down'\"\n          class=\"fa-solid\"\n          style=\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\"\n        ></i>\n      </div>\n\n      <div v-show=\"expandedSections['manualSummary']\">\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\"></label>\n          <input\n            v-model.number=\"settings.start_message_id\"\n            type=\"number\"\n            min=\"0\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n        </div>\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\"></label>\n          <input\n            v-model.number=\"settings.end_message_id\"\n            type=\"number\"\n            min=\"0\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n        </div>\n        <div class=\"button-group\" style=\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\">\n          <button\n            class=\"action-button test-button\"\n            :disabled=\"is_summarizing\"\n            style=\"\n              flex: 1;\n              min-width: 120px;\n              padding: 12px 16px;\n              border: 1px solid #4a4a4a;\n              border-radius: 6px;\n              cursor: pointer;\n              font-weight: 500;\n              font-size: 13px;\n              transition: all 0.2s;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 6px;\n              background: #3a3a3a;\n              color: #e0e0e0;\n            \"\n            @click=\"handle_test_connection\"\n          >\n            <i class=\"fa-solid fa-plug\"></i> \n          </button>\n          <button\n            class=\"action-button summarize-button\"\n            :disabled=\"is_summarizing || !settings.api_key\"\n            style=\"\n              flex: 1;\n              min-width: 120px;\n              padding: 12px 16px;\n              border: 1px solid #5aaeff;\n              border-radius: 6px;\n              cursor: pointer;\n              font-weight: 500;\n              font-size: 13px;\n              transition: all 0.2s;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 6px;\n              background: linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%);\n              box-shadow:\n                0 2px 8px rgba(74, 158, 255, 0.25),\n                inset 0 1px 0 rgba(255, 255, 255, 0.15);\n              color: white;\n            \"\n            @click=\"handle_summarize\"\n          >\n            <i v-if=\"!is_summarizing\" class=\"fa-solid fa-magic\"></i>\n            <i v-else class=\"fa-solid fa-spinner fa-spin\"></i>\n            {{ is_summarizing ? '...' : '' }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      class=\"config-section\"\n      style=\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\"\n    >\n      <div\n        style=\"\n          cursor: pointer;\n          user-select: none;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 20px 28px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 18px;\n          margin-bottom: 20px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          position: relative;\n          overflow: hidden;\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n        \"\n        @click=\"toggleSection('tableGeneration')\"\n        @mouseenter=\"\n          ($event.currentTarget as HTMLElement).style.background =\n            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n        \"\n        @mouseleave=\"\n          ($event.currentTarget as HTMLElement).style.background =\n            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n        \"\n      >\n        <h3\n          style=\"\n            position: relative;\n            z-index: 1;\n            display: flex;\n            align-items: center;\n            gap: 12px;\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            letter-spacing: 0.5px;\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n          \"\n        >\n          <i class=\"fa-solid fa-table\" style=\"color: #6f42c1; font-size: 18px\"></i>\n          \n        </h3>\n        <i\n          :class=\"expandedSections['tableGeneration'] ? 'fa-chevron-up' : 'fa-chevron-down'\"\n          class=\"fa-solid\"\n          style=\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\"\n        ></i>\n      </div>\n\n      <div v-show=\"expandedSections['tableGeneration']\">\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\"></label>\n          <input\n            v-model.number=\"settings.table_start_message_id\"\n            type=\"number\"\n            min=\"0\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n        </div>\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\"></label>\n          <input\n            v-model.number=\"settings.table_end_message_id\"\n            type=\"number\"\n            min=\"0\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n        </div>\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\"></label>\n          <div style=\"display: flex; gap: 8px; margin-bottom: 8px\">\n            <select\n              v-model=\"selectedTemplate\"\n              style=\"\n                flex: 1;\n                padding: 8px 12px;\n                background: #2a2a2a;\n                border: 1px solid #3a3a3a;\n                border-radius: 6px;\n                color: #e0e0e0;\n                font-size: 13px;\n              \"\n              @change=\"loadTemplate\"\n            >\n              <option value=\"\">...</option>\n              <option v-for=\"(template, index) in headerTemplates\" :key=\"index\" :value=\"index\">\n                {{ template.name }}\n              </option>\n            </select>\n            <button\n              style=\"\n                padding: 8px 12px;\n                background: #4a9eff;\n                border: none;\n                border-radius: 6px;\n                color: white;\n                cursor: pointer;\n                font-size: 12px;\n                white-space: nowrap;\n              \"\n              @click=\"showAddTemplateDialog\"\n            >\n              <i class=\"fa-solid fa-plus\"></i> \n            </button>\n          </div>\n          <div v-if=\"selectedTemplate !== ''\" style=\"display: flex; gap: 8px\">\n            <input\n              v-model=\"currentTemplate.name\"\n              type=\"text\"\n              placeholder=\"\"\n              style=\"\n                flex: 1;\n                padding: 8px 12px;\n                background: #2a2a2a;\n                border: 1px solid #3a3a3a;\n                border-radius: 6px;\n                color: #e0e0e0;\n                font-size: 13px;\n              \"\n            />\n            <input\n              v-model=\"currentTemplate.headers\"\n              type=\"text\"\n              placeholder=\"\"\n              style=\"\n                flex: 2;\n                padding: 8px 12px;\n                background: #2a2a2a;\n                border: 1px solid #3a3a3a;\n                border-radius: 6px;\n                color: #e0e0e0;\n                font-size: 13px;\n              \"\n            />\n            <button\n              style=\"\n                padding: 8px 12px;\n                background: #28a745;\n                border: none;\n                border-radius: 6px;\n                color: white;\n                cursor: pointer;\n                font-size: 12px;\n                white-space: nowrap;\n              \"\n              @click=\"saveTemplate\"\n            >\n              <i class=\"fa-solid fa-save\"></i> \n            </button>\n            <button\n              style=\"\n                padding: 8px 12px;\n                background: #dc3545;\n                border: none;\n                border-radius: 6px;\n                color: white;\n                cursor: pointer;\n                font-size: 12px;\n                white-space: nowrap;\n              \"\n              @click=\"deleteTemplate\"\n            >\n              <i class=\"fa-solid fa-trash\"></i> \n            </button>\n          </div>\n        </div>\n\n        <!--  -->\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\"></label>\n          <div style=\"display: flex; gap: 12px; align-items: center\">\n            <div style=\"display: flex; align-items: center; gap: 6px\">\n              <div\n                :style=\"{\n                  width: '8px',\n                  height: '8px',\n                  borderRadius: '50%',\n                  backgroundColor: is_summarizing ? '#ff6b6b' : '#4caf50',\n                  transition: 'background-color 0.3s',\n                }\"\n              ></div>\n              <span style=\"color: #ccc; font-size: 12px\"></span>\n            </div>\n            <div style=\"display: flex; align-items: center; gap: 6px\">\n              <div\n                :style=\"{\n                  width: '8px',\n                  height: '8px',\n                  borderRadius: '50%',\n                  backgroundColor: is_generating_table ? '#ff6b6b' : '#4caf50',\n                  transition: 'background-color 0.3s',\n                }\"\n              ></div>\n              <span style=\"color: #ccc; font-size: 12px\"></span>\n            </div>\n            <div v-if=\"is_summarizing || is_generating_table\" style=\"margin-left: auto\">\n              <button\n                style=\"\n                  padding: 4px 8px;\n                  background: #dc3545;\n                  border: none;\n                  border-radius: 4px;\n                  color: white;\n                  cursor: pointer;\n                  font-size: 11px;\n                \"\n                @click=\"stopGeneration\"\n              >\n                <i class=\"fa-solid fa-stop\"></i> \n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"button-group\" style=\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\">\n          <button\n            class=\"action-button summarize-button\"\n            :disabled=\"is_generating_table || !settings.api_key\"\n            style=\"\n              flex: 1;\n              min-width: 120px;\n              padding: 12px 16px;\n              border: none;\n              border-radius: 12px;\n              cursor: pointer;\n              font-weight: 500;\n              font-size: 13px;\n              transition: all 0.2s;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 6px;\n              background: #4a9eff;\n              box-shadow: 0 2px 8px rgba(74, 158, 255, 0.3);\n              color: white;\n            \"\n            @click=\"handle_generate_table\"\n          >\n            <i v-if=\"!is_generating_table\" class=\"fa-solid fa-robot\"></i>\n            <i v-else class=\"fa-solid fa-spinner fa-spin\"></i>\n            {{ is_generating_table ? 'AI...' : 'AI' }}\n          </button>\n          <button\n            class=\"action-button create-button\"\n            style=\"\n              flex: 1;\n              min-width: 120px;\n              padding: 12px 16px;\n              border: none;\n              border-radius: 12px;\n              cursor: pointer;\n              font-weight: 500;\n              font-size: 13px;\n              transition: all 0.2s;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 6px;\n              background: #51cf66;\n              box-shadow: 0 2px 8px rgba(81, 207, 102, 0.3);\n              color: white;\n            \"\n            @click=\"handle_create_table\"\n          >\n            <i class=\"fa-solid fa-plus\"></i> \n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      class=\"config-section\"\n      style=\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\"\n    >\n      <div\n        style=\"\n          cursor: pointer;\n          user-select: none;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 20px 28px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 18px;\n          margin-bottom: 20px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          position: relative;\n          overflow: hidden;\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n        \"\n        @click=\"toggleSection('messageManagement')\"\n        @mouseenter=\"\n          ($event.currentTarget as HTMLElement).style.background =\n            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n        \"\n        @mouseleave=\"\n          ($event.currentTarget as HTMLElement).style.background =\n            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n        \"\n      >\n        <h3\n          style=\"\n            position: relative;\n            z-index: 1;\n            display: flex;\n            align-items: center;\n            gap: 12px;\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            letter-spacing: 0.5px;\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n          \"\n        >\n          <i class=\"fa-solid fa-layer-group\" style=\"color: #dc3545; font-size: 18px\"></i>\n          \n        </h3>\n        <i\n          :class=\"expandedSections['messageManagement'] ? 'fa-chevron-up' : 'fa-chevron-down'\"\n          class=\"fa-solid\"\n          style=\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\"\n        ></i>\n      </div>\n\n      <div v-show=\"expandedSections['messageManagement']\">\n        <div class=\"form-group\" style=\"margin-bottom: 18px !important\">\n          <label style=\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\"\n            >1-10 5</label\n          >\n          <input\n            v-model=\"hide_range\"\n            type=\"text\"\n            placeholder=\"1-10\"\n            style=\"\n              width: 100%;\n              padding: 10px 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              transition: border-color 0.2s;\n            \"\n          />\n        </div>\n        <div class=\"button-group\" style=\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\">\n          <button\n            class=\"action-button\"\n            style=\"\n              flex: 1;\n              min-width: 120px;\n              padding: 12px 16px;\n              border: none;\n              border-radius: 12px;\n              cursor: pointer;\n              font-weight: 500;\n              font-size: 13px;\n              transition: all 0.2s;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 6px;\n              background: #ff6b6b;\n              box-shadow: 0 2px 8px rgba(255, 107, 107, 0.3);\n              color: white;\n            \"\n            @click=\"handle_hide_messages\"\n          >\n            <i class=\"fa-solid fa-eye-slash\"></i> \n          </button>\n          <button\n            class=\"action-button\"\n            style=\"\n              flex: 1;\n              min-width: 120px;\n              padding: 12px 16px;\n              border: none;\n              border-radius: 12px;\n              cursor: pointer;\n              font-weight: 500;\n              font-size: 13px;\n              transition: all 0.2s;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 6px;\n              background: #51cf66;\n              box-shadow: 0 2px 8px rgba(81, 207, 102, 0.3);\n              color: white;\n            \"\n            :disabled=\"!hide_range.trim()\"\n            @click=\"handle_show_messages\"\n          >\n            <i class=\"fa-solid fa-eye\"></i> \n          </button>\n          <button\n            class=\"action-button\"\n            style=\"\n              flex: 1;\n              min-width: 120px;\n              padding: 12px 16px;\n              border: none;\n              border-radius: 12px;\n              cursor: pointer;\n              font-weight: 500;\n              font-size: 13px;\n              transition: all 0.2s;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 6px;\n              background: #ffd43b;\n              box-shadow: 0 2px 8px rgba(255, 212, 59, 0.3);\n              color: #333;\n            \"\n            @click=\"() => handle_refresh_hidden(true)\"\n          >\n            <i class=\"fa-solid fa-refresh\"></i> \n          </button>\n        </div>\n\n        <!--  -->\n        <div v-if=\"hidden_messages.length > 0\" class=\"hidden-messages-section\">\n          <div class=\"form-group\">\n            <label class=\"flex-label\">\n              <span> ({{ hidden_messages.length }} )</span>\n              <button\n                class=\"mini-button\"\n                style=\"\n                  padding: 6px 14px;\n                  background: #4a9eff;\n                  color: white;\n                  border: none;\n                  border-radius: 8px;\n                  cursor: pointer;\n                  font-size: 12px;\n                  font-weight: 500;\n                  transition: all 0.2s;\n                  box-shadow: 0 2px 6px rgba(74, 158, 255, 0.3);\n                \"\n                @click=\"hidden_display_expanded = !hidden_display_expanded\"\n              >\n                {{ hidden_display_expanded ? '' : '' }}\n              </button>\n            </label>\n          </div>\n          <div v-if=\"hidden_display_expanded\" class=\"hidden-messages-list\">\n            <div v-for=\"msg in hidden_messages\" :key=\"msg.message_id\" class=\"hidden-message-item\">\n              <div class=\"message-info\">\n                <span class=\"message-id\">#{{ msg.message_id }}</span>\n                <span class=\"message-role\" :class=\"'role-' + msg.role\">\n                  {{ msg.role === 'user' ? '' : msg.role === 'assistant' ? '' : '' }}\n                  {{ msg.name }}\n                </span>\n                <span class=\"message-preview\">\n                  {{ msg.message.substring(0, 50) }}{{ msg.message.length > 50 ? '...' : '' }}\n                </span>\n              </div>\n              <button\n                class=\"show-button\"\n                style=\"\n                  padding: 6px 14px;\n                  background: #51cf66;\n                  color: white;\n                  border: none;\n                  border-radius: 8px;\n                  cursor: pointer;\n                  font-size: 12px;\n                  font-weight: 500;\n                  transition: all 0.2s;\n                  box-shadow: 0 2px 6px rgba(81, 207, 102, 0.3);\n                \"\n                @click=\"() => handle_unhide_single(msg.message_id)\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n        <div v-else class=\"empty-state\"></div>\n      </div>\n    </div>\n\n    <!--  -->\n    <ProgressDialog ref=\"progressDialogRef\" :show=\"showProgress\" title=\"AI \" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref } from 'vue';\nimport { useSettingsStore, useSummaryHistoryStore } from '../settings';\nimport { getChatIdSafe, getScriptIdSafe } from '../utils';\nimport { useTaskStore } from '../taskStore';\nimport ProgressDialog from './ProgressDialog.vue';\n\nconst settingsStore = useSettingsStore();\nconst { settings } = storeToRefs(settingsStore);\nconst summaryHistoryStore = useSummaryHistoryStore();\nconst taskStore = useTaskStore();\n\n// \nconst expandedSections = ref<Record<string, boolean>>({\n  api: true,\n  autoSummary: true,\n  manualSummary: true,\n  tableGeneration: true,\n  messageManagement: true,\n});\n\n// /\nconst toggleSection = (section: string) => {\n  expandedSections.value[section] = !expandedSections.value[section];\n};\n\n// API\n// setChatMessages \n\n// \nconst parseMessageRange = (range: string): number[] => {\n  if (!range.trim()) return [];\n\n  const messageIds: number[] = [];\n  const parts = range.split(',');\n\n  for (const part of parts) {\n    const trimmed = part.trim();\n    if (!trimmed) continue;\n\n    if (trimmed.includes('-')) {\n      //  \"1-10\"\n      const [start, end] = trimmed.split('-').map(s => parseInt(s.trim()));\n      if (!isNaN(start) && !isNaN(end) && start >= 0 && end >= 0) {\n        for (let i = start; i <= end; i++) {\n          messageIds.push(i);\n        }\n      }\n    } else {\n      //  \"5\"  \"0\"\n      const id = parseInt(trimmed);\n      if (!isNaN(id) && id >= 0) {\n        messageIds.push(id);\n      }\n    }\n  }\n\n  return messageIds;\n};\n\n// \nconst available_models = ref<string[]>([]);\nconst loading_models = ref(false);\nconst hide_range = ref<string>('');\nconst hidden_messages = ref<Array<{ message_id: number; name: string; role: string; message: string }>>([]);\nconst hidden_display_expanded = ref(false);\n\n// \nconst is_summarizing = ref(false);\nconst is_generating_table = ref(false);\n\n// \nconst showProgress = ref(false);\nconst progressDialogRef = ref<InstanceType<typeof ProgressDialog> | null>(null);\n\n// \nconst headerTemplates = ref<Array<{ name: string; headers: string }>>([]);\nconst selectedTemplate = ref<string>('');\nconst currentTemplate = ref<{ name: string; headers: string }>({ name: '', headers: '' });\n\n//  -  localStorage\nconst loadGenerationStatus = () => {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      console.warn('script_id ');\n      return;\n    }\n\n    //  localStorage \n    const storageKey = `${scriptId}_generation_status`;\n    const savedData = localStorage.getItem(storageKey);\n\n    if (savedData) {\n      try {\n        const status = JSON.parse(savedData);\n        is_summarizing.value = status.is_summarizing || false;\n        is_generating_table.value = status.is_generating_table || false;\n        console.log('  localStorage :', {\n          summarizing: is_summarizing.value,\n          generating_table: is_generating_table.value,\n        });\n      } catch (parseError) {\n        console.error(':', parseError);\n        is_summarizing.value = false;\n        is_generating_table.value = false;\n      }\n    } else {\n      is_summarizing.value = false;\n      is_generating_table.value = false;\n    }\n  } catch (error) {\n    console.error(':', error);\n    is_summarizing.value = false;\n    is_generating_table.value = false;\n  }\n};\n\nconst saveGenerationStatus = () => {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      console.warn('script_id ');\n      return;\n    }\n\n    //  localStorage\n    const storageKey = `${scriptId}_generation_status`;\n    const status = {\n      is_summarizing: is_summarizing.value,\n      is_generating_table: is_generating_table.value,\n    };\n    localStorage.setItem(storageKey, JSON.stringify(status));\n    console.log('  localStorage');\n  } catch (error) {\n    console.error(':', error);\n  }\n};\n\nconst stopGeneration = () => {\n  if (is_summarizing.value || is_generating_table.value) {\n    is_summarizing.value = false;\n    is_generating_table.value = false;\n    saveGenerationStatus();\n    window.toastr.info('');\n  }\n};\n\n//  -  localStorage\nconst loadHeaderTemplates = () => {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      console.warn('script_id ');\n      return;\n    }\n\n    //  localStorage \n    const storageKey = `${scriptId}_header_templates`;\n    const savedData = localStorage.getItem(storageKey);\n\n    if (savedData) {\n      try {\n        let templates = JSON.parse(savedData);\n        //  nullundefined  []\n        if (!Array.isArray(templates)) {\n          templates = [];\n        }\n        headerTemplates.value = templates;\n        console.log('  localStorage :', headerTemplates.value.length, '');\n      } catch (parseError) {\n        console.error(':', parseError);\n        headerTemplates.value = [];\n      }\n    } else {\n      headerTemplates.value = [];\n    }\n  } catch (error) {\n    console.error(':', error);\n    headerTemplates.value = [];\n  }\n};\n\nconst saveHeaderTemplates = () => {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      console.warn('script_id ');\n      return;\n    }\n\n    //  localStorage\n    const storageKey = `${scriptId}_header_templates`;\n    localStorage.setItem(storageKey, JSON.stringify(headerTemplates.value));\n    console.log('  localStorage');\n  } catch (error) {\n    console.error(':', error);\n  }\n};\n\nconst loadTemplate = () => {\n  if (selectedTemplate.value !== '') {\n    const index = parseInt(selectedTemplate.value);\n    if (index >= 0 && index < headerTemplates.value.length) {\n      currentTemplate.value = { ...headerTemplates.value[index] };\n    }\n  }\n};\n\nconst showAddTemplateDialog = () => {\n  const name = window.prompt('');\n  if (name && name.trim()) {\n    const headers = window.prompt('');\n    if (headers && headers.trim()) {\n      headerTemplates.value.push({ name: name.trim(), headers: headers.trim() });\n      saveHeaderTemplates();\n      selectedTemplate.value = (headerTemplates.value.length - 1).toString();\n      loadTemplate();\n      window.toastr.success('');\n    }\n  }\n};\n\nconst saveTemplate = () => {\n  if (selectedTemplate.value !== '' && currentTemplate.value.name.trim() && currentTemplate.value.headers.trim()) {\n    const index = parseInt(selectedTemplate.value);\n    if (index >= 0 && index < headerTemplates.value.length) {\n      headerTemplates.value[index] = { ...currentTemplate.value };\n      saveHeaderTemplates();\n      window.toastr.success('');\n    }\n  } else {\n    window.toastr.warning('');\n  }\n};\n\nconst deleteTemplate = () => {\n  if (selectedTemplate.value !== '') {\n    if (confirm('')) {\n      const index = parseInt(selectedTemplate.value);\n      if (index >= 0 && index < headerTemplates.value.length) {\n        headerTemplates.value.splice(index, 1);\n        saveHeaderTemplates();\n        selectedTemplate.value = '';\n        currentTemplate.value = { name: '', headers: '' };\n        window.toastr.success('');\n      }\n    }\n  }\n};\n\n//  localStorage \nconst loadHiddenMessages = () => {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      console.warn('script_id ');\n      return;\n    }\n    console.log('ID:', scriptId);\n\n    //  localStorage \n    const storageKey = `${scriptId}_hidden_messages`;\n    const savedData = localStorage.getItem(storageKey);\n\n    if (savedData) {\n      try {\n        hidden_messages.value = JSON.parse(savedData);\n        console.log('  localStorage :', hidden_messages.value.length, '');\n      } catch (parseError) {\n        console.error(':', parseError);\n        hidden_messages.value = [];\n      }\n    } else {\n      console.log(' localStorage ');\n      hidden_messages.value = [];\n    }\n  } catch (error) {\n    console.error(':', error);\n  }\n};\n\n//  localStorage\nconst saveHiddenMessages = () => {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      console.warn('script_id ');\n      return;\n    }\n    console.log('ID:', scriptId);\n    console.log(':', klona(hidden_messages.value));\n\n    //  localStorage\n    const storageKey = `${scriptId}_hidden_messages`;\n    localStorage.setItem(storageKey, JSON.stringify(hidden_messages.value));\n\n    console.log('  localStorage:', hidden_messages.value.length, '');\n  } catch (error) {\n    console.error(':', error);\n  }\n};\n\n//  API \nconst initApiProvider = () => {\n  if (!settings.value.api_provider || settings.value.api_provider === '') {\n    const endpoint = settings.value.api_endpoint || '';\n    if (endpoint.includes('generativelanguage.googleapis.com')) {\n      settings.value.api_provider = 'gemini';\n    } else if (endpoint.includes('open.bigmodel.cn')) {\n      settings.value.api_provider = 'zhipu';\n    } else {\n      settings.value.api_provider = 'openai';\n    }\n  }\n};\n\n// \nonMounted(() => {\n  console.log('SettingsTab ');\n  initApiProvider(); //  API \n  loadHiddenMessages();\n  loadHeaderTemplates();\n  loadGenerationStatus();\n});\n\n// \nconst handleTestButton = () => {\n  console.log(' - Vue');\n  window.toastr.success('Vue');\n};\n\n// \nconst handleSaveSettings = () => {\n  console.log(' ...');\n  const success = settingsStore.saveSettings();\n  if (success) {\n    console.log(' ');\n  } else {\n    console.error(' ');\n  }\n};\n\nconst handleReloadSettings = () => {\n  console.log(' ...');\n  const success = settingsStore.reloadSettings();\n  if (success) {\n    console.log(' ');\n  } else {\n    console.error(' ');\n  }\n};\n\nconst handleResetAutoSummaryStart = () => {\n  console.log(' ...');\n  try {\n    //  smartResetChat\n    if (typeof (window as any).smartResetChat === 'function') {\n      (window as any).smartResetChat();\n    } else {\n      window.toastr.error('');\n    }\n  } catch (error) {\n    console.error(' :', error);\n    window.toastr.error(': ' + (error as Error).message);\n  }\n};\n\n// API \nconst handleProviderChange = () => {\n  const provider = settings.value.api_provider;\n  const providerEndpoints: Record<string, string> = {\n    openai: 'https://api.openai.com/v1',\n    gemini: 'https://generativelanguage.googleapis.com/v1beta/openai',\n  };\n\n  if (providerEndpoints[provider]) {\n    settings.value.api_endpoint = providerEndpoints[provider];\n    window.toastr.success(` ${provider === 'openai' ? 'OpenAI' : 'Gemini AI Studio'}`);\n  }\n};\n\n// \n// API\nconst handleSaveApiConfig = () => {\n  try {\n    // \n    if (!settings.value.api_endpoint || !settings.value.api_key) {\n      window.toastr.warning(' API  API Key');\n      return;\n    }\n\n    // \n    const success = settingsStore.saveSettings();\n    if (success) {\n      console.log('API :', {\n        endpoint: settings.value.api_endpoint,\n        model: settings.value.model,\n        provider: settings.value.api_provider,\n        //  API Key\n        api_key: settings.value.api_key ? '***' + settings.value.api_key.slice(-4) : '',\n      });\n    }\n  } catch (error) {\n    console.error(' API :', error);\n    window.toastr.error('' + (error as Error).message);\n  }\n};\n\n// \nconst handleImportFromTavern = async () => {\n  try {\n    console.log(' ...');\n\n    // \n    if (typeof triggerSlash === 'undefined') {\n      window.toastr.error('');\n      return;\n    }\n\n    console.log(' ...');\n\n    //  1: \n    console.log('1  /profile ...');\n    const currentProfileResult = await triggerSlash('/profile');\n    console.log(':', currentProfileResult);\n\n    // \n    if (\n      !currentProfileResult ||\n      currentProfileResult === 'No connection profile selected.' ||\n      currentProfileResult.includes('')\n    ) {\n      console.log(' ...');\n\n      // \n      const parentWin = window.parent || window.top || window;\n      const powerUser = (parentWin as any).power_user;\n      const secretState = (parentWin as any).secret_state;\n\n      let endpoint = '';\n      let apiKey = '';\n      let model = '';\n\n      if (powerUser) {\n        endpoint = powerUser.custom_chat_url || powerUser.reverse_proxy || '';\n        model = powerUser.custom_model || powerUser.openai_model || '';\n      }\n\n      if (secretState) {\n        apiKey = secretState.api_key_custom || secretState.custom || secretState.openai || '';\n      }\n\n      if (!endpoint && !apiKey && !model) {\n        window.toastr.warning(\n          ' API \\n\\n' +\n            ' \\n' +\n            'API     ',\n        );\n        return;\n      }\n\n      // \n      if (endpoint) settings.value.api_endpoint = endpoint;\n      if (apiKey) settings.value.api_key = apiKey;\n      if (model) settings.value.model = model;\n\n      await settingsStore.saveSettings();\n\n      window.toastr.success(\n        ` \\n\\n` +\n          (endpoint ? ` : ${endpoint}\\n` : '') +\n          (apiKey ? ` Key: ***${apiKey.slice(-4)}\\n` : '') +\n          (model ? ` : ${model}` : ''),\n      );\n\n      return;\n    }\n\n    //  2: \n    const profileName = currentProfileResult.trim();\n    console.log(`2 : ${profileName}`);\n\n    const profileDetailsResult = await triggerSlash(`/profile-get ${profileName}`);\n    console.log(':', profileDetailsResult);\n\n    //  JSON\n    let profileData: any;\n    try {\n      profileData = JSON.parse(profileDetailsResult);\n      console.log(' :', profileData);\n    } catch (parseError) {\n      console.error('  JSON :', parseError);\n      window.toastr.error('');\n      return;\n    }\n\n    // \n    let endpoint = '';\n    let apiKey = '';\n    let model = '';\n\n    // API  api-url  server_url\n    if (profileData['api-url']) {\n      endpoint = profileData['api-url'];\n      console.log('  API  (api-url):', endpoint);\n    } else if (profileData.server_url) {\n      endpoint = profileData.server_url;\n      console.log('  API  (server_url):', endpoint);\n    }\n\n    // API Key - \n    if (profileData['secret-id']) {\n      const secretId = profileData['secret-id'];\n      console.log('  secret-id:', secretId);\n      console.log(' API Key ');\n    } else if (profileData.key) {\n      apiKey = profileData.key;\n      console.log('  API Key (key)');\n    }\n\n    // model\n    if (profileData.model) {\n      model = profileData.model;\n      console.log(' :', model);\n    }\n\n    // \n    if (!endpoint && !model) {\n      window.toastr.warning(\n        ' API \\n\\n' +\n          '\\n' +\n          ' \\n' +\n          ' \\n\\n' +\n          ' ',\n      );\n      console.warn(' :', profileData);\n      return;\n    }\n\n    //  API Key\n    if (!apiKey) {\n      console.log(' API Key ');\n    }\n\n    // \n    let importedCount = 0;\n    const importDetails: string[] = [];\n\n    if (endpoint) {\n      settings.value.api_endpoint = endpoint;\n      importedCount++;\n      importDetails.push(` API : ${endpoint}`);\n    }\n\n    if (apiKey) {\n      settings.value.api_key = apiKey;\n      importedCount++;\n      importDetails.push(` API Key: ***${apiKey.slice(-4)}`);\n    }\n\n    if (model) {\n      settings.value.model = model;\n      importedCount++;\n      importDetails.push(` : ${model}`);\n    }\n\n    // \n    await settingsStore.saveSettings();\n\n    // \n    let successMessage =\n      `  ${importedCount} \\n\\n` +\n      ` : ${profileName}\\n\\n` +\n      `${importDetails.join('\\n')}`;\n\n    //  API Key\n    if (!apiKey) {\n      successMessage += `\\n\\n API Key \\n API Key`;\n    }\n\n    window.toastr.success(successMessage);\n\n    console.log(' :', {\n      profileName,\n      endpoint,\n      apiKey: apiKey ? '***' + apiKey.slice(-4) : '',\n      model,\n    });\n  } catch (error) {\n    console.error(' :', error);\n    window.toastr.error('' + (error as Error).message);\n  }\n};\n\nconst handle_fetch_models = async () => {\n  if (loading_models.value) return;\n\n  try {\n    loading_models.value = true;\n    console.log(' ...');\n    console.log(' API :', settings.value.api_endpoint);\n    console.log(' API Key:', settings.value.api_key ? '***' + settings.value.api_key.slice(-4) : '');\n\n    //  API \n    if (!settings.value.api_endpoint || !settings.value.api_key) {\n      window.toastr.warning(' API  API Key');\n      return;\n    }\n\n    window.toastr.info('...');\n\n    // \n    const { fetchAvailableModels } = await import('../');\n    const models = await fetchAvailableModels();\n\n    console.log(' :', models);\n\n    if (models.length > 0) {\n      // \n      available_models.value = models;\n      window.toastr.success(\n        `  ${models.length} \\n` +\n          `: ${models.slice(0, 3).join(', ')}${models.length > 3 ? '...' : ''}`,\n      );\n\n      // \n      if (!settings.value.model && models[0]) {\n        settings.value.model = models[0];\n        console.log(' :', models[0]);\n      }\n    } else {\n      window.toastr.warning('');\n    }\n  } catch (error) {\n    console.error(' :', error);\n\n    // \n    const errorMessage = (error as Error).message;\n\n    // \n    if (errorMessage.length > 200) {\n      window.toastr.error(\n        ' \\n\\n' +\n          'F12\\n\\n' +\n          '\\n' +\n          ' API  /v1/models \\n' +\n          ' API Key \\n' +\n          '  CORS ',\n      );\n    } else {\n      window.toastr.error(` \\n\\n${errorMessage}`);\n    }\n\n    console.error(' :', errorMessage);\n  } finally {\n    loading_models.value = false;\n  }\n};\n\nconst handle_test_connection = async () => {\n  try {\n    console.log('...');\n\n    //  API \n    if (!settings.value.api_endpoint || !settings.value.api_key) {\n      window.toastr.warning(' API  API Key');\n      return;\n    }\n\n    window.toastr.info('...');\n\n    // \n    const { normalizeApiEndpoint, filterApiParams } = await import('../settings');\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n    console.log(' :', apiUrl);\n\n    // \n    const requestParams = {\n      model: settings.value.model || 'gpt-3.5-turbo',\n      messages: [{ role: 'user', content: 'Hello' }],\n      max_tokens: 5,\n      temperature: settings.value.temperature,\n      top_p: settings.value.top_p,\n      presence_penalty: settings.value.presence_penalty,\n      frequency_penalty: settings.value.frequency_penalty,\n    };\n\n    //  API \n    const filteredParams = filterApiParams(requestParams, settings.value.api_endpoint);\n    console.log(' :', filteredParams);\n\n    //  OpenAI \n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify(filteredParams),\n    });\n\n    if (response.ok) {\n      const data = await response.json();\n      console.log('API :', data);\n\n      // \n      const reply = data.choices?.[0]?.message?.content || '()';\n      const modelUsed = data.model || settings.value.model;\n\n      window.toastr.success(` \\n` + ` : ${modelUsed}\\n` + ` : ${reply.substring(0, 50)}...`);\n    } else {\n      const errorText = await response.text();\n      console.error('API :', errorText);\n      window.toastr.error(`  (${response.status})\\n` + `: ${errorText.substring(0, 100)}`);\n    }\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error(': ' + (error as Error).message);\n  }\n};\n\nconst handle_summarize = async () => {\n  let taskId: string | null = null;\n  try {\n    if (is_summarizing.value) return;\n\n    console.log('...');\n    is_summarizing.value = true;\n    saveGenerationStatus();\n\n    // \n    taskId = taskStore.addTask({\n      title: '',\n      description: ` ${settings.value.start_message_id} - ${settings.value.end_message_id}`,\n      category: '',\n    });\n\n    //  API \n    if (!settings.value.api_endpoint || !settings.value.api_key) {\n      window.toastr.warning(' API  API Key');\n      return;\n    }\n\n    // \n    if (settings.value.start_message_id === undefined || settings.value.end_message_id === undefined) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    if (settings.value.start_message_id < 0 || settings.value.end_message_id < settings.value.start_message_id) {\n      window.toastr.warning('');\n      return;\n    }\n\n    console.log(`: ${settings.value.start_message_id} - ${settings.value.end_message_id}`);\n\n    // \n    showProgress.value = true;\n    progressDialogRef.value?.setProgress(10);\n    progressDialogRef.value?.setMessage('...');\n    progressDialogRef.value?.addDetail(\n      `: ${settings.value.start_message_id} - ${settings.value.end_message_id}`,\n    );\n\n    progressDialogRef.value?.setProgress(30);\n    progressDialogRef.value?.setMessage(' AI ...');\n    progressDialogRef.value?.addDetail(' 10-30 ');\n\n    // \n    const { summarizeMessages } = await import('../');\n    const summary = await summarizeMessages(settings.value.start_message_id, settings.value.end_message_id);\n\n    progressDialogRef.value?.setProgress(90);\n    progressDialogRef.value?.setMessage('...');\n\n    console.log(':', summary);\n\n    //  -  localStorage\n    const scriptId = getScriptIdSafe();\n    if (scriptId) {\n      const storageKey = `${scriptId}_last_summary`;\n      localStorage.setItem(storageKey, JSON.stringify({ last_summary: summary }));\n      console.log('  localStorage');\n    }\n\n    // \n    summaryHistoryStore.addSummary(\n      settings.value.start_message_id ?? 0,\n      settings.value.end_message_id ?? settings.value.start_message_id ?? 0,\n      summary,\n    );\n\n    // \n    window.dispatchEvent(new CustomEvent('summary-history-updated'));\n\n    progressDialogRef.value?.setProgress(100);\n    progressDialogRef.value?.setMessage(' ');\n    progressDialogRef.value?.addDetail('');\n\n    setTimeout(() => {\n      showProgress.value = false;\n      window.toastr.success('');\n      // \n      if (taskId) {\n        taskStore.completeTask(taskId);\n      }\n    }, 800);\n  } catch (error) {\n    console.error(':', error);\n    showProgress.value = false;\n    window.toastr.error(': ' + (error as Error).message);\n    // \n    if (taskId) {\n      taskStore.failTask(taskId, (error as Error).message);\n    }\n  } finally {\n    is_summarizing.value = false;\n    saveGenerationStatus();\n  }\n};\n\nconst handle_generate_table = async () => {\n  let taskId: string | null = null;\n  try {\n    if (is_generating_table.value) return;\n\n    console.log('...');\n    is_generating_table.value = true;\n    saveGenerationStatus();\n\n    // \n    taskId = taskStore.addTask({\n      title: '',\n      description: ` ${settings.value.table_start_message_id} - ${settings.value.table_end_message_id} `,\n      category: '',\n    });\n\n    //  API \n    if (!settings.value.api_endpoint || !settings.value.api_key) {\n      window.toastr.warning(' API  API Key');\n      return;\n    }\n\n    // \n    showProgress.value = true;\n    progressDialogRef.value?.setProgress(5);\n    progressDialogRef.value?.setMessage('...');\n\n    // \n    if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    let headersInput: string | null = null;\n\n    if (currentTemplate.value.headers.trim()) {\n      // \n      const useTemplate = confirm(\n        `\"${currentTemplate.value.name}\"\\n${currentTemplate.value.headers}`,\n      );\n      if (useTemplate) {\n        headersInput = currentTemplate.value.headers;\n      }\n    }\n\n    if (!headersInput) {\n      // \n      headersInput = window.prompt(',,,');\n    }\n\n    if (!headersInput || !headersInput.trim()) {\n      window.toastr.warning('');\n      return;\n    }\n\n    const headers: string[] = headersInput\n      .split(',')\n      .map((h: string) => h.trim())\n      .filter((h: string) => h);\n\n    if (headers.length === 0) {\n      window.toastr.warning('');\n      return;\n    }\n\n    progressDialogRef.value?.setProgress(15);\n    progressDialogRef.value?.setMessage('...');\n    progressDialogRef.value?.addDetail(\n      `: ${settings.value.table_start_message_id} - ${settings.value.table_end_message_id}`,\n    );\n\n    // \n    let chatMessages;\n    try {\n      const messageRange = `${settings.value.table_start_message_id}-${settings.value.table_end_message_id}`;\n      console.log(':', messageRange);\n\n      //  TavernHelper.getChatMessages()\n      if (\n        typeof (window as any).TavernHelper !== 'undefined' &&\n        typeof (window as any).TavernHelper.getChatMessages === 'function'\n      ) {\n        chatMessages = (window as any).TavernHelper.getChatMessages(messageRange);\n        console.log('  TavernHelper.getChatMessages() :', chatMessages.length);\n      } else {\n        throw new Error('TavernHelper.getChatMessages ');\n      }\n\n      progressDialogRef.value?.addDetail(` ${chatMessages.length} `);\n    } catch (error) {\n      console.error(':', error);\n      showProgress.value = false;\n      window.toastr.error(': ' + (error as Error).message);\n      return;\n    }\n\n    if (!chatMessages || chatMessages.length === 0) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // AI\n    const messagesText = chatMessages\n      .map((msg, idx) => {\n        const role = msg.role === 'user' ? '' : 'AI';\n        return `[${idx + 1}] ${role}: ${msg.message}`;\n      })\n      .join('\\n\\n');\n\n    const systemPrompt = `\n\n# \nJSON\n\n# \n1. ****\n2. ****\n3. ****\n4. ****\"\"\n\n# \nJSON\n{\n  \"data\": [\n    [\"1\", \"2\", \"3\"],\n    [\"4\", \"5\", \"6\"]\n  ]\n}\n\n# \n \n markdown\\`\\`\\`json\n \n \n\n`;\n\n    const userPrompt = `\n\n****${headers.join(', ')}\n${headers.length}${headers.length}\n\n****\n${messagesText}\n\n---\n\n****\n- [${headers.map(h => `\"${h}\"`).join(', ')}]\n- \"\"\"-\"\n- \n- JSON\n\nJSON`;\n\n    console.log('AI...');\n    console.log(' System Prompt:', systemPrompt);\n    console.log(' User Prompt:', userPrompt.slice(0, 500) + '...');\n\n    progressDialogRef.value?.setProgress(30);\n    progressDialogRef.value?.setMessage(' AI ...');\n    progressDialogRef.value?.addDetail(`: ${headers.join(', ')}`);\n\n    // \n    const { normalizeApiEndpoint, filterApiParams } = await import('../settings');\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n\n    progressDialogRef.value?.setProgress(40);\n    progressDialogRef.value?.setMessage(' AI ...');\n    progressDialogRef.value?.addDetail(' 10-30 ');\n\n    const requestParams = {\n      model: settings.value.model,\n      messages: [\n        {\n          role: 'system',\n          content: systemPrompt,\n        },\n        {\n          role: 'user',\n          content: userPrompt,\n        },\n      ],\n      max_tokens: settings.value.max_tokens,\n      temperature: 0.3, // \n      top_p: settings.value.top_p,\n      presence_penalty: settings.value.presence_penalty,\n      frequency_penalty: settings.value.frequency_penalty,\n    };\n\n    //  API \n    const filteredParams = filterApiParams(requestParams, settings.value.api_endpoint);\n\n    // AI\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify(filteredParams),\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      showProgress.value = false;\n      console.error(' API:', response.status, response.statusText);\n      console.error(':', errorText);\n      window.toastr.error(\n        `API\\n\\n: ${response.status}\\n: ${response.statusText}\\n\\n\\n1. API\\n2. API Key\\n3. `,\n        '',\n        { timeOut: 10000 },\n      );\n      return;\n    }\n\n    progressDialogRef.value?.setProgress(70);\n    progressDialogRef.value?.setMessage(' AI ...');\n\n    const result = await response.json();\n    console.log('AI:', result);\n\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n      showProgress.value = false;\n      console.error(' AI:', result);\n      window.toastr.error('AIAPIOpenAI', '', { timeOut: 8000 });\n      return;\n    }\n\n    const aiResponse = result.choices[0].message.content;\n    console.log('AI:', aiResponse);\n\n    progressDialogRef.value?.setProgress(85);\n    progressDialogRef.value?.setMessage('...');\n\n    // AIJSON\n    let aiTableData;\n    try {\n      // APIJSON\n      if (\n        aiResponse.includes('API') ||\n        aiResponse.includes('') ||\n        aiResponse.includes('') ||\n        aiResponse.includes('error') ||\n        (!aiResponse.includes('{') && !aiResponse.includes('['))\n      ) {\n        // JSON\n        showProgress.value = false;\n        window.toastr.error(`APIAPI\\n\\n\\n${aiResponse.slice(0, 200)}`, '', {\n          timeOut: 10000,\n        });\n        console.error(' API:', aiResponse);\n        return;\n      }\n\n      // JSONmarkdown\n      let jsonText = aiResponse.trim();\n\n      // markdown\n      jsonText = jsonText\n        .replace(/^```json\\s*/i, '')\n        .replace(/^```\\s*/, '')\n        .replace(/```\\s*$/, '');\n\n      // JSON\n      const jsonMatch = jsonText.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        aiTableData = JSON.parse(jsonMatch[0]);\n      } else {\n        throw new Error('JSON');\n      }\n    } catch (parseError) {\n      console.error('AI:', parseError);\n      console.log('AI:', aiResponse);\n      showProgress.value = false;\n      window.toastr.error(`AI\\n\\n\\n${aiResponse.slice(0, 200)}`, '', { timeOut: 8000 });\n      return;\n    }\n\n    // \n    if (!aiTableData.data || !Array.isArray(aiTableData.data)) {\n      window.toastr.error('AIdata');\n      return;\n    }\n\n    // \n    for (let i = 0; i < aiTableData.data.length; i++) {\n      if (!Array.isArray(aiTableData.data[i])) {\n        window.toastr.error(`${i + 1}`);\n        return;\n      }\n      if (aiTableData.data[i].length !== headers.length) {\n        window.toastr.error(`${i + 1}${headers.length}${aiTableData.data[i].length}`);\n        console.log(`:`, headers);\n        console.log(`:`, aiTableData.data[i]);\n        return;\n      }\n    }\n\n    // headers\n    const tableData = {\n      headers: headers,\n      data: aiTableData.data,\n    };\n\n    //  -  localStorageID\n    const chat_id = getChatIdSafe();\n    if (chat_id) {\n      const scriptId = getScriptIdSafe();\n      const storageKey = `${scriptId}_table_history_${chat_id}`;\n\n      //  localStorage \n      let table_history = [];\n      const savedData = localStorage.getItem(storageKey);\n      if (savedData) {\n        try {\n          table_history = JSON.parse(savedData);\n        } catch (e) {\n          console.error(':', e);\n          table_history = [];\n        }\n      }\n\n      // \n      table_history.push({\n        start_id: settings.value.table_start_message_id,\n        end_id: settings.value.table_end_message_id,\n        headers: tableData.headers,\n        data: tableData.data,\n      });\n\n      //  localStorage\n      localStorage.setItem(storageKey, JSON.stringify(table_history));\n      console.log('  localStoragechat_id:', chat_id);\n\n      progressDialogRef.value?.setProgress(100);\n      progressDialogRef.value?.setMessage(' ');\n      progressDialogRef.value?.addDetail(` ${tableData.data.length} `);\n\n      setTimeout(() => {\n        showProgress.value = false;\n        window.toastr.success(`${tableData.data.length}`);\n        // \n        if (taskId) {\n          taskStore.completeTask(taskId);\n        }\n      }, 800);\n\n      console.log(':', table_history);\n    } else {\n      showProgress.value = false;\n      window.toastr.warning('ID');\n    }\n  } catch (error) {\n    console.error(':', error);\n    showProgress.value = false;\n    window.toastr.error(': ' + (error as Error).message);\n    // \n    if (taskId) {\n      taskStore.failTask(taskId, (error as Error).message);\n    }\n  } finally {\n    is_generating_table.value = false;\n    saveGenerationStatus();\n  }\n};\n\nconst handle_create_table = () => {\n  try {\n    // \n    if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    const headersInput: string | null = window.prompt(',,,');\n    if (!headersInput || !headersInput.trim()) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    const headers: string[] = headersInput\n      .split(',')\n      .map((h: string) => h.trim())\n      .filter((h: string) => h);\n\n    if (headers.length === 0) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    const emptyTableData = {\n      start_id: settings.value.table_start_message_id,\n      end_id: settings.value.table_end_message_id,\n      headers: headers,\n      data: [], // \n    };\n\n    //  -  localStorageID\n    const chat_id = getChatIdSafe();\n    if (chat_id) {\n      const scriptId = getScriptIdSafe();\n      const storageKey = `${scriptId}_table_history_${chat_id}`;\n\n      //  localStorage \n      let table_history = [];\n      const savedData = localStorage.getItem(storageKey);\n      if (savedData) {\n        try {\n          table_history = JSON.parse(savedData);\n        } catch (e) {\n          console.error(':', e);\n          table_history = [];\n        }\n      }\n\n      // \n      table_history.push(emptyTableData);\n\n      //  localStorage\n      localStorage.setItem(storageKey, JSON.stringify(table_history));\n      console.log('  localStoragechat_id:', chat_id);\n\n      window.toastr.success(`${headers.join(', ')}`);\n      console.log(':', emptyTableData);\n    } else {\n      window.toastr.warning('ID');\n    }\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error(': ' + (error as Error).message);\n  }\n};\n\nconst handle_hide_messages = async () => {\n  try {\n    console.log('...');\n\n    if (!hide_range.value.trim()) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    const ranges = hide_range.value.split(',').map(range => range.trim());\n    const messageIds: number[] = [];\n\n    for (const range of ranges) {\n      if (range.includes('-')) {\n        // 1-10\n        const [start, end] = range.split('-').map(Number);\n        if (start && end && start <= end) {\n          for (let i = start; i <= end; i++) {\n            messageIds.push(i);\n          }\n        }\n      } else {\n        // 5\n        const id = Number(range);\n        if (id) {\n          messageIds.push(id);\n        }\n      }\n    }\n\n    if (messageIds.length === 0) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    let chatMessages;\n    try {\n      //  TavernHelper \n      if (typeof (window as any).TavernHelper !== 'undefined') {\n        const lastMessageId = (window as any).TavernHelper.getLastMessageId?.() ?? 0;\n        console.log('ID:', lastMessageId);\n\n        if (typeof (window as any).TavernHelper.getChatMessages === 'function') {\n          chatMessages = (window as any).TavernHelper.getChatMessages(`0-${lastMessageId}`);\n          console.log('  TavernHelper :', chatMessages.length);\n        } else {\n          throw new Error('TavernHelper.getChatMessages ');\n        }\n      } else {\n        throw new Error('TavernHelper ');\n      }\n    } catch (error) {\n      console.error(':', error);\n      window.toastr.error(': ' + (error as Error).message);\n      return;\n    }\n\n    if (!chatMessages || chatMessages.length === 0) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    let hiddenCount = 0;\n    const messagesToHide = [];\n\n    for (const messageId of messageIds) {\n      // \n      const alreadyHidden = hidden_messages.value.some(msg => msg.message_id === messageId);\n      if (alreadyHidden) {\n        console.log(` ${messageId} `);\n        continue;\n      }\n\n      const message = chatMessages.find(msg => msg.message_id === messageId);\n      if (message) {\n        // \n        messagesToHide.push({\n          message_id: messageId,\n          is_hidden: true,\n        });\n\n        // \n        hidden_messages.value.push({\n          message_id: messageId,\n          name: message.name || 'Unknown',\n          role: message.role || 'user',\n          message: message.message || '',\n        });\n        hiddenCount++;\n      }\n    }\n\n    // API\n    if (messagesToHide.length > 0) {\n      try {\n        console.log(' slash :', messageIds);\n\n        //  slash \n        for (const messageId of messageIds) {\n          try {\n            await triggerSlash(`/hide ${messageId}`);\n            console.log(` ${messageId}`);\n          } catch (error) {\n            console.error(` ${messageId} :`, error);\n          }\n        }\n\n        window.toastr.success('');\n      } catch (error) {\n        console.error('API:', error);\n        window.toastr.error('API: ' + (error as Error).message);\n      }\n    }\n\n    if (hiddenCount > 0) {\n      // \n      saveHiddenMessages();\n      window.toastr.success(` ${hiddenCount} `);\n      hide_range.value = ''; // \n    } else {\n      window.toastr.warning('');\n    }\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error(': ' + (error as Error).message);\n  }\n};\n\nconst handle_show_messages = async () => {\n  try {\n    console.log('...');\n\n    if (!hide_range.value.trim()) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    const messageIds = parseMessageRange(hide_range.value.trim());\n    if (messageIds.length === 0) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    let chatMessages;\n    try {\n      //  TavernHelper \n      if (typeof (window as any).TavernHelper !== 'undefined') {\n        const lastMessageId = (window as any).TavernHelper.getLastMessageId?.() ?? 0;\n        console.log('ID:', lastMessageId);\n\n        if (typeof (window as any).TavernHelper.getChatMessages === 'function') {\n          chatMessages = (window as any).TavernHelper.getChatMessages(`0-${lastMessageId}`);\n          console.log('  TavernHelper :', chatMessages.length);\n        } else {\n          throw new Error('TavernHelper.getChatMessages ');\n        }\n      } else {\n        throw new Error('TavernHelper ');\n      }\n    } catch (error) {\n      console.error(':', error);\n      window.toastr.error(': ' + (error as Error).message);\n      return;\n    }\n\n    if (!chatMessages || chatMessages.length === 0) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // \n    const messagesToShow = [];\n    let shownCount = 0;\n\n    for (const messageId of messageIds) {\n      const message = chatMessages.find(msg => msg.message_id === messageId);\n      if (message) {\n        messagesToShow.push({\n          message_id: messageId,\n          is_hidden: false,\n        });\n        shownCount++;\n      }\n    }\n\n    if (messagesToShow.length === 0) {\n      window.toastr.warning('');\n      return;\n    }\n\n    // API\n    try {\n      //  slash \n      for (const messageId of messageIds) {\n        try {\n          await triggerSlash(`/unhide ${messageId}`);\n          console.log(` ${messageId}`);\n        } catch (error) {\n          console.error(` ${messageId} :`, error);\n        }\n      }\n    } catch (error) {\n      console.error('API:', error);\n      window.toastr.error('API: ' + (error as Error).message);\n      return;\n    }\n\n    // \n    hidden_messages.value = hidden_messages.value.filter(hiddenMsg => !messageIds.includes(hiddenMsg.message_id));\n\n    // \n    saveHiddenMessages();\n\n    window.toastr.success(` ${shownCount} `);\n    hide_range.value = ''; // \n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error(': ' + (error as Error).message);\n  }\n};\n\nconst handle_refresh_hidden = async (showToast: boolean = false) => {\n  try {\n    console.log('', showToast);\n\n    // \n    if (hidden_messages.value.length === 0) {\n      console.log('...');\n      loadHiddenMessages();\n    }\n\n    // \n    let chatMessages;\n    try {\n      //  TavernHelper \n      if (typeof (window as any).TavernHelper !== 'undefined') {\n        const lastMessageId = (window as any).TavernHelper.getLastMessageId?.() ?? 0;\n        console.log('ID:', lastMessageId);\n\n        if (typeof (window as any).TavernHelper.getChatMessages === 'function') {\n          chatMessages = (window as any).TavernHelper.getChatMessages(`0-${lastMessageId}`);\n          console.log('  TavernHelper :', chatMessages.length);\n        } else {\n          throw new Error('TavernHelper.getChatMessages ');\n        }\n      } else {\n        throw new Error('TavernHelper ');\n      }\n    } catch (error) {\n      console.error(':', error);\n      if (showToast) {\n        window.toastr.error(': ' + (error as Error).message);\n      }\n      return;\n    }\n\n    if (!chatMessages || chatMessages.length === 0) {\n      if (showToast) {\n        window.toastr.warning('');\n      }\n      return;\n    }\n\n    // \n    const validHiddenMessages = [];\n    let removedCount = 0;\n\n    for (const hiddenMsg of hidden_messages.value) {\n      const message = chatMessages.find(msg => msg.message_id === hiddenMsg.message_id);\n      if (message) {\n        // \n        validHiddenMessages.push({\n          message_id: hiddenMsg.message_id,\n          name: message.name || hiddenMsg.name,\n          role: message.role || hiddenMsg.role,\n          message: message.message || hiddenMsg.message,\n        });\n      } else {\n        // \n        removedCount++;\n      }\n    }\n\n    // \n    hidden_messages.value = validHiddenMessages;\n\n    // \n    saveHiddenMessages();\n\n    if (showToast) {\n      if (removedCount > 0) {\n        window.toastr.success(` ${removedCount} `);\n      } else {\n        window.toastr.success('');\n      }\n    }\n\n    console.log(`${validHiddenMessages.length} ${removedCount} `);\n  } catch (error) {\n    console.error(':', error);\n    if (showToast) {\n      window.toastr.error(': ' + (error as Error).message);\n    }\n  }\n};\n\nconst handle_unhide_single = async (messageId: number) => {\n  try {\n    console.log('', messageId);\n\n    // \n    const index = hidden_messages.value.findIndex(msg => msg.message_id === messageId);\n    if (index === -1) {\n      window.toastr.warning(` #${messageId} `);\n      return;\n    }\n\n    // API\n    try {\n      //  slash \n      await triggerSlash(`/unhide ${messageId}`);\n      console.log(':', messageId);\n    } catch (error) {\n      console.error('API:', error);\n      window.toastr.warning('API');\n      return;\n    }\n\n    // \n    hidden_messages.value.splice(index, 1);\n\n    // \n    saveHiddenMessages();\n\n    window.toastr.success(` #${messageId}`);\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error(': ' + (error as Error).message);\n  }\n};\n</script>\n\n<style>\n.settings-tab {\n  height: 100%;\n  overflow-y: auto;\n  padding: 25px !important;\n  background: #1a1a1a !important;\n}\n\n/*  */\n.settings-tab::-webkit-scrollbar {\n  width: 6px;\n}\n\n.settings-tab::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\n.settings-tab::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.settings-tab::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n\n.hidden-messages-list::-webkit-scrollbar {\n  width: 6px;\n}\n\n.hidden-messages-list::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\n.hidden-messages-list::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.hidden-messages-list::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n\n.config-section {\n  padding: 20px 25px !important;\n  border-bottom: 1px solid #3a3a3a;\n  margin-bottom: 5px;\n}\n\n.config-section:last-child {\n  border-bottom: none;\n  margin-bottom: 0;\n}\n\n.config-section h3 {\n  margin: 0 0 20px 0 !important;\n  color: #fff;\n  font-size: 15px !important;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.form-group {\n  margin-bottom: 18px !important;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 6px;\n  color: #ccc;\n  font-size: 13px;\n}\n\n.checkbox-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.flex-label {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.form-group input[type='text'],\n.form-group input[type='password'],\n.form-group input[type='number'],\n.form-group select {\n  width: 100%;\n  padding: 10px 12px;\n  background: #2a2a2a;\n  border: 1px solid #3a3a3a;\n  border-radius: 6px;\n  color: #e0e0e0;\n  font-size: 13px;\n  transition: border-color 0.2s;\n}\n\n.form-group input:focus,\n.form-group select:focus {\n  outline: none;\n  border-color: #4a9eff;\n}\n\n.model-controls {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.button-group {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n  margin-top: 5px;\n}\n\n.action-button {\n  flex: 1;\n  min-width: 120px;\n  padding: 12px 16px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 13px;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  background: #3a3a3a;\n  color: #e0e0e0;\n  border: 1px solid #4a4a4a;\n}\n\n.action-button:hover {\n  background: #4a4a4a;\n  border-color: #5a5a5a;\n}\n\n.test-button {\n  background: #3a3a3a;\n  color: #e0e0e0;\n  border: 1px solid #4a4a4a;\n}\n\n.test-button:hover {\n  background: #4a4a4a;\n  border-color: #5a5a5a;\n}\n\n.fetch-button {\n  background: #4a9eff;\n  color: white;\n  border: 1px solid #5aaeff;\n}\n\n.fetch-button:hover {\n  background: #5aaeff;\n  border-color: #6abeff;\n}\n\n.summarize-button {\n  background: #4a9eff;\n  color: white;\n  border: 1px solid #5aaeff;\n}\n\n.summarize-button:hover {\n  background: #5aaeff;\n  border-color: #6abeff;\n}\n\n.create-button {\n  background: #51cf66;\n  color: white;\n  border: 1px solid #40c057;\n}\n\n.create-button:hover {\n  background: #40c057;\n  border-color: #37b24d;\n}\n\n.table-button {\n  background: #4a9eff;\n  color: white;\n  border: 1px solid #5aaeff;\n}\n\n.table-button:hover {\n  background: #5aaeff;\n  border-color: #6abeff;\n}\n\n.hide-button {\n  background: #ff6b6b;\n  color: white;\n  border: 1px solid #ff5252;\n}\n\n.hide-button:hover {\n  background: #ff5252;\n  border-color: #ff4444;\n}\n\n.unhide-button {\n  background: #51cf66;\n  color: white;\n  border: 1px solid #40c057;\n}\n\n.unhide-button:hover {\n  background: #40c057;\n  border-color: #37b24d;\n}\n\n.refresh-button {\n  background: #ffd43b;\n  color: #333;\n  border: 1px solid #ffcc02;\n}\n\n.refresh-button:hover {\n  background: #ffcc02;\n  border-color: #ffb700;\n}\n\n.action-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.model-select {\n  margin-top: 8px;\n}\n\n.hidden-messages-section {\n  margin-top: 20px;\n}\n\n.hidden-messages-list {\n  max-height: 300px;\n  overflow-y: auto;\n  border-radius: 6px;\n  border: 1px solid #3a3a3a;\n  background: #1a1a1a;\n}\n\n.hidden-message-item {\n  padding: 10px 12px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  border-bottom: 1px solid #2a2a2a;\n  transition: background 0.2s;\n}\n\n.hidden-message-item:last-child {\n  border-bottom: none;\n}\n\n.hidden-message-item:hover {\n  background: #2a2a2a;\n}\n\n.message-info {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  flex: 1;\n}\n\n.message-id {\n  font-weight: bold;\n  color: #4a9eff;\n  font-size: 13px;\n  min-width: 50px;\n}\n\n.message-role {\n  font-size: 12px;\n  padding: 2px 8px;\n  border-radius: 4px;\n  white-space: nowrap;\n}\n\n.message-role.role-user {\n  background: #3a5a3a;\n  color: #90ee90;\n}\n\n.message-role.role-assistant {\n  background: #3a3a5a;\n  color: #90a0ee;\n}\n\n.message-role.role-system {\n  background: #5a5a3a;\n  color: #eea090;\n}\n\n.message-preview {\n  flex: 1;\n  color: #888;\n  font-size: 12px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.show-button {\n  background: #4a9eff !important;\n  color: white !important;\n  padding: 6px 12px;\n  border: 1px solid #5aaeff !important;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 12px;\n  transition: all 0.2s;\n  min-width: 60px;\n  text-align: center;\n}\n\n.show-button:hover {\n  background: #5aaeff !important;\n  border-color: #6abeff !important;\n}\n\n.mini-button {\n  background: #666;\n  color: white;\n  border: 1px solid #777;\n  padding: 6px 12px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 12px;\n  transition: all 0.2s;\n}\n\n.mini-button:hover {\n  background: #777;\n  border-color: #888;\n}\n\n.empty-state {\n  margin-top: 20px;\n  padding: 20px;\n  background: #2a2a2a;\n  border-radius: 6px;\n  text-align: center;\n  color: #888;\n  border: 1px solid #3a3a3a;\n}\n</style>\n","<template>\n  <div class=\"statusbar-generator\">\n    <!--  -->\n    <div\n      class=\"section-header\"\n      style=\"\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 20px 28px;\n        background: linear-gradient(\n          135deg,\n          rgba(30, 30, 30, 0.95) 0%,\n          rgba(38, 38, 38, 0.9) 50%,\n          rgba(30, 30, 30, 0.95) 100%\n        );\n        backdrop-filter: blur(12px);\n        border-radius: 14px;\n        margin-bottom: 20px;\n        border: 1px solid rgba(255, 255, 255, 0.06);\n        box-shadow:\n          0 3px 12px rgba(0, 0, 0, 0.3),\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n      \"\n    >\n      <h3\n        style=\"\n          margin: 0;\n          color: #fff;\n          font-size: 16px !important;\n          font-weight: 600;\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          letter-spacing: 0.5px;\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n        \"\n      >\n        <i class=\"fa-solid fa-chart-bar\" style=\"color: #4a9eff; font-size: 18px\"></i>\n        \n      </h3>\n      <div style=\"display: flex; gap: 10px; flex-wrap: wrap\">\n        <button\n          style=\"\n            padding: 8px 16px;\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n            border: none;\n            border-radius: 8px;\n            color: white;\n            font-size: 13px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.3s ease;\n          \"\n          @click=\"loadTemplate('abo')\"\n          @mouseenter=\"(e: any) => (e.currentTarget.style.transform = 'translateY(-2px)')\"\n          @mouseleave=\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\"\n        >\n          <i class=\"fa-solid fa-magic\" style=\"margin-right: 6px\"></i>\n           ABO \n        </button>\n        <button\n          style=\"\n            padding: 8px 16px;\n            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\n            border: none;\n            border-radius: 8px;\n            color: white;\n            font-size: 13px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.3s ease;\n          \"\n          @click=\"showAIDialog\"\n          @mouseenter=\"(e: any) => (e.currentTarget.style.transform = 'translateY(-2px)')\"\n          @mouseleave=\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\"\n        >\n          <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"margin-right: 6px\"></i>\n          AI \n        </button>\n        <button\n          style=\"\n            padding: 8px 16px;\n            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n            border: none;\n            border-radius: 8px;\n            color: white;\n            font-size: 13px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.3s ease;\n          \"\n          @click=\"exportRegex\"\n          @mouseenter=\"(e: any) => (e.currentTarget.style.transform = 'translateY(-2px)')\"\n          @mouseleave=\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\"\n        >\n          <i class=\"fa-solid fa-download\" style=\"margin-right: 6px\"></i>\n           JSON\n        </button>\n      </div>\n    </div>\n\n    <!--  -->\n    <div style=\"display: grid; grid-template-columns: 280px 1fr 500px; gap: 20px; min-height: 600px\">\n      <!--  -->\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 15px;\n          border: 1px solid #3a3a3a;\n          display: flex;\n          flex-direction: column;\n          overflow-y: auto;\n        \"\n      >\n        <h4\n          style=\"\n            margin: 0 0 15px 0;\n            color: #fff;\n            font-size: 14px;\n            font-weight: 600;\n            display: flex;\n            align-items: center;\n            gap: 8px;\n          \"\n        >\n          <i class=\"fa-solid fa-cog\" style=\"color: #4a9eff\"></i>\n          \n        </h4>\n\n        <!--  -->\n        <div style=\"margin-bottom: 15px\">\n          <label style=\"display: block; margin-bottom: 8px; color: #c0c0c0; font-size: 12px; font-weight: 600\"\n            ></label\n          >\n          <input\n            v-model=\"config.findRegex\"\n            type=\"text\"\n            placeholder=\"<-CHARACTER_STATUS->\"\n            style=\"\n              width: 100%;\n              padding: 8px 12px;\n              background: #1e1e1e;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 12px;\n            \"\n          />\n        </div>\n\n        <!--  -->\n        <div style=\"flex: 1; display: flex; flex-direction: column; gap: 10px; margin-bottom: 15px\">\n          <div\n            v-for=\"(field, index) in config.fields\"\n            :key=\"index\"\n            style=\"padding: 10px; background: #1e1e1e; border-radius: 6px; border: 1px solid #3a3a3a\"\n          >\n            <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px\">\n              <span style=\"color: #4a9eff; font-size: 11px; font-weight: 600\"> {{ index + 1 }}</span>\n              <button\n                :disabled=\"config.fields.length <= 1\"\n                :style=\"{\n                  padding: '4px 8px',\n                  background: '#ef4444',\n                  border: 'none',\n                  borderRadius: '4px',\n                  color: 'white',\n                  fontSize: '10px',\n                  cursor: 'pointer',\n                  opacity: config.fields.length <= 1 ? 0.4 : 1,\n                }\"\n                @click=\"removeField(index)\"\n              >\n                \n              </button>\n            </div>\n            <input\n              v-model=\"field.name\"\n              type=\"text\"\n              placeholder=\"\"\n              style=\"\n                width: 100%;\n                padding: 6px 10px;\n                background: #2a2a2a;\n                border: 1px solid #3a3a3a;\n                border-radius: 4px;\n                color: #e0e0e0;\n                font-size: 11px;\n                margin-bottom: 6px;\n              \"\n            />\n            <input\n              v-model=\"field.label\"\n              type=\"text\"\n              placeholder=\"\"\n              style=\"\n                width: 100%;\n                padding: 6px 10px;\n                background: #2a2a2a;\n                border: 1px solid #3a3a3a;\n                border-radius: 4px;\n                color: #e0e0e0;\n                font-size: 11px;\n                margin-bottom: 6px;\n              \"\n            />\n            <div style=\"display: flex; gap: 6px; align-items: center\">\n              <input\n                v-model=\"field.icon\"\n                type=\"text\"\n                placeholder=\"fa-solid fa-user\"\n                style=\"\n                  flex: 1;\n                  padding: 6px 10px;\n                  background: #2a2a2a;\n                  border: 1px solid #3a3a3a;\n                  border-radius: 4px;\n                  color: #e0e0e0;\n                  font-size: 11px;\n                  font-family: monospace;\n                \"\n              />\n              <button\n                style=\"\n                  padding: 6px 10px;\n                  background: #3a3a3a;\n                  border: 1px solid #4a4a4a;\n                  border-radius: 4px;\n                  color: #fff;\n                  font-size: 12px;\n                  cursor: pointer;\n                  min-width: 36px;\n                \"\n                title=\"\"\n                @click=\"showIconPicker(index)\"\n              >\n                <i v-if=\"field.icon\" :class=\"field.icon\"></i>\n                <i v-else class=\"fa-solid fa-icons\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <button\n          style=\"\n            width: 100%;\n            padding: 8px;\n            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\n            border: none;\n            border-radius: 6px;\n            color: white;\n            font-size: 12px;\n            font-weight: 600;\n            cursor: pointer;\n          \"\n          @click=\"addField\"\n        >\n          <i class=\"fa-solid fa-plus\" style=\"margin-right: 6px\"></i>\n          \n        </button>\n\n        <button\n          style=\"\n            width: 100%;\n            padding: 8px;\n            margin-top: 10px;\n            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\n            border: none;\n            border-radius: 6px;\n            color: white;\n            font-size: 12px;\n            font-weight: 600;\n            cursor: pointer;\n          \"\n          @click=\"showXmlParseDialog\"\n        >\n          <i class=\"fa-solid fa-code\" style=\"margin-right: 6px\"></i>\n          AI  XML \n        </button>\n\n        <button\n          style=\"\n            width: 100%;\n            padding: 8px;\n            margin-top: 10px;\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n            border: none;\n            border-radius: 6px;\n            color: white;\n            font-size: 12px;\n            font-weight: 600;\n            cursor: pointer;\n          \"\n          @click=\"showAiFieldGeneratorDialog\"\n        >\n          <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"margin-right: 6px\"></i>\n          AI \n        </button>\n\n        <button\n          style=\"\n            width: 100%;\n            padding: 8px;\n            margin-top: 10px;\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n            border: none;\n            border-radius: 6px;\n            color: white;\n            font-size: 12px;\n            font-weight: 600;\n            cursor: pointer;\n          \"\n          @click=\"generateFromFields\"\n        >\n          <i class=\"fa-solid fa-sparkles\" style=\"margin-right: 6px\"></i>\n          \n        </button>\n      </div>\n\n      <!--  -->\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 15px;\n          border: 1px solid #3a3a3a;\n          display: flex;\n          flex-direction: column;\n        \"\n      >\n        <!--  -->\n        <div\n          style=\"display: flex; gap: 8px; margin-bottom: 12px; border-bottom: 1px solid #3a3a3a; padding-bottom: 8px\"\n        >\n          <div\n            v-for=\"file in files\"\n            :key=\"file.path\"\n            :style=\"{\n              padding: '6px 14px',\n              background: currentFile?.path === file.path ? '#4a9eff' : '#1e1e1e',\n              color: currentFile?.path === file.path ? '#fff' : '#c0c0c0',\n              borderRadius: '6px',\n              fontSize: '12px',\n              fontWeight: '600',\n              cursor: 'pointer',\n              transition: 'all 0.2s ease',\n            }\"\n            @click=\"currentFile = file\"\n          >\n            {{ file.path }}\n          </div>\n        </div>\n\n        <!--  -->\n        <textarea\n          v-if=\"currentFile\"\n          v-model=\"currentFile.content\"\n          style=\"\n            flex: 1;\n            width: 100%;\n            padding: 12px;\n            background: #1e1e1e;\n            border: 1px solid #3a3a3a;\n            border-radius: 8px;\n            color: #e0e0e0;\n            font-size: 13px;\n            font-family: 'Consolas', 'Monaco', monospace;\n            line-height: 1.6;\n            resize: none;\n            min-height: 400px;\n          \"\n          @input=\"updatePreview\"\n        ></textarea>\n      </div>\n\n      <!--  -->\n      <div style=\"display: flex; flex-direction: column; gap: 15px; overflow-y: auto\">\n        <!--  -->\n        <div style=\"background: #2a2a2a; border-radius: 12px; padding: 15px; border: 1px solid #3a3a3a\">\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px\">\n            <h4\n              style=\"\n                margin: 0;\n                color: #fff;\n                font-size: 14px;\n                font-weight: 600;\n                display: flex;\n                align-items: center;\n                gap: 8px;\n              \"\n            >\n              <i class=\"fa-solid fa-book\" style=\"color: #4a9eff\"></i>\n              \n            </h4>\n            <button\n              style=\"\n                padding: 6px 12px;\n                background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n                border: none;\n                border-radius: 6px;\n                color: white;\n                font-size: 12px;\n                font-weight: 600;\n                cursor: pointer;\n              \"\n              @click=\"copyWorldbook\"\n            >\n              <i class=\"fa-solid fa-copy\" style=\"margin-right: 4px\"></i>\n              \n            </button>\n          </div>\n          <div\n            style=\"\n              background: #1e1e1e;\n              border-radius: 8px;\n              padding: 12px;\n              border: 1px solid #3a3a3a;\n              overflow: auto;\n              max-height: 200px;\n            \"\n          >\n            <pre\n              style=\"\n                margin: 0;\n                color: #e0e0e0;\n                font-size: 11px;\n                line-height: 1.6;\n                white-space: pre-wrap;\n                word-wrap: break-word;\n                font-family: 'Consolas', 'Monaco', monospace;\n              \"\n              >{{ worldbookContent }}</pre\n            >\n          </div>\n        </div>\n\n        <!--  -->\n        <div style=\"background: #2a2a2a; border-radius: 12px; padding: 15px; border: 1px solid #3a3a3a; flex: 1\">\n          <h4\n            style=\"\n              margin: 0 0 12px 0;\n              color: #fff;\n              font-size: 14px;\n              font-weight: 600;\n              display: flex;\n              align-items: center;\n              gap: 8px;\n            \"\n          >\n            <i class=\"fa-solid fa-eye\" style=\"color: #4a9eff\"></i>\n            \n          </h4>\n          <div\n            style=\"\n              background: #1e1e1e;\n              border-radius: 8px;\n              padding: 20px;\n              min-height: 400px;\n              border: 1px solid #3a3a3a;\n              overflow: auto;\n            \"\n            v-html=\"previewHtml\"\n          ></div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      v-if=\"showIconPickerFor !== null\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n      \"\n      @click.self=\"showIconPickerFor = null\"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 20px;\n          width: 600px;\n          max-width: 90vw;\n          border: 1px solid #3a3a3a;\n        \"\n      >\n        <h3 style=\"margin: 0 0 16px 0; color: #fff; font-size: 15px; font-weight: 600\"></h3>\n        <div\n          style=\"\n            display: grid;\n            grid-template-columns: repeat(8, 1fr);\n            gap: 8px;\n            margin-bottom: 16px;\n            max-height: 400px;\n            overflow-y: auto;\n          \"\n        >\n          <div\n            v-for=\"(iconClass, idx) in iconList\"\n            :key=\"idx\"\n            :style=\"{\n              padding: '14px',\n              background: '#1e1e1e',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              textAlign: 'center',\n              border: '1px solid #3a3a3a',\n              transition: 'all 0.2s ease',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n            }\"\n            :title=\"iconClass\"\n            @click=\"selectIcon(iconClass)\"\n            @mouseenter=\"\n              (e: any) => {\n                e.currentTarget.style.background = '#3a3a3a';\n                e.currentTarget.style.borderColor = '#4a9eff';\n                e.currentTarget.style.transform = 'scale(1.1)';\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(74, 158, 255, 0.3)';\n              }\n            \"\n            @mouseleave=\"\n              (e: any) => {\n                e.currentTarget.style.background = '#1e1e1e';\n                e.currentTarget.style.borderColor = '#3a3a3a';\n                e.currentTarget.style.transform = 'scale(1)';\n                e.currentTarget.style.boxShadow = 'none';\n              }\n            \"\n          >\n            <i :class=\"iconClass\" style=\"font-size: 20px; color: #4a9eff\"></i>\n          </div>\n        </div>\n        <div style=\"display: flex; gap: 10px; justify-content: flex-end\">\n          <button\n            style=\"\n              padding: 8px 16px;\n              background: #3a3a3a;\n              border: none;\n              border-radius: 6px;\n              color: #fff;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n            \"\n            @click=\"showIconPickerFor = null\"\n          >\n            \n          </button>\n          <button\n            style=\"\n              padding: 8px 16px;\n              background: #ef4444;\n              border: none;\n              border-radius: 6px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n            \"\n            @click=\"\n              config.fields[showIconPickerFor!].icon = '';\n              showIconPickerFor = null;\n            \"\n          >\n            \n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- AI  -->\n    <div\n      v-if=\"showAI\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n      \"\n      @click.self=\"showAI = false\"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 24px;\n          width: 600px;\n          max-width: 90vw;\n          max-height: 90vh;\n          overflow-y: auto;\n          border: 1px solid #3a3a3a;\n        \"\n      >\n        <h3 style=\"margin: 0 0 16px 0; color: #fff; font-size: 16px; font-weight: 600\">AI </h3>\n\n        <!--  -->\n        <div\n          style=\"\n            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.1) 100%);\n            border: 1px solid rgba(59, 130, 246, 0.3);\n            border-radius: 8px;\n            padding: 12px 16px;\n            margin-bottom: 16px;\n          \"\n        >\n          <div style=\"display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px\">\n            <div style=\"display: flex; align-items: center; gap: 10px\">\n              <i class=\"fa-solid fa-cog\" style=\"color: #60a5fa; font-size: 16px\"></i>\n              <div style=\"color: #93c5fd; font-size: 13px; font-weight: 600\">\n                 {{ config.fields.length }} \n              </div>\n            </div>\n            <button\n              style=\"\n                padding: 4px 10px;\n                background: rgba(16, 185, 129, 0.2);\n                border: 1px solid rgba(16, 185, 129, 0.4);\n                border-radius: 4px;\n                color: #10b981;\n                font-size: 11px;\n                cursor: pointer;\n              \"\n              @click=\"addFieldInDialog\"\n            >\n              <i class=\"fa-solid fa-plus\"></i> \n            </button>\n          </div>\n\n          <div v-if=\"config.fields.length > 0\" style=\"display: flex; flex-direction: column; gap: 8px\">\n            <div\n              v-for=\"(field, i) in config.fields\"\n              :key=\"i\"\n              style=\"\n                background: rgba(15, 23, 42, 0.6);\n                border: 1px solid rgba(148, 163, 184, 0.15);\n                border-radius: 6px;\n                padding: 8px 10px;\n                display: flex;\n                align-items: center;\n                gap: 8px;\n              \"\n            >\n              <span style=\"color: #60a5fa; font-weight: 600; font-size: 11px; min-width: 50px\">{{ i + 1 }}:</span>\n              <input\n                v-model=\"field.label\"\n                type=\"text\"\n                placeholder=\"\"\n                style=\"\n                  flex: 1;\n                  padding: 4px 8px;\n                  background: #1e1e1e;\n                  border: 1px solid #3a3a3a;\n                  border-radius: 4px;\n                  color: #e0e0e0;\n                  font-size: 11px;\n                \"\n              />\n              <input\n                v-model=\"field.name\"\n                type=\"text\"\n                placeholder=\"\"\n                style=\"\n                  flex: 1;\n                  padding: 4px 8px;\n                  background: #1e1e1e;\n                  border: 1px solid #3a3a3a;\n                  border-radius: 4px;\n                  color: #e0e0e0;\n                  font-size: 11px;\n                \"\n              />\n              <button\n                v-if=\"field.icon\"\n                style=\"\n                  padding: 4px 8px;\n                  background: rgba(139, 92, 246, 0.2);\n                  border: 1px solid rgba(139, 92, 246, 0.3);\n                  border-radius: 4px;\n                  color: #a78bfa;\n                  font-size: 11px;\n                  cursor: pointer;\n                  min-width: 30px;\n                \"\n                title=\"\"\n                @click=\"field.icon = ''\"\n              >\n                <i :class=\"field.icon\"></i>\n              </button>\n              <button\n                :disabled=\"config.fields.length <= 1\"\n                style=\"\n                  padding: 4px 8px;\n                  background: rgba(239, 68, 68, 0.2);\n                  border: 1px solid rgba(239, 68, 68, 0.3);\n                  border-radius: 4px;\n                  color: #ef4444;\n                  font-size: 11px;\n                  cursor: pointer;\n                \"\n                :style=\"{\n                  opacity: config.fields.length <= 1 ? 0.4 : 1,\n                  cursor: config.fields.length <= 1 ? 'not-allowed' : 'pointer',\n                }\"\n                title=\"\"\n                @click=\"removeFieldInDialog(i)\"\n              >\n                <i class=\"fa-solid fa-trash\"></i>\n              </button>\n            </div>\n          </div>\n          <div v-else style=\"color: #fbbf24; font-size: 12px; padding: 8px 0\"> \"\"</div>\n        </div>\n\n        <textarea\n          v-model=\"aiPrompt\"\n          placeholder=\"&#10; &#10; &#10; &#10; &#10;&#10; &#10; AI &#10; \"\n          style=\"\n            width: 100%;\n            padding: 12px;\n            background: #1e1e1e;\n            border: 1px solid #3a3a3a;\n            border-radius: 6px;\n            color: #e0e0e0;\n            font-size: 13px;\n            min-height: 120px;\n            margin-bottom: 16px;\n            resize: vertical;\n          \"\n        ></textarea>\n        <div style=\"display: flex; gap: 10px; justify-content: flex-end\">\n          <button\n            style=\"\n              padding: 8px 16px;\n              background: #3a3a3a;\n              border: none;\n              border-radius: 6px;\n              color: #fff;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n            \"\n            @click=\"showAI = false\"\n          >\n            \n          </button>\n          <button\n            style=\"\n              padding: 8px 16px;\n              background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\n              border: none;\n              border-radius: 6px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n            \"\n            @click=\"generateWithAI\"\n          >\n            <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"margin-right: 6px\"></i>\n            \n          </button>\n        </div>\n        <div v-if=\"originalAiPrompt\" style=\"margin-top: 16px; display: flex; gap: 10px; justify-content: flex-end\">\n          <button\n            style=\"\n              padding: 10px 20px;\n              background: #ffc107;\n              border: none;\n              border-radius: 6px;\n              color: #000;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n            \"\n            :disabled=\"isModifyingAi\"\n            @click=\"showAiModifyDialog = true\"\n          >\n            <i class=\"fa-solid fa-edit\" style=\"margin-right: 6px\"></i>\n            {{ isModifyingAi ? '...' : 'AI ' }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- AI  -->\n    <AIModifyDialog\n      :show=\"showAiModifyDialog\"\n      :is-modifying=\"isModifyingAi\"\n      title=\"AI \"\n      description=\"AI \"\n      :examples=\"[\n        '',\n        '',\n        '',\n        '',\n      ]\"\n      @close=\"showAiModifyDialog = false\"\n      @confirm=\"modifyWithAI\"\n    />\n\n    <!-- XML  -->\n    <div\n      v-if=\"showXmlDialog\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.7);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n      \"\n      @click.self=\"showXmlDialog = false\"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 24px;\n          width: 90%;\n          max-width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\n        \"\n      >\n        <h3 style=\"margin: 0 0 16px 0; color: #f59e0b; font-size: 18px; font-weight: 600\">\n          <i class=\"fa-solid fa-robot\" style=\"margin-right: 8px\"></i>\n          AI  XML \n        </h3>\n\n        <div\n          style=\"\n            background: rgba(251, 191, 36, 0.1);\n            border: 1px solid rgba(251, 191, 36, 0.3);\n            border-radius: 6px;\n            padding: 12px;\n            margin-bottom: 16px;\n          \"\n        >\n          <p style=\"margin: 0; color: #fbbf24; font-size: 12px; line-height: 1.6\">\n            <i class=\"fa-solid fa-circle-info\" style=\"margin-right: 6px\"></i>\n            <strong></strong> AI\n            <i class=\"fa-solid fa-cog\"></i>  API \n          </p>\n        </div>\n\n        <div style=\"margin-bottom: 16px\">\n          <label style=\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 13px\">\n             XML \n          </label>\n          <textarea\n            v-model=\"xmlInput\"\n            placeholder=\"&#10;<state_bar>&#10;<i></i>&#10;<></>&#10;<></>&#10;</state_bar>\"\n            style=\"\n              width: 100%;\n              min-height: 200px;\n              padding: 12px;\n              background: #1a1a1a;\n              border: 1px solid #404040;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-family: 'Consolas', 'Monaco', monospace;\n              font-size: 13px;\n              resize: vertical;\n            \"\n          ></textarea>\n        </div>\n\n        <div style=\"display: flex; gap: 10px; justify-content: flex-end\">\n          <button\n            style=\"\n              padding: 10px 20px;\n              background: #404040;\n              border: none;\n              border-radius: 6px;\n              color: white;\n              font-size: 13px;\n              cursor: pointer;\n            \"\n            @click=\"showXmlDialog = false\"\n          >\n            \n          </button>\n          <button\n            style=\"\n              padding: 10px 20px;\n              background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\n              border: none;\n              border-radius: 6px;\n              color: white;\n              font-size: 13px;\n              cursor: pointer;\n              margin-right: 10px;\n            \"\n            :disabled=\"!xmlInput.trim() || isParsingXml\"\n            @click=\"parseXmlWithAI\"\n          >\n            <i class=\"fa-solid fa-robot\" style=\"margin-right: 6px\"></i>\n            {{ isParsingXml ? 'AI ...' : '' }}\n          </button>\n          <button\n            v-if=\"originalXmlInput\"\n            style=\"\n              padding: 10px 20px;\n              background: #ffc107;\n              border: none;\n              border-radius: 6px;\n              color: #000;\n              font-size: 13px;\n              cursor: pointer;\n            \"\n            :disabled=\"isModifyingXml\"\n            @click=\"showXmlModifyDialog = true\"\n          >\n            <i class=\"fa-solid fa-edit\" style=\"margin-right: 6px\"></i>\n            {{ isModifyingXml ? '...' : 'AI ' }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- XML  -->\n    <AIModifyDialog\n      :show=\"showXmlModifyDialog\"\n      :is-modifying=\"isModifyingXml\"\n      title=\"AI  XML \"\n      description=\"AI \"\n      :examples=\"[\n        '',\n        '',\n        '',\n        '3',\n      ]\"\n      @close=\"showXmlModifyDialog = false\"\n      @confirm=\"modifyXmlWithAI\"\n    />\n\n    <!-- AI  -->\n    <div\n      v-if=\"showAiFieldDialog\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.7);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n      \"\n      @click.self=\"showAiFieldDialog = false\"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border-radius: 16px;\n          padding: 24px;\n          width: 90%;\n          max-width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\n        \"\n      >\n        <h3 style=\"margin: 0 0 16px 0; color: #10b981; font-size: 18px; font-weight: 600\">\n          <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"margin-right: 8px\"></i>\n          AI \n        </h3>\n\n        <div\n          style=\"\n            background: rgba(16, 185, 129, 0.1);\n            border: 1px solid rgba(16, 185, 129, 0.3);\n            border-radius: 6px;\n            padding: 12px;\n            margin-bottom: 16px;\n          \"\n        >\n          <p style=\"margin: 0; color: #10b981; font-size: 12px; line-height: 1.6\">\n            <i class=\"fa-solid fa-lightbulb\" style=\"margin-right: 6px\"></i>\n            <strong></strong>AI \n          </p>\n        </div>\n\n        <div style=\"margin-bottom: 16px\">\n          <label style=\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 13px\">\n            \n          </label>\n          <textarea\n            v-model=\"aiFieldDescription\"\n            placeholder=\"&#10;&#10;- &#10;- &#10;- &#10;- &#10;- &#10;- &#10;- \"\n            style=\"\n              width: 100%;\n              min-height: 180px;\n              padding: 12px;\n              background: #1a1a1a;\n              border: 1px solid #404040;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              resize: vertical;\n              line-height: 1.6;\n            \"\n          ></textarea>\n        </div>\n\n        <div style=\"display: flex; gap: 10px; justify-content: flex-end\">\n          <button\n            style=\"\n              padding: 10px 20px;\n              background: #404040;\n              border: none;\n              border-radius: 6px;\n              color: white;\n              font-size: 13px;\n              cursor: pointer;\n            \"\n            @click=\"showAiFieldDialog = false\"\n          >\n            \n          </button>\n          <button\n            style=\"\n              padding: 10px 20px;\n              background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n              border: none;\n              border-radius: 6px;\n              color: white;\n              font-size: 13px;\n              cursor: pointer;\n              margin-right: 10px;\n            \"\n            :disabled=\"!aiFieldDescription.trim() || isGeneratingFields\"\n            @click=\"generateFieldsWithAI\"\n          >\n            <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"margin-right: 6px\"></i>\n            {{ isGeneratingFields ? 'AI ...' : '' }}\n          </button>\n          <button\n            v-if=\"originalFieldDescription\"\n            style=\"\n              padding: 10px 20px;\n              background: #ffc107;\n              border: none;\n              border-radius: 6px;\n              color: #000;\n              font-size: 13px;\n              cursor: pointer;\n            \"\n            :disabled=\"isModifyingField\"\n            @click=\"showFieldModifyDialog = true\"\n          >\n            <i class=\"fa-solid fa-edit\" style=\"margin-right: 6px\"></i>\n            {{ isModifyingField ? '...' : 'AI ' }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <AIModifyDialog\n      :show=\"showFieldModifyDialog\"\n      :is-modifying=\"isModifyingField\"\n      title=\"AI \"\n      description=\"AI \"\n      :examples=\"['', '3', '', '2']\"\n      @close=\"showFieldModifyDialog = false\"\n      @confirm=\"modifyFieldWithAI\"\n    />\n\n    <!--  -->\n    <ProgressDialog ref=\"progressDialogRef\" :show=\"showProgress\" title=\"AI \" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia';\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\nimport { useTaskStore } from '../taskStore';\nimport AIModifyDialog from './AIModifyDialog.vue';\nimport ProgressDialog from './ProgressDialog.vue';\n\ninterface Field {\n  name: string;\n  label: string;\n  icon: string;\n}\n\ninterface Config {\n  name: string;\n  findRegex: string;\n  fields: Field[];\n}\n\ninterface CodeFile {\n  path: string;\n  content: string;\n}\n\n//  settings store\nconst settingsStore = useSettingsStore();\nconst { settings } = storeToRefs(settingsStore);\n\n//  task store\nconst taskStore = useTaskStore();\n\n// \nconst templates = {\n  simple: {\n    name: '',\n    findRegex: '<-CHARACTER_STATUS->',\n    fields: [\n      { name: '', label: '', icon: 'fa-solid fa-user' },\n      { name: '', label: '', icon: 'fa-solid fa-venus-mars' },\n      { name: '', label: '', icon: 'fa-solid fa-cake-candles' },\n      { name: '', label: '', icon: 'fa-solid fa-heart' },\n    ],\n  },\n  abo: {\n    name: 'ABO',\n    findRegex:\n      '<-ENVIRONMENT_DATA->[\\\\r\\\\n]*\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|[\\\\r\\\\n]*<-CHARACTER_STATUS->[\\\\r\\\\n]*\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|[\\\\r\\\\n]*',\n    fields: [\n      { name: '', label: '', icon: 'fa-solid fa-calendar' },\n      { name: '', label: '', icon: 'fa-solid fa-clock' },\n      { name: '', label: '', icon: 'fa-solid fa-location-dot' },\n      { name: '', label: '', icon: 'fa-solid fa-cloud-sun' },\n      { name: '', label: '', icon: 'fa-solid fa-shirt' },\n      { name: '', label: '', icon: 'fa-solid fa-heart' },\n      { name: '', label: '', icon: 'fa-solid fa-fire' },\n      { name: '', label: '', icon: 'fa-solid fa-bookmark' },\n    ],\n  },\n};\n\nconst config = ref<Config>({\n  name: '',\n  findRegex: '<-CHARACTER_STATUS->',\n  fields: [\n    { name: '', label: '', icon: 'fa-solid fa-user' },\n    { name: '', label: '', icon: 'fa-solid fa-venus-mars' },\n    { name: '', label: '', icon: 'fa-solid fa-cake-candles' },\n    { name: '', label: '', icon: 'fa-solid fa-heart' },\n  ],\n});\n\nconst files = ref<CodeFile[]>([\n  { path: 'index.html', content: '' },\n  { path: 'style.css', content: '' },\n  { path: 'script.js', content: '' },\n]);\n\nconst currentFile = ref<CodeFile | null>(files.value[0]);\nconst showAI = ref(false);\nconst aiPrompt = ref('');\nconst originalAiPrompt = ref(''); // AI\nconst showAiModifyDialog = ref(false); // AI\nconst isModifyingAi = ref(false); // AI\nconst showIconPickerFor = ref<number | null>(null);\n\n// \nconst showProgress = ref(false);\nconst progressDialogRef = ref<InstanceType<typeof ProgressDialog> | null>(null);\n\n// XML\nconst originalXmlInput = ref(''); // XML\nconst showXmlModifyDialog = ref(false);\nconst isModifyingXml = ref(false);\n\n// AI\nconst originalFieldDescription = ref(''); // \nconst showFieldModifyDialog = ref(false);\nconst isModifyingField = ref(false);\n\n// XML \nconst showXmlDialog = ref(false);\nconst xmlInput = ref('');\nconst isParsingXml = ref(false);\n\n// AI \nconst showAiFieldDialog = ref(false);\nconst aiFieldDescription = ref('');\nconst isGeneratingFields = ref(false);\n\n// Font Awesome \nconst iconList = [\n  // \n  'fa-solid fa-cat',\n  'fa-solid fa-dog',\n  'fa-solid fa-dove',\n  'fa-solid fa-fish',\n  'fa-solid fa-paw',\n  'fa-solid fa-spider',\n  'fa-solid fa-horse',\n  // \n  'fa-solid fa-heart',\n  'fa-solid fa-heart-pulse',\n  // \n  'fa-solid fa-face-smile',\n  'fa-solid fa-face-grin-stars',\n  'fa-solid fa-face-grin-beam',\n  'fa-solid fa-face-laugh',\n  // \n  'fa-solid fa-star',\n  // \n  'fa-solid fa-wand-magic-sparkles',\n  'fa-solid fa-hat-wizard',\n  'fa-solid fa-bolt',\n  'fa-solid fa-fire',\n  'fa-solid fa-meteor',\n  'fa-solid fa-rocket',\n  // \n  'fa-solid fa-sun',\n  'fa-solid fa-moon',\n  'fa-solid fa-cloud',\n  'fa-solid fa-seedling',\n  'fa-solid fa-leaf',\n  'fa-solid fa-tree',\n  'fa-solid fa-snowflake',\n  // \n  'fa-solid fa-cake-candles',\n  'fa-solid fa-candy-cane',\n  'fa-solid fa-apple',\n  'fa-solid fa-ice-cream',\n  // \n  'fa-solid fa-gem',\n  'fa-solid fa-crown',\n  'fa-solid fa-gift',\n  'fa-solid fa-ribbon',\n  'fa-solid fa-medal',\n  'fa-solid fa-trophy',\n  // \n  'fa-solid fa-shield',\n  'fa-solid fa-scroll',\n  // \n  'fa-solid fa-book',\n  'fa-solid fa-book-open',\n  'fa-solid fa-feather',\n  'fa-solid fa-pen',\n  'fa-solid fa-paintbrush',\n  'fa-solid fa-palette',\n  // \n  'fa-solid fa-music',\n  'fa-solid fa-headphones',\n  'fa-solid fa-gamepad',\n  'fa-solid fa-chess',\n  'fa-solid fa-puzzle-piece',\n  'fa-solid fa-dice',\n  // \n  'fa-solid fa-mobile-screen',\n  'fa-solid fa-tablet',\n  'fa-solid fa-laptop',\n  'fa-solid fa-camera',\n  'fa-solid fa-video',\n  'fa-solid fa-tv',\n  // \n  'fa-solid fa-bell',\n  'fa-solid fa-envelope',\n];\n\n// \nconst worldbookContent = computed(() => {\n  // {{}}\n  const placeholders = config.value.fields.map(f => `{{${f.label || f.name}}}`).join('|');\n\n  // \n  const fieldDefinitions = config.value.fields\n    .map(f => {\n      const iconDesc = f.icon ? `<i class=\"${f.icon}\"></i> ` : '';\n      const label = f.label || f.name;\n      return `  - ${iconDesc}${label}{{char}}${label}`;\n    })\n    .join('\\n');\n\n  // \n  const exampleValues = config.value.fields.map(f => f.label || f.name || '').join('|');\n\n  // \n  const parseRegexStructure = (regex: string, fields: Field[]): { formatExample: string; exampleOutput: string } => {\n    //  <-ENVIRONMENT_DATA->\n    const triggerMatches = regex.match(/<-[^>]+->/g) || [];\n\n    if (triggerMatches.length === 0) {\n      // \n      const placeholders = fields.map(f => `{{${f.label || f.name}}}`).join('|');\n      const exampleValues = fields.map(f => f.label || f.name).join('|');\n      return {\n        formatExample: `|${placeholders}|`,\n        exampleOutput: `|${exampleValues}|`,\n      };\n    }\n\n    // \n    let normalizedRegex = regex\n      .replace(/\\\\\\\\/g, '\\\\') // \\\\ -> \\\n      .replace(/\\\\\\|/g, '|') // \\| -> |\n      .replace(/\\\\\\(/g, '(') // \\( -> (\n      .replace(/\\\\\\)/g, ')') // \\) -> )\n      .replace(/\\\\\\[/g, '[') // \\[ -> [\n      .replace(/\\\\\\]/g, ']') // \\] -> ]\n      .replace(/\\\\\\+/g, '+'); // \\+ -> +\n\n    console.log(' :', regex);\n    console.log(' :', normalizedRegex);\n\n    // \n    const lines: string[] = [];\n    const exampleLines: string[] = [];\n    let fieldIndex = 0;\n\n    // \n    const parts = normalizedRegex.split(/(<-[^>]+->)/);\n    console.log(' :', parts);\n\n    for (let i = 0; i < parts.length; i++) {\n      const part = parts[i];\n\n      // \n      if (part.match(/<-[^>]+->/)) {\n        lines.push(part);\n        exampleLines.push(part);\n        console.log(` : ${part}`);\n      }\n      // \n      else if (part.trim().length > 0 && !part.match(/<-[^>]+->/)) {\n        // \n        const allCaptures = part.match(/\\([^\\)]+\\)/g) || [];\n        const totalCount = allCaptures.length;\n        console.log(`  (100): \"${part.substring(0, 100)}\"`);\n        console.log(` :`, allCaptures);\n        console.log(` : ${totalCount}, : ${fieldIndex}, : ${fields.length}`);\n\n        if (totalCount === 0) {\n          console.warn(` `);\n          continue;\n        }\n\n        // 4\n        const perLine = 4;\n\n        for (let offset = 0; offset < totalCount; offset += perLine) {\n          const count = Math.min(perLine, totalCount - offset);\n          //  fieldIndex < fields.length \n          if (count > 0) {\n            const segmentFields = fields.slice(fieldIndex, fieldIndex + count);\n            // \n            while (segmentFields.length < count) {\n              segmentFields.push({\n                name: `${fieldIndex + segmentFields.length + 1}`,\n                label: `${fieldIndex + segmentFields.length + 1}`,\n                icon: '',\n              });\n            }\n            const placeholders = segmentFields.map(f => `{{${f.label || f.name}}}`).join('|');\n            const examples = segmentFields.map(f => f.label || f.name).join('|');\n            lines.push(`|${placeholders}|`);\n            exampleLines.push(`|${examples}|`);\n            console.log(` : |${examples}|`);\n            fieldIndex += count;\n          }\n        }\n      }\n    }\n\n    console.log(' :', lines.join('\\n'));\n    console.log(' :', exampleLines.join('\\n'));\n\n    return {\n      formatExample: lines.join('\\n'),\n      exampleOutput: exampleLines.join('\\n'),\n    };\n  };\n\n  const { formatExample, exampleOutput } = parseRegexStructure(config.value.findRegex, config.value.fields);\n\n  return `<status_rule>\n#{{char}}\n\n##\n<status>\n${formatExample}\n</status>\n\n##\n${fieldDefinitions || '  - '}\n\n##\n\n<status>\n${exampleOutput}\n</status>\n\n##\n1. ** <status> **\n   -  <status>\n   -  </status>\n   -  \n\n2. ****\n   -  <-ENVIRONMENT_DATA->\n   -  | \n   - \n   - \n\n3. ****\n   -  |: |: |\n   -  |||\n   - \n\n4. ****\n   - \n   - \n   - \n   - \n\n5. ****\n   - \n   - {{}} \n   -  {{char}}  {{user}} \n</status_rule>`;\n});\n\n//  HTML\nconst previewHtml = computed(() => {\n  const htmlFile = files.value.find(f => f.path === 'index.html');\n  const cssFile = files.value.find(f => f.path === 'style.css');\n  const jsFile = files.value.find(f => f.path === 'script.js');\n\n  if (!htmlFile) return '';\n\n  const scriptTag = 'script';\n  const styleTag = 'style';\n\n  //  $1, $2 \n  let previewContent = htmlFile.content || '';\n  config.value.fields.forEach((field, i) => {\n    const exampleValue = field.name || `${i + 1}`;\n    previewContent = previewContent.replace(new RegExp(`\\\\$${i + 1}(?!\\\\d)`, 'g'), exampleValue);\n  });\n\n  return `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\">\n  <${styleTag}>\n    html, body {\n      margin: 0;\n      padding: 0;\n      width: 100%;\n      height: auto;\n      min-height: 800px;\n      overflow: visible;\n    }\n    ${cssFile?.content || ''}\n  </${styleTag}>\n  <${scriptTag} src=\"https://code.jquery.com/jquery-3.7.1.min.js\"></${scriptTag}>\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\">\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js\"></${scriptTag}>\n</head>\n<body>\n  ${previewContent}\n  <${scriptTag}>${jsFile?.content || ''}</${scriptTag}>\n</body>\n</html>`;\n});\n\n// \nfunction updatePreview() {\n  // \n}\n\n// \nfunction addField() {\n  config.value.fields.push({ name: '', label: '', icon: '' });\n}\n\n// \nfunction removeField(index: number) {\n  config.value.fields.splice(index, 1);\n}\n\n//  XML \nfunction showXmlParseDialog() {\n  showXmlDialog.value = true;\n  xmlInput.value = '';\n}\n\n//  AI \nfunction showAiFieldGeneratorDialog() {\n  showAiFieldDialog.value = true;\n  aiFieldDescription.value = '';\n}\n\n// AI  XML \nasync function parseXmlWithAI() {\n  if (!xmlInput.value.trim()) {\n    toastr.warning(' XML ');\n    return;\n  }\n\n  //  API \n  if (!settings.value.api_endpoint || !settings.value.api_key) {\n    toastr.error(' API \" \" API ', '', {\n      timeOut: 0,\n      extendedTimeOut: 0,\n      closeButton: true,\n    });\n    return;\n  }\n\n  // \n  const taskId = taskStore.createTask('ui_generate', 'AIXML');\n\n  // \n  originalXmlInput.value = xmlInput.value;\n\n  isParsingXml.value = true;\n  showProgress.value = true;\n\n  try {\n    progressDialogRef.value?.setProgress(10);\n    progressDialogRef.value?.setMessage(' XML...');\n    progressDialogRef.value?.addDetail(`XML : ${xmlInput.value.length} `);\n    taskStore.updateTaskProgress(taskId, 10, 'XML');\n    const systemPrompt = ` XML  XML \n\n1. **** XML  <i><2i><><> \n2. ****\n   -  <i><2i><3i> \n   -  <><>\n3. **** namelabelicon\n\n** JSON **\n\n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"\" }\n]\n\n****\n- name  date, location, status\n- label  \n- icon  Font Awesome \n- **** JSON \n- **** JSON\n\n\n<state_bar>\n<i></i>\n<></>\n<></>\n</state_bar>\n\n\n[\n  { \"name\": \"content\", \"label\": \"\", \"icon\": \"\" },\n  { \"name\": \"date\", \"label\": \"\", \"icon\": \"fa-solid fa-calendar\" },\n  { \"name\": \"physical_status\", \"label\": \"\", \"icon\": \"fa-solid fa-heart-pulse\" }\n]`;\n\n    const userPrompt = ` XML \n\n\\`\\`\\`xml\n${xmlInput.value.trim()}\n\\`\\`\\`\n\n JSON `;\n\n    console.log('  AI  XML...');\n    console.log('  API:', settings.value.api_endpoint);\n    console.log(' :', settings.value.model);\n\n    progressDialogRef.value?.setProgress(20);\n    progressDialogRef.value?.setMessage(' XML  AI ...');\n    taskStore.updateTaskProgress(taskId, 20, 'XMLAI');\n\n    //  API \n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n    console.log(' :', apiUrl);\n\n    //  AI API\n    progressDialogRef.value?.setProgress(30);\n    progressDialogRef.value?.setMessage(' AI  XML ...');\n    taskStore.updateTaskProgress(taskId, 40, `AI (${settings.value.model})`);\n\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          {\n            role: 'system',\n            content: systemPrompt,\n          },\n          {\n            role: 'user',\n            content: userPrompt,\n          },\n        ],\n        max_tokens: 2000,\n        temperature: 0.7,\n      }),\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`API: ${response.status} ${response.statusText}\\n${errorText}`);\n    }\n\n    const result = await response.json();\n    console.log(' AI :', result);\n\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n      throw new Error('AI');\n    }\n\n    const aiResponse = result.choices[0].message.content;\n    console.log(' AI :', aiResponse);\n\n    // =====  =====\n    if (!aiResponse || typeof aiResponse !== 'string') {\n      throw new Error('AI ');\n    }\n\n    //  JSON\n    let jsonText = aiResponse.trim();\n\n    //  markdown \n    jsonText = jsonText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n\n    //  JSON  AI \n    const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n    if (jsonMatch) {\n      jsonText = jsonMatch[0];\n    }\n\n    //  JSON\n    let parsedFields: any;\n    try {\n      parsedFields = JSON.parse(jsonText);\n    } catch (parseError: any) {\n      throw new Error(\n        `AI  JSON \\n\\n AI \\n\\n200:\\n${result.slice(0, 200)}`,\n      );\n    }\n\n    if (!Array.isArray(parsedFields)) {\n      throw new Error('AI ');\n    }\n\n    // \n    const validFields = parsedFields.filter((field: any) => {\n      return field.name && field.label;\n    });\n\n    if (validFields.length === 0) {\n      throw new Error(' AI ');\n    }\n\n    // \n    config.value.fields = validFields.map((field: any) => ({\n      name: field.name || '',\n      label: field.label || '',\n      icon: field.icon || '',\n    }));\n\n    progressDialogRef.value?.setProgress(100);\n    progressDialogRef.value?.setMessage(' ');\n    progressDialogRef.value?.addDetail(` ${validFields.length} `);\n    taskStore.completeTask(taskId, { fieldCount: validFields.length });\n\n    setTimeout(() => {\n      showProgress.value = false;\n      showXmlDialog.value = false;\n      xmlInput.value = '';\n      toastr.success(` ${validFields.length} `);\n    }, 800);\n  } catch (error: any) {\n    console.error(' XML :', error);\n    showProgress.value = false;\n\n    // \n    const errorMsg = error.message || '';\n    taskStore.failTask(taskId, errorMsg);\n\n    //  API \n    if (\n      errorMsg.includes('API') ||\n      errorMsg.includes('403') ||\n      errorMsg.includes('401') ||\n      errorMsg.includes('Unauthorized')\n    ) {\n      toastr.error(' API \\n1. API \\n2. \\n3. ', '', {\n        timeOut: 0,\n        extendedTimeOut: 0,\n        closeButton: true,\n      });\n    } else {\n      toastr.error(`: ${errorMsg}`, '', {\n        timeOut: 8000,\n        closeButton: true,\n      });\n    }\n  } finally {\n    isParsingXml.value = false;\n  }\n}\n\n// AI  XML \nasync function modifyXmlWithAI(modifyInstruction: string) {\n  if (!originalXmlInput.value) {\n    window.toastr.warning(' XML');\n    return;\n  }\n\n  isModifyingXml.value = true;\n  showProgress.value = true;\n\n  try {\n    progressDialogRef.value?.setProgress(20);\n    progressDialogRef.value?.setMessage('...');\n    progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\n\n    const systemPrompt = ` XML  XML `;\n\n    const userPrompt = `#  XML\n${originalXmlInput.value}\n\n# \n${modifyInstruction}\n\n XML \nJSON \n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"\" }\n]`;\n\n    progressDialogRef.value?.setProgress(40);\n    progressDialogRef.value?.setMessage(' AI ...');\n\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: userPrompt },\n        ],\n        max_tokens: 2000,\n        temperature: 0.7,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.statusText}`);\n    }\n\n    progressDialogRef.value?.setProgress(70);\n    progressDialogRef.value?.setMessage(' AI ...');\n\n    const result = await response.json();\n    const aiResponse = result.choices[0]?.message?.content || '';\n\n    progressDialogRef.value?.setProgress(85);\n    progressDialogRef.value?.setMessage('...');\n\n    //  JSON\n    let jsonText = aiResponse\n      .trim()\n      .replace(/^```(?:json)?\\s*\\n?/i, '')\n      .replace(/\\n?```\\s*$/i, '');\n    const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n    if (jsonMatch) {\n      jsonText = jsonMatch[0];\n    }\n\n    const parsedFields = JSON.parse(jsonText);\n    if (!Array.isArray(parsedFields)) {\n      throw new Error('AI ');\n    }\n\n    // \n    config.value.fields = parsedFields.map((field: any) => ({\n      name: field.name || '',\n      label: field.label || field.name || '',\n      icon: field.icon || '',\n    }));\n\n    // \n    originalXmlInput.value += `\\n\\n${modifyInstruction}`;\n\n    progressDialogRef.value?.setProgress(100);\n    progressDialogRef.value?.setMessage(' ');\n    progressDialogRef.value?.addDetail(` ${parsedFields.length} `);\n\n    setTimeout(() => {\n      showProgress.value = false;\n      showXmlModifyDialog.value = false;\n      window.toastr.success(' AI ');\n    }, 800);\n  } catch (error: any) {\n    console.error('AI :', error);\n    showProgress.value = false;\n    window.toastr.error('AI : ' + error.message);\n  } finally {\n    isModifyingXml.value = false;\n  }\n}\n\n// AI \nasync function generateFieldsWithAI() {\n  if (!aiFieldDescription.value.trim()) {\n    toastr.warning('');\n    return;\n  }\n\n  //  API \n  if (!settings.value.api_endpoint || !settings.value.api_key) {\n    toastr.error(' API \" \" API ', '', {\n      timeOut: 0,\n      extendedTimeOut: 0,\n      closeButton: true,\n    });\n    return;\n  }\n\n  // \n  const taskId = taskStore.createTask('ui_generate', 'AI');\n\n  // \n  originalFieldDescription.value = aiFieldDescription.value;\n\n  isGeneratingFields.value = true;\n  showProgress.value = true;\n\n  try {\n    progressDialogRef.value?.setProgress(10);\n    progressDialogRef.value?.setMessage('...');\n    progressDialogRef.value?.addDetail('AI ');\n    taskStore.updateTaskProgress(taskId, 10, '');\n    const systemPrompt = `\n\n1. ****ABO\n2. ****\n3. **** namelabelicon\n\n** JSON **\n\n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"fa-solid fa-xxx\" }\n]\n\n****\n- name  realm, spiritual_power, location\n- label  \n- icon  Font Awesome  fa-solid fa-star, fa-solid fa-bolt\n- **** JSON \n- **** JSON\n\n\n- fa-solid fa-user, fa-solid fa-user-ninja, fa-solid fa-user-secret\n- fa-solid fa-heart, fa-solid fa-heart-pulse, fa-solid fa-star\n- fa-solid fa-location-dot, fa-solid fa-map-marker\n- fa-solid fa-clock, fa-solid fa-calendar\n- fa-solid fa-bolt, fa-solid fa-fire, fa-solid fa-droplet\n- fa-solid fa-book, fa-solid fa-wand-magic-sparkles, fa-solid fa-scroll\n- fa-solid fa-heart, fa-solid fa-face-smile, fa-solid fa-face-sad-tear\n\n\n\"\"\n\n[\n  { \"name\": \"name\", \"label\": \"\", \"icon\": \"fa-solid fa-user-ninja\" },\n  { \"name\": \"realm\", \"label\": \"\", \"icon\": \"fa-solid fa-star\" },\n  { \"name\": \"spiritual_power\", \"label\": \"\", \"icon\": \"fa-solid fa-bolt\" },\n  { \"name\": \"cultivation_method\", \"label\": \"\", \"icon\": \"fa-solid fa-scroll\" },\n  { \"name\": \"location\", \"label\": \"\", \"icon\": \"fa-solid fa-location-dot\" },\n  { \"name\": \"status\", \"label\": \"\", \"icon\": \"fa-solid fa-heart-pulse\" }\n]`;\n\n    const userPrompt = `\n\n${aiFieldDescription.value.trim()}\n\n JSON `;\n\n    console.log('  AI ...');\n    console.log('  API:', settings.value.api_endpoint);\n    console.log(' :', settings.value.model);\n\n    progressDialogRef.value?.setProgress(20);\n    progressDialogRef.value?.setMessage(' AI...');\n    taskStore.updateTaskProgress(taskId, 20, 'AI');\n\n    //  API \n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n    console.log(' :', apiUrl);\n\n    progressDialogRef.value?.setProgress(30);\n    progressDialogRef.value?.setMessage(' AI ...');\n    taskStore.updateTaskProgress(taskId, 40, `AI (${settings.value.model})`);\n\n    //  AI API\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          {\n            role: 'system',\n            content: systemPrompt,\n          },\n          {\n            role: 'user',\n            content: userPrompt,\n          },\n        ],\n        max_tokens: 3000,\n        temperature: 0.8,\n      }),\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`API: ${response.status} ${response.statusText}\\n${errorText}`);\n    }\n\n    const result = await response.json();\n    console.log(' AI :', result);\n\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n      throw new Error('AI');\n    }\n\n    const aiResponse = result.choices[0].message.content;\n    console.log(' AI :', aiResponse);\n\n    // =====  =====\n    if (!aiResponse || typeof aiResponse !== 'string') {\n      throw new Error('AI ');\n    }\n\n    //  JSON\n    let jsonText = aiResponse.trim();\n\n    //  markdown \n    jsonText = jsonText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n\n    //  JSON  AI \n    const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n    if (jsonMatch) {\n      jsonText = jsonMatch[0];\n    }\n\n    //  JSON\n    let parsedFields: any;\n    try {\n      parsedFields = JSON.parse(jsonText);\n    } catch (parseError: any) {\n      throw new Error(\n        `AI  JSON \\n\\n AI \\n\\n200:\\n${aiResponse.slice(0, 200)}`,\n      );\n    }\n\n    if (!Array.isArray(parsedFields)) {\n      throw new Error('AI ');\n    }\n\n    // \n    const validFields = parsedFields.filter((field: any) => {\n      return field.name && field.label;\n    });\n\n    if (validFields.length === 0) {\n      throw new Error(' AI ');\n    }\n\n    // \n    config.value.fields = validFields.map((field: any) => ({\n      name: field.name || '',\n      label: field.label || '',\n      icon: field.icon || '',\n    }));\n\n    progressDialogRef.value?.setProgress(100);\n    progressDialogRef.value?.setMessage(' ');\n    progressDialogRef.value?.addDetail(` ${validFields.length} `);\n    taskStore.completeTask(taskId, { fieldCount: validFields.length });\n\n    setTimeout(() => {\n      showProgress.value = false;\n      showAiFieldDialog.value = false;\n      aiFieldDescription.value = '';\n      toastr.success(` ${validFields.length} `);\n    }, 800);\n  } catch (error: any) {\n    console.error(' AI :', error);\n    showProgress.value = false;\n\n    // \n    const errorMsg = error.message || '';\n    taskStore.failTask(taskId, errorMsg);\n\n    //  API \n    if (\n      errorMsg.includes('API') ||\n      errorMsg.includes('403') ||\n      errorMsg.includes('401') ||\n      errorMsg.includes('Unauthorized')\n    ) {\n      toastr.error(' API \\n1. API \\n2. \\n3. ', '', {\n        timeOut: 0,\n        extendedTimeOut: 0,\n        closeButton: true,\n      });\n    } else {\n      toastr.error(`: ${errorMsg}`, '', {\n        timeOut: 8000,\n        closeButton: true,\n      });\n    }\n  } finally {\n    isGeneratingFields.value = false;\n  }\n}\n\n// \nfunction showIconPicker(index: number) {\n  showIconPickerFor.value = index;\n}\n\n// \nfunction selectIcon(iconClass: string) {\n  if (showIconPickerFor.value !== null) {\n    config.value.fields[showIconPickerFor.value].icon = iconClass;\n    showIconPickerFor.value = null;\n  }\n}\n\n// AI \nasync function modifyFieldWithAI(modifyInstruction: string) {\n  if (!originalFieldDescription.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  isModifyingField.value = true;\n  showProgress.value = true;\n\n  try {\n    progressDialogRef.value?.setProgress(20);\n    progressDialogRef.value?.setMessage('...');\n    progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\n\n    const systemPrompt = ``;\n\n    const userPrompt = `# \n${originalFieldDescription.value}\n\n# \n${modifyInstruction}\n\n\nJSON \n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"\" }\n]`;\n\n    progressDialogRef.value?.setProgress(40);\n    progressDialogRef.value?.setMessage(' AI ...');\n\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: userPrompt },\n        ],\n        max_tokens: 2000,\n        temperature: 0.7,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.statusText}`);\n    }\n\n    progressDialogRef.value?.setProgress(70);\n    progressDialogRef.value?.setMessage(' AI ...');\n\n    const result = await response.json();\n    const aiResponse = result.choices[0]?.message?.content || '';\n\n    progressDialogRef.value?.setProgress(85);\n    progressDialogRef.value?.setMessage('...');\n\n    //  JSON\n    let jsonText = aiResponse\n      .trim()\n      .replace(/^```(?:json)?\\s*\\n?/i, '')\n      .replace(/\\n?```\\s*$/i, '');\n    const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n    if (jsonMatch) {\n      jsonText = jsonMatch[0];\n    }\n\n    const parsedFields = JSON.parse(jsonText);\n    if (!Array.isArray(parsedFields)) {\n      throw new Error('AI ');\n    }\n\n    // \n    config.value.fields = parsedFields.map((field: any) => ({\n      name: field.name || '',\n      label: field.label || field.name || '',\n      icon: field.icon || '',\n    }));\n\n    // \n    originalFieldDescription.value += `\\n\\n${modifyInstruction}`;\n\n    progressDialogRef.value?.setProgress(100);\n    progressDialogRef.value?.setMessage(' ');\n    progressDialogRef.value?.addDetail(` ${parsedFields.length} `);\n\n    setTimeout(() => {\n      showProgress.value = false;\n      showFieldModifyDialog.value = false;\n      window.toastr.success(' AI ');\n    }, 800);\n  } catch (error: any) {\n    console.error('AI :', error);\n    showProgress.value = false;\n    window.toastr.error('AI : ' + error.message);\n  } finally {\n    isModifyingField.value = false;\n  }\n}\n\n// \nfunction generateFromFields() {\n  const fields = config.value.fields;\n\n  //  findRegex\n  const totalFields = fields.length;\n\n  if (totalFields === 0) {\n    config.value.findRegex = '<-CHARACTER_STATUS->';\n    console.log(' ');\n    return;\n  }\n\n  if (totalFields <= 4) {\n    // 4\n    config.value.findRegex = `<-CHARACTER_STATUS->[\\\\r\\\\n]*\\\\|${fields.map(() => '([^|]+)').join('\\\\|')}\\\\|[\\\\r\\\\n]*`;\n    console.log('  findRegex ():', config.value.findRegex);\n    console.log(' :', totalFields);\n  } else {\n    // 4\n    // 4\n    const perLine = totalFields <= 8 ? Math.ceil(totalFields / 2) : 4;\n\n    // \n    const firstHalf = Math.min(Math.ceil(totalFields / 2), totalFields <= 12 ? 4 : Math.ceil(totalFields / 3));\n\n    const lines: string[] = [];\n\n    //  + \n    lines.push('<-ENVIRONMENT_DATA->[\\\\r\\\\n]*');\n    for (let i = 0; i < firstHalf; i += perLine) {\n      const count = Math.min(perLine, firstHalf - i);\n      lines.push(\n        '\\\\|' +\n          fields\n            .slice(i, i + count)\n            .map(() => '([^|]+)')\n            .join('\\\\|') +\n          '\\\\|[\\\\r\\\\n]*',\n      );\n    }\n\n    //  + perLine\n    lines.push('<-CHARACTER_STATUS->[\\\\r\\\\n]*');\n    for (let i = firstHalf; i < totalFields; i += perLine) {\n      const count = Math.min(perLine, totalFields - i);\n      lines.push(\n        '\\\\|' +\n          fields\n            .slice(i, i + count)\n            .map(() => '([^|]+)')\n            .join('\\\\|') +\n          '\\\\|[\\\\r\\\\n]*',\n      );\n    }\n\n    config.value.findRegex = lines.join('');\n\n    console.log('  findRegex ():', config.value.findRegex);\n    console.log(' :', totalFields);\n    console.log(\n      ' :',\n      `: ${firstHalf}, : ${totalFields - firstHalf}, : ${perLine}`,\n    );\n  }\n\n  //  HTML\n  const fieldsHtml = fields\n    .map((f, i) => {\n      const iconPart = f.icon ? `<i class=\"${f.icon}\"></i> ` : '';\n      return `        <div class=\"status-field\">\n          <div class=\"field-label\">${iconPart}${f.label || '' + (i + 1)}</div>\n          <div class=\"field-value\">$${i + 1}</div>\n        </div>`;\n    })\n    .join('\\n');\n\n  const htmlContent = `<details>\n<summary> ${config.value.name} </summary>\n<div class=\"status-card\">\n    <div class=\"status-header\">\n        <span></span>\n        <span>${config.value.name}</span>\n    </div>\n    <div class=\"status-content\">\n        <div class=\"status-grid\">\n${fieldsHtml}\n        </div>\n    </div>\n</div>\n</details>`;\n\n  //  CSS\n  const cssContent = `.status-card {\n    font-family: 'Microsoft YaHei', sans-serif;\n    background: linear-gradient(145deg, #1e293b, #334155);\n    border-radius: 14px;\n    margin: 16px 0;\n    box-shadow: 0 8px 25px rgba(15, 23, 42, 0.4);\n    overflow: hidden;\n    border: 1px solid rgba(148, 163, 184, 0.2);\n    max-width: 600px;\n}\n\n.status-header {\n    background: linear-gradient(135deg, #0f172a, #1e293b);\n    color: #e2e8f0;\n    padding: 12px 20px;\n    font-size: 15px;\n    font-weight: 600;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    border-bottom: 1px solid rgba(148, 163, 184, 0.15);\n}\n\n.status-content {\n    padding: 20px;\n    background: rgba(30, 41, 59, 0.5);\n}\n\n.status-grid {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 16px;\n}\n\n.status-field {\n    background: rgba(30, 41, 59, 0.8);\n    padding: 16px;\n    border-radius: 10px;\n    border-left: 3px solid #6366f1;\n}\n\n.field-label {\n    font-size: 11px;\n    color: #94a3b8;\n    margin-bottom: 8px;\n    font-weight: 600;\n    text-transform: uppercase;\n}\n\n.field-value {\n    font-size: 14px;\n    color: #e2e8f0;\n    line-height: 1.5;\n    font-weight: 600;\n}`;\n\n  //  JS - \n  const jsContent = `// \n(function() {\n  // \n  setTimeout(function() {\n    console.log('${config.value.name} ');\n\n    // \n    if (typeof gsap !== 'undefined') {\n      gsap.from('.status-field', {\n        opacity: 0,\n        y: 20,\n        duration: 0.5,\n        stagger: 0.1,\n        ease: 'power2.out'\n      });\n\n      // \n      $('.status-field').hover(\n        function() {\n          gsap.to($(this), { scale: 1.05, duration: 0.2 });\n        },\n        function() {\n          gsap.to($(this), { scale: 1, duration: 0.2 });\n        }\n      );\n    }\n  }, 100);\n})();`;\n\n  files.value[0].content = htmlContent;\n  files.value[1].content = cssContent;\n  files.value[2].content = jsContent;\n  currentFile.value = files.value[0];\n\n  window.toastr.success(' ');\n}\n\n//  AI \nfunction showAIDialog() {\n  showAI.value = true;\n  aiPrompt.value = '';\n}\n\n// \nfunction addFieldInDialog() {\n  config.value.fields.push({\n    name: `${config.value.fields.length + 1}`,\n    label: `${config.value.fields.length + 1}`,\n    icon: '',\n  });\n}\n\n// \nfunction removeFieldInDialog(index: number) {\n  if (config.value.fields.length <= 1) {\n    window.toastr.warning('');\n    return;\n  }\n  config.value.fields.splice(index, 1);\n}\n\n// \nfunction loadTemplate(templateKey: 'simple' | 'abo') {\n  const template = templates[templateKey];\n  if (template) {\n    config.value = JSON.parse(JSON.stringify(template)); // \n    window.toastr.success(` \"${template.name}\"`);\n  }\n}\n\n// AI \nasync function generateWithAI() {\n  if (!aiPrompt.value.trim()) {\n    window.toastr.error('');\n    return;\n  }\n\n  // \n  const taskId = taskStore.createTask('ui_generate', 'AI');\n\n  // \n  originalAiPrompt.value = aiPrompt.value;\n\n  // \n  showProgress.value = true;\n\n  try {\n    //  API \n    if (!settings.value.api_endpoint || !settings.value.api_key) {\n      window.toastr.error(' API  API Key');\n      showProgress.value = false;\n      taskStore.failTask(taskId, 'API');\n      return;\n    }\n\n    // 1: \n    progressDialogRef.value?.setProgress(10);\n    progressDialogRef.value?.setMessage(' AI ...');\n    progressDialogRef.value?.addDetail(`: ${config.value.fields.length} `);\n    progressDialogRef.value?.addDetail(`: ${settings.value.model}`);\n    taskStore.updateTaskProgress(taskId, 10, 'AI');\n\n    // \n    const currentFiles = files.value.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n\n    // \n    const systemPrompt = ` SillyTavern  HTML/CSS/JS \n\n Regex  replaceString  AI \n**{{char}}**{{user}}\n\n\n- Font Awesome \n- jQuery ($) - \n- toastr- \n- gsap- \n- lodash (_) - \n\n\n-  $1$2$3 \n- $1 $2 \n- \n- ****\n\n\nFILE_START: index.html\n<details>\n<summary>  </summary>\n<div class=\"status-card\">\n  <!--  $1, $2, $3  -->\n  <div class=\"field-value\">$1</div>\n</div>\n</details>\nFILE_END\n\nFILE_START: style.css\n.status-card {\n  /*  */\n}\nFILE_END\n\nFILE_START: script.js\n(function() {\n  // \n  //  $  document\n})();\nFILE_END\n\n\n1. index.html  <details>  </details>  <!DOCTYPE>  <html> \n2. FILE_START  FILE_END ****\\\\\\`\\\\\\`\\\\\\`html\"\"\"html \n3. HTML $1, $2, $3...\n4. CSS \n5. JS  (function() { ... })() $(function() { ... })\n6.  DOM \n7. ****`;\n\n    const userPrompt = `# \n${config.value.fields.map((f, i) => `${i + 1}${f.label} (: ${f.name}) - : $${i + 1}${f.icon ? ` - : ${f.icon}` : ''}`).join('\\n')}\n\n \n1. HTML  ${config.value.fields.length} \n2. $1 = ${config.value.fields[0]?.label || '1'}, $2 = ${config.value.fields[1]?.label || '2'}${config.value.fields[2] ? `, $3 = ${config.value.fields[2].label}` : ''}${config.value.fields[3] ? `, $4 = ${config.value.fields[3].label}` : ''}${config.value.fields[4] ? `, $5 = ${config.value.fields[4].label}` : ''}\n3. \"\"\"\"\"\"\n4.  $${config.value.fields.length + 1} \n\n# \n**{{char}}****{{user}}**\nMVU Beta{{char}}stat_data\n\n# \n${config.value.findRegex}\n\n# \n${aiPrompt.value}\n\n# \n${currentFiles}\n\n\n1. \n2.  ${config.value.fields.length} $1, $2, $3... HTML \n3. \n4.  index.htmlstyle.cssscript.js \n5. `;\n\n    // 2: \n    progressDialogRef.value?.setProgress(20);\n    progressDialogRef.value?.setMessage(' AI ...');\n    progressDialogRef.value?.addDetail(`API : ${settings.value.api_endpoint}`);\n    taskStore.updateTaskProgress(taskId, 20, 'AI');\n\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: userPrompt },\n        ],\n        temperature: settings.value.temperature || 0.7,\n        max_tokens: settings.value.max_tokens || 65500,\n      }),\n    });\n\n    // 3: \n    progressDialogRef.value?.setProgress(40);\n    progressDialogRef.value?.setMessage(' AI ...');\n    progressDialogRef.value?.addDetail(' 10-30 ');\n    taskStore.updateTaskProgress(taskId, 50, `AI (${settings.value.model})`);\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    const resultText = data.choices[0]?.message?.content || '';\n\n    // 4: \n    progressDialogRef.value?.setProgress(70);\n    progressDialogRef.value?.setMessage(' AI ...');\n    progressDialogRef.value?.addDetail(`: ${resultText.length} `);\n    taskStore.updateTaskProgress(taskId, 70, 'AI');\n\n    //  AI \n    const FILE_START_REGEX = /FILE_START:\\s*([^\\n]+)\\n([\\s\\S]*?)(?=FILE_START:|FILE_END:|$)/g;\n    const matches = [...resultText.matchAll(FILE_START_REGEX)];\n\n    if (matches.length === 0) {\n      throw new Error('AI ');\n    }\n\n    for (const match of matches) {\n      const rawPath = match[1].trim();\n      const normalizedPath = rawPath.replace(/^\\.\\//, '');\n      let content = sanitizeFileContent(normalizedPath, match[2]);\n\n      //  FILE_END\n      if (content.endsWith('FILE_END')) {\n        content = content.slice(0, -8).trim();\n      }\n\n      const file = files.value.find(f => f.path === normalizedPath);\n      if (file) {\n        file.content = content;\n      } else if (normalizedPath === 'index.html' || normalizedPath === 'style.css' || normalizedPath === 'script.js') {\n        // \n        files.value.push({ path: normalizedPath, content: content });\n      }\n    }\n\n    //  './'\n    files.value.forEach(file => {\n      file.path = file.path.replace(/^\\.\\//, '');\n    });\n\n    //  './index.html' \n    const uniqueFiles = new Map<string, CodeFile>();\n    files.value.forEach(file => {\n      uniqueFiles.set(file.path, file);\n    });\n    files.value = Array.from(uniqueFiles.values());\n\n    // 5: \n    progressDialogRef.value?.setProgress(90);\n    progressDialogRef.value?.setMessage('...');\n    progressDialogRef.value?.addDetail(` ${matches.length} `);\n    taskStore.updateTaskProgress(taskId, 90, '');\n\n    const htmlFile = files.value.find(f => f.path === 'index.html') || files.value[0];\n    currentFile.value = htmlFile;\n    updatePreview();\n\n    // \n    progressDialogRef.value?.setProgress(100);\n    progressDialogRef.value?.setMessage(' AI ');\n    taskStore.completeTask(taskId, { fileCount: matches.length });\n\n    setTimeout(() => {\n      showProgress.value = false;\n      showAI.value = false;\n      window.toastr.success(' AI ');\n    }, 800);\n  } catch (error: any) {\n    console.error('AI :', error);\n    showProgress.value = false;\n    taskStore.failTask(taskId, error.message);\n    window.toastr.error('AI : ' + error.message);\n  }\n}\n\n// AI \nasync function modifyWithAI(modifyInstruction: string) {\n  if (!originalAiPrompt.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  isModifyingAi.value = true;\n  showProgress.value = true;\n\n  try {\n    // 1: \n    progressDialogRef.value?.setProgress(10);\n    progressDialogRef.value?.setMessage(' AI ...');\n    progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\n\n    const currentFiles = files.value.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n\n    const systemPrompt = ` SillyTavern  HTML/CSS/JS \n\n\n1. ** index.htmlstyle.cssscript.js **\n2. \n3. \n4.  FILE_START  FILE_END \n\n****`;\n\n    const userPrompt = `# \n${originalAiPrompt.value}\n\n# \n${modifyInstruction}\n\n# \n${config.value.fields.map((f, i) => `${i + 1}${f.label} (: ${f.name}) - : $${i + 1}${f.icon ? ` - : ${f.icon}` : ''}`).join('\\n')}\n\n# \n${currentFiles}\n\n ****\n\nFILE_START: index.html\n<details>\n  <!--  HTML $1, $2, $3  -->\n</details>\nFILE_END\n\nFILE_START: style.css\n/*  CSS  */\nFILE_END\n\nFILE_START: script.js\n(function() {\n  //  JS \n})();\nFILE_END\n\n****`;\n\n    // 2: \n    progressDialogRef.value?.setProgress(20);\n    progressDialogRef.value?.setMessage(' AI ...');\n    progressDialogRef.value?.addDetail(`: ${files.value.length} `);\n\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n\n    progressDialogRef.value?.setProgress(30);\n    progressDialogRef.value?.setMessage(' AI ...');\n    progressDialogRef.value?.addDetail(' 10-30 ');\n\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.value.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.value.model,\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: userPrompt },\n        ],\n        temperature: 0.7,\n        max_tokens: 65500,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API : ${response.statusText}`);\n    }\n\n    // 3: \n    progressDialogRef.value?.setProgress(60);\n    progressDialogRef.value?.setMessage(' AI ...');\n\n    const data = await response.json();\n    const resultText = data.choices[0]?.message?.content || '';\n\n    // 4: \n    progressDialogRef.value?.setProgress(80);\n    progressDialogRef.value?.setMessage('...');\n    progressDialogRef.value?.addDetail(`: ${resultText.length} `);\n\n    // \n    const FILE_START_REGEX = /FILE_START:\\s*([^\\n]+)\\n([\\s\\S]*?)(?=FILE_START:|FILE_END:|$)/g;\n    const matches = [...resultText.matchAll(FILE_START_REGEX)];\n\n    if (matches.length === 0) {\n      throw new Error('AI ');\n    }\n\n    progressDialogRef.value?.addDetail(` ${matches.length} `);\n\n    // \n    const generatedFiles = matches.map(m => m[1].trim().replace(/^\\.\\//, ''));\n    const requiredFiles = ['index.html', 'style.css', 'script.js'];\n    const missingFiles = requiredFiles.filter(f => !generatedFiles.includes(f));\n\n    if (missingFiles.length > 0) {\n      progressDialogRef.value?.addDetail(` : AI : ${missingFiles.join(', ')}`);\n      window.toastr.warning(`AI : ${missingFiles.join(', ')}`, '', {\n        timeOut: 5000,\n      });\n    }\n\n    if (matches.length > 0) {\n      for (const match of matches) {\n        const normalizedPath = match[1].trim().replace(/^\\.\\//, '');\n        let content = sanitizeFileContent(normalizedPath, match[2]);\n        if (content.endsWith('FILE_END')) {\n          content = content.slice(0, -8).trim();\n        }\n        const file = files.value.find(f => f.path === normalizedPath);\n        if (file) {\n          file.content = content;\n          progressDialogRef.value?.addDetail(` : ${normalizedPath}`);\n        }\n      }\n    }\n\n    // 5: \n    progressDialogRef.value?.setProgress(95);\n    progressDialogRef.value?.setMessage('...');\n\n    // \n    originalAiPrompt.value += `\\n\\n${modifyInstruction}`;\n\n    updatePreview();\n\n    // \n    progressDialogRef.value?.setProgress(100);\n    progressDialogRef.value?.setMessage(' AI ');\n\n    setTimeout(() => {\n      showProgress.value = false;\n      showAiModifyDialog.value = false;\n      window.toastr.success(` AI  ${matches.length} `);\n    }, 800);\n  } catch (error: any) {\n    console.error('AI :', error);\n    showProgress.value = false;\n    window.toastr.error('AI : ' + error.message);\n  } finally {\n    isModifyingAi.value = false;\n  }\n}\n\n// \nasync function copyWorldbook() {\n  await copyToClipboard(worldbookContent.value, ' ');\n}\n\nfunction sanitizeFileContent(filePath: string, raw: string): string {\n  let content = raw.trim();\n\n  //  markdown ```html ... ```\n  const fenceMatch = content.match(/^```[a-zA-Z0-9]*\\s*([\\s\\S]*?)\\s*```$/);\n  if (fenceMatch) {\n    content = fenceMatch[1].trim();\n  }\n\n  //  Python docstring \"\"\"html ... \"\"\"  '''html ... '''\n  const docstringMatch = content.match(/^(\"\"\"|''')[a-zA-Z0-9]*\\s*([\\s\\S]*?)\\s*\\1$/);\n  if (docstringMatch) {\n    content = docstringMatch[2].trim();\n  }\n\n  //  \"\"\"html  ```html \n  content = content.replace(/^(```|\"\"\"|''')[a-zA-Z0-9]*\\s*\\n?/, '');\n  content = content.replace(/\\n?\\s*(```|\"\"\"|''')$/, '');\n\n  if (filePath.endsWith('.html')) {\n    content = content.replace(/<!DOCTYPE html>/i, match => match.toUpperCase());\n  }\n\n  return content;\n}\n\n// \nfunction exportRegex() {\n  const htmlFile = files.value.find(f => f.path === 'index.html');\n  const cssFile = files.value.find(f => f.path === 'style.css');\n  const jsFile = files.value.find(f => f.path === 'script.js');\n\n  if (!htmlFile || htmlFile.content.trim() === '') {\n    window.toastr.error('');\n    return;\n  }\n\n  const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n\n  // <details> \n  const scriptTag = 'script';\n  const styleTag = 'style';\n\n  //  <details> \n  const detailsHtml = htmlFile.content.trim();\n  const replaceString = `${detailsHtml}\n<${styleTag}>\n${cssFile?.content || ''}\n</${styleTag}>\n\n<${scriptTag}>\n${jsFile?.content || ''}\n</${scriptTag}>`;\n\n  //  findRegex\n  //  findRegex \n  // \n  let regexPattern = config.value.findRegex;\n\n  //  findRegex \n  const existingCaptureGroups = (regexPattern.match(/\\([^)]+\\)/g) || []).length;\n  const fieldCount = config.value.fields.length;\n\n  if (existingCaptureGroups === 0) {\n    // \n    regexPattern = `${regexPattern.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}[\\\\r\\\\n]*${Array(fieldCount)\n      .fill('\\\\|([^|]+)')\n      .join('')}\\\\|[\\\\r\\\\n]*`;\n  }\n  // \n\n  // \n  const cleanReplaceString = replaceString.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n\n  const regexJson = {\n    id: uuid,\n    scriptName: config.value.name,\n    findRegex: regexPattern,\n    replaceString: cleanReplaceString,\n    trimStrings: [],\n    placement: [2],\n    disabled: false,\n    markdownOnly: true,\n    promptOnly: false,\n    runOnEdit: true,\n    substituteRegex: 0,\n    minDepth: null,\n    maxDepth: null,\n  };\n\n  //  JSON\n  const blob = new Blob([JSON.stringify(regexJson, null, 2)], { type: 'application/json' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = `regex-${config.value.name}.json`;\n  a.click();\n  URL.revokeObjectURL(url);\n\n  window.toastr.success('  JSON ');\n}\n\n// ====================  ====================\n\n//  -  localStorage\nfunction loadSavedConfig() {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      console.warn('script_id ');\n      return;\n    }\n\n    //  localStorage \n    const storageKey = `${scriptId}_statusbar_generator_config`;\n    const savedDataString = localStorage.getItem(storageKey);\n\n    if (savedDataString) {\n      try {\n        const savedConfig = JSON.parse(savedDataString);\n        config.value = { ...config.value, ...savedConfig };\n        console.log('  localStorage ');\n      } catch (e) {\n        console.error(':', e);\n      }\n    }\n  } catch (error) {\n    console.error(':', error);\n  }\n}\n\n//  -  localStorage\nfunction saveConfig() {\n  try {\n    const scriptId = getScriptIdSafe();\n    if (!scriptId) {\n      console.warn('script_id ');\n      return;\n    }\n\n    //  localStorage\n    const storageKey = `${scriptId}_statusbar_generator_config`;\n    localStorage.setItem(storageKey, JSON.stringify(config.value));\n    console.log('  localStorage');\n  } catch (error) {\n    console.error(':', error);\n  }\n}\n\n// \nonMounted(() => {\n  loadSavedConfig();\n});\n\n// \nwatch(\n  () => config.value,\n  () => {\n    saveConfig();\n  },\n  { deep: true },\n);\n</script>\n\n<style scoped>\n.statusbar-generator {\n  padding: 20px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  background: #1a1a1a;\n}\n\n/*  */\n.statusbar-generator ::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n}\n\n.statusbar-generator ::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\n.statusbar-generator ::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.statusbar-generator ::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n</style>\n","<template>\n  <div class=\"summary-tab\" style=\"padding: 25px !important; background: #1a1a1a !important\">\n    <div\n      class=\"section-header\"\n      style=\"\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 20px 25px !important;\n        border-bottom: 1px solid #3a3a3a;\n        margin-bottom: 5px;\n      \"\n    >\n      <h3\n        style=\"\n          margin: 0;\n          color: #fff;\n          font-size: 15px !important;\n          font-weight: bold;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        \"\n      >\n         \n      </h3>\n      <div class=\"header-actions\" style=\"display: flex; align-items: center; gap: 10px\">\n        <span\n          v-if=\"summary_history.length > 0\"\n          class=\"count-badge\"\n          style=\"background: #4a9eff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\"\n          >{{ summary_history.length }} </span\n        >\n        <button\n          class=\"mini-button refresh-button\"\n          style=\"\n            padding: 6px 12px;\n            background: #2a2a2a;\n            border: 1px solid #3a3a3a;\n            border-radius: 4px;\n            color: #e0e0e0;\n            cursor: pointer;\n            font-size: 12px;\n            transition: all 0.2s;\n            display: flex;\n            align-items: center;\n            gap: 6px;\n          \"\n          @click=\"handleRefreshData\"\n        >\n          <i class=\"fa-solid fa-refresh\"></i> \n        </button>\n        <button\n          class=\"mini-button create-worldbook-button\"\n          style=\"\n            padding: 6px 12px;\n            background: #51cf66;\n            border: 1px solid #40c057;\n            border-radius: 4px;\n            color: white;\n            cursor: pointer;\n            font-size: 12px;\n            transition: all 0.2s;\n            display: flex;\n            align-items: center;\n            gap: 6px;\n          \"\n          @click=\"createSummaryWorldbook\"\n        >\n          <i class=\"fa-solid fa-plus\"></i> \n        </button>\n        <button\n          class=\"mini-button debug-button\"\n          style=\"\n            padding: 6px 12px;\n            background: #ffc107;\n            border: 1px solid #ffb300;\n            border-radius: 4px;\n            color: #000;\n            cursor: pointer;\n            font-size: 12px;\n            transition: all 0.2s;\n            display: flex;\n            align-items: center;\n            gap: 6px;\n          \"\n          @click=\"showDebugPanel\"\n        >\n          <i class=\"fa-solid fa-bug\"></i> \n        </button>\n      </div>\n    </div>\n\n    <div\n      v-if=\"summary_history && summary_history.length > 0\"\n      class=\"history-list\"\n      style=\"display: flex; flex-direction: column; gap: 15px; margin-top: 20px\"\n    >\n      <div\n        v-for=\"(item, index) in summary_history\"\n        :key=\"index\"\n        class=\"history-item\"\n        style=\"\n          background: #2a2a2a;\n          border: 1px solid #444;\n          border-radius: 8px;\n          padding: 15px;\n          transition: all 0.3s ease;\n        \"\n      >\n        <div\n          class=\"history-header\"\n          style=\"\n            padding: 12px 15px;\n            background: #1a1a1a;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            user-select: none;\n            transition: background 0.2s;\n            border-radius: 6px;\n          \"\n          @click=\"toggleExpanded(index)\"\n        >\n          <div class=\"history-info\" style=\"display: flex; align-items: center; gap: 10px; flex: 1\">\n            <span class=\"history-number\" style=\"color: #4a9eff; font-weight: bold\">#{{ index + 1 }}</span>\n            <span class=\"history-range\" style=\"color: #888; font-size: 12px\"\n              > {{ item.start_id }} - {{ item.end_id }}</span\n            >\n          </div>\n          <span class=\"expand-icon\" style=\"color: #888; font-size: 12px\">{{ isExpanded(index) ? '' : '' }}</span>\n        </div>\n        <div\n          v-if=\"isExpanded(index)\"\n          class=\"history-content\"\n          style=\"padding: 15px; background: #2a2a2a; border-radius: 0 0 6px 6px\"\n        >\n          <div\n            class=\"history-actions\"\n            style=\"display: flex; gap: 8px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #3a3a3a\"\n          >\n            <button\n              class=\"mini-button\"\n              style=\"\n                flex: 1;\n                padding: 6px 12px;\n                background: #2a2a2a;\n                border: 1px solid #3a3a3a;\n                border-radius: 4px;\n                color: #e0e0e0;\n                cursor: pointer;\n                font-size: 12px;\n                transition: background 0.2s;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                gap: 6px;\n              \"\n              @click=\"copySummary(item.content)\"\n            >\n              <i class=\"fa-solid fa-copy\"></i> \n            </button>\n            <button\n              class=\"mini-button worldbook-button\"\n              style=\"\n                flex: 1;\n                padding: 6px 12px;\n                background: #4a9eff;\n                border: 1px solid #5aaeff;\n                border-radius: 4px;\n                color: white;\n                cursor: pointer;\n                font-size: 12px;\n                transition: all 0.2s;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                gap: 6px;\n              \"\n              @click=\"bindToWorldbook(item.content, index)\"\n            >\n              <i class=\"fa-solid fa-book\"></i> \n            </button>\n            <button\n              class=\"mini-button delete-button\"\n              style=\"\n                flex: 1;\n                padding: 6px 12px;\n                background: #ff6b6b;\n                border: 1px solid #ff5252;\n                border-radius: 4px;\n                color: white;\n                cursor: pointer;\n                font-size: 12px;\n                transition: all 0.2s;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                gap: 6px;\n              \"\n              @click=\"deleteSummary(index)\"\n            >\n              <i class=\"fa-solid fa-trash\"></i> \n            </button>\n          </div>\n          <div\n            class=\"history-text\"\n            style=\"\n              font-family: 'Courier New', monospace;\n              font-size: 13px;\n              line-height: 1.6;\n              color: #e0e0e0;\n              white-space: pre-wrap;\n              word-wrap: break-word;\n              user-select: text;\n              cursor: text;\n            \"\n          >\n            {{ item.content }}\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-else class=\"empty-state\" style=\"text-align: center; padding: 40px 20px; color: #888\">\n      <i class=\"fa-solid fa-inbox\" style=\"font-size: 48px; margin-bottom: 10px; opacity: 0.3\"></i>\n      <p style=\"margin: 10px 0; font-size: 16px\"></p>\n      <small style=\"font-size: 12px; color: #666\">\"\"</small>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport { useSummaryHistoryStore } from '../settings';\nimport { getChatIdSafe } from '../utils';\n\nconst historyStore = useSummaryHistoryStore();\n\n// \nconst summary_history = ref<Array<{ start_id: number; end_id: number; content: string }>>([]);\nconst expandedState = ref<Map<number, boolean>>(new Map());\n\n// \nconst refreshSummaryHistory = () => {\n  try {\n    summary_history.value = historyStore.getSummaryHistory();\n    console.log(':', summary_history.value.length);\n  } catch (e) {\n    console.error(':', e);\n    summary_history.value = [];\n  }\n};\n\n// \nconst toggleExpanded = (index: number) => {\n  const current = expandedState.value.get(index) || false;\n  expandedState.value.set(index, !current);\n};\n\nconst isExpanded = (index: number) => {\n  return expandedState.value.get(index) || false;\n};\n\n// \nconst handleRefreshData = async () => {\n  console.log('');\n  try {\n    await refreshSummaryHistory();\n    window.toastr.success('');\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error(': ' + (error as Error).message);\n  }\n};\n\n//  - iframe\nconst copyToClipboard = async (text: string, successMessage: string = '') => {\n  console.log(':', text.length);\n\n  try {\n    // iframe\n    if (window.parent && window.parent !== window) {\n      console.log('iframe');\n      const parentSuccess = await tryParentWindowCopy(text);\n      if (parentSuccess) {\n        console.log('');\n        window.toastr.success(successMessage);\n        return;\n      }\n    }\n\n    // 1:  Clipboard API\n    if (navigator.clipboard && window.isSecureContext) {\n      console.log(' Clipboard API');\n      try {\n        await navigator.clipboard.writeText(text);\n        console.log('Clipboard API ');\n        window.toastr.success(successMessage);\n        return;\n      } catch (clipboardErr) {\n        console.warn('Clipboard API :', clipboardErr);\n        // \n      }\n    }\n\n    // 2:  execCommand \n    console.log(' execCommand ');\n    const success = await execCommandCopy(text);\n    if (success) {\n      console.log('execCommand ');\n      window.toastr.success(successMessage);\n      return;\n    }\n\n    // 3: \n    console.log('');\n    showManualCopyDialog(text);\n  } catch (err) {\n    console.error(':', err);\n    // \n    showManualCopyDialog(text);\n  }\n};\n\n// \nconst tryParentWindowCopy = async (text: string): Promise<boolean> => {\n  return new Promise(resolve => {\n    try {\n      const parentDoc = window.parent.document;\n      const parentBody = window.parent.document.body;\n\n      //  textarea \n      const textarea = parentDoc.createElement('textarea');\n      textarea.value = text;\n      textarea.style.cssText = `\n        position: fixed;\n        left: -9999px;\n        top: -9999px;\n        opacity: 0;\n        pointer-events: none;\n        z-index: -1000;\n      `;\n      textarea.setAttribute('readonly', '');\n\n      parentBody.appendChild(textarea);\n\n      // \n      textarea.focus();\n      textarea.select();\n      textarea.setSelectionRange(0, text.length);\n\n      // \n      const success = parentDoc.execCommand('copy');\n\n      // \n      parentBody.removeChild(textarea);\n\n      resolve(success);\n    } catch (err) {\n      console.error(':', err);\n      resolve(false);\n    }\n  });\n};\n\n// execCommand \nconst execCommandCopy = async (text: string): Promise<boolean> => {\n  return new Promise(resolve => {\n    try {\n      //  textarea \n      const textarea = document.createElement('textarea');\n      textarea.value = text;\n      textarea.style.position = 'fixed';\n      textarea.style.left = '-9999px';\n      textarea.style.top = '-9999px';\n      textarea.style.opacity = '0';\n      textarea.style.pointerEvents = 'none';\n      textarea.setAttribute('readonly', '');\n\n      document.body.appendChild(textarea);\n\n      // \n      textarea.select();\n      textarea.setSelectionRange(0, text.length);\n\n      // \n      const success = document.execCommand('copy');\n\n      // \n      document.body.removeChild(textarea);\n\n      resolve(success);\n    } catch (err) {\n      console.error('execCommand :', err);\n      resolve(false);\n    }\n  });\n};\n\n//  - \nconst showManualCopyDialog = (text: string) => {\n  console.log(':', text.length);\n\n  try {\n    // document\n    const parentDoc = window.parent.document;\n    const parentBody = window.parent.document.body;\n\n    // \n    const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\n    if (existingOverlay) {\n      parentBody.removeChild(existingOverlay);\n    }\n\n    // \n    const overlay = parentDoc.createElement('div');\n    overlay.id = 'manual-copy-overlay';\n    overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n\n    // \n    const container = parentDoc.createElement('div');\n    container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 16px;\n      padding: 25px;\n      max-width: 900px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n\n    // \n    const header = parentDoc.createElement('div');\n    header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ol style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+C</kbd> </li>\n          <li>\"\" <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Esc</kbd> </li>\n        </ol>\n      </div>\n    `;\n\n    // \n    const textarea = parentDoc.createElement('textarea');\n    textarea.value = text;\n    textarea.style.cssText = `\n      width: 100%;\n      height: 400px;\n      background: #1a1a1a;\n      border: 2px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      color: #e0e0e0;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.5;\n      resize: vertical;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      outline: none;\n      margin-bottom: 20px;\n      box-sizing: border-box;\n    `;\n\n    // \n    const buttonContainer = parentDoc.createElement('div');\n    buttonContainer.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      align-items: center;\n    `;\n\n    // \n    const closeButton = parentDoc.createElement('button');\n    closeButton.textContent = '';\n    closeButton.style.cssText = `\n      background: #4a9eff;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n    closeButton.onmouseover = () => {\n      closeButton.style.background = '#5ba8ff';\n    };\n    closeButton.onmouseout = () => {\n      closeButton.style.background = '#4a9eff';\n    };\n\n    // \n    const copyButton = parentDoc.createElement('button');\n    copyButton.textContent = '';\n    copyButton.style.cssText = `\n      background: #28a745;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n    copyButton.onmouseover = () => {\n      copyButton.style.background = '#218838';\n    };\n    copyButton.onmouseout = () => {\n      copyButton.style.background = '#28a745';\n    };\n\n    // \n    buttonContainer.appendChild(copyButton);\n    buttonContainer.appendChild(closeButton);\n\n    container.appendChild(header);\n    container.appendChild(textarea);\n    container.appendChild(buttonContainer);\n    overlay.appendChild(container);\n\n    // \n    parentBody.appendChild(overlay);\n\n    // \n    closeButton.onclick = () => {\n      console.log('');\n      parentBody.removeChild(overlay);\n    };\n\n    copyButton.onclick = async () => {\n      console.log('');\n      try {\n        // \n        textarea.focus();\n        textarea.select();\n\n        // \n        const success = document.execCommand('copy');\n        if (success) {\n          window.toastr.success('');\n          parentBody.removeChild(overlay);\n        } else {\n          window.toastr.warning('');\n        }\n      } catch (err) {\n        console.error(':', err);\n        window.toastr.warning('');\n      }\n    };\n\n    // \n    overlay.onclick = e => {\n      if (e.target === overlay) {\n        console.log('');\n        parentBody.removeChild(overlay);\n      }\n    };\n\n    // \n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        console.log('ESC');\n        parentBody.removeChild(overlay);\n        parentDoc.removeEventListener('keydown', handleKeyDown);\n      }\n    };\n    parentDoc.addEventListener('keydown', handleKeyDown);\n\n    // \n    setTimeout(() => {\n      console.log('');\n      textarea.focus();\n      textarea.select();\n    }, 200);\n\n    // \n    window.toastr.info('');\n  } catch (err) {\n    console.error(':', err);\n    window.toastr.error('');\n  }\n};\n\n//  - \nconst copySummary = (content: string) => {\n  copyToClipboard(content, '');\n};\n\n//  -  localStorage\nconst deleteSummary = (index: number) => {\n  if (confirm('')) {\n    try {\n      const chat_id = getChatIdSafe();\n      if (!chat_id) {\n        window.toastr.error('');\n        return;\n      }\n\n      summary_history.value.splice(index, 1);\n\n      //  localStorageID\n      const scriptId = getScriptIdSafe();\n      const storageKey = `${scriptId}_summary_history_${chat_id}`;\n      localStorage.setItem(storageKey, JSON.stringify(summary_history.value));\n      console.log('  localStorage');\n\n      window.toastr.success('');\n    } catch (error) {\n      console.error(':', error);\n      window.toastr.error('');\n    }\n  }\n};\n\n// \nconst createSummaryWorldbook = async () => {\n  try {\n    // \n    let characterName = '';\n    try {\n      const currentCharacter = getCharData('current');\n      if (currentCharacter && currentCharacter.name) {\n        characterName = currentCharacter.name;\n        // \n        characterName = characterName.replace(/[<>:\"/\\\\|?*]/g, '_').trim();\n      }\n    } catch (charError) {\n      console.warn(':', charError);\n    }\n\n    // \n    const dateStr = new Date().toISOString().slice(0, 10);\n    const worldbookName = `_${characterName}_${dateStr}`;\n\n    console.log(':', worldbookName);\n\n    const existingWorldbooks = getWorldbookNames();\n    if (existingWorldbooks.includes(worldbookName)) {\n      window.toastr.warning(` \"${worldbookName}\" `);\n      return;\n    }\n\n    await createWorldbook(worldbookName, []);\n\n    try {\n      await rebindChatWorldbook('current', worldbookName);\n      window.toastr.success(` \"${worldbookName}\" `);\n    } catch (bindError) {\n      console.warn(':', bindError);\n      window.toastr.success(` \"${worldbookName}\"`);\n    }\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error(': ' + (error as Error).message);\n  }\n};\n\n// \nconst bindToWorldbook = async (content: string, summaryIndex: number) => {\n  try {\n    const worldbookNames = getWorldbookNames();\n    if (worldbookNames.length === 0) {\n      window.toastr.warning('');\n      return;\n    }\n\n    const selectedWorldbook =\n      worldbookNames.length === 1 ? worldbookNames[0] : await promptForWorldbook(worldbookNames);\n    if (!selectedWorldbook) {\n      return;\n    }\n\n    const entryName = `_${summaryIndex + 1}_${new Date().toLocaleDateString()}`;\n    const newEntry = {\n      name: entryName,\n      enabled: true,\n      strategy: {\n        type: 'constant' as const,\n        keys: [],\n        keys_secondary: { logic: 'and_any' as const, keys: [] },\n        scan_depth: 'same_as_global' as const,\n      },\n      position: {\n        type: 'before_character_definition' as const,\n        role: 'system' as const,\n        depth: 1,\n      },\n      content: content,\n      comment: ` - : ${summary_history.value[summaryIndex]?.start_id || '?'} - ${summary_history.value[summaryIndex]?.end_id || '?'}`,\n      insertion_order: 0,\n      case_sensitive: false,\n      name_is_regex: false,\n      keys_are_regex: false,\n      selective_logic: 'and',\n      secondary_keys_logic: 'and',\n      activation_threshold: 0,\n      disabled: false,\n      order: 0,\n      group: '',\n      local_id: 0,\n      depth_entries: [],\n      depth_entries_all: false,\n      search_range: 0,\n      force_activation: false,\n      disable: false,\n      exclude_recursion: false,\n      hidden: false,\n      priority: 0,\n      comment_is_regex: false,\n      content_is_regex: false,\n      secondary_keys_are_regex: false,\n      keys_secondary_are_regex: false,\n      uid: Date.now(),\n    };\n\n    await createWorldbookEntries(selectedWorldbook, [newEntry]);\n    window.toastr.success(`: ${selectedWorldbook}`);\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error(': ' + (error as Error).message);\n  }\n};\n\n// \nconst promptForWorldbook = async (worldbookNames: string[]): Promise<string | null> => {\n  return new Promise<string | null>(resolve => {\n    const dialog = $(`\n      <div style=\"\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background: #2a2a2a;\n        border: 1px solid #3a3a3a;\n        border-radius: 8px;\n        padding: 20px;\n        z-index: 1000000;\n        min-width: 300px;\n      \">\n        <h3 style=\"margin: 0 0 15px 0; color: #e0e0e0;\"></h3>\n        <div style=\"margin-bottom: 15px;\">\n          ${worldbookNames\n            .map(\n              name => `\n            <label style=\"display: block; margin: 5px 0; color: #e0e0e0;\">\n              <input type=\"radio\" name=\"worldbook\" value=\"${name}\" style=\"margin-right: 8px;\">\n              ${name}\n            </label>\n          `,\n            )\n            .join('')}\n        </div>\n        <div style=\"text-align: right;\">\n          <button id=\"cancelWorldbook\" style=\"\n            background: #666;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            margin-right: 10px;\n            cursor: pointer;\n          \"></button>\n          <button id=\"confirmWorldbook\" style=\"\n            background: #4a9eff;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            cursor: pointer;\n          \"></button>\n        </div>\n      </div>\n    `);\n\n    const overlay = $(`\n      <div style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 999999;\n      \"></div>\n    `);\n\n    $('body').append(overlay).append(dialog);\n\n    $('#cancelWorldbook').on('click', () => {\n      overlay.remove();\n      dialog.remove();\n      resolve(null);\n    });\n\n    $('#confirmWorldbook').on('click', () => {\n      const selected = $('input[name=\"worldbook\"]:checked').val() as string;\n      overlay.remove();\n      dialog.remove();\n      resolve(selected || null);\n    });\n\n    $('input[name=\"worldbook\"]:first').prop('checked', true);\n  });\n};\n\n// \nconst showDebugPanel = () => {\n  try {\n    // document\n    const parentDoc = window.parent.document;\n    const parentBody = window.parent.document.body;\n\n    // \n    const existingOverlay = parentDoc.getElementById('debug-panel-overlay');\n    if (existingOverlay) {\n      parentBody.removeChild(existingOverlay);\n    }\n\n    // \n    const overlay = parentDoc.createElement('div');\n    overlay.id = 'debug-panel-overlay';\n    overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n\n    // \n    const container = parentDoc.createElement('div');\n    container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #ffc107;\n      border-radius: 16px;\n      padding: 25px;\n      max-width: 800px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n\n    // \n    const header = parentDoc.createElement('div');\n    header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #ffc107; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ul style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li>localStorage</li>\n          <li></li>\n          <li></li>\n        </ul>\n      </div>\n    `;\n\n    // \n    const buttonContainer = parentDoc.createElement('div');\n    buttonContainer.style.cssText = `\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 12px;\n      margin-bottom: 20px;\n    `;\n\n    // \n    const buttons = [\n      { id: 'testComplete', text: ' ', color: '#4a9eff' },\n      { id: 'syncData', text: ' ', color: '#28a745' },\n      { id: 'checkFloor', text: ' ', color: '#17a2b8' },\n      { id: 'testCalculation', text: ' ', color: '#6f42c1' },\n      { id: 'showStatus', text: ' ', color: '#fd7e14' },\n      { id: 'resetStartId', text: ' ', color: '#dc3545' },\n    ];\n\n    buttons.forEach(button => {\n      const btn = parentDoc.createElement('button');\n      btn.id = button.id;\n      btn.textContent = button.text;\n      btn.style.cssText = `\n        background: ${button.color};\n        color: white;\n        border: none;\n        padding: 12px 16px;\n        border-radius: 6px;\n        cursor: pointer;\n        font-size: 13px;\n        font-weight: 500;\n        transition: background 0.2s;\n      `;\n      btn.onmouseover = () => {\n        btn.style.opacity = '0.8';\n      };\n      btn.onmouseout = () => {\n        btn.style.opacity = '1';\n      };\n      buttonContainer.appendChild(btn);\n    });\n\n    // \n    const outputArea = parentDoc.createElement('div');\n    outputArea.id = 'debug-output';\n    outputArea.style.cssText = `\n      background: #1a1a1a;\n      border: 1px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      height: 200px;\n      overflow-y: auto;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 12px;\n      color: #e0e0e0;\n      white-space: pre-wrap;\n      margin-bottom: 20px;\n    `;\n    outputArea.textContent = '...\\n';\n\n    // \n    const closeButton = parentDoc.createElement('button');\n    closeButton.textContent = '';\n    closeButton.style.cssText = `\n      background: #6c757d;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n      align-self: center;\n    `;\n\n    // \n    container.appendChild(header);\n    container.appendChild(buttonContainer);\n    container.appendChild(outputArea);\n    container.appendChild(closeButton);\n\n    overlay.appendChild(container);\n    parentBody.appendChild(overlay);\n\n    // \n    const log = (message: string) => {\n      const output = parentDoc.getElementById('debug-output');\n      if (output) {\n        output.textContent += message + '\\n';\n        output.scrollTop = output.scrollHeight;\n      }\n    };\n\n    // \n    closeButton.onclick = () => {\n      parentBody.removeChild(overlay);\n    };\n\n    // \n    parentDoc.getElementById('testComplete')?.addEventListener('click', () => {\n      log(' ...');\n      try {\n        if ((window as any).testCompleteAutoSummary) {\n          (window as any).testCompleteAutoSummary();\n          log(' ');\n        } else {\n          log(' ');\n        }\n      } catch (error) {\n        log(' : ' + (error as Error).message);\n      }\n    });\n\n    // \n    parentDoc.getElementById('syncData')?.addEventListener('click', () => {\n      log(' ...');\n      try {\n        if ((window as any).syncAutoSummaryData) {\n          (window as any).syncAutoSummaryData();\n          log(' ');\n        } else {\n          log(' ');\n        }\n      } catch (error) {\n        log(' : ' + (error as Error).message);\n      }\n    });\n\n    // \n    parentDoc.getElementById('checkFloor')?.addEventListener('click', () => {\n      log(' ...');\n      try {\n        if ((window as any).checkCurrentFloor) {\n          (window as any).checkCurrentFloor();\n          log(' ');\n        } else {\n          log(' ');\n        }\n      } catch (error) {\n        log(' : ' + (error as Error).message);\n      }\n    });\n\n    // \n    parentDoc.getElementById('testCalculation')?.addEventListener('click', () => {\n      log(' ...');\n      try {\n        if ((window as any).testFloorCalculation) {\n          (window as any).testFloorCalculation();\n          log(' ');\n        } else {\n          log(' ');\n        }\n      } catch (error) {\n        log(' : ' + (error as Error).message);\n      }\n    });\n\n    // \n    parentDoc.getElementById('showStatus')?.addEventListener('click', () => {\n      log(' ...');\n      try {\n        if ((window as any).checkAutoSummaryStatus) {\n          (window as any).checkAutoSummaryStatus();\n          log(' ');\n        } else {\n          log(' ');\n        }\n      } catch (error) {\n        log(' : ' + (error as Error).message);\n      }\n    });\n\n    // \n    parentDoc.getElementById('resetStartId')?.addEventListener('click', () => {\n      log(' ...');\n      try {\n        if ((window as any).smartResetChat) {\n          (window as any).smartResetChat();\n          log(' ');\n        } else {\n          log(' ');\n        }\n      } catch (error) {\n        log(' : ' + (error as Error).message);\n      }\n    });\n\n    // \n    overlay.onclick = e => {\n      if (e.target === overlay) {\n        parentBody.removeChild(overlay);\n      }\n    };\n\n    // \n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        parentBody.removeChild(overlay);\n        parentDoc.removeEventListener('keydown', handleKeyDown);\n      }\n    };\n    parentDoc.addEventListener('keydown', handleKeyDown);\n\n    window.toastr?.info('');\n  } catch (err) {\n    console.error(':', err);\n    window.toastr?.error('');\n  }\n};\n\n// \nrefreshSummaryHistory();\n</script>\n\n<style scoped>\n.summary-tab {\n  height: 100%;\n  overflow-y: auto;\n  padding: 25px !important;\n}\n\n/*  */\n.summary-tab::-webkit-scrollbar {\n  width: 6px;\n}\n\n.summary-tab::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\n.summary-tab::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.summary-tab::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 25px !important;\n  border-bottom: 1px solid #3a3a3a;\n  margin-bottom: 5px;\n}\n\n.section-header h3 {\n  margin: 0;\n  color: #fff;\n  font-size: 15px !important;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.header-actions {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.count-badge {\n  background: #4a9eff;\n  color: white;\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 40px 20px;\n  color: #888;\n}\n\n.empty-state i {\n  font-size: 48px;\n  margin-bottom: 10px;\n  opacity: 0.3;\n}\n\n.empty-state p {\n  margin: 10px 0;\n  font-size: 14px;\n}\n\n.empty-state small {\n  color: #666;\n  font-size: 12px;\n}\n\n.history-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  padding: 15px 20px;\n}\n\n.history-item {\n  background: #2a2a2a;\n  border: 1px solid #3a3a3a;\n  border-radius: 6px;\n  overflow: hidden;\n  transition: border-color 0.2s;\n}\n\n.history-item:hover {\n  border-color: #4a4a4a;\n}\n\n.history-header {\n  padding: 12px 15px;\n  background: #1a1a1a;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  user-select: none;\n  transition: background 0.2s;\n}\n\n.history-header:hover {\n  background: #2a2a2a;\n}\n\n.history-info {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  flex: 1;\n}\n\n.history-number {\n  color: #4a9eff;\n  font-weight: bold;\n}\n\n.history-range {\n  color: #888;\n  font-size: 12px;\n}\n\n.expand-icon {\n  color: #888;\n  font-size: 12px;\n}\n\n.history-content {\n  padding: 15px;\n  background: #2a2a2a;\n}\n\n.history-actions {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid #3a3a3a;\n}\n\n.mini-button {\n  flex: 1;\n  padding: 6px 12px;\n  background: #2a2a2a;\n  border: 1px solid #3a3a3a;\n  border-radius: 4px;\n  color: #e0e0e0;\n  cursor: pointer;\n  font-size: 12px;\n  transition: background 0.2s;\n}\n\n.mini-button:hover {\n  background: #3a3a3a;\n}\n\n.mini-button.delete-button:hover {\n  background: #ff4444;\n  border-color: #ff4444;\n  color: white;\n}\n\n.mini-button.worldbook-button {\n  background: #28a745;\n  color: white;\n  border-color: #28a745;\n}\n\n.mini-button.worldbook-button:hover {\n  background: #218838;\n  border-color: #218838;\n  color: white;\n}\n\n.mini-button.create-worldbook-button {\n  background: #17a2b8;\n  color: white;\n  border-color: #17a2b8;\n}\n\n.mini-button.create-worldbook-button:hover {\n  background: #138496;\n  border-color: #138496;\n  color: white;\n}\n\n.mini-button.refresh-button {\n  background: #6c757d;\n  color: white;\n  border-color: #6c757d;\n}\n\n.mini-button.refresh-button:hover {\n  background: #5a6268;\n  border-color: #5a6268;\n  color: white;\n}\n\n.mini-button.debug-button {\n  background: #ffc107;\n  color: #000;\n  border-color: #ffb300;\n}\n\n.mini-button.debug-button:hover {\n  background: #e0a800;\n  border-color: #d39e00;\n  color: #000;\n}\n\n.history-text {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  line-height: 1.6;\n  max-height: 400px;\n  overflow-y: auto;\n}\n</style>\n","<template>\n  <div class=\"table-tab\" style=\"padding: 25px !important; background: #1a1a1a !important\">\n    <div\n      class=\"section-header\"\n      style=\"\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 20px 25px !important;\n        border-bottom: 1px solid #3a3a3a;\n        margin-bottom: 5px;\n      \"\n    >\n      <h3\n        style=\"\n          margin: 0;\n          color: #fff;\n          font-size: 15px !important;\n          font-weight: bold;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        \"\n      >\n         \n      </h3>\n      <span\n        v-if=\"table_history.length > 0\"\n        class=\"count-badge\"\n        style=\"background: #4a9eff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\"\n        >{{ table_history.length }} </span\n      >\n    </div>\n\n    <!--  -->\n    <div\n      v-if=\"table_history && table_history.length > 0\"\n      class=\"history-list\"\n      style=\"display: flex; flex-direction: column; gap: 15px; margin-top: 20px\"\n    >\n      <div\n        v-for=\"(item, index) in table_history\"\n        :key=\"index\"\n        class=\"history-item\"\n        style=\"\n          background: #2a2a2a;\n          border: 1px solid #444;\n          border-radius: 8px;\n          padding: 15px;\n          transition: all 0.3s ease;\n        \"\n      >\n        <div\n          class=\"history-header\"\n          style=\"\n            padding: 12px 15px;\n            background: #1a1a1a;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            user-select: none;\n            transition: background 0.2s;\n            border-radius: 6px;\n          \"\n          @click=\"toggleTableExpanded(index)\"\n        >\n          <div class=\"history-info\" style=\"display: flex; align-items: center; gap: 10px; flex: 1\">\n            <span class=\"history-number\" style=\"color: #4a9eff; font-weight: bold\">#{{ index + 1 }}</span>\n            <span class=\"history-range\" style=\"color: #888; font-size: 12px\"\n              > {{ item.start_id }} - {{ item.end_id }}</span\n            >\n          </div>\n          <span class=\"expand-icon\" style=\"color: #888; font-size: 12px\">{{\n            isTableExpanded(index) ? '' : ''\n          }}</span>\n        </div>\n        <div\n          v-if=\"isTableExpanded(index)\"\n          class=\"history-content\"\n          style=\"padding: 15px; background: #2a2a2a; border-radius: 0 0 6px 6px\"\n        >\n          <div\n            class=\"history-actions\"\n            style=\"\n              display: flex;\n              gap: 10px;\n              margin-bottom: 12px;\n              padding-bottom: 8px;\n              border-bottom: 1px solid #3a3a3a;\n              flex-wrap: wrap;\n            \"\n          >\n            <button\n              class=\"copy-button\"\n              style=\"\n                padding: 8px 16px;\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\n                border: none;\n                border-radius: 6px;\n                color: white;\n                cursor: pointer;\n                font-size: 12px;\n                font-weight: 600;\n                transition: all 0.3s ease;\n                display: flex;\n                align-items: center;\n                gap: 6px;\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\n                position: relative;\n                overflow: hidden;\n              \"\n              @click=\"copyTable(item)\"\n            >\n              <div\n                style=\"\n                  position: absolute;\n                  top: 0;\n                  left: -100%;\n                  width: 100%;\n                  height: 100%;\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                  transition: left 0.5s;\n                \"\n                class=\"shimmer-effect\"\n              ></div>\n              <i class=\"fa-solid fa-copy\" style=\"font-size: 12px\"></i> \n            </button>\n            <button\n              class=\"delete-button\"\n              style=\"\n                padding: 8px 16px;\n                background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);\n                border: none;\n                border-radius: 6px;\n                color: white;\n                cursor: pointer;\n                font-size: 12px;\n                font-weight: 600;\n                transition: all 0.3s ease;\n                display: flex;\n                align-items: center;\n                gap: 6px;\n                box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\n                position: relative;\n                overflow: hidden;\n              \"\n              @click=\"deleteTable(index)\"\n            >\n              <div\n                style=\"\n                  position: absolute;\n                  top: 0;\n                  left: -100%;\n                  width: 100%;\n                  height: 100%;\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                  transition: left 0.5s;\n                \"\n                class=\"shimmer-effect\"\n              ></div>\n              <i class=\"fa-solid fa-trash\" style=\"font-size: 12px\"></i> \n            </button>\n          </div>\n          <div class=\"table-display\" style=\"overflow-x: auto; border-radius: 6px; border: 1px solid #3a3a3a\">\n            <table style=\"width: 100%; border-collapse: collapse; background: #1a1a1a\">\n              <thead style=\"background: #2a2a2a\">\n                <tr>\n                  <th\n                    v-for=\"(header, idx) in item.headers\"\n                    :key=\"idx\"\n                    style=\"\n                      padding: 12px 16px;\n                      text-align: left;\n                      font-weight: bold;\n                      color: #fff;\n                      border-bottom: 2px solid #3a3a3a;\n                      border-right: 1px solid #3a3a3a;\n                    \"\n                  >\n                    {{ header }}\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(row, rowIdx) in item.data\" :key=\"rowIdx\" style=\"border-bottom: 1px solid #3a3a3a\">\n                  <td\n                    v-for=\"(cell, cellIdx) in row\"\n                    :key=\"cellIdx\"\n                    style=\"padding: 10px 16px; color: #e0e0e0; border-right: 1px solid #3a3a3a\"\n                  >\n                    {{ cell }}\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-else class=\"empty-state\" style=\"text-align: center; padding: 40px 20px; color: #888\">\n      <i class=\"fa-solid fa-table\" style=\"font-size: 48px; margin-bottom: 10px; opacity: 0.3\"></i>\n      <p style=\"margin: 10px 0; font-size: 16px\"></p>\n      <small style=\"font-size: 12px; color: #666\">\"\"</small>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport { getChatIdSafe } from '../utils';\n\n// \nconst table_history = ref<Array<{ start_id: number; end_id: number; headers: string[]; data: string[][] }>>([]);\nconst tableExpandedState = ref<Map<number, boolean>>(new Map());\n\n//  - localStorage\nconst refreshTableHistory = () => {\n  try {\n    const chat_id = getChatIdSafe();\n    if (!chat_id) {\n      console.warn('ID');\n      table_history.value = [];\n      return;\n    }\n\n    //  localStorage \n    const scriptId = getScriptIdSafe();\n    const storageKey = `${scriptId}_table_history_${chat_id}`;\n    const savedData = localStorage.getItem(storageKey);\n\n    console.log(' localStorage key:', storageKey);\n\n    if (savedData) {\n      table_history.value = JSON.parse(savedData);\n    } else {\n      table_history.value = [];\n    }\n\n    console.log(':', table_history.value.length);\n  } catch (e) {\n    console.error(':', e);\n    table_history.value = [];\n  }\n};\n\n// \nconst toggleTableExpanded = (index: number) => {\n  const current = tableExpandedState.value.get(index) || false;\n  tableExpandedState.value.set(index, !current);\n};\n\nconst isTableExpanded = (index: number) => {\n  return tableExpandedState.value.get(index) || false;\n};\n\n//  - iframe\nconst copyToClipboard = async (text: string, successMessage: string = '') => {\n  console.log(':', text.length);\n\n  try {\n    // iframe\n    if (window.parent && window.parent !== window) {\n      console.log('iframe');\n      const parentSuccess = await tryParentWindowCopy(text);\n      if (parentSuccess) {\n        console.log('');\n        window.toastr.success(successMessage);\n        return;\n      }\n    }\n\n    // 1:  Clipboard API\n    if (navigator.clipboard && window.isSecureContext) {\n      console.log(' Clipboard API');\n      try {\n        await navigator.clipboard.writeText(text);\n        console.log('Clipboard API ');\n        window.toastr.success(successMessage);\n        return;\n      } catch (clipboardErr) {\n        console.warn('Clipboard API :', clipboardErr);\n        // \n      }\n    }\n\n    // 2:  execCommand \n    console.log(' execCommand ');\n    const success = await execCommandCopy(text);\n    if (success) {\n      console.log('execCommand ');\n      window.toastr.success(successMessage);\n      return;\n    }\n\n    // 3: \n    console.log('');\n    showManualCopyDialog(text);\n  } catch (err) {\n    console.error(':', err);\n    // \n    showManualCopyDialog(text);\n  }\n};\n\n// \nconst tryParentWindowCopy = async (text: string): Promise<boolean> => {\n  return new Promise(resolve => {\n    try {\n      const parentDoc = window.parent.document;\n      const parentBody = window.parent.document.body;\n\n      //  textarea \n      const textarea = parentDoc.createElement('textarea');\n      textarea.value = text;\n      textarea.style.cssText = `\n        position: fixed;\n        left: -9999px;\n        top: -9999px;\n        opacity: 0;\n        pointer-events: none;\n        z-index: -1000;\n      `;\n      textarea.setAttribute('readonly', '');\n\n      parentBody.appendChild(textarea);\n\n      // \n      textarea.focus();\n      textarea.select();\n      textarea.setSelectionRange(0, text.length);\n\n      // \n      const success = parentDoc.execCommand('copy');\n\n      // \n      parentBody.removeChild(textarea);\n\n      resolve(success);\n    } catch (err) {\n      console.error(':', err);\n      resolve(false);\n    }\n  });\n};\n\n// execCommand \nconst execCommandCopy = async (text: string): Promise<boolean> => {\n  return new Promise(resolve => {\n    try {\n      //  textarea \n      const textarea = document.createElement('textarea');\n      textarea.value = text;\n      textarea.style.position = 'fixed';\n      textarea.style.left = '-9999px';\n      textarea.style.top = '-9999px';\n      textarea.style.opacity = '0';\n      textarea.style.pointerEvents = 'none';\n      textarea.setAttribute('readonly', '');\n\n      document.body.appendChild(textarea);\n\n      // \n      textarea.select();\n      textarea.setSelectionRange(0, text.length);\n\n      // \n      const success = document.execCommand('copy');\n\n      // \n      document.body.removeChild(textarea);\n\n      resolve(success);\n    } catch (err) {\n      console.error('execCommand :', err);\n      resolve(false);\n    }\n  });\n};\n\n//  - \nconst showManualCopyDialog = (text: string) => {\n  console.log(':', text.length);\n\n  try {\n    // document\n    const parentDoc = window.parent.document;\n    const parentBody = window.parent.document.body;\n\n    // \n    const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\n    if (existingOverlay) {\n      parentBody.removeChild(existingOverlay);\n    }\n\n    // \n    const overlay = parentDoc.createElement('div');\n    overlay.id = 'manual-copy-overlay';\n    overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n\n    // \n    const container = parentDoc.createElement('div');\n    container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 16px;\n      padding: 25px;\n      max-width: 900px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n\n    // \n    const header = parentDoc.createElement('div');\n    header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ol style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+C</kbd> </li>\n          <li>\"\" <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Esc</kbd> </li>\n        </ol>\n      </div>\n    `;\n\n    // \n    const textarea = parentDoc.createElement('textarea');\n    textarea.value = text;\n    textarea.style.cssText = `\n      width: 100%;\n      height: 400px;\n      background: #1a1a1a;\n      border: 2px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      color: #e0e0e0;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.5;\n      resize: vertical;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      outline: none;\n      margin-bottom: 20px;\n      box-sizing: border-box;\n    `;\n\n    // \n    const buttonContainer = parentDoc.createElement('div');\n    buttonContainer.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      align-items: center;\n    `;\n\n    // \n    const closeButton = parentDoc.createElement('button');\n    closeButton.textContent = '';\n    closeButton.style.cssText = `\n      background: #4a9eff;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n    closeButton.onmouseover = () => {\n      closeButton.style.background = '#5ba8ff';\n    };\n    closeButton.onmouseout = () => {\n      closeButton.style.background = '#4a9eff';\n    };\n\n    // \n    const copyButton = parentDoc.createElement('button');\n    copyButton.textContent = '';\n    copyButton.style.cssText = `\n      background: #28a745;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n    copyButton.onmouseover = () => {\n      copyButton.style.background = '#218838';\n    };\n    copyButton.onmouseout = () => {\n      copyButton.style.background = '#28a745';\n    };\n\n    // \n    buttonContainer.appendChild(copyButton);\n    buttonContainer.appendChild(closeButton);\n\n    container.appendChild(header);\n    container.appendChild(textarea);\n    container.appendChild(buttonContainer);\n    overlay.appendChild(container);\n\n    // \n    parentBody.appendChild(overlay);\n\n    // \n    closeButton.onclick = () => {\n      console.log('');\n      parentBody.removeChild(overlay);\n    };\n\n    copyButton.onclick = async () => {\n      console.log('');\n      try {\n        // \n        textarea.focus();\n        textarea.select();\n\n        // \n        const success = document.execCommand('copy');\n        if (success) {\n          window.toastr.success('');\n          parentBody.removeChild(overlay);\n        } else {\n          window.toastr.warning('');\n        }\n      } catch (err) {\n        console.error(':', err);\n        window.toastr.warning('');\n      }\n    };\n\n    // \n    overlay.onclick = e => {\n      if (e.target === overlay) {\n        console.log('');\n        parentBody.removeChild(overlay);\n      }\n    };\n\n    // \n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        console.log('ESC');\n        parentBody.removeChild(overlay);\n        parentDoc.removeEventListener('keydown', handleKeyDown);\n      }\n    };\n    parentDoc.addEventListener('keydown', handleKeyDown);\n\n    // \n    setTimeout(() => {\n      console.log('');\n      textarea.focus();\n      textarea.select();\n    }, 200);\n\n    // \n    window.toastr.info('');\n  } catch (err) {\n    console.error(':', err);\n    window.toastr.error('');\n  }\n};\n\n//  - \nconst copyTable = (tableItem: { headers: string[]; data: string[][] }) => {\n  try {\n    // TSV\n    const tsv = [tableItem.headers.join('\\t'), ...tableItem.data.map(row => row.join('\\t'))].join('\\n');\n    copyToClipboard(tsv, '');\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('');\n  }\n};\n\n//  - localStorage\nconst deleteTable = (index: number) => {\n  if (confirm('')) {\n    table_history.value.splice(index, 1);\n    const chat_id = getChatIdSafe();\n    if (chat_id) {\n      //  localStorage\n      const scriptId = getScriptIdSafe();\n      const storageKey = `${scriptId}_table_history_${chat_id}`;\n      localStorage.setItem(storageKey, JSON.stringify(table_history.value));\n      window.toastr.success('');\n    }\n  }\n};\n\n// \nrefreshTableHistory();\n</script>\n\n<style scoped>\n.table-tab {\n  height: 100%;\n  overflow-y: auto;\n  padding: 25px !important;\n}\n\n/*  */\n.table-tab::-webkit-scrollbar {\n  width: 6px;\n}\n\n.table-tab::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\n.table-tab::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.table-tab::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 25px !important;\n  border-bottom: 1px solid #3a3a3a;\n  margin-bottom: 5px;\n}\n\n.section-header h3 {\n  margin: 0;\n  color: #fff;\n  font-size: 15px !important;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.count-badge {\n  background: #4a9eff;\n  color: white;\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 40px 20px;\n  color: #888;\n}\n\n.empty-state i {\n  font-size: 48px;\n  margin-bottom: 10px;\n  opacity: 0.3;\n}\n\n.empty-state p {\n  margin: 10px 0;\n  font-size: 14px;\n}\n\n.empty-state small {\n  color: #666;\n  font-size: 12px;\n}\n\n.history-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  padding: 15px 20px;\n}\n\n.history-item {\n  background: #2a2a2a;\n  border: 1px solid #3a3a3a;\n  border-radius: 6px;\n  overflow: hidden;\n  transition: border-color 0.2s;\n}\n\n.history-item:hover {\n  border-color: #4a4a4a;\n}\n\n.history-header {\n  padding: 12px 15px;\n  background: #1a1a1a;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  user-select: none;\n  transition: background 0.2s;\n}\n\n.history-header:hover {\n  background: #2a2a2a;\n}\n\n.history-info {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  flex: 1;\n}\n\n.history-number {\n  color: #4a9eff;\n  font-weight: bold;\n}\n\n.history-range {\n  color: #888;\n  font-size: 12px;\n}\n\n.expand-icon {\n  color: #888;\n  font-size: 12px;\n}\n\n.history-content {\n  padding: 15px;\n  background: #2a2a2a;\n}\n\n.history-actions {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid #3a3a3a;\n}\n\n.mini-button {\n  flex: 1;\n  padding: 6px 12px;\n  background: #2a2a2a;\n  border: 1px solid #3a3a3a;\n  border-radius: 4px;\n  color: #e0e0e0;\n  cursor: pointer;\n  font-size: 12px;\n  transition: background 0.2s;\n}\n\n.mini-button:hover {\n  background: #3a3a3a;\n}\n\n.mini-button.delete-button:hover {\n  background: #ff4444;\n  border-color: #ff4444;\n  color: white;\n}\n\n.table-display {\n  margin-top: 15px;\n  overflow-x: auto;\n  max-height: 400px;\n  overflow-y: auto;\n  border-radius: 6px;\n  background: #1a1a1a;\n}\n\n.table-display table {\n  width: 100%;\n  font-size: 12px;\n  border-collapse: collapse;\n}\n\n.table-display th,\n.table-display td {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 200px;\n  padding: 8px;\n  border: 1px solid #444;\n}\n\n.table-display th {\n  background: #2a2a2a;\n  font-weight: bold;\n  color: #fff;\n}\n\n.table-display td {\n  color: #e0e0e0;\n}\n\n/*  */\n.copy-button:hover .shimmer-effect,\n.delete-button:hover .shimmer-effect {\n  left: 100%;\n}\n\n.copy-button:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);\n}\n\n.delete-button:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);\n}\n</style>\n","module.exports = _;","<template>\n  <div class=\"tools-tab\" style=\"padding: 25px !important; background: #1a1a1a !important\">\n    <!--  -->\n    <div class=\"tool-section\">\n      <div\n        class=\"section-header\"\n        style=\"\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 15px 20px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 12px;\n          margin-bottom: 15px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          cursor: pointer;\n          transition: all 0.3s ease;\n        \"\n        @click=\"toggleToolExpanded('antiCliche')\"\n        @mouseenter=\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\"\n        @mouseleave=\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\"\n      >\n        <h4\n          style=\"\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n          \"\n        >\n          <i class=\"fa-solid fa-broom\" style=\"color: #ff6b6b; font-size: 18px\"></i>\n          \n        </h4>\n        <i\n          :class=\"isToolExpanded('antiCliche') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\"\n          style=\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\"\n        ></i>\n      </div>\n\n      <div v-if=\"isToolExpanded('antiCliche')\" class=\"tool-content\">\n        <div class=\"tool-instructions\">\n          <p style=\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\">\n            <i class=\"fa-solid fa-info-circle\" style=\"margin-right: 6px; color: #17a2b8\"></i>\n            //<strong style=\"color: #10b981\"></strong>\n          </p>\n          <p\n            style=\"\n              margin: 0 0 8px 0;\n              color: #ffa500;\n              font-size: 11px;\n              background: #1a1a1a;\n              padding: 6px;\n              border-radius: 4px;\n              border-left: 3px solid #ffa500;\n            \"\n          >\n            \n            <strong></strong\n            >\n          </p>\n          <p\n            style=\"\n              margin: 0;\n              color: #10b981;\n              font-size: 11px;\n              background: #1a1a1a;\n              padding: 6px;\n              border-radius: 4px;\n              border-left: 3px solid #10b981;\n            \"\n          >\n             <strong></strong> - \n          </p>\n        </div>\n\n        <div class=\"form-group\" style=\"margin: 15px 0\">\n          <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n            \n          </label>\n          <textarea\n            v-model=\"antiClicheInput\"\n            placeholder=\"...\"\n            style=\"\n              width: 100%;\n              height: 120px;\n              padding: 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              resize: vertical;\n              font-family: inherit;\n            \"\n          ></textarea>\n        </div>\n\n        <!--  -->\n        <div class=\"form-group\" style=\"margin: 15px 0\">\n          <label style=\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px; cursor: pointer\">\n            <input v-model=\"enableAntiClicheStreaming\" type=\"checkbox\" style=\"cursor: pointer\" />\n            \n          </label>\n        </div>\n\n        <!--  -->\n        <div\n          v-if=\"isProcessingAntiCliche && antiClicheProgressPercent > 0\"\n          class=\"progress-bar-container\"\n          style=\"margin: 15px 0\"\n        >\n          <div\n            class=\"progress-bar\"\n            style=\"\n              width: 100%;\n              height: 8px;\n              background: #2a2a2a;\n              border-radius: 4px;\n              overflow: hidden;\n              position: relative;\n            \"\n          >\n            <div\n              class=\"progress-fill\"\n              :style=\"{\n                width: antiClicheProgressPercent + '%',\n                height: '100%',\n                background: 'linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%)',\n                backgroundSize: '200% 100%',\n                animation: enableAntiClicheStreaming ? 'progress-slide 2s linear infinite' : 'none',\n                transition: 'width 0.3s ease',\n              }\"\n            ></div>\n          </div>\n          <div style=\"text-align: center; margin-top: 8px; color: #667eea; font-size: 12px; font-weight: 500\">\n            ... {{ antiClicheProgressPercent.toFixed(0) }}%\n          </div>\n        </div>\n\n        <div class=\"button-group\" style=\"display: flex; gap: 12px; margin-bottom: 20px\">\n          <button\n            class=\"process-button\"\n            :disabled=\"isProcessingAntiCliche || !antiClicheInput.trim()\"\n            style=\"\n              padding: 12px 24px;\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n              border: none;\n              border-radius: 12px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\n              position: relative;\n              overflow: hidden;\n            \"\n            @click=\"handleAntiClicheProcess\"\n          >\n            <div\n              style=\"\n                position: absolute;\n                top: 0;\n                left: -100%;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                transition: left 0.5s;\n              \"\n              class=\"shimmer-effect\"\n            ></div>\n            <i class=\"fa-solid fa-magic\" style=\"font-size: 14px; margin-right: 6px\"></i>\n            {{ isProcessingAntiCliche ? '...' : '' }}\n          </button>\n\n          <button\n            class=\"clear-button\"\n            style=\"\n              padding: 12px 24px;\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\n              border: none;\n              border-radius: 12px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\n              position: relative;\n              overflow: hidden;\n            \"\n            @click=\"clearAntiClicheForm\"\n          >\n            <div\n              style=\"\n                position: absolute;\n                top: 0;\n                left: -100%;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                transition: left 0.5s;\n              \"\n              class=\"shimmer-effect\"\n            ></div>\n            <i class=\"fa-solid fa-trash\" style=\"font-size: 14px; margin-right: 6px\"></i>\n            \n          </button>\n        </div>\n\n        <!--  -->\n        <div v-if=\"antiClicheOutput\" class=\"output-section\">\n          <h5 style=\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\">\n            <i class=\"fa-solid fa-check-circle\" style=\"margin-right: 6px; color: #28a745\"></i>\n            \n          </h5>\n          <div\n            class=\"output-content\"\n            style=\"\n              background: #1e1e1e;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              padding: 15px;\n              color: #e0e0e0;\n              font-size: 13px;\n              line-height: 1.6;\n              white-space: pre-wrap;\n              word-wrap: break-word;\n              max-height: 300px;\n              overflow-y: auto;\n            \"\n          >\n            {{ antiClicheOutput }}\n          </div>\n\n          <div class=\"output-actions\" style=\"margin-top: 12px; display: flex; gap: 12px\">\n            <button\n              class=\"copy-button\"\n              style=\"\n                padding: 10px 20px;\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\n                border: none;\n                border-radius: 6px;\n                color: white;\n                font-size: 13px;\n                font-weight: 600;\n                cursor: pointer;\n                transition: all 0.3s ease;\n                display: flex;\n                align-items: center;\n                gap: 8px;\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\n                position: relative;\n                overflow: hidden;\n              \"\n              @click=\"copyAntiClicheResult\"\n            >\n              <div\n                style=\"\n                  position: absolute;\n                  top: 0;\n                  left: -100%;\n                  width: 100%;\n                  height: 100%;\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                  transition: left 0.5s;\n                \"\n                class=\"shimmer-effect\"\n              ></div>\n              <i class=\"fa-solid fa-copy\" style=\"font-size: 14px\"></i> \n            </button>\n          </div>\n\n          <!--  -->\n          <div style=\"margin-top: 20px; padding-top: 20px; border-top: 1px solid #3a3a3a\">\n            <h5 style=\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\">\n              <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"margin-right: 6px; color: #ffc107\"></i>\n              AI \n            </h5>\n            <div class=\"form-group\" style=\"margin-bottom: 12px\">\n              <textarea\n                v-model=\"antiClicheModifyRequest\"\n                placeholder=\"...\"\n                style=\"\n                  width: 100%;\n                  height: 80px;\n                  padding: 12px;\n                  background: #2a2a2a;\n                  border: 1px solid #3a3a3a;\n                  border-radius: 6px;\n                  color: #e0e0e0;\n                  font-size: 13px;\n                  resize: vertical;\n                  font-family: inherit;\n                \"\n              ></textarea>\n            </div>\n\n            <div style=\"display: flex; gap: 10px\">\n              <button\n                :disabled=\"isModifyingAntiCliche || !antiClicheModifyRequest.trim()\"\n                style=\"\n                  flex: 1;\n                  padding: 10px 20px;\n                  background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);\n                  border: none;\n                  border-radius: 6px;\n                  color: #1a1a1a;\n                  font-size: 13px;\n                  font-weight: 600;\n                  cursor: pointer;\n                  transition: all 0.3s ease;\n                  box-shadow: 0 3px 12px rgba(255, 193, 7, 0.3);\n                  opacity: 1;\n                \"\n                :style=\"{\n                  opacity: isModifyingAntiCliche || !antiClicheModifyRequest.trim() ? 0.5 : 1,\n                  cursor: isModifyingAntiCliche || !antiClicheModifyRequest.trim() ? 'not-allowed' : 'pointer',\n                }\"\n                @click=\"handleModifyAntiCliche\"\n              >\n                <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"margin-right: 6px\"></i>\n                {{ isModifyingAntiCliche ? '...' : 'AI ' }}\n              </button>\n              <button\n                :disabled=\"!antiClicheModifyRequest.trim()\"\n                style=\"\n                  padding: 10px 20px;\n                  background: #dc3545;\n                  border: none;\n                  border-radius: 6px;\n                  color: white;\n                  font-size: 13px;\n                  font-weight: 600;\n                  cursor: pointer;\n                  transition: all 0.3s ease;\n                \"\n                :style=\"{\n                  opacity: !antiClicheModifyRequest.trim() ? 0.5 : 1,\n                  cursor: !antiClicheModifyRequest.trim() ? 'not-allowed' : 'pointer',\n                }\"\n                @click=\"clearAntiClicheModifyRequest\"\n              >\n                <i class=\"fa-solid fa-eraser\" style=\"margin-right: 6px\"></i>\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div class=\"tool-section\">\n      <div\n        class=\"section-header\"\n        style=\"\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 15px 20px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 12px;\n          margin-bottom: 15px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          cursor: pointer;\n          transition: all 0.3s ease;\n        \"\n        @click=\"toggleToolExpanded('worldbookEntry')\"\n        @mouseenter=\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\"\n        @mouseleave=\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\"\n      >\n        <h4\n          style=\"\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n          \"\n        >\n          <i class=\"fa-solid fa-book-atlas\" style=\"color: #ffc107; font-size: 18px\"></i>\n          \n        </h4>\n        <i\n          :class=\"isToolExpanded('worldbookEntry') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\"\n          style=\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\"\n        ></i>\n      </div>\n\n      <div v-if=\"isToolExpanded('worldbookEntry')\" class=\"tool-content\">\n        <div class=\"tool-instructions\">\n          <p style=\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\">\n            <i class=\"fa-solid fa-info-circle\" style=\"margin-right: 6px; color: #ffc107\"></i>\n            AI \n          </p>\n          <p\n            style=\"\n              margin: 0;\n              color: #4a9eff;\n              font-size: 11px;\n              background: #1a1a1a;\n              padding: 6px;\n              border-radius: 4px;\n              border-left: 3px solid #ffc107;\n            \"\n          >\n             \"\"\n          </p>\n        </div>\n\n        <div class=\"form-group\" style=\"margin: 15px 0\">\n          <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n            \n          </label>\n          <textarea\n            v-model=\"worldbookDescription\"\n            placeholder=\"...\"\n            style=\"\n              width: 100%;\n              height: 120px;\n              padding: 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              resize: vertical;\n              font-family: inherit;\n            \"\n          ></textarea>\n        </div>\n\n        <!--  -->\n        <div class=\"form-group\" style=\"margin: 15px 0\">\n          <label style=\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px; cursor: pointer\">\n            <input v-model=\"enableWorldbookStreaming\" type=\"checkbox\" style=\"cursor: pointer\" />\n            \n          </label>\n        </div>\n\n        <!--  -->\n        <div\n          v-if=\"isGeneratingWorldbook && worldbookProgressPercent > 0\"\n          class=\"progress-bar-container\"\n          style=\"margin: 15px 0\"\n        >\n          <!--  -->\n          <div\n            class=\"progress-bar\"\n            style=\"\n              position: relative;\n              width: 100%;\n              height: 12px;\n              background: rgba(255, 193, 7, 0.1);\n              border-radius: 12px;\n              overflow: hidden;\n              box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n            \"\n          >\n            <!--  -->\n            <div\n              style=\"\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg, transparent 0%, rgba(255, 193, 7, 0.2) 50%, transparent 100%);\n                background-size: 200% 100%;\n                animation: progress-glow 2s linear infinite;\n              \"\n            ></div>\n            <!--  -->\n            <div\n              class=\"progress-fill\"\n              :style=\"{\n                position: 'relative',\n                width: worldbookProgressPercent + '%',\n                height: '100%',\n                background: 'linear-gradient(90deg, #ffc107 0%, #ff9800 50%, #ffc107 100%)',\n                backgroundSize: '200% 100%',\n                animation: enableWorldbookStreaming ? 'progress-slide 2s linear infinite' : 'none',\n                transition: 'width 0.5s cubic-bezier(0.4, 0, 0.2, 1)',\n                borderRadius: '12px',\n                boxShadow: '0 0 10px rgba(255, 193, 7, 0.5)',\n              }\"\n            >\n              <!--  -->\n              <div\n                style=\"\n                  position: absolute;\n                  top: 0;\n                  left: 0;\n                  width: 100%;\n                  height: 50%;\n                  background: linear-gradient(180deg, rgba(255, 255, 255, 0.3) 0%, transparent 100%);\n                  border-radius: 12px 12px 0 0;\n                \"\n              ></div>\n            </div>\n          </div>\n          <!--  -->\n          <div style=\"display: flex; justify-content: center; align-items: center; margin-top: 12px; gap: 8px\">\n            <span\n              style=\"\n                color: #ffc107;\n                font-size: 13px;\n                font-weight: 600;\n                background: linear-gradient(90deg, #ffc107 0%, #ff9800 50%, #ffc107 100%);\n                background-size: 200% auto;\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n                background-clip: text;\n                animation: gradient-shift 2s linear infinite;\n              \"\n            >\n              ... {{ worldbookProgressPercent.toFixed(0) }}%\n            </span>\n            <!--  -->\n            <div style=\"display: flex; gap: 4px\">\n              <div\n                style=\"\n                  width: 6px;\n                  height: 6px;\n                  background: #ffc107;\n                  border-radius: 50%;\n                  animation: bounce-small 1.4s ease-in-out 0s infinite;\n                \"\n              ></div>\n              <div\n                style=\"\n                  width: 6px;\n                  height: 6px;\n                  background: #ffc107;\n                  border-radius: 50%;\n                  animation: bounce-small 1.4s ease-in-out 0.2s infinite;\n                \"\n              ></div>\n              <div\n                style=\"\n                  width: 6px;\n                  height: 6px;\n                  background: #ffc107;\n                  border-radius: 50%;\n                  animation: bounce-small 1.4s ease-in-out 0.4s infinite;\n                \"\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"button-group\" style=\"display: flex; gap: 12px; margin-bottom: 20px\">\n          <button\n            class=\"generate-button\"\n            :disabled=\"isGeneratingWorldbook || !worldbookDescription.trim()\"\n            style=\"\n              padding: 12px 24px;\n              background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);\n              border: none;\n              border-radius: 12px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 3px 12px rgba(255, 193, 7, 0.3);\n              position: relative;\n              overflow: hidden;\n            \"\n            @click=\"handleGenerateWorldbookEntry\"\n          >\n            <div\n              style=\"\n                position: absolute;\n                top: 0;\n                left: -100%;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                transition: left 0.5s;\n              \"\n              class=\"shimmer-effect\"\n            ></div>\n            <i class=\"fa-solid fa-magic\" style=\"font-size: 14px; margin-right: 6px\"></i>\n            {{ isGeneratingWorldbook ? '...' : '' }}\n          </button>\n\n          <button\n            class=\"clear-button\"\n            style=\"\n              padding: 12px 24px;\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\n              border: none;\n              border-radius: 12px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\n              position: relative;\n              overflow: hidden;\n            \"\n            @click=\"clearWorldbookForm\"\n          >\n            <div\n              style=\"\n                position: absolute;\n                top: 0;\n                left: -100%;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                transition: left 0.5s;\n              \"\n              class=\"shimmer-effect\"\n            ></div>\n            <i class=\"fa-solid fa-trash\" style=\"font-size: 14px; margin-right: 6px\"></i>\n            \n          </button>\n        </div>\n\n        <!--  -->\n        <div v-if=\"worldbookEntryOutput\" class=\"output-section\">\n          <h5 style=\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\">\n            <i class=\"fa-solid fa-check-circle\" style=\"margin-right: 6px; color: #28a745\"></i>\n            \n          </h5>\n\n          <!--  -->\n          <div\n            class=\"entry-preview\"\n            style=\"\n              background: #1e1e1e;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              padding: 15px;\n              margin-bottom: 15px;\n            \"\n          >\n            <div class=\"entry-field\" style=\"margin-bottom: 10px\">\n              <label style=\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\"\n                ></label\n              >\n              <div style=\"color: #e0e0e0; font-size: 13px\">{{ worldbookEntryOutput.name || '' }}</div>\n            </div>\n\n            <div class=\"entry-field\" style=\"margin-bottom: 10px\">\n              <label style=\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\"\n                ></label\n              >\n              <div style=\"color: #e0e0e0; font-size: 13px\">\n                {{ worldbookEntryOutput.strategy?.keys?.join(', ') || '' }}\n              </div>\n            </div>\n\n            <div class=\"entry-field\" style=\"margin-bottom: 10px\">\n              <label style=\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\"\n                ></label\n              >\n              <div\n                style=\"\n                  color: #e0e0e0;\n                  font-size: 13px;\n                  line-height: 1.6;\n                  white-space: pre-wrap;\n                  max-height: 200px;\n                  overflow-y: auto;\n                \"\n              >\n                {{ worldbookEntryOutput.content }}\n              </div>\n            </div>\n\n            <div class=\"entry-field\">\n              <label style=\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\"\n                ></label\n              >\n              <div style=\"color: #e0e0e0; font-size: 13px\">\n                {{\n                  worldbookEntryOutput.strategy?.type === 'constant'\n                    ? '  ()'\n                    : worldbookEntryOutput.strategy?.type === 'selective'\n                      ? '  ()'\n                      : ' '\n                }}\n              </div>\n            </div>\n          </div>\n\n          <!--  -->\n          <div class=\"modify-section\" style=\"margin-top: 25px; border-top: 2px dashed #3a3a3a; padding-top: 20px\">\n            <h5 style=\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\">\n              <i class=\"fa-solid fa-edit\" style=\"margin-right: 6px; color: #ffa500\"></i>\n              \n            </h5>\n            <div\n              class=\"modify-instructions\"\n              style=\"\n                background: #1a1a1a;\n                border: 1px solid #3a3a3a;\n                border-radius: 6px;\n                padding: 10px;\n                margin-bottom: 15px;\n              \"\n            >\n              <p style=\"margin: 0 0 6px 0; color: #ccc; font-size: 12px\">\n                <i class=\"fa-solid fa-lightbulb\" style=\"margin-right: 6px; color: #ffa500\"></i>\n                AI\"\"\"\"\"\"\n              </p>\n              <p style=\"margin: 0; color: #ffa500; font-size: 11px\">  JSON </p>\n            </div>\n\n            <div class=\"form-group\" style=\"margin: 15px 0\">\n              <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n                \n              </label>\n              <textarea\n                v-model=\"worldbookModifyRequest\"\n                placeholder=\"...\"\n                style=\"\n                  width: 100%;\n                  height: 80px;\n                  padding: 12px;\n                  background: #2a2a2a;\n                  border: 1px solid #3a3a3a;\n                  border-radius: 6px;\n                  color: #e0e0e0;\n                  font-size: 13px;\n                  resize: vertical;\n                  font-family: inherit;\n                \"\n              ></textarea>\n            </div>\n\n            <!--  -->\n            <div\n              v-if=\"isModifyingWorldbook && worldbookProgressPercent > 0\"\n              class=\"progress-bar-container\"\n              style=\"margin: 12px 0\"\n            >\n              <div\n                class=\"progress-bar\"\n                style=\"\n                  width: 100%;\n                  height: 8px;\n                  background: #2a2a2a;\n                  border-radius: 4px;\n                  overflow: hidden;\n                  position: relative;\n                \"\n              >\n                <div\n                  class=\"progress-fill\"\n                  :style=\"{\n                    width: worldbookProgressPercent + '%',\n                    height: '100%',\n                    background: 'linear-gradient(90deg, #ffa500 0%, #ff8c00 50%, #ffa500 100%)',\n                    backgroundSize: '200% 100%',\n                    animation: enableWorldbookStreaming ? 'progress-slide 2s linear infinite' : 'none',\n                    transition: 'width 0.3s ease',\n                  }\"\n                ></div>\n              </div>\n              <div style=\"text-align: center; margin-top: 8px; color: #ffa500; font-size: 12px; font-weight: 500\">\n                ... {{ worldbookProgressPercent.toFixed(0) }}%\n              </div>\n            </div>\n\n            <div class=\"button-group\" style=\"display: flex; gap: 12px; margin-bottom: 15px\">\n              <button\n                class=\"modify-button\"\n                :disabled=\"isModifyingWorldbook || !worldbookModifyRequest.trim()\"\n                style=\"\n                  padding: 12px 24px;\n                  background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);\n                  border: none;\n                  border-radius: 12px;\n                  color: white;\n                  font-size: 13px;\n                  font-weight: 600;\n                  cursor: pointer;\n                  transition: all 0.3s ease;\n                  box-shadow: 0 3px 12px rgba(255, 165, 0, 0.3);\n                  position: relative;\n                  overflow: hidden;\n                \"\n                @click=\"handleModifyWorldbookEntry\"\n              >\n                <div\n                  style=\"\n                    position: absolute;\n                    top: 0;\n                    left: -100%;\n                    width: 100%;\n                    height: 100%;\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                    transition: left 0.5s;\n                  \"\n                  class=\"shimmer-effect\"\n                ></div>\n                <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"font-size: 14px; margin-right: 6px\"></i>\n                {{ isModifyingWorldbook ? '...' : 'AI' }}\n              </button>\n\n              <button\n                class=\"clear-modify-button\"\n                style=\"\n                  padding: 12px 24px;\n                  background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\n                  border: none;\n                  border-radius: 12px;\n                  color: white;\n                  font-size: 13px;\n                  font-weight: 600;\n                  cursor: pointer;\n                  transition: all 0.3s ease;\n                  box-shadow: 0 3px 12px rgba(108, 117, 125, 0.3);\n                  position: relative;\n                  overflow: hidden;\n                \"\n                @click=\"clearWorldbookModifyRequest\"\n              >\n                <div\n                  style=\"\n                    position: absolute;\n                    top: 0;\n                    left: -100%;\n                    width: 100%;\n                    height: 100%;\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                    transition: left 0.5s;\n                  \"\n                  class=\"shimmer-effect\"\n                ></div>\n                <i class=\"fa-solid fa-eraser\" style=\"font-size: 14px; margin-right: 6px\"></i>\n                \n              </button>\n            </div>\n          </div>\n\n          <!--  -->\n          <div class=\"insert-section\" style=\"background: #1a1a1a; padding: 15px; border-radius: 6px; margin-top: 20px\">\n            <h5 style=\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\">\n              <i class=\"fa-solid fa-file-import\" style=\"margin-right: 6px; color: #17a2b8\"></i>\n              \n            </h5>\n\n            <div class=\"form-group\" style=\"margin-bottom: 12px\">\n              <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n                \n              </label>\n              <select\n                v-model=\"selectedWorldbook\"\n                style=\"\n                  width: 100%;\n                  padding: 10px;\n                  background: #2a2a2a;\n                  border: 1px solid #3a3a3a;\n                  border-radius: 6px;\n                  color: #e0e0e0;\n                  font-size: 13px;\n                \"\n              >\n                <option value=\"\" disabled></option>\n                <option v-for=\"wb in availableWorldbooks\" :key=\"wb\" :value=\"wb\">{{ wb }}</option>\n              </select>\n            </div>\n\n            <div class=\"output-actions\" style=\"display: flex; gap: 12px\">\n              <button\n                class=\"insert-button\"\n                :disabled=\"!selectedWorldbook || isInsertingEntry\"\n                style=\"\n                  padding: 10px 20px;\n                  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\n                  border: none;\n                  border-radius: 6px;\n                  color: white;\n                  font-size: 13px;\n                  font-weight: 600;\n                  cursor: pointer;\n                  transition: all 0.3s ease;\n                  display: flex;\n                  align-items: center;\n                  gap: 8px;\n                  box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\n                  position: relative;\n                  overflow: hidden;\n                \"\n                @click=\"handleInsertEntry\"\n              >\n                <div\n                  style=\"\n                    position: absolute;\n                    top: 0;\n                    left: -100%;\n                    width: 100%;\n                    height: 100%;\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                    transition: left 0.5s;\n                  \"\n                  class=\"shimmer-effect\"\n                ></div>\n                <i class=\"fa-solid fa-plus-circle\" style=\"font-size: 14px\"></i>\n                {{ isInsertingEntry ? '...' : '' }}\n              </button>\n\n              <button\n                class=\"copy-button\"\n                style=\"\n                  padding: 10px 20px;\n                  background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);\n                  border: none;\n                  border-radius: 6px;\n                  color: white;\n                  font-size: 13px;\n                  font-weight: 600;\n                  cursor: pointer;\n                  transition: all 0.3s ease;\n                  display: flex;\n                  align-items: center;\n                  gap: 8px;\n                  box-shadow: 0 3px 12px rgba(23, 162, 184, 0.3);\n                  position: relative;\n                  overflow: hidden;\n                \"\n                @click=\"copyWorldbookEntry\"\n              >\n                <div\n                  style=\"\n                    position: absolute;\n                    top: 0;\n                    left: -100%;\n                    width: 100%;\n                    height: 100%;\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                    transition: left 0.5s;\n                  \"\n                  class=\"shimmer-effect\"\n                ></div>\n                <i class=\"fa-solid fa-copy\" style=\"font-size: 14px\"></i>  JSON\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div class=\"tool-section\">\n      <div\n        class=\"section-header viewer-header\"\n        style=\"\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 15px 20px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 12px;\n          margin-bottom: 15px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          cursor: pointer;\n          transition: all 0.3s ease;\n        \"\n        @click=\"toggleToolExpanded('worldbookViewer')\"\n        @mouseenter=\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\"\n        @mouseleave=\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\"\n      >\n        <h4\n          style=\"\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n          \"\n        >\n          <i class=\"fa-solid fa-list\" style=\"color: #20c997; font-size: 18px\"></i>\n          \n        </h4>\n        <i\n          :class=\"isToolExpanded('worldbookViewer') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\"\n          style=\"color: #888; font-size: 14px; transition: transform 0.3s ease\"\n        ></i>\n      </div>\n\n      <div v-if=\"isToolExpanded('worldbookViewer')\" class=\"tool-content\">\n        <div\n          class=\"tool-instructions\"\n          style=\"\n            background: rgba(32, 201, 151, 0.1);\n            border-left: 3px solid #20c997;\n            padding: 12px 15px;\n            border-radius: 6px;\n            margin-bottom: 20px;\n          \"\n        >\n          <p style=\"margin: 0; color: #a0f0e0; font-size: 13px; display: flex; align-items: center; gap: 8px\">\n            <i class=\"fa-solid fa-info-circle\" style=\"color: #20c997\"></i>\n            \n          </p>\n        </div>\n\n        <!--  -->\n        <div class=\"form-group\" style=\"margin-bottom: 20px\">\n          <label\n            style=\"\n              display: block;\n              margin-bottom: 10px;\n              color: #e0e0e0;\n              font-size: 14px;\n              font-weight: 500;\n              letter-spacing: 0.3px;\n            \"\n          >\n            \n          </label>\n          <select\n            v-model=\"selectedViewerWorldbook\"\n            style=\"\n              width: 100%;\n              padding: 12px 15px;\n              background: #2a2a2a;\n              border: 1px solid rgba(255, 255, 255, 0.1);\n              border-radius: 12px;\n              color: #e0e0e0;\n              font-size: 14px;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n            \"\n            @change=\"loadWorldbookEntries\"\n            @focus=\"(e: any) => (e.target.style.borderColor = '#20c997')\"\n            @blur=\"(e: any) => (e.target.style.borderColor = 'rgba(255, 255, 255, 0.1)')\"\n          >\n            <option value=\"\"></option>\n            <option v-for=\"wb in availableWorldbooks\" :key=\"wb\" :value=\"wb\">\n              {{ wb }}\n            </option>\n          </select>\n        </div>\n\n        <!--  -->\n        <div v-if=\"selectedViewerWorldbook\" class=\"form-group\" style=\"margin-bottom: 20px\">\n          <label\n            style=\"\n              display: block;\n              margin-bottom: 10px;\n              color: #e0e0e0;\n              font-size: 14px;\n              font-weight: 500;\n              letter-spacing: 0.3px;\n            \"\n          >\n            \n          </label>\n          <input\n            v-model=\"viewerSearchQuery\"\n            type=\"text\"\n            placeholder=\"...\"\n            style=\"\n              width: 100%;\n              padding: 12px 15px;\n              background: #2a2a2a;\n              border: 1px solid rgba(255, 255, 255, 0.1);\n              border-radius: 12px;\n              color: #e0e0e0;\n              font-size: 14px;\n              transition: all 0.3s ease;\n              box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n            \"\n            @focus=\"(e: any) => (e.target.style.borderColor = '#20c997')\"\n            @blur=\"(e: any) => (e.target.style.borderColor = 'rgba(255, 255, 255, 0.1)')\"\n          />\n        </div>\n\n        <!--  -->\n        <div\n          v-if=\"selectedViewerWorldbook && worldbookEntries.length > 0\"\n          style=\"display: flex; gap: 10px; margin-bottom: 15px\"\n        >\n          <button\n            :style=\"{\n              padding: '8px 16px',\n              background: viewerSortBy === 'original' ? '#20c997' : '#444',\n              border: 'none',\n              borderRadius: '6px',\n              color: 'white',\n              fontSize: '12px',\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n            }\"\n            @click=\"viewerSortBy = 'original'\"\n          >\n            \n          </button>\n          <button\n            :style=\"{\n              padding: '8px 16px',\n              background: viewerSortBy === 'enabled' ? '#28a745' : '#444',\n              border: 'none',\n              borderRadius: '6px',\n              color: 'white',\n              fontSize: '12px',\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n            }\"\n            @click=\"viewerSortBy = 'enabled'\"\n          >\n             \n          </button>\n          <button\n            :style=\"{\n              padding: '8px 16px',\n              background: viewerSortBy === 'disabled' ? '#dc3545' : '#444',\n              border: 'none',\n              borderRadius: '6px',\n              color: 'white',\n              fontSize: '12px',\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n            }\"\n            @click=\"viewerSortBy = 'disabled'\"\n          >\n             \n          </button>\n        </div>\n\n        <!--  -->\n        <div v-if=\"selectedViewerWorldbook\" style=\"margin-bottom: 15px; color: #888; font-size: 12px\">\n          <span v-if=\"filteredWorldbookEntries.length > 0\">  {{ filteredWorldbookEntries.length }}  </span>\n          <span v-else style=\"color: #ff6b6b\"></span>\n        </div>\n\n        <!--  -->\n        <div v-if=\"filteredWorldbookEntries.length > 0\" style=\"display: flex; flex-direction: column; gap: 12px\">\n          <div\n            v-for=\"(entry, index) in filteredWorldbookEntries\"\n            :key=\"index\"\n            style=\"\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 12px;\n              padding: 15px;\n              transition: all 0.3s ease;\n            \"\n          >\n            <!--  -->\n            <div\n              style=\"\n                display: flex;\n                justify-content: space-between;\n                align-items: flex-start;\n                cursor: pointer;\n                user-select: none;\n              \"\n              @click=\"toggleEntryExpanded(index)\"\n            >\n              <!--  -->\n              <div style=\"flex: 1; line-height: 1.6\">\n                <!--  +  -->\n                <div style=\"display: flex; align-items: center; gap: 6px; margin-bottom: 8px\">\n                  <span v-if=\"entry.strategy?.type === 'constant'\" style=\"font-size: 14px\"></span>\n                  <span v-else-if=\"entry.strategy?.type === 'selective'\" style=\"font-size: 14px\"></span>\n                  <span v-else style=\"font-size: 14px\"></span>\n                  <span style=\"color: #fff; font-weight: 600; font-size: 14px\">\n                    {{ entry.name || '()' }}\n                  </span>\n                </div>\n\n                <!--  |  |  -->\n                <div style=\"padding-left: 20px; margin-bottom: 6px; font-size: 12px; color: #ccc\">\n                  <span v-if=\"entry.strategy?.keys && entry.strategy.keys.length > 0\">\n                    :\n                    {{ entry.strategy.keys.map((k: any) => (typeof k === 'string' ? k : String(k))).join(', ') }}\n                  </span>\n                  <span v-else>: ()</span>\n\n                  <span v-if=\"entry.position?.order && entry.position.order !== 0\">\n                    <span style=\"color: #666\"> | </span>\n                    : {{ entry.position.order }}\n                  </span>\n\n                  <span\n                    v-if=\"entry.position?.type === 'at_depth' && entry.position.depth && entry.position.depth !== 0\"\n                  >\n                    <span style=\"color: #666\"> | </span>\n                    : {{ entry.position.depth }}\n                  </span>\n                </div>\n\n                <!--  -->\n                <div style=\"padding-left: 20px; font-size: 12px; color: #999; font-style: italic\">\n                  {{\n                    entry.content\n                      ? entry.content.length > 50\n                        ? entry.content.substring(0, 50) + '...'\n                        : entry.content\n                      : '()'\n                  }}\n                </div>\n              </div>\n\n              <i\n                :class=\"isEntryExpanded(index) ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\"\n                style=\"color: #888; font-size: 12px; margin-top: 2px\"\n              ></i>\n            </div>\n\n            <!--  -->\n            <div\n              v-if=\"isEntryExpanded(index)\"\n              style=\"margin-top: 15px; padding-top: 15px; border-top: 1px solid #3a3a3a\"\n            >\n              <!--  -->\n              <div style=\"margin-bottom: 12px\">\n                <span style=\"color: #888; font-size: 12px; font-weight: 600; display: block; margin-bottom: 6px\">\n                   \n                </span>\n                <div style=\"display: flex; align-items: center; gap: 8px\">\n                  <span\n                    v-if=\"entry.strategy?.type === 'constant'\"\n                    style=\"\n                      padding: 4px 10px;\n                      background: #4a9eff;\n                      color: white;\n                      border-radius: 12px;\n                      font-size: 11px;\n                      font-weight: bold;\n                    \"\n                  >\n                     - \n                  </span>\n                  <span\n                    v-else-if=\"entry.strategy?.type === 'selective'\"\n                    style=\"\n                      padding: 4px 10px;\n                      background: #28a745;\n                      color: white;\n                      border-radius: 12px;\n                      font-size: 11px;\n                      font-weight: bold;\n                    \"\n                  >\n                     - \n                  </span>\n                  <span\n                    v-else\n                    style=\"\n                      padding: 4px 10px;\n                      background: #888;\n                      color: white;\n                      border-radius: 12px;\n                      font-size: 11px;\n                      font-weight: bold;\n                    \"\n                  >\n                     \n                  </span>\n                </div>\n              </div>\n\n              <!--  -->\n              <div style=\"margin-bottom: 12px\">\n                <span style=\"color: #888; font-size: 12px; font-weight: 600; display: block; margin-bottom: 6px\">\n                   \n                  <span\n                    v-if=\"entry.strategy?.type === 'constant'\"\n                    style=\"color: #ffa500; font-size: 10px; margin-left: 6px\"\n                  >\n                    ()\n                  </span>\n                </span>\n                <div style=\"display: flex; flex-wrap: wrap; gap: 6px\">\n                  <span\n                    v-for=\"(key, ki) in entry.strategy?.keys || []\"\n                    :key=\"ki\"\n                    style=\"padding: 4px 10px; background: #667eea; color: white; border-radius: 12px; font-size: 11px\"\n                  >\n                    {{ typeof key === 'string' ? key : String(key) }}\n                  </span>\n                  <span\n                    v-if=\"!entry.strategy?.keys || entry.strategy.keys.length === 0\"\n                    style=\"color: #888; font-size: 11px\"\n                  >\n                    {{ entry.strategy?.type === 'constant' ? '()' : '()' }}\n                  </span>\n                </div>\n              </div>\n\n              <!--  -->\n              <div style=\"margin-bottom: 12px\">\n                <span style=\"color: #888; font-size: 12px; font-weight: 600; display: block; margin-bottom: 6px\">\n                   \n                </span>\n                <div\n                  style=\"\n                    padding: 12px;\n                    background: #1a1a1a;\n                    border: 1px solid #3a3a3a;\n                    border-radius: 6px;\n                    color: #ccc;\n                    font-size: 12px;\n                    line-height: 1.6;\n                    max-height: 200px;\n                    overflow-y: auto;\n                    white-space: pre-wrap;\n                  \"\n                >\n                  {{ entry.content || '()' }}\n                </div>\n              </div>\n\n              <!--  -->\n              <div style=\"display: flex; gap: 10px; margin-top: 12px\">\n                <button\n                  style=\"\n                    padding: 8px 16px;\n                    background: #4a9eff;\n                    border: none;\n                    border-radius: 6px;\n                    color: white;\n                    font-size: 12px;\n                    cursor: pointer;\n                    transition: all 0.2s;\n                  \"\n                  @click=\"editWorldbookEntry(entry)\"\n                >\n                  <i class=\"fa-solid fa-edit\"></i> \n                </button>\n                <button\n                  style=\"\n                    padding: 8px 16px;\n                    background: #ff6b6b;\n                    border: none;\n                    border-radius: 6px;\n                    color: white;\n                    font-size: 12px;\n                    cursor: pointer;\n                    transition: all 0.2s;\n                  \"\n                  @click=\"deleteWorldbookEntry(entry)\"\n                >\n                  <i class=\"fa-solid fa-trash\"></i> \n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      v-if=\"showEditDialog\"\n      style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.7);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n        backdrop-filter: blur(4px);\n      \"\n      @click.self=\"showEditDialog = false\"\n    >\n      <div\n        style=\"\n          background: #2a2a2a;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          border-radius: 12px;\n          padding: 25px;\n          max-width: 700px;\n          width: 90%;\n          max-height: 85vh;\n          overflow-y: auto;\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\n        \"\n      >\n        <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px\">\n          <h3 style=\"margin: 0; color: #fff; font-size: 18px; font-weight: 600\">\n            <i class=\"fa-solid fa-edit\" style=\"margin-right: 8px; color: #4a9eff\"></i>\n            \n          </h3>\n          <button\n            style=\"\n              background: transparent;\n              border: none;\n              color: #888;\n              font-size: 20px;\n              cursor: pointer;\n              padding: 5px 10px;\n              transition: color 0.2s;\n            \"\n            @click=\"showEditDialog = false\"\n            @mouseenter=\"(e: any) => (e.target.style.color = '#fff')\"\n            @mouseleave=\"(e: any) => (e.target.style.color = '#888')\"\n          >\n            <i class=\"fa-solid fa-times\"></i>\n          </button>\n        </div>\n\n        <div style=\"display: flex; flex-direction: column; gap: 15px\">\n          <!--  -->\n          <div>\n            <label style=\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\">\n              \n            </label>\n            <input\n              v-model=\"editingEntry.name\"\n              type=\"text\"\n              style=\"\n                width: 100%;\n                padding: 12px;\n                background: #1a1a1a;\n                border: 1px solid rgba(255, 255, 255, 0.1);\n                border-radius: 12px;\n                color: #e0e0e0;\n                font-size: 14px;\n              \"\n            />\n          </div>\n\n          <!--  -->\n          <div style=\"display: flex; align-items: center; gap: 10px\">\n            <input\n              id=\"entry-enabled\"\n              v-model=\"editingEntry.enabled\"\n              type=\"checkbox\"\n              style=\"width: 18px; height: 18px; cursor: pointer\"\n            />\n            <label for=\"entry-enabled\" style=\"color: #e0e0e0; font-size: 14px; cursor: pointer\">  </label>\n          </div>\n\n          <!--  -->\n          <div>\n            <label style=\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\">\n              \n            </label>\n            <input\n              :value=\"\n                (editingEntry.strategy?.keys || []).map((k: any) => (typeof k === 'string' ? k : String(k))).join(',')\n              \"\n              type=\"text\"\n              placeholder=\",Aria,,{{char}}\"\n              style=\"\n                width: 100%;\n                padding: 12px;\n                background: #1a1a1a;\n                border: 1px solid rgba(255, 255, 255, 0.1);\n                border-radius: 12px;\n                color: #e0e0e0;\n                font-size: 14px;\n              \"\n              @input=\"\n                (e: any) => {\n                  const keys = e.target.value\n                    .split(',')\n                    .filter((k: string) => k.trim())\n                    .map((k: string) => k.trim());\n                  editingEntry.strategy = {\n                    ...editingEntry.strategy,\n                    keys: keys,\n                    keys_secondary: editingEntry.strategy?.keys_secondary || { logic: 'and_any', keys: [] },\n                    scan_depth: editingEntry.strategy?.scan_depth || 'same_as_global',\n                    type: editingEntry.strategy?.type || 'selective',\n                  };\n                }\n              \"\n            />\n          </div>\n\n          <!--  -->\n          <div>\n            <label style=\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\">\n              \n            </label>\n            <select\n              :value=\"editingEntry.strategy?.type || 'selective'\"\n              style=\"\n                width: 100%;\n                padding: 12px;\n                background: #1a1a1a;\n                border: 1px solid rgba(255, 255, 255, 0.1);\n                border-radius: 12px;\n                color: #e0e0e0;\n                font-size: 14px;\n                cursor: pointer;\n              \"\n              @change=\"\n                (e: any) =>\n                  (editingEntry.strategy = {\n                    ...editingEntry.strategy,\n                    type: e.target.value,\n                    keys: editingEntry.strategy?.keys || [],\n                    keys_secondary: editingEntry.strategy?.keys_secondary || { logic: 'and_any', keys: [] },\n                    scan_depth: editingEntry.strategy?.scan_depth || 'same_as_global',\n                  })\n              \"\n            >\n              <option value=\"selective\"> ()</option>\n              <option value=\"constant\"> ()</option>\n            </select>\n          </div>\n\n          <!--  -->\n          <div>\n            <label style=\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\">\n              \n            </label>\n            <select\n              :value=\"editingEntry.position?.type || 'before_character_definition'\"\n              style=\"\n                width: 100%;\n                padding: 12px;\n                background: #1a1a1a;\n                border: 1px solid rgba(255, 255, 255, 0.1);\n                border-radius: 12px;\n                color: #e0e0e0;\n                font-size: 14px;\n                cursor: pointer;\n              \"\n              @change=\"\n                (e: any) =>\n                  (editingEntry.position = {\n                    ...editingEntry.position,\n                    type: e.target.value,\n                    role: editingEntry.position?.role || 'system',\n                    depth: editingEntry.position?.depth || 0,\n                    order: editingEntry.position?.order || 0,\n                  })\n              \"\n            >\n              <option value=\"before_character_definition\"></option>\n              <option value=\"after_character_definition\"></option>\n              <option value=\"before_example_messages\"></option>\n              <option value=\"after_example_messages\"></option>\n              <option value=\"before_author_note\"></option>\n              <option value=\"after_author_note\"></option>\n              <option value=\"at_depth\"></option>\n            </select>\n          </div>\n\n          <!--  -->\n          <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 10px\">\n            <div>\n              <label style=\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\">\n                \n              </label>\n              <input\n                :value=\"editingEntry.position?.depth || 0\"\n                type=\"number\"\n                style=\"\n                  width: 100%;\n                  padding: 12px;\n                  background: #1a1a1a;\n                  border: 1px solid rgba(255, 255, 255, 0.1);\n                  border-radius: 12px;\n                  color: #e0e0e0;\n                  font-size: 14px;\n                \"\n                @input=\"\n                  (e: any) =>\n                    (editingEntry.position = {\n                      ...editingEntry.position,\n                      depth: Number(e.target.value) || 0,\n                      role: editingEntry.position?.role || 'system',\n                      order: editingEntry.position?.order || 0,\n                      type: editingEntry.position?.type || 'before_character_definition',\n                    })\n                \"\n              />\n            </div>\n            <div>\n              <label style=\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\">\n                \n              </label>\n              <input\n                :value=\"editingEntry.position?.order || 0\"\n                type=\"number\"\n                style=\"\n                  width: 100%;\n                  padding: 12px;\n                  background: #1a1a1a;\n                  border: 1px solid rgba(255, 255, 255, 0.1);\n                  border-radius: 12px;\n                  color: #e0e0e0;\n                  font-size: 14px;\n                \"\n                @input=\"\n                  (e: any) =>\n                    (editingEntry.position = {\n                      ...editingEntry.position,\n                      order: Number(e.target.value) || 0,\n                      type: editingEntry.position?.type || 'before_character_definition',\n                      role: editingEntry.position?.role || 'system',\n                      depth: editingEntry.position?.depth || 0,\n                    })\n                \"\n              />\n            </div>\n          </div>\n\n          <!--  -->\n          <div\n            style=\"background: #1a1a1a; padding: 15px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1)\"\n          >\n            <label style=\"display: block; margin-bottom: 12px; color: #e0e0e0; font-size: 14px; font-weight: 600\">\n              \n            </label>\n            <div style=\"display: flex; flex-direction: column; gap: 10px\">\n              <label\n                style=\"color: #ccc; font-size: 13px; display: flex; align-items: center; gap: 10px; cursor: pointer\"\n              >\n                <input\n                  type=\"checkbox\"\n                  :checked=\"editingEntry.recursion?.prevent_incoming || false\"\n                  @change=\"\n                    (e: any) =>\n                      (editingEntry.recursion = {\n                        ...editingEntry.recursion,\n                        prevent_incoming: e.target.checked,\n                        prevent_outgoing: editingEntry.recursion?.prevent_outgoing || false,\n                        delay_until: editingEntry.recursion?.delay_until || null,\n                      })\n                  \"\n                />\n                \n              </label>\n              <label\n                style=\"color: #ccc; font-size: 13px; display: flex; align-items: center; gap: 10px; cursor: pointer\"\n              >\n                <input\n                  type=\"checkbox\"\n                  :checked=\"editingEntry.recursion?.prevent_outgoing || false\"\n                  @change=\"\n                    (e: any) =>\n                      (editingEntry.recursion = {\n                        ...editingEntry.recursion,\n                        prevent_outgoing: e.target.checked,\n                        prevent_incoming: editingEntry.recursion?.prevent_incoming || false,\n                        delay_until: editingEntry.recursion?.delay_until || null,\n                      })\n                  \"\n                />\n                \n              </label>\n              <div>\n                <label style=\"color: #ccc; font-size: 13px; display: block; margin-bottom: 5px\">\n                   n \n                </label>\n                <input\n                  :value=\"editingEntry.recursion?.delay_until || ''\"\n                  type=\"number\"\n                  placeholder=\"\"\n                  style=\"\n                    width: 100%;\n                    padding: 8px;\n                    background: #2a2a2a;\n                    border: 1px solid rgba(255, 255, 255, 0.1);\n                    border-radius: 6px;\n                    color: #e0e0e0;\n                    font-size: 13px;\n                  \"\n                  @input=\"\n                    (e: any) =>\n                      (editingEntry.recursion = {\n                        ...editingEntry.recursion,\n                        delay_until: e.target.value === '' ? null : Number(e.target.value),\n                        prevent_incoming: editingEntry.recursion?.prevent_incoming || false,\n                        prevent_outgoing: editingEntry.recursion?.prevent_outgoing || false,\n                      })\n                  \"\n                />\n              </div>\n            </div>\n          </div>\n\n          <!--  -->\n          <div>\n            <label style=\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\">\n              \n            </label>\n            <textarea\n              v-model=\"editingEntry.content\"\n              style=\"\n                width: 100%;\n                min-height: 200px;\n                padding: 12px;\n                background: #1a1a1a;\n                border: 1px solid rgba(255, 255, 255, 0.1);\n                border-radius: 12px;\n                color: #e0e0e0;\n                font-size: 14px;\n                resize: vertical;\n                font-family: inherit;\n              \"\n            ></textarea>\n          </div>\n        </div>\n\n        <!--  -->\n        <div style=\"display: flex; gap: 10px; margin-top: 20px; justify-content: flex-end\">\n          <button\n            style=\"\n              padding: 10px 20px;\n              background: #444;\n              border: none;\n              border-radius: 12px;\n              color: white;\n              font-size: 14px;\n              cursor: pointer;\n              transition: all 0.2s;\n            \"\n            @click=\"showEditDialog = false\"\n            @mouseenter=\"(e: any) => (e.target.style.background = '#555')\"\n            @mouseleave=\"(e: any) => (e.target.style.background = '#444')\"\n          >\n            \n          </button>\n          <button\n            style=\"\n              padding: 10px 20px;\n              background: #4a9eff;\n              border: none;\n              border-radius: 12px;\n              color: white;\n              font-size: 14px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.2s;\n            \"\n            @click=\"saveEditedEntry\"\n            @mouseenter=\"(e: any) => (e.target.style.background = '#5ba8ff')\"\n            @mouseleave=\"(e: any) => (e.target.style.background = '#4a9eff')\"\n          >\n            <i class=\"fa-solid fa-save\" style=\"margin-right: 6px\"></i>\n            \n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div class=\"tool-section\">\n      <div\n        class=\"section-header\"\n        style=\"\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 15px 20px;\n          background: linear-gradient(\n            135deg,\n            rgba(30, 30, 30, 0.95) 0%,\n            rgba(38, 38, 38, 0.9) 50%,\n            rgba(30, 30, 30, 0.95) 100%\n          );\n          backdrop-filter: blur(12px);\n          border-radius: 12px;\n          margin-bottom: 15px;\n          border: 1px solid rgba(255, 255, 255, 0.06);\n          box-shadow:\n            0 3px 12px rgba(0, 0, 0, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\n          cursor: pointer;\n          transition: all 0.3s ease;\n        \"\n        @click=\"toggleToolExpanded('characterCard')\"\n        @mouseenter=\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\"\n        @mouseleave=\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\"\n      >\n        <h4\n          style=\"\n            margin: 0;\n            color: #fff;\n            font-size: 16px;\n            font-weight: 600;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n          \"\n        >\n          <i class=\"fa-solid fa-user-plus\" style=\"color: #17a2b8; font-size: 18px\"></i>\n          \n        </h4>\n        <i\n          :class=\"isToolExpanded('characterCard') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\"\n          style=\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\"\n        ></i>\n      </div>\n\n      <div v-if=\"isToolExpanded('characterCard')\" class=\"tool-content\">\n        <div class=\"tool-instructions\">\n          <p style=\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\">\n            <i class=\"fa-solid fa-info-circle\" style=\"margin-right: 6px; color: #17a2b8\"></i>\n            AIYAML \n          </p>\n          <p\n            style=\"\n              margin: 0 0 6px 0;\n              color: #4a9eff;\n              font-size: 11px;\n              background: #1a1a1a;\n              padding: 6px;\n              border-radius: 4px;\n              border-left: 3px solid #17a2b8;\n            \"\n          >\n             \n          </p>\n          <p\n            style=\"\n              margin: 0 0 6px 0;\n              color: #ffa500;\n              font-size: 11px;\n              background: #1a1a1a;\n              padding: 6px;\n              border-radius: 4px;\n              border-left: 3px solid #ffa500;\n            \"\n          >\n             \"\"AI\n          </p>\n        </div>\n\n        <div class=\"form-group\" style=\"margin: 15px 0\">\n          <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n            \n          </label>\n          <textarea\n            v-model=\"characterDescription\"\n            placeholder=\"...\"\n            style=\"\n              width: 100%;\n              height: 120px;\n              padding: 12px;\n              background: #2a2a2a;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              color: #e0e0e0;\n              font-size: 13px;\n              resize: vertical;\n              font-family: inherit;\n            \"\n          ></textarea>\n        </div>\n\n        <!--  -->\n        <div class=\"form-group\" style=\"margin: 15px 0\">\n          <label style=\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px; cursor: pointer\">\n            <input v-model=\"enableCharacterStreaming\" type=\"checkbox\" style=\"cursor: pointer\" />\n            \n          </label>\n        </div>\n\n        <!--  -->\n        <div\n          v-if=\"isGeneratingCharacter && characterProgressPercent > 0\"\n          class=\"progress-bar-container\"\n          style=\"margin: 15px 0\"\n        >\n          <!--  -->\n          <div\n            class=\"progress-bar\"\n            style=\"\n              position: relative;\n              width: 100%;\n              height: 12px;\n              background: rgba(23, 162, 184, 0.1);\n              border-radius: 12px;\n              overflow: hidden;\n              box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n            \"\n          >\n            <!--  -->\n            <div\n              style=\"\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg, transparent 0%, rgba(23, 162, 184, 0.2) 50%, transparent 100%);\n                background-size: 200% 100%;\n                animation: progress-glow 2s linear infinite;\n              \"\n            ></div>\n            <!--  -->\n            <div\n              class=\"progress-fill\"\n              :style=\"{\n                position: 'relative',\n                width: characterProgressPercent + '%',\n                height: '100%',\n                background: 'linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%)',\n                backgroundSize: '200% 100%',\n                animation: enableCharacterStreaming ? 'progress-slide 2s linear infinite' : 'none',\n                transition: 'width 0.5s cubic-bezier(0.4, 0, 0.2, 1)',\n                borderRadius: '12px',\n                boxShadow: '0 0 10px rgba(23, 162, 184, 0.5)',\n              }\"\n            >\n              <!--  -->\n              <div\n                style=\"\n                  position: absolute;\n                  top: 0;\n                  left: 0;\n                  width: 100%;\n                  height: 50%;\n                  background: linear-gradient(180deg, rgba(255, 255, 255, 0.3) 0%, transparent 100%);\n                  border-radius: 12px 12px 0 0;\n                \"\n              ></div>\n            </div>\n          </div>\n          <!--  -->\n          <div style=\"display: flex; justify-content: center; align-items: center; margin-top: 12px; gap: 8px\">\n            <span\n              style=\"\n                color: #17a2b8;\n                font-size: 13px;\n                font-weight: 600;\n                background: linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%);\n                background-size: 200% auto;\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n                background-clip: text;\n                animation: gradient-shift 2s linear infinite;\n              \"\n            >\n              ... {{ characterProgressPercent.toFixed(0) }}%\n            </span>\n            <!--  -->\n            <div style=\"display: flex; gap: 4px\">\n              <div\n                style=\"\n                  width: 6px;\n                  height: 6px;\n                  background: #17a2b8;\n                  border-radius: 50%;\n                  animation: bounce-small 1.4s ease-in-out 0s infinite;\n                \"\n              ></div>\n              <div\n                style=\"\n                  width: 6px;\n                  height: 6px;\n                  background: #17a2b8;\n                  border-radius: 50%;\n                  animation: bounce-small 1.4s ease-in-out 0.2s infinite;\n                \"\n              ></div>\n              <div\n                style=\"\n                  width: 6px;\n                  height: 6px;\n                  background: #17a2b8;\n                  border-radius: 50%;\n                  animation: bounce-small 1.4s ease-in-out 0.4s infinite;\n                \"\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"button-group\" style=\"display: flex; gap: 12px; margin-bottom: 20px\">\n          <button\n            class=\"generate-button\"\n            :disabled=\"isGeneratingCharacter || !characterDescription.trim()\"\n            style=\"\n              padding: 12px 24px;\n              background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);\n              border: none;\n              border-radius: 12px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 3px 12px rgba(23, 162, 184, 0.3);\n              position: relative;\n              overflow: hidden;\n            \"\n            @click=\"handleGenerateCharacterCard\"\n          >\n            <div\n              style=\"\n                position: absolute;\n                top: 0;\n                left: -100%;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                transition: left 0.5s;\n              \"\n              class=\"shimmer-effect\"\n            ></div>\n            <i class=\"fa-solid fa-magic\" style=\"font-size: 14px; margin-right: 6px\"></i>\n            {{ isGeneratingCharacter ? '...' : '' }}\n          </button>\n\n          <button\n            class=\"clear-button\"\n            style=\"\n              padding: 12px 24px;\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\n              border: none;\n              border-radius: 12px;\n              color: white;\n              font-size: 13px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.3s ease;\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\n              position: relative;\n              overflow: hidden;\n            \"\n            @click=\"clearCharacterForm\"\n          >\n            <div\n              style=\"\n                position: absolute;\n                top: 0;\n                left: -100%;\n                width: 100%;\n                height: 100%;\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                transition: left 0.5s;\n              \"\n              class=\"shimmer-effect\"\n            ></div>\n            <i class=\"fa-solid fa-trash\" style=\"font-size: 14px; margin-right: 6px\"></i>\n            \n          </button>\n        </div>\n\n        <!--  -->\n        <div v-if=\"characterCardOutput\" class=\"output-section\">\n          <h5 style=\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\">\n            <i class=\"fa-solid fa-check-circle\" style=\"margin-right: 6px; color: #28a745\"></i>\n            \n          </h5>\n          <div\n            class=\"output-content\"\n            style=\"\n              background: #1e1e1e;\n              border: 1px solid #3a3a3a;\n              border-radius: 6px;\n              padding: 15px;\n              color: #e0e0e0;\n              font-size: 13px;\n              line-height: 1.6;\n              white-space: pre-wrap;\n              word-wrap: break-word;\n              max-height: 300px;\n              overflow-y: auto;\n            \"\n          >\n            {{ characterCardOutput }}\n          </div>\n\n          <div class=\"output-actions\" style=\"margin-top: 12px; display: flex; gap: 12px\">\n            <button\n              class=\"copy-button\"\n              style=\"\n                padding: 10px 20px;\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\n                border: none;\n                border-radius: 6px;\n                color: white;\n                font-size: 13px;\n                font-weight: 600;\n                cursor: pointer;\n                transition: all 0.3s ease;\n                display: flex;\n                align-items: center;\n                gap: 8px;\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\n                position: relative;\n                overflow: hidden;\n              \"\n              @click=\"copyCharacterCard\"\n            >\n              <div\n                style=\"\n                  position: absolute;\n                  top: 0;\n                  left: -100%;\n                  width: 100%;\n                  height: 100%;\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                  transition: left 0.5s;\n                \"\n                class=\"shimmer-effect\"\n              ></div>\n              <i class=\"fa-solid fa-copy\" style=\"font-size: 14px\"></i> \n            </button>\n          </div>\n\n          <!--  -->\n          <div class=\"modify-section\" style=\"margin-top: 25px; border-top: 2px dashed #3a3a3a; padding-top: 20px\">\n            <h5 style=\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\">\n              <i class=\"fa-solid fa-edit\" style=\"margin-right: 6px; color: #ffa500\"></i>\n              \n            </h5>\n            <div\n              class=\"modify-instructions\"\n              style=\"\n                background: #1a1a1a;\n                border: 1px solid #3a3a3a;\n                border-radius: 6px;\n                padding: 10px;\n                margin-bottom: 15px;\n              \"\n            >\n              <p style=\"margin: 0 0 6px 0; color: #ccc; font-size: 12px\">\n                <i class=\"fa-solid fa-lightbulb\" style=\"margin-right: 6px; color: #ffa500\"></i>\n                AI\"\"\"\"\"\"\n              </p>\n              <p style=\"margin: 0; color: #ffa500; font-size: 11px\">  YAML </p>\n            </div>\n\n            <div class=\"form-group\" style=\"margin: 15px 0\">\n              <label style=\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\">\n                \n              </label>\n              <textarea\n                v-model=\"modifyRequest\"\n                placeholder=\"...\"\n                style=\"\n                  width: 100%;\n                  height: 80px;\n                  padding: 12px;\n                  background: #2a2a2a;\n                  border: 1px solid #3a3a3a;\n                  border-radius: 6px;\n                  color: #e0e0e0;\n                  font-size: 13px;\n                  resize: vertical;\n                  font-family: inherit;\n                \"\n              ></textarea>\n            </div>\n\n            <!--  -->\n            <div\n              v-if=\"isModifyingCharacter && characterProgressPercent > 0\"\n              class=\"progress-bar-container\"\n              style=\"margin: 15px 0\"\n            >\n              <!--  -->\n              <div\n                class=\"progress-bar\"\n                style=\"\n                  position: relative;\n                  width: 100%;\n                  height: 12px;\n                  background: rgba(23, 162, 184, 0.1);\n                  border-radius: 12px;\n                  overflow: hidden;\n                  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n                \"\n              >\n                <!--  -->\n                <div\n                  style=\"\n                    position: absolute;\n                    width: 100%;\n                    height: 100%;\n                    background: linear-gradient(90deg, transparent 0%, rgba(23, 162, 184, 0.2) 50%, transparent 100%);\n                    background-size: 200% 100%;\n                    animation: progress-glow 2s linear infinite;\n                  \"\n                ></div>\n                <!--  -->\n                <div\n                  class=\"progress-fill\"\n                  :style=\"{\n                    position: 'relative',\n                    width: characterProgressPercent + '%',\n                    height: '100%',\n                    background: 'linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%)',\n                    backgroundSize: '200% 100%',\n                    animation: enableCharacterStreaming ? 'progress-slide 2s linear infinite' : 'none',\n                    transition: 'width 0.5s cubic-bezier(0.4, 0, 0.2, 1)',\n                    borderRadius: '12px',\n                    boxShadow: '0 0 10px rgba(23, 162, 184, 0.5)',\n                  }\"\n                >\n                  <!--  -->\n                  <div\n                    style=\"\n                      position: absolute;\n                      top: 0;\n                      left: 0;\n                      width: 100%;\n                      height: 50%;\n                      background: linear-gradient(180deg, rgba(255, 255, 255, 0.3) 0%, transparent 100%);\n                      border-radius: 12px 12px 0 0;\n                    \"\n                  ></div>\n                </div>\n              </div>\n              <!--  -->\n              <div style=\"display: flex; justify-content: center; align-items: center; margin-top: 12px; gap: 8px\">\n                <span\n                  style=\"\n                    color: #17a2b8;\n                    font-size: 13px;\n                    font-weight: 600;\n                    background: linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%);\n                    background-size: 200% auto;\n                    -webkit-background-clip: text;\n                    -webkit-text-fill-color: transparent;\n                    background-clip: text;\n                    animation: gradient-shift 2s linear infinite;\n                  \"\n                >\n                  ... {{ characterProgressPercent.toFixed(0) }}%\n                </span>\n                <!--  -->\n                <div style=\"display: flex; gap: 4px\">\n                  <div\n                    style=\"\n                      width: 6px;\n                      height: 6px;\n                      background: #17a2b8;\n                      border-radius: 50%;\n                      animation: bounce-small 1.4s ease-in-out 0s infinite;\n                    \"\n                  ></div>\n                  <div\n                    style=\"\n                      width: 6px;\n                      height: 6px;\n                      background: #17a2b8;\n                      border-radius: 50%;\n                      animation: bounce-small 1.4s ease-in-out 0.2s infinite;\n                    \"\n                  ></div>\n                  <div\n                    style=\"\n                      width: 6px;\n                      height: 6px;\n                      background: #17a2b8;\n                      border-radius: 50%;\n                      animation: bounce-small 1.4s ease-in-out 0.4s infinite;\n                    \"\n                  ></div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"button-group\" style=\"display: flex; gap: 12px; margin-bottom: 15px\">\n              <button\n                class=\"modify-button\"\n                :disabled=\"isModifyingCharacter || !modifyRequest.trim()\"\n                style=\"\n                  padding: 12px 24px;\n                  background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);\n                  border: none;\n                  border-radius: 12px;\n                  color: white;\n                  font-size: 13px;\n                  font-weight: 600;\n                  cursor: pointer;\n                  transition: all 0.3s ease;\n                  box-shadow: 0 3px 12px rgba(255, 165, 0, 0.3);\n                  position: relative;\n                  overflow: hidden;\n                \"\n                @click=\"handleModifyCharacterCard\"\n              >\n                <div\n                  style=\"\n                    position: absolute;\n                    top: 0;\n                    left: -100%;\n                    width: 100%;\n                    height: 100%;\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                    transition: left 0.5s;\n                  \"\n                  class=\"shimmer-effect\"\n                ></div>\n                <i class=\"fa-solid fa-wand-magic-sparkles\" style=\"font-size: 14px; margin-right: 6px\"></i>\n                {{ isModifyingCharacter ? '...' : 'AI' }}\n              </button>\n\n              <button\n                class=\"clear-modify-button\"\n                style=\"\n                  padding: 12px 24px;\n                  background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\n                  border: none;\n                  border-radius: 12px;\n                  color: white;\n                  font-size: 13px;\n                  font-weight: 600;\n                  cursor: pointer;\n                  transition: all 0.3s ease;\n                  box-shadow: 0 3px 12px rgba(108, 117, 125, 0.3);\n                  position: relative;\n                  overflow: hidden;\n                \"\n                @click=\"clearModifyRequest\"\n              >\n                <div\n                  style=\"\n                    position: absolute;\n                    top: 0;\n                    left: -100%;\n                    width: 100%;\n                    height: 100%;\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n                    transition: left 0.5s;\n                  \"\n                  class=\"shimmer-effect\"\n                ></div>\n                <i class=\"fa-solid fa-eraser\" style=\"font-size: 14px; margin-right: 6px\"></i>\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { debounce } from 'lodash';\nimport { storeToRefs } from 'pinia';\nimport { onBeforeUnmount, onMounted, ref, Ref, watch } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\n\nconst settingsStore = useSettingsStore();\nconst { settings } = storeToRefs(settingsStore);\n\n// \nconst toolExpandedState = ref(new Map<string, boolean>());\nconst antiClicheInput = ref('');\nconst antiClicheOutput = ref('');\nconst isProcessingAntiCliche = ref(false);\nconst enableAntiClicheStreaming = ref(false); // \nconst antiClicheProgressPercent = ref(0); // \nconst antiClicheModifyRequest = ref(''); // \nconst isModifyingAntiCliche = ref(false); // \nconst characterDescription = ref('');\nconst characterCardOutput = ref('');\nconst isGeneratingCharacter = ref(false);\nconst modifyRequest = ref('');\nconst isModifyingCharacter = ref(false);\nconst enableCharacterStreaming = ref(false); // \nconst characterProgressPercent = ref(0); // \n\n// \nconst worldbookDescription = ref('');\nconst worldbookEntryOutput = ref<Partial<WorldbookEntry> | null>(null);\nconst isGeneratingWorldbook = ref(false);\nconst availableWorldbooks = ref<string[]>([]);\nconst selectedWorldbook = ref('');\nconst isInsertingEntry = ref(false);\nconst worldbookModifyRequest = ref('');\nconst isModifyingWorldbook = ref(false);\nconst enableWorldbookStreaming = ref(false); // \nconst worldbookProgressPercent = ref(0); // \n\n// \nconst selectedViewerWorldbook = ref('');\nconst worldbookEntries = ref<WorldbookEntry[]>([]);\nconst viewerSearchQuery = ref('');\nconst viewerSortBy = ref<'original' | 'enabled' | 'disabled'>('original');\nconst entryExpandedState = ref(new Map<number, boolean>());\n\n// \nconst showEditDialog = ref(false);\nconst editingEntry = ref<Partial<WorldbookEntry>>({});\nconst editingEntryUid = ref<number | null>(null);\n\n// \nconst isDataLoaded = ref(false);\n\n//  TavernHelper\nconst loadAvailableWorldbooks = () => {\n  try {\n    //  TavernHelper.getWorldbookNames()\n    if (\n      typeof (window as any).TavernHelper !== 'undefined' &&\n      typeof (window as any).TavernHelper.getWorldbookNames === 'function'\n    ) {\n      availableWorldbooks.value = (window as any).TavernHelper.getWorldbookNames();\n      console.log('  (TavernHelper):', availableWorldbooks.value);\n    } else {\n      availableWorldbooks.value = [];\n      console.warn(' TavernHelper ');\n    }\n  } catch (error) {\n    console.error(' :', error);\n    availableWorldbooks.value = [];\n  }\n};\n\n//  localStorage \nconst loadToolsData = () => {\n  try {\n    isDataLoaded.value = false; // \n    const script_id = getScriptIdSafe();\n    if (!script_id) {\n      console.warn(' script_id ');\n      isDataLoaded.value = true;\n      return;\n    }\n\n    //  localStorage \n    const storageKey = `${script_id}_tools_data`;\n    const savedDataString = localStorage.getItem(storageKey);\n    const savedData = savedDataString ? JSON.parse(savedDataString) : {};\n\n    console.log(' :', savedData);\n\n    // \n    if (savedData.tools_antiCliche) {\n      antiClicheInput.value = savedData.tools_antiCliche.input || '';\n      antiClicheOutput.value = savedData.tools_antiCliche.output || '';\n      enableAntiClicheStreaming.value = savedData.tools_antiCliche.enableStreaming || false;\n      antiClicheModifyRequest.value = savedData.tools_antiCliche.modifyRequest || '';\n      console.log(' :', {\n        input: antiClicheInput.value.substring(0, 50),\n        output: antiClicheOutput.value.substring(0, 50),\n        enableStreaming: enableAntiClicheStreaming.value,\n        modifyRequest: antiClicheModifyRequest.value.substring(0, 30),\n      });\n    }\n\n    // \n    if (savedData.tools_characterCard) {\n      characterDescription.value = savedData.tools_characterCard.description || '';\n      characterCardOutput.value = savedData.tools_characterCard.output || '';\n      modifyRequest.value = savedData.tools_characterCard.modifyRequest || '';\n      enableCharacterStreaming.value = savedData.tools_characterCard.enableStreaming || false;\n      console.log(' :', {\n        description: characterDescription.value.substring(0, 50),\n        output: characterCardOutput.value.substring(0, 50),\n        modifyRequest: modifyRequest.value.substring(0, 50),\n        enableStreaming: enableCharacterStreaming.value,\n      });\n    }\n\n    // \n    if (savedData.tools_worldbookEntry) {\n      worldbookDescription.value = savedData.tools_worldbookEntry.description || '';\n      worldbookEntryOutput.value = savedData.tools_worldbookEntry.output || null;\n      selectedWorldbook.value = savedData.tools_worldbookEntry.selectedWorldbook || '';\n      worldbookModifyRequest.value = savedData.tools_worldbookEntry.modifyRequest || '';\n      enableWorldbookStreaming.value = savedData.tools_worldbookEntry.enableStreaming || false;\n      console.log(' :', {\n        description: worldbookDescription.value.substring(0, 50),\n        output: worldbookEntryOutput.value ? '' : '',\n        selectedWorldbook: selectedWorldbook.value,\n        modifyRequest: worldbookModifyRequest.value.substring(0, 50),\n        enableStreaming: enableWorldbookStreaming.value,\n      });\n    }\n\n    // \n    if (savedData.tools_expandedState) {\n      toolExpandedState.value = new Map(Object.entries(savedData.tools_expandedState));\n      console.log(' :', Object.fromEntries(toolExpandedState.value));\n    }\n\n    // \n    if (savedData.tools_worldbookViewer) {\n      selectedViewerWorldbook.value = savedData.tools_worldbookViewer.selectedWorldbook || '';\n      viewerSearchQuery.value = savedData.tools_worldbookViewer.searchQuery || '';\n      viewerSortBy.value = savedData.tools_worldbookViewer.sortBy || 'original';\n      console.log(' :', {\n        selectedWorldbook: selectedViewerWorldbook.value,\n        searchQuery: viewerSearchQuery.value,\n        sortBy: viewerSortBy.value,\n      });\n\n      // \n      if (selectedViewerWorldbook.value) {\n        console.log(' ...');\n        setTimeout(() => {\n          loadWorldbookEntries();\n        }, 200);\n      }\n    }\n\n    // \n    setTimeout(() => {\n      isDataLoaded.value = true;\n      console.log(' ');\n    }, 100);\n  } catch (error) {\n    console.error(' :', error);\n    isDataLoaded.value = true;\n  }\n};\n\n//  localStorage\nconst saveToolsDataImmediate = () => {\n  // \n  if (!isDataLoaded.value) {\n    console.log(' ');\n    return;\n  }\n\n  try {\n    const script_id = getScriptIdSafe();\n    if (!script_id) {\n      console.warn(' script_id ');\n      return;\n    }\n\n    const dataToSave = {\n      tools_antiCliche: {\n        input: antiClicheInput.value,\n        output: antiClicheOutput.value,\n        enableStreaming: enableAntiClicheStreaming.value,\n        modifyRequest: antiClicheModifyRequest.value,\n      },\n      tools_characterCard: {\n        description: characterDescription.value,\n        output: characterCardOutput.value,\n        modifyRequest: modifyRequest.value,\n        enableStreaming: enableCharacterStreaming.value,\n      },\n      tools_worldbookEntry: {\n        description: worldbookDescription.value,\n        output: worldbookEntryOutput.value,\n        selectedWorldbook: selectedWorldbook.value,\n        modifyRequest: worldbookModifyRequest.value,\n        enableStreaming: enableWorldbookStreaming.value,\n      },\n      tools_worldbookViewer: {\n        selectedWorldbook: selectedViewerWorldbook.value,\n        searchQuery: viewerSearchQuery.value,\n        sortBy: viewerSortBy.value,\n      },\n      tools_expandedState: Object.fromEntries(toolExpandedState.value),\n    };\n\n    //  localStorage\n    const storageKey = `${script_id}_tools_data`;\n    localStorage.setItem(storageKey, JSON.stringify(dataToSave));\n    console.log('  localStorage:', {\n      antiCliche_input_length: antiClicheInput.value.length,\n      antiCliche_output_length: antiClicheOutput.value.length,\n      character_desc_length: characterDescription.value.length,\n      character_output_length: characterCardOutput.value.length,\n    });\n  } catch (error) {\n    console.error(' :', error);\n  }\n};\n\n// 300ms\nconst saveToolsData = debounce(saveToolsDataImmediate, 300);\n\n// \nwatch(\n  [\n    antiClicheInput,\n    antiClicheOutput,\n    enableAntiClicheStreaming,\n    antiClicheModifyRequest,\n    characterDescription,\n    characterCardOutput,\n    modifyRequest,\n    enableCharacterStreaming,\n    worldbookDescription,\n    worldbookEntryOutput,\n    selectedWorldbook,\n    worldbookModifyRequest,\n    enableWorldbookStreaming,\n    selectedViewerWorldbook,\n    viewerSearchQuery,\n    viewerSortBy,\n    toolExpandedState,\n  ],\n  () => {\n    if (isDataLoaded.value) {\n      console.log(' ...');\n      saveToolsData();\n    }\n  },\n  { deep: true },\n);\n\n// \nonMounted(() => {\n  console.log(' ToolsTab ...');\n  loadToolsData();\n  loadAvailableWorldbooks();\n});\n\n// \nonBeforeUnmount(() => {\n  console.log(' ToolsTab ...');\n  // \n  saveToolsData.cancel();\n  saveToolsDataImmediate();\n});\n\n// \nconst toggleToolExpanded = (toolName: string) => {\n  console.log('toggleToolExpanded :', toolName);\n  const current = toolExpandedState.value.get(toolName) || false;\n  console.log(':', current);\n  toolExpandedState.value.set(toolName, !current);\n  console.log(':', !current);\n};\n\n// \nconst isToolExpanded = (toolName: string) => {\n  return toolExpandedState.value.get(toolName) || false;\n};\n\n// copyToClipboard  utils.ts \n\n// \nconst handleAntiClicheProcess = async () => {\n  if (!antiClicheInput.value.trim()) {\n    window.toastr.warning('');\n    return;\n  }\n\n  try {\n    isProcessingAntiCliche.value = true;\n    antiClicheProgressPercent.value = 0;\n    window.toastr.info('AI...', '', { timeOut: 15000 });\n\n    const requestPayload = {\n      model: settings.value.model,\n      max_tokens: settings.value.max_tokens || 8000,\n      temperature: 0.7,\n      stream: enableAntiClicheStreaming.value,\n      messages: [\n        {\n          role: 'system',\n          content: `//AI\n\n#  \n\n##  \n**500500**\n\n-  \n-  \n-  \n-  /\n-  \n\n##  \n**\"\"\"\"**\n- \"\"\n- \"\"\n- \n- \n\n---\n\n#  \n\n##  \n\n### 1 AI\n****\n****\n****\"......\"\"......\"\"...\"\n****\n****\"\"\"\"\"xx\"\"\"\n\n### 2 AI\n- **/**\"xxx\"\"\"\"\"  \n- ****\"\"\"\"  \n- ****\"\"\"...\"  \n- ****\"\"\"\"\"\"  \n- ****\"\"\"\"  \n- ****\"\"\"\"  \n\n### 3 \n-  \"\"\"\"  \n-  \"...\"   \"...\"\n\n### 4 \n-  \"168cm\"\"\"   \"\"\n-  \"50kg\"   \"\" \n-  \"C\"   \"\" \n\n---\n\n##    \n\n###   \n|  |  |\n|--------|------|\n|  |  /  |\n|  |  /  |\n|  |  /  |\n|  |  |\n|  |  |\n|  |  |\n\n###   \n- \"\"  \"\"\n- \"\"  \"\"\n- \"\"  \"\"\n\n---\n\n##  \n\n###  \n1. ****\"\"\n2. ****\n3. ****\n4. ****\n5. ****\n\n###  \n- \n- \n- \n\n---\n\n#  \n\n## 1\n\n** AI**\nA\"\"\n\nA168cmC\n\n\"\"\n\n** **\nA\"\"\nA\n\"\"\n\n** **\nA\"\"\n\nA\n\nA\n\n\"\"\n\n****\n- \"...\"  \"\"+\n- \"......\"  +\n- \"\"  \"\"\n- \"168cmC\"  \"\"\n- \"......\"  \"\"\n- \"\"  \n- ****\n\n---\n\n## 2\n\n** **\n\n\n** **\n\n\n****\n- \"\"  \"\"\"\"+\n- \"......\"  \n- \"\"  \n- \"\"  \"\"\n- \"...\"  \n- ****\n\n---\n\n#  \n\n1. ****\n2. ****\n3. ****\"\"100%\n4. ****\n5. ****\n6. ****\n\n---\n\n**\"\"\"\"**`,\n        },\n        {\n          role: 'user',\n          content: antiClicheInput.value,\n        },\n      ],\n    };\n\n    let generatedText: string;\n\n    if (enableAntiClicheStreaming.value) {\n      // \n      generatedText = await generateWithStreaming(requestPayload, antiClicheProgressPercent);\n    } else {\n      // \n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.value.api_key}`,\n        },\n        body: JSON.stringify(requestPayload),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      generatedText = data.choices[0].message.content.trim();\n      antiClicheProgressPercent.value = 100;\n    }\n\n    antiClicheOutput.value = generatedText;\n    saveToolsDataImmediate(); // \n\n    window.toastr.success('');\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('' + (error as Error).message);\n  } finally {\n    isProcessingAntiCliche.value = false;\n    antiClicheProgressPercent.value = 0;\n  }\n};\n\nconst copyAntiClicheResult = () => {\n  if (!antiClicheOutput.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  // \n  copyToClipboard(antiClicheOutput.value, '');\n};\n\n// \nconst handleModifyAntiCliche = async () => {\n  if (!antiClicheModifyRequest.value.trim()) {\n    window.toastr.warning('');\n    return;\n  }\n\n  if (!antiClicheOutput.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  try {\n    isModifyingAntiCliche.value = true;\n    antiClicheProgressPercent.value = 0;\n    window.toastr.info('AI...', '', { timeOut: 15000 });\n\n    const requestPayload = {\n      model: settings.value.model,\n      max_tokens: settings.value.max_tokens || 8000,\n      temperature: 0.7,\n      stream: enableAntiClicheStreaming.value,\n      messages: [\n        {\n          role: 'system',\n          content:\n            '',\n        },\n        {\n          role: 'user',\n          content: `\\n${antiClicheOutput.value}\\n\\n${antiClicheModifyRequest.value}`,\n        },\n      ],\n    };\n\n    let modifiedText: string;\n\n    if (enableAntiClicheStreaming.value) {\n      // \n      modifiedText = await generateWithStreaming(requestPayload, antiClicheProgressPercent);\n    } else {\n      // \n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.value.api_key}`,\n        },\n        body: JSON.stringify(requestPayload),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      modifiedText = data.choices[0].message.content.trim();\n      antiClicheProgressPercent.value = 100;\n    }\n\n    antiClicheOutput.value = modifiedText;\n    saveToolsDataImmediate(); // \n\n    window.toastr.success('');\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('' + (error as Error).message);\n  } finally {\n    isModifyingAntiCliche.value = false;\n    antiClicheProgressPercent.value = 0;\n  }\n};\n\n// \nconst clearAntiClicheModifyRequest = () => {\n  antiClicheModifyRequest.value = '';\n  saveToolsDataImmediate();\n  window.toastr.success('');\n};\n\n// \nconst handleGenerateCharacterCard = async () => {\n  if (!characterDescription.value.trim()) {\n    window.toastr.warning('');\n    return;\n  }\n\n  try {\n    isGeneratingCharacter.value = true;\n    characterProgressPercent.value = 0;\n    window.toastr.info('AI...');\n\n    const requestPayload = {\n      model: settings.value.model || 'gpt-3.5-turbo',\n      max_tokens: settings.value.max_tokens || 16000,\n      temperature: 0.8,\n      stream: enableCharacterStreaming.value,\n      messages: [\n        {\n          role: 'system',\n          content: `\n\n# \n1. ****\n2. ****\"\"\"\"\"\"\n3. ****\n4. ****\n\n# \n YAML \n\n\\`\\`\\`yaml\n:\n  : \"\"\n  : \n  : \"YYYYMM\"\n  : \"/\"\n  : \"Alpha/Beta/Omega/\"\n  : \"''''''\"\n  : \"ABO''\"\n  : \"\"\n  : \"''\"\n  : \"+''\"\n  :\n    : \"\"\n    : \"\"\n    : \"1-2\"\n\n:\n  : \"\"\n  :\n    : \"+\"\n    : \"/\"\n    : \"++''\"\n    : \"1-2+\"\n  : \"3++\"\n  : \"++''''\"\n  : \"3-5\"\n\n:\n  :\n    : \"1\"\n    : \"2-3\"\n    : \"\"\n  : \"1\"\n  :\n    : \"''''\"\n    : \"+\"\n    : \"//\"\n    : \"\"\n  : \"++\"\n  : \"TA+\"\n\n:\n  : \"++\"\n  :\n    : \"+\"\n    : \"+\"\n    /: \"+\"\n    /: \"+\"\n  : \"++\"\n  : [\"2-3\"]\n  : \"\"\n\n:\n  : \"+++\"\n  : \"++/\"\n  :\n    - \"1++TA\"\n    - \"2++TA\"\n    - \"3++TA\"\n  : \"+\"\n  : \"++\"\n  : \"++\"\n\n:\n  {{user}}: \"+++\"\n  : \"++\"\n  : \"++\"\n  : \"++\"\n  : \"++\"\n\n:\n  : \"3-5+\"\n  : \"++\"\n  : \"TA+\"\n  : \"TA+\"\n  : \"+\"\n  : \"+\"\n\n:\n  : \"TA''\"\n  : \"TA\"\n  : \"TA3-5\"\n  : \"+\"\n  : \"+\"\n  : \"TA+\"\n\n:\n  : \"+\"\n  : \"++\"\n  : \"//\"\n  : \"+\"\n\\`\\`\\`\n\n# \n\n##  \n- \"\"\n- \"\"\n- \"''''\"\n- \"\"\n\n##  \n- \"\"  \n- \"\"  \n- \"\"  \n- \"\"  \n\n## \n1. **\"\"**TA\n2. ****\n3. ****\"XXXX\"\"XX\"\n4. ****\n5. ****\n\n`,\n        },\n        {\n          role: 'user',\n          content: characterDescription.value,\n        },\n      ],\n    };\n\n    let generatedText: string;\n\n    if (enableCharacterStreaming.value) {\n      // \n      generatedText = await generateWithStreaming(requestPayload, characterProgressPercent);\n    } else {\n      // \n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.value.api_key}`,\n        },\n        body: JSON.stringify(requestPayload),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      generatedText = data.choices[0].message.content.trim();\n      characterProgressPercent.value = 100;\n    }\n\n    characterCardOutput.value = generatedText;\n    saveToolsDataImmediate(); // \n\n    window.toastr.success('');\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('' + (error as Error).message);\n  } finally {\n    isGeneratingCharacter.value = false;\n    characterProgressPercent.value = 0;\n  }\n};\n\nconst clearCharacterForm = () => {\n  characterDescription.value = '';\n  characterCardOutput.value = '';\n  modifyRequest.value = '';\n  saveToolsDataImmediate(); // \n  window.toastr.success('');\n};\n\nconst copyCharacterCard = () => {\n  if (!characterCardOutput.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  // \n  copyToClipboard(characterCardOutput.value, '');\n};\n\n// \nconst clearAntiClicheForm = () => {\n  antiClicheInput.value = '';\n  antiClicheOutput.value = '';\n  saveToolsDataImmediate(); // \n  window.toastr.success('');\n};\n\n// \nconst handleModifyCharacterCard = async () => {\n  if (!modifyRequest.value.trim()) {\n    window.toastr.warning('');\n    return;\n  }\n\n  if (!characterCardOutput.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  try {\n    isModifyingCharacter.value = true;\n    characterProgressPercent.value = 0;\n    window.toastr.info('AI...');\n\n    const requestPayload = {\n      model: settings.value.model || 'gpt-3.5-turbo',\n      max_tokens: settings.value.max_tokens || 16000,\n      temperature: 0.8,\n      stream: enableCharacterStreaming.value,\n      messages: [\n        {\n          role: 'system',\n          content: ` YAML \n\n****\n1.  YAML \n2. \n3. \n4. \n5. \n6. \n\n****\n- ////\n- \n- \n- AI\n\n YAML `,\n        },\n        {\n          role: 'user',\n          content: `\n\n${characterCardOutput.value}\n\n---\n\n\n${modifyRequest.value}`,\n        },\n      ],\n    };\n\n    let modifiedCard: string;\n\n    if (enableCharacterStreaming.value) {\n      // \n      modifiedCard = await generateWithStreaming(requestPayload, characterProgressPercent);\n    } else {\n      // \n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.value.api_key}`,\n        },\n        body: JSON.stringify(requestPayload),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      modifiedCard = data.choices[0].message.content.trim();\n      characterProgressPercent.value = 100;\n    }\n\n    characterCardOutput.value = modifiedCard;\n    modifyRequest.value = ''; // \n    saveToolsDataImmediate(); // \n\n    window.toastr.success('');\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('' + (error as Error).message);\n  } finally {\n    isModifyingCharacter.value = false;\n    characterProgressPercent.value = 0;\n  }\n};\n\n// \nconst clearModifyRequest = () => {\n  modifyRequest.value = '';\n  saveToolsDataImmediate(); // \n  window.toastr.success('');\n};\n\n// ====================  ====================\n\n// \nconst extractStreamContent = (chunk: any): string | null => {\n  // OpenAI \n  if (chunk.choices?.[0]?.delta?.content) {\n    return chunk.choices[0].delta.content;\n  }\n  // Claude \n  if (chunk.delta?.text) {\n    return chunk.delta.text;\n  }\n  // \n  if (typeof chunk.content === 'string') {\n    return chunk.content;\n  }\n  if (typeof chunk.text === 'string') {\n    return chunk.text;\n  }\n  if (typeof chunk.response === 'string') {\n    return chunk.response;\n  }\n  return null;\n};\n\n// \nconst generateWithStreaming = async (\n  requestPayload: Record<string, any>,\n  progressRef: Ref<number>,\n): Promise<string> => {\n  const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n  const response = await fetch(apiUrl, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${settings.value.api_key}`,\n    },\n    body: JSON.stringify(requestPayload),\n  });\n\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`${response.status} ${response.statusText}\\n${errorText.slice(0, 400)}`);\n  }\n\n  if (!response.body) {\n    throw new Error(' API ');\n  }\n\n  const reader = response.body.getReader();\n  const decoder = new TextDecoder('utf-8');\n  let buffer = '';\n  let done = false;\n  let result = '';\n\n  progressRef.value = 0;\n\n  const processLine = (line: string): boolean => {\n    const trimmed = line.trim();\n    if (!trimmed) {\n      return false;\n    }\n\n    if (trimmed === 'data: [DONE]' || trimmed === '[DONE]') {\n      return true;\n    }\n\n    const payloadText = trimmed.startsWith('data:') ? trimmed.slice(5).trim() : trimmed;\n    if (!payloadText || payloadText === '[DONE]') {\n      return false;\n    }\n\n    try {\n      const payloadJson = JSON.parse(payloadText);\n      const deltaText = extractStreamContent(payloadJson);\n      if (deltaText) {\n        result += deltaText;\n        progressRef.value = Math.min(progressRef.value + 2, 98);\n      }\n    } catch (parseError) {\n      console.warn(':', payloadText.slice(0, 100), parseError);\n    }\n\n    return false;\n  };\n\n  while (!done) {\n    const { value, done: readerDone } = await reader.read();\n    if (value) {\n      buffer += decoder.decode(value, { stream: true });\n      const lines = buffer.split('\\n');\n      buffer = lines.pop() ?? '';\n      for (const line of lines) {\n        if (processLine(line)) {\n          done = true;\n          break;\n        }\n      }\n    }\n\n    if (readerDone) {\n      done = true;\n    }\n  }\n\n  if (buffer && !done) {\n    processLine(buffer);\n  }\n\n  progressRef.value = 100;\n  return result;\n};\n\n// ====================  ====================\n\n// \nconst handleGenerateWorldbookEntry = async () => {\n  if (!worldbookDescription.value.trim()) {\n    window.toastr.warning('');\n    return;\n  }\n\n  try {\n    isGeneratingWorldbook.value = true;\n    worldbookProgressPercent.value = 0;\n    window.toastr.info('AI...', '', { timeOut: 15000 });\n\n    const requestPayload = {\n      model: settings.value.model || 'gpt-3.5-turbo',\n      max_tokens: settings.value.max_tokens || 4000,\n      temperature: 0.7,\n      stream: enableWorldbookStreaming.value,\n      messages: [\n        {\n          role: 'system',\n          content: `SillyTavernJSON\n\n# JSON\n\n{\n  \"name\": \"\",\n  \"enabled\": true,\n  \"strategy\": {\n    \"type\": \"selectiveconstant\",\n    \"keys\": [\"\"],\n    \"keys_secondary\": { \"logic\": \"and_any\", \"keys\": [] },\n    \"scan_depth\": \"same_as_global\"\n  },\n  \"position\": {\n    \"type\": \"after_character_definition\",\n    \"role\": \"system\",\n    \"depth\": 4,\n    \"order\": 100\n  },\n  \"content\": \"\",\n  \"probability\": 100,\n  \"recursion\": {\n    \"prevent_incoming\": false,\n    \"prevent_outgoing\": false,\n    \"delay_until\": null\n  },\n  \"effect\": {\n    \"sticky\": null,\n    \"cooldown\": null,\n    \"delay\": null\n  }\n}\n\n---\n\n# \n\n## 1 name\n- 2-6\n- \n- \"\"\"\"\"\"\n\n## 2 strategy.type\n**selective** - \n- \n- \n- \n\n**constant** - \n- \n- \n- \n\n## 3 strategy.keys\n- 3-6\n- \n- [\"\", \"\", \"\"][\"\", \"\", \"\"]\n\n## 4 content \n\n###  \n**Markdown**\n-   # ## \n-   ******\n-   - 1. \n-   > \n-   \\`\\`\n\n**AI**\n-  \"\"\"\"\"\"\"\"\n-  \"\"\"\"\n-  \"......\"\"......\"\n-  \n\n###  \n** + **\n- \"\"\n- \"\"\n- \"\"\n\n** + **\n- \n- \n- \n\n****\n- \n- \n- \n\n###  \n\n****\n[][][][/][1-2][][][/][]\n\n****\n[][][][][][][]\n\n****\n[][][][/][][][]\n\n**/**\n[][][][][][]\n\n---\n\n# \n\n## 1\n\n\"16\"\n\n\n{\n  \"name\": \"\",\n  \"enabled\": true,\n  \"strategy\": {\n    \"type\": \"selective\",\n    \"keys\": [\"\", \"\", \"\", \"\", \"\"],\n    \"keys_secondary\": { \"logic\": \"and_any\", \"keys\": [] },\n    \"scan_depth\": \"same_as_global\"\n  },\n  \"position\": {\n    \"type\": \"after_character_definition\",\n    \"role\": \"system\",\n    \"depth\": 4,\n    \"order\": 100\n  },\n  \"content\": \"16\",\n  \"probability\": 100,\n  \"recursion\": {\n    \"prevent_incoming\": false,\n    \"prevent_outgoing\": false,\n    \"delay_until\": null\n  },\n  \"effect\": {\n    \"sticky\": null,\n    \"cooldown\": null,\n    \"delay\": null\n  }\n}\n\n## 2\n\n\"\"\n\n\n{\n  \"name\": \"\",\n  \"enabled\": true,\n  \"strategy\": {\n    \"type\": \"selective\",\n    \"keys\": [\"\", \"\", \"\", \"\", \"\"],\n    \"keys_secondary\": { \"logic\": \"and_any\", \"keys\": [] },\n    \"scan_depth\": \"same_as_global\"\n  },\n  \"position\": {\n    \"type\": \"after_character_definition\",\n    \"role\": \"system\",\n    \"depth\": 4,\n    \"order\": 100\n  },\n  \"content\": \"\\n\\n\",\n  \"probability\": 100,\n  \"recursion\": {\n    \"prevent_incoming\": false,\n    \"prevent_outgoing\": false,\n    \"delay_until\": null\n  },\n  \"effect\": {\n    \"sticky\": null,\n    \"cooldown\": null,\n    \"delay\": null\n  }\n}\n\n---\n\n# \n\n1. **JSON**\n2. ****JSON.parse()\n3. ****content\n4. **Markdown**contentMarkdown\n5. ****\n6. ****\n\nJSON`,\n        },\n        {\n          role: 'user',\n          content: worldbookDescription.value,\n        },\n      ],\n    };\n\n    let generatedText: string;\n\n    if (enableWorldbookStreaming.value) {\n      // \n      generatedText = await generateWithStreaming(requestPayload, worldbookProgressPercent);\n    } else {\n      // \n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.value.api_key}`,\n        },\n        body: JSON.stringify(requestPayload),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      generatedText = data.choices[0].message.content.trim();\n      worldbookProgressPercent.value = 100;\n    }\n\n    //  JSON\n    try {\n      //  JSON \n      const jsonMatch = generatedText.match(/```(?:json)?\\s*([\\s\\S]*?)```/) || [null, generatedText];\n      const jsonText = jsonMatch[1] || generatedText;\n\n      const parsedEntry = JSON.parse(jsonText);\n      worldbookEntryOutput.value = parsedEntry;\n      saveToolsDataImmediate(); // \n\n      window.toastr.success('');\n    } catch (parseError) {\n      console.error('JSON :', parseError);\n      console.log(':', generatedText);\n      window.toastr.error('');\n    }\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('' + (error as Error).message);\n  } finally {\n    isGeneratingWorldbook.value = false;\n    worldbookProgressPercent.value = 0;\n  }\n};\n\n// \nconst clearWorldbookForm = () => {\n  worldbookDescription.value = '';\n  worldbookEntryOutput.value = null;\n  selectedWorldbook.value = '';\n  worldbookModifyRequest.value = '';\n  saveToolsDataImmediate(); // \n  window.toastr.success('');\n};\n\n// \nconst handleInsertEntry = async () => {\n  if (!selectedWorldbook.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  if (!worldbookEntryOutput.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  try {\n    isInsertingEntry.value = true;\n    window.toastr.info(`${selectedWorldbook.value}...`);\n\n    //  createWorldbookEntries \n    await createWorldbookEntries(selectedWorldbook.value, [worldbookEntryOutput.value], { render: 'immediate' });\n\n    window.toastr.success(` ${selectedWorldbook.value}`);\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('' + (error as Error).message);\n  } finally {\n    isInsertingEntry.value = false;\n  }\n};\n\n//  JSON\nconst copyWorldbookEntry = () => {\n  if (!worldbookEntryOutput.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  const jsonText = JSON.stringify(worldbookEntryOutput.value, null, 2);\n  copyToClipboard(jsonText, ' JSON ');\n};\n\n// \nconst handleModifyWorldbookEntry = async () => {\n  if (!worldbookModifyRequest.value.trim()) {\n    window.toastr.warning('');\n    return;\n  }\n\n  if (!worldbookEntryOutput.value) {\n    window.toastr.warning('');\n    return;\n  }\n\n  try {\n    isModifyingWorldbook.value = true;\n    worldbookProgressPercent.value = 0;\n    window.toastr.info('AI...');\n\n    const requestPayload = {\n      model: settings.value.model || 'gpt-3.5-turbo',\n      max_tokens: settings.value.max_tokens || 4000,\n      temperature: 0.7,\n      stream: enableWorldbookStreaming.value,\n      messages: [\n        {\n          role: 'system',\n          content: ` JSON \n\n****\n1.  JSON \n2. \n3. \n4. \n5.  JSON\n6. \n\n****\n-  (content)\n-  (keys)\n-  (strategy.type) \n-  JSON \n\n JSON `,\n        },\n        {\n          role: 'user',\n          content: `\n\n${JSON.stringify(worldbookEntryOutput.value, null, 2)}\n\n---\n\n\n${worldbookModifyRequest.value}`,\n        },\n      ],\n    };\n\n    let generatedText: string;\n\n    if (enableWorldbookStreaming.value) {\n      // \n      generatedText = await generateWithStreaming(requestPayload, worldbookProgressPercent);\n    } else {\n      // \n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.value.api_key}`,\n        },\n        body: JSON.stringify(requestPayload),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      generatedText = data.choices[0].message.content.trim();\n      worldbookProgressPercent.value = 100;\n    }\n\n    //  JSON\n    try {\n      //  JSON \n      const jsonMatch = generatedText.match(/```(?:json)?\\s*([\\s\\S]*?)```/) || [null, generatedText];\n      const jsonText = jsonMatch[1] || generatedText;\n\n      const parsedEntry = JSON.parse(jsonText);\n      worldbookEntryOutput.value = parsedEntry;\n      worldbookModifyRequest.value = ''; // \n      saveToolsDataImmediate(); // \n\n      window.toastr.success('');\n    } catch (parseError) {\n      console.error('JSON :', parseError);\n      console.log(':', generatedText);\n      window.toastr.error('');\n    }\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('' + (error as Error).message);\n  } finally {\n    isModifyingWorldbook.value = false;\n    worldbookProgressPercent.value = 0;\n  }\n};\n\n// \nconst clearWorldbookModifyRequest = () => {\n  worldbookModifyRequest.value = '';\n  saveToolsDataImmediate(); // \n  window.toastr.success('');\n};\n\n// ====================  ====================\n\n//  TavernHelper\nconst loadWorldbookEntries = async () => {\n  if (!selectedViewerWorldbook.value) {\n    worldbookEntries.value = [];\n    return;\n  }\n\n  try {\n    //  TavernHelper.getWorldbook()\n    let worldbook: any = null;\n    if (\n      typeof (window as any).TavernHelper !== 'undefined' &&\n      typeof (window as any).TavernHelper.getWorldbook === 'function'\n    ) {\n      worldbook = await (window as any).TavernHelper.getWorldbook(selectedViewerWorldbook.value);\n    } else {\n      console.error(' TavernHelper.getWorldbook ');\n      window.toastr.error('');\n      worldbookEntries.value = [];\n      return;\n    }\n\n    if (worldbook && Array.isArray(worldbook) && worldbook.length > 0) {\n      worldbookEntries.value = worldbook;\n      console.log(`  \"${selectedViewerWorldbook.value}\"  ${worldbookEntries.value.length} `);\n      window.toastr.success(` ${worldbookEntries.value.length} `);\n    } else {\n      worldbookEntries.value = [];\n      window.toastr.info('');\n    }\n  } catch (error) {\n    console.error(' :', error);\n    window.toastr.error('' + (error as Error).message);\n    worldbookEntries.value = [];\n  }\n};\n\n// \nconst filteredWorldbookEntries = computed(() => {\n  let entries = [...worldbookEntries.value];\n\n  // \n  if (viewerSearchQuery.value.trim()) {\n    const query = viewerSearchQuery.value.toLowerCase();\n    entries = entries.filter(entry => {\n      const nameMatch = entry.name?.toLowerCase().includes(query);\n      const contentMatch = entry.content?.toLowerCase().includes(query);\n      const keysMatch = entry.strategy?.keys?.some(key => {\n        if (typeof key === 'string') {\n          return key.toLowerCase().includes(query);\n        } else if (key instanceof RegExp) {\n          return key.toString().toLowerCase().includes(query);\n        }\n        return false;\n      });\n      return nameMatch || contentMatch || keysMatch;\n    });\n  }\n\n  // \n  if (viewerSortBy.value === 'enabled') {\n    entries = entries.filter(entry => entry.enabled);\n  } else if (viewerSortBy.value === 'disabled') {\n    entries = entries.filter(entry => !entry.enabled);\n  }\n\n  return entries;\n});\n\n// \nconst toggleEntryExpanded = (index: number) => {\n  const current = entryExpandedState.value.get(index) || false;\n  entryExpandedState.value.set(index, !current);\n};\n\n// \nconst isEntryExpanded = (index: number) => {\n  return entryExpandedState.value.get(index) || false;\n};\n\n// \nconst editWorldbookEntry = (entry: WorldbookEntry) => {\n  try {\n    // \n    editingEntry.value = {\n      uid: entry.uid,\n      name: entry.name || '',\n      enabled: entry.enabled ?? true,\n      content: entry.content || '',\n      strategy: {\n        type: entry.strategy?.type || 'selective',\n        keys: [...(entry.strategy?.keys || [])],\n        keys_secondary: {\n          logic: entry.strategy?.keys_secondary?.logic || 'and_any',\n          keys: [...(entry.strategy?.keys_secondary?.keys || [])],\n        },\n        scan_depth: entry.strategy?.scan_depth || 'same_as_global',\n      },\n      position: entry.position\n        ? {\n            type: entry.position.type || 'before_character_definition',\n            role: entry.position.role || 'system',\n            depth: entry.position.depth ?? 0,\n            order: entry.position.order ?? 0,\n          }\n        : {\n            type: 'before_character_definition',\n            role: 'system',\n            depth: 0,\n            order: 0,\n          },\n      probability: entry.probability ?? 100,\n      recursion: entry.recursion\n        ? {\n            prevent_incoming: entry.recursion.prevent_incoming ?? false,\n            prevent_outgoing: entry.recursion.prevent_outgoing ?? false,\n            delay_until: entry.recursion.delay_until ?? null,\n          }\n        : {\n            prevent_incoming: false,\n            prevent_outgoing: false,\n            delay_until: null,\n          },\n      effect: entry.effect\n        ? {\n            sticky: entry.effect.sticky ?? null,\n            cooldown: entry.effect.cooldown ?? null,\n            delay: entry.effect.delay ?? null,\n          }\n        : {\n            sticky: null,\n            cooldown: null,\n            delay: null,\n          },\n    };\n    editingEntryUid.value = entry.uid;\n    showEditDialog.value = true;\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('' + (error as Error).message);\n  }\n};\n\n// \nconst saveEditedEntry = async () => {\n  if (!editingEntry.value.name?.trim()) {\n    window.toastr.warning('');\n    return;\n  }\n\n  if (!editingEntryUid.value) {\n    window.toastr.error('ID');\n    return;\n  }\n\n  try {\n    //  updateWorldbookWith API \n    const updatedWorldbook = await updateWorldbookWith(selectedViewerWorldbook.value, worldbook => {\n      const entryIndex = worldbook.findIndex(e => e.uid === editingEntryUid.value);\n      if (entryIndex !== -1) {\n        // \n        worldbook[entryIndex] = {\n          ...worldbook[entryIndex],\n          ...editingEntry.value,\n          uid: editingEntryUid.value, //  UID \n        } as WorldbookEntry;\n      }\n      return worldbook;\n    });\n\n    // \n    worldbookEntries.value = updatedWorldbook;\n\n    // \n    showEditDialog.value = false;\n    editingEntry.value = {};\n    editingEntryUid.value = null;\n\n    window.toastr.success('');\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('' + (error as Error).message);\n  }\n};\n\n// \nconst deleteWorldbookEntry = async (entry: WorldbookEntry) => {\n  if (!confirm(` \"${entry.name}\" `)) {\n    return;\n  }\n\n  try {\n    //  deleteWorldbookEntries API\n    const { worldbook } = await deleteWorldbookEntries(selectedViewerWorldbook.value, e => e.uid === entry.uid);\n\n    // \n    worldbookEntries.value = worldbook;\n\n    window.toastr.success(` \"${entry.name}\"`);\n  } catch (error) {\n    console.error(':', error);\n    window.toastr.error('' + (error as Error).message);\n  }\n};\n</script>\n\n<style scoped>\n.tools-tab {\n  height: 100%;\n  overflow-y: auto;\n  padding: 25px !important;\n}\n\n.section-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 15px 20px;\n  background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-bottom: 15px;\n  border: 1px solid #3a3a3a;\n}\n\n.section-header:hover {\n  background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n/*  */\n.section-header-anti-cliche {\n  background: linear-gradient(135deg, rgba(42, 42, 42, 0.95) 0%, rgba(58, 58, 58, 0.95) 100%) !important;\n  border: 1px solid rgba(255, 107, 107, 0.3) !important;\n  box-shadow:\n    0 2px 8px rgba(0, 0, 0, 0.2),\n    0 0 0 1px rgba(255, 107, 107, 0.1) inset !important;\n  backdrop-filter: blur(10px);\n}\n\n.section-header-anti-cliche:hover {\n  background: linear-gradient(135deg, rgba(255, 107, 107, 0.2) 0%, rgba(238, 90, 36, 0.2) 100%) !important;\n  border-color: rgba(255, 107, 107, 0.5) !important;\n  box-shadow:\n    0 4px 16px rgba(255, 107, 107, 0.3),\n    0 0 0 1px rgba(255, 107, 107, 0.2) inset !important;\n  transform: translateY(-2px) !important;\n}\n\n/*  */\n.section-header-worldbook {\n  background: linear-gradient(135deg, rgba(42, 42, 42, 0.95) 0%, rgba(58, 58, 58, 0.95) 100%) !important;\n  border: 1px solid rgba(255, 193, 7, 0.3) !important;\n  box-shadow:\n    0 2px 8px rgba(0, 0, 0, 0.2),\n    0 0 0 1px rgba(255, 193, 7, 0.1) inset !important;\n  backdrop-filter: blur(10px);\n}\n\n.section-header-worldbook:hover {\n  background: linear-gradient(135deg, rgba(255, 193, 7, 0.2) 0%, rgba(255, 152, 0, 0.2) 100%) !important;\n  border-color: rgba(255, 193, 7, 0.5) !important;\n  box-shadow:\n    0 4px 16px rgba(255, 193, 7, 0.3),\n    0 0 0 1px rgba(255, 193, 7, 0.2) inset !important;\n  transform: translateY(-2px) !important;\n}\n\n/*  */\n.section-header-character {\n  background: linear-gradient(135deg, rgba(42, 42, 42, 0.95) 0%, rgba(58, 58, 58, 0.95) 100%) !important;\n  border: 1px solid rgba(23, 162, 184, 0.3) !important;\n  box-shadow:\n    0 2px 8px rgba(0, 0, 0, 0.2),\n    0 0 0 1px rgba(23, 162, 184, 0.1) inset !important;\n  backdrop-filter: blur(10px);\n}\n\n.section-header-character:hover {\n  background: linear-gradient(135deg, rgba(23, 162, 184, 0.2) 0%, rgba(19, 132, 150, 0.2) 100%) !important;\n  border-color: rgba(23, 162, 184, 0.5) !important;\n  box-shadow:\n    0 4px 16px rgba(23, 162, 184, 0.3),\n    0 0 0 1px rgba(23, 162, 184, 0.2) inset !important;\n  transform: translateY(-2px) !important;\n}\n\n/*  */\n.tool-section-anti-cliche,\n.tool-section-worldbook,\n.tool-section-character {\n  margin-bottom: 20px;\n  border-radius: 12px;\n  overflow: hidden;\n  background: rgba(26, 26, 26, 0.5);\n  backdrop-filter: blur(5px);\n}\n\n.tool-content {\n  background: #1e1e1e;\n  border: 1px solid #3a3a3a;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n\n.tool-instructions {\n  background: #1a1a1a;\n  border: 1px solid #3a3a3a;\n  border-radius: 6px;\n  padding: 12px;\n  color: #ccc;\n  font-size: 12px;\n  margin-bottom: 15px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.button-group {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.output-section {\n  margin-top: 20px;\n}\n\n.output-content {\n  background: #1e1e1e;\n  border: 1px solid #3a3a3a;\n  border-radius: 6px;\n  padding: 15px;\n  color: #e0e0e0;\n  font-size: 13px;\n  line-height: 1.6;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.output-actions {\n  margin-top: 12px;\n  display: flex;\n  gap: 12px;\n}\n\n/*  */\n.process-button,\n.clear-button,\n.generate-button,\n.copy-button {\n  position: relative;\n  overflow: hidden;\n  transition: all 0.3s ease;\n}\n\n.process-button:hover:not(:disabled),\n.clear-button:hover:not(:disabled),\n.generate-button:hover:not(:disabled),\n.copy-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);\n}\n\n.copy-button:hover {\n  background: #218838 !important;\n}\n\n.tool-instructions {\n  background: #1a1a1a;\n  border: 1px solid #3a3a3a;\n  border-radius: 6px;\n  padding: 12px;\n  color: #ccc;\n  font-size: 12px;\n  margin-bottom: 15px;\n}\n\n/*  */\n.process-button:hover:not(:disabled) .shimmer-effect,\n.clear-button:hover:not(:disabled) .shimmer-effect,\n.generate-button:hover:not(:disabled) .shimmer-effect,\n.copy-button:hover .shimmer-effect {\n  left: 100%;\n}\n\n.process-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n\n.clear-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);\n}\n\n.generate-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(23, 162, 184, 0.4);\n}\n\n.copy-button:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);\n}\n\n.process-button:disabled,\n.clear-button:disabled,\n.generate-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.process-button:disabled:hover,\n.clear-button:disabled:hover,\n.generate-button:disabled:hover {\n  transform: none;\n  box-shadow: none;\n}\n\n/*  */\n.output-content::-webkit-scrollbar {\n  width: 6px;\n}\n\n.output-content::-webkit-scrollbar-track {\n  background: #1a1a1a;\n  border-radius: 3px;\n}\n\n.output-content::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.output-content::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n\n/*  */\n@media (max-width: 768px) {\n  .button-group {\n    flex-direction: column;\n  }\n\n  .output-actions {\n    flex-direction: column;\n  }\n}\n\n/*  */\n@keyframes progress-slide {\n  0% {\n    background-position: 0% center;\n  }\n  100% {\n    background-position: 200% center;\n  }\n}\n\n@keyframes progress-glow {\n  0% {\n    background-position: 0% center;\n  }\n  100% {\n    background-position: 200% center;\n  }\n}\n\n@keyframes gradient-shift {\n  0% {\n    background-position: 0% center;\n  }\n  100% {\n    background-position: 200% center;\n  }\n}\n\n@keyframes bounce-small {\n  0%,\n  80%,\n  100% {\n    transform: scale(0);\n    opacity: 0.5;\n  }\n  40% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n</style>\n","<template>\n  <div\n    class=\"memory-panel-container\"\n    style=\"display: flex; flex-direction: column; height: 100%; background: #1a1a1a; color: #e0e0e0\"\n  >\n    <!--  -->\n    <div\n      style=\"\n        background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);\n        color: #fff;\n        text-align: center;\n        padding: 8px 16px;\n        font-weight: 700;\n        font-size: 13px;\n        letter-spacing: 1px;\n        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);\n        border-bottom: 2px solid #7f1d1d;\n        flex-shrink: 0;\n      \"\n    >\n        \n    </div>\n\n    <!--  -->\n    <div\n      class=\"panel-header\"\n      style=\"\n        padding: 16px 24px;\n        background: #252525;\n        border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        flex-shrink: 0;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n      \"\n    >\n      <div class=\"header-left\" style=\"display: flex; align-items: center; gap: 12px; flex-wrap: wrap\">\n        <span\n          class=\"header-icon\"\n          style=\"font-size: 26px; line-height: 1; filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))\"\n          ></span\n        >\n        <div style=\"display: flex; flex-direction: column; gap: 4px\">\n          <span class=\"panel-title\" style=\"font-size: 16px; font-weight: 600; color: #fff; letter-spacing: 0.5px\"\n            > - </span\n          >\n          <span\n            style=\"\n              font-size: 11px;\n              color: #ef4444;\n              font-weight: 700;\n              text-shadow: 0 0 8px rgba(239, 68, 68, 0.5);\n              letter-spacing: 0.5px;\n            \"\n            >  |  </span\n          >\n        </div>\n      </div>\n      <div class=\"header-actions\" style=\"display: flex; gap: 8px; align-items: center\">\n        <button\n          class=\"header-button minimize-button\"\n          title=\"\"\n          style=\"\n            width: 32px;\n            height: 32px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            border: none;\n            background: rgba(255, 255, 255, 0.05);\n            color: #e0e0e0;\n            border-radius: 6px;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            font-size: 14px;\n          \"\n          @click=\"minimizePanel\"\n        >\n          <i class=\"fa-solid fa-minus\"></i>\n        </button>\n        <button\n          class=\"header-button close-button\"\n          title=\"\"\n          style=\"\n            width: 32px;\n            height: 32px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            border: none;\n            background: rgba(255, 255, 255, 0.05);\n            color: #e0e0e0;\n            border-radius: 6px;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            font-size: 14px;\n          \"\n          @click=\"closePanel\"\n        >\n          <i class=\"fa-solid fa-times\"></i>\n        </button>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      class=\"panel-tabs\"\n      style=\"\n        display: flex;\n        background: #222;\n        border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n        flex-shrink: 0;\n        overflow-x: auto;\n        scrollbar-width: none;\n        -ms-overflow-style: none;\n      \"\n    >\n      <div\n        v-for=\"tab of tabs\"\n        :key=\"tab.key\"\n        :class=\"{ 'tab-active': activeTab === tab.key }\"\n        class=\"tab-item\"\n        :style=\"{\n          flex: '0 0 auto',\n          minWidth: '120px',\n          padding: '14px 20px',\n          cursor: 'pointer',\n          textAlign: 'center',\n          transition: 'all 0.25s ease',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          gap: '8px',\n          position: 'relative',\n          background: activeTab === tab.key ? '#1a1a1a' : 'transparent',\n          color: activeTab === tab.key ? '#4a9eff' : '#999',\n          borderBottom: activeTab === tab.key ? '2px solid #4a9eff' : '2px solid transparent',\n          fontSize: '13px',\n          fontWeight: '500',\n        }\"\n        @click=\"switchTab(tab.key)\"\n      >\n        <i :class=\"tab.icon\" class=\"tab-icon\"></i>\n        <span class=\"tab-label\">{{ tab.label }}</span>\n      </div>\n    </div>\n\n    <!--  -->\n    <div\n      class=\"panel-content\"\n      style=\"\n        flex: 1;\n        overflow-y: auto;\n        overflow-x: hidden;\n        padding: 0;\n        min-height: 0;\n        scrollbar-width: thin;\n        scrollbar-color: #4a9eff #2a2a2a;\n      \"\n    >\n      <component :is=\"currentComponent\" :key=\"activeTab\" v-bind=\"componentProps\" />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport { minimizeMemoryPanel } from '../';\nimport GreetingsTab from './GreetingsTab.vue';\nimport HelpTab from './HelpTab.vue';\nimport MvuBetaTab from './MvuBetaTab.vue';\nimport ProjectManager from './ProjectManager.vue';\nimport RegexUIGenerator from './RegexUIGenerator.vue';\nimport SettingsTab from './SettingsTab.vue';\nimport StatusBarGenerator from './StatusBarGenerator.vue';\nimport SummaryTab from './SummaryTab.vue';\nimport TableTab from './TableTab.vue';\nimport ToolsTab from './ToolsTab.vue';\n\n// \nconst tabs = [\n  { key: 'settings', label: '', icon: 'fa-solid fa-cog' },\n  { key: 'summary', label: '', icon: 'fa-solid fa-list' },\n  { key: 'table', label: '', icon: 'fa-solid fa-table' },\n  { key: 'greetings', label: '', icon: 'fa-solid fa-comments' },\n  { key: 'regex', label: '', icon: 'fa-solid fa-code' },\n  { key: 'status', label: '', icon: 'fa-solid fa-chart-bar' },\n  { key: 'project', label: '', icon: 'fa-solid fa-laptop-code' },\n  { key: 'tools', label: '', icon: 'fa-solid fa-tools' },\n  { key: 'mvu', label: 'MVU Beta', icon: 'fa-solid fa-flask' },\n  { key: 'help', label: '', icon: 'fa-solid fa-question-circle' },\n];\n\nconst activeTab = ref<\n  'settings' | 'summary' | 'table' | 'greetings' | 'status' | 'regex' | 'project' | 'tools' | 'mvu' | 'help'\n>('settings');\n\n// \nconst componentMap = {\n  settings: SettingsTab,\n  summary: SummaryTab,\n  table: TableTab,\n  greetings: GreetingsTab,\n  status: StatusBarGenerator,\n  regex: RegexUIGenerator,\n  project: ProjectManager,\n  tools: ToolsTab,\n  mvu: MvuBetaTab,\n  help: HelpTab,\n};\n\n// \nconst currentComponent = computed(() => componentMap[activeTab.value]);\n\n// \nconst componentProps = computed(() => ({\n  activeTab: activeTab.value,\n}));\n\n// \nconst switchTab = (tabKey: string) => {\n  console.log(':', tabKey);\n  activeTab.value = tabKey as any;\n};\n\n// \nconst minimizePanel = () => {\n  minimizeMemoryPanel();\n};\n\n// \nconst closePanel = () => {\n  $('#memoryManagementPanel').fadeOut(200);\n};\n</script>\n\n<style scoped>\n/*  */\n.header-button {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: none;\n  background: rgba(255, 255, 255, 0.05);\n  color: #e0e0e0;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n}\n\n.header-button:hover {\n  background: rgba(255, 255, 255, 0.1);\n  transform: translateY(-1px);\n}\n\n.header-button:active {\n  transform: translateY(0);\n}\n\n.close-button:hover {\n  background: rgba(239, 68, 68, 0.2);\n  color: #ef4444;\n}\n\n/*  */\n.panel-tabs::-webkit-scrollbar {\n  display: none;\n}\n\n/*  */\n.tab-icon {\n  font-size: 14px;\n  transition: all 0.25s ease;\n}\n\n.tab-item:hover:not(.tab-active) {\n  background: rgba(255, 255, 255, 0.03) !important;\n  color: #ccc !important;\n}\n\n.tab-item:hover:not(.tab-active) .tab-icon {\n  transform: scale(1.1);\n}\n\n.tab-active .tab-icon {\n  color: #4a9eff;\n  filter: drop-shadow(0 0 6px rgba(74, 158, 255, 0.3));\n}\n\n.tab-active {\n  box-shadow: 0 -2px 8px rgba(74, 158, 255, 0.1) !important;\n}\n\n/*  */\n.panel-content::-webkit-scrollbar {\n  width: 6px;\n}\n\n.panel-content::-webkit-scrollbar-track {\n  background: #2a2a2a;\n  border-radius: 3px;\n}\n\n.panel-content::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.panel-content::-webkit-scrollbar-thumb:hover {\n  background: #5ab0ff;\n}\n</style>\n","<template>\n  <MainPanel />\n</template>\n\n<script setup lang=\"ts\">\nimport MainPanel from './components/MainPanel.vue';\n</script>\n","import { createApp } from 'vue';\nimport { globalPinia } from './globalPinia';\nimport  from './.vue';\n\n$(() => {\n  console.log('.ts ');\n\n  // CSS\n  if ($('#memory-panel-responsive-css').length === 0) {\n    const responsiveCSS = `\n      <style id=\"memory-panel-responsive-css\">\n        /*  */\n        .panel-title-mobile {\n          display: none;\n        }\n        \n        /*  */\n        .panel-title {\n          display: inline;\n        }\n        \n        /*  -  */\n        @media (max-width: 768px) {\n          /*  -  */\n          body #memoryManagementPanel {\n            position: fixed !important;\n            top: 0 !important;\n            left: 0 !important;\n            right: 0 !important;\n            bottom: 0 !important;\n            transform: none !important;\n            width: 100vw !important;\n            max-width: 100vw !important;\n            height: 100vh !important;\n            max-height: 100vh !important;\n            min-width: 100vw !important;\n            min-height: 100vh !important;\n            border-radius: 0 !important;\n            border: none !important;\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          \n          /*  */\n          .panel-title {\n            display: none !important;\n          }\n          \n          .panel-title-mobile {\n            display: inline !important;\n            font-size: 14px !important;\n          }\n          \n          /*  */\n          .minimize-button {\n            display: none !important;\n          }\n          \n          /*  */\n          .panel-header {\n            padding: 12px 16px !important;\n            border-radius: 0 !important;\n          }\n          \n          .panel-header .header-left {\n            gap: 8px !important;\n          }\n          \n          .panel-header .header-left .header-icon {\n            font-size: 24px !important;\n          }\n          \n          .panel-header .header-left .panel-title {\n            font-size: 15px !important;\n          }\n          \n          .panel-header > div:last-child {\n            gap: 8px !important;\n          }\n          \n          /*  */\n          .panel-header .header-button {\n            width: 40px !important;\n            height: 40px !important;\n            min-width: 40px !important;\n            min-height: 40px !important;\n            padding: 0 !important;\n            font-size: 16px !important;\n            border-radius: 8px !important;\n          }\n          \n          /*  */\n          .panel-tabs {\n            overflow-x: auto !important;\n            overflow-y: hidden !important;\n            white-space: nowrap !important;\n            -webkit-overflow-scrolling: touch !important;\n            padding: 0 8px !important;\n          }\n          \n          .panel-tabs::-webkit-scrollbar {\n            height: 3px !important;\n          }\n          \n          .panel-tabs .tab-item {\n            flex: 0 0 auto !important;\n            padding: 12px 16px !important;\n            font-size: 13px !important;\n            gap: 6px !important;\n            min-width: auto !important;\n            border-radius: 0 !important; /*  */\n          }\n          \n          .panel-tabs .tab-item .tab-icon {\n            font-size: 15px !important;\n          }\n          \n          .panel-tabs .tab-item .tab-label {\n            white-space: nowrap !important;\n            font-weight: 500 !important;\n          }\n          \n          /*  */\n          .memory-panel-container {\n            font-size: 14px !important;\n          }\n          \n          /*  */\n          .panel-content {\n            overflow-y: auto !important;\n            overflow-x: hidden !important;\n            -webkit-overflow-scrolling: touch !important;\n            height: 100% !important;\n            padding: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .tab-content {\n            max-width: 100vw !important;\n            overflow-x: hidden !important;\n          }\n          \n          /*  */\n          .memory-panel-container button,\n          .memory-panel-container .el-button {\n            padding: 12px 18px !important;\n            font-size: 14px !important;\n            min-height: 48px !important; /* iOS */\n            border-radius: 12px !important; /*  */\n            font-weight: 500 !important;\n          }\n          \n          /*  */\n          .memory-panel-container .mini-button,\n          .memory-panel-container .show-button {\n            padding: 10px 16px !important;\n            min-height: 44px !important;\n            font-size: 13px !important;\n            border-radius: 10px !important;\n          }\n          \n          /*  */\n          .memory-panel-container input[type=\"checkbox\"] {\n            width: 20px !important;\n            height: 20px !important;\n            min-width: 20px !important;\n            min-height: 20px !important;\n            cursor: pointer !important;\n          }\n          \n          /*  */\n          .memory-panel-container .button-group,\n          .memory-panel-container .project-action-buttons {\n            flex-direction: column !important;\n            gap: 8px !important;\n          }\n          \n          .memory-panel-container .button-group > *,\n          .memory-panel-container .button-group button,\n          .memory-panel-container .project-action-buttons > button {\n            width: 100% !important;\n            margin: 0 !important;\n          }\n          \n          /*  */\n          .memory-panel-container .dialog-actions,\n          .memory-panel-container [style*=\"justify-content: flex-end\"] {\n            flex-direction: column !important;\n            gap: 10px !important;\n          }\n          \n          .memory-panel-container .dialog-actions > button {\n            width: 100% !important;\n          }\n          \n          /*  */\n          .memory-panel-container input,\n          .memory-panel-container textarea,\n          .memory-panel-container select {\n            font-size: 16px !important; /* iOS */\n            padding: 12px !important;\n            min-height: 44px !important;\n          }\n          \n          .memory-panel-container textarea {\n            min-height: 120px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .form-group,\n          .memory-panel-container [style*=\"margin\"] {\n            margin-bottom: 16px !important;\n          }\n          \n          /* / */\n          .memory-panel-container .card,\n          .memory-panel-container .panel,\n          .memory-panel-container .section {\n            padding: 12px !important;\n            margin: 8px 0 !important;\n          }\n          \n          /*  */\n          .memory-panel-container .field-group,\n          .memory-panel-container [class*=\"field\"] {\n            padding: 8px !important;\n            margin-bottom: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .tool-section,\n          .memory-panel-container .section-content {\n            padding: 12px 8px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .preview-container,\n          .memory-panel-container [class*=\"preview\"] {\n            padding: 8px !important;\n            max-width: 100% !important;\n            overflow-x: auto !important;\n          }\n          \n          /*  */\n          .memory-panel-container h1,\n          .memory-panel-container h2,\n          .memory-panel-container h3,\n          .memory-panel-container h4,\n          .memory-panel-container h5 {\n            font-size: 16px !important;\n            margin-bottom: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .modal,\n          .memory-panel-container .dialog {\n            width: 100vw !important;\n            height: 100vh !important;\n            max-width: 100vw !important;\n            max-height: 100vh !important;\n            border-radius: 0 !important;\n            top: 0 !important;\n            left: 0 !important;\n            transform: none !important;\n          }\n          \n          /*  */\n          .memory-panel-container ::-webkit-scrollbar {\n            width: 3px !important;\n            height: 3px !important;\n          }\n          \n          /* gap */\n          .memory-panel-container [style*=\"gap: 1\"] {\n            gap: 8px !important;\n          }\n          \n          .memory-panel-container [style*=\"gap: 2\"] {\n            gap: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .tool-section .button-group {\n            display: flex !important;\n            flex-direction: column !important;\n            width: 100% !important;\n          }\n          \n          /*  */\n          .memory-panel-container .field-item {\n            flex-direction: column !important;\n            align-items: stretch !important;\n          }\n          \n          .memory-panel-container .field-item > * {\n            width: 100% !important;\n            margin-bottom: 8px !important;\n          }\n          \n          /*  */\n          .memory-panel-container [style*=\"display: grid\"][style*=\"grid-template-columns: 1fr 1fr\"] {\n            grid-template-columns: 1fr !important;\n          }\n          \n          /*  */\n          /* grid */\n          .memory-panel-container div[style*=\"display: grid\"],\n          .memory-panel-container > div[style*=\"display: grid\"],\n          .panel-content > div[style*=\"display: grid\"],\n          body [style*=\"display: grid\"][style*=\"grid-template-columns\"] {\n            display: flex !important;\n            flex-direction: column !important;\n            gap: 12px !important;\n          }\n          \n          /* 100% */\n          .memory-panel-container div[style*=\"width: 280px\"],\n          .memory-panel-container div[style*=\"width: 300px\"],\n          .memory-panel-container div[style*=\"width: 500px\"],\n          .memory-panel-container div[style*=\"width: 600px\"],\n          .memory-panel-container div[style*=\"max-width: 600px\"],\n          .memory-panel-container div[style*=\"max-width: 90vw\"],\n          body #memoryManagementPanel div[style*=\"width:\"],\n          body #memoryManagementPanel div[style*=\"min-height: 600px\"] {\n            width: 100% !important;\n            max-width: 100% !important;\n            min-width: auto !important;\n          }\n          \n          /* div */\n          .memory-panel-container > div > div,\n          .panel-content > div > div {\n            max-width: 100% !important;\n            overflow-x: hidden !important;\n          }\n          \n          /*  */\n          .memory-panel-container .greetings-tab > div[style*=\"display: flex\"][style*=\"gap: 20px\"] {\n            flex-direction: column !important;\n            gap: 15px !important;\n          }\n          \n          .memory-panel-container .greetings-tab > div > div[style*=\"flex: 1\"] {\n            width: 100% !important;\n            flex: none !important;\n            max-height: 50vh !important;\n          }\n          \n          /*  */\n          .memory-panel-container .header-actions {\n            flex-wrap: wrap !important;\n            justify-content: center !important;\n          }\n          \n          .memory-panel-container .header-actions .mini-button {\n            flex: 1 1 auto !important;\n            min-width: 120px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .greetings-tab > div > div > div[style*=\"position: sticky\"][style*=\"bottom: 0\"] {\n            flex-direction: column !important;\n            gap: 10px !important;\n          }\n          \n          .memory-panel-container .greetings-tab > div > div > div[style*=\"position: sticky\"] button {\n            width: 100% !important;\n            justify-content: center !important;\n          }\n          \n          /*  */\n          .memory-panel-container .greeting-item > div:first-child {\n            flex-direction: column !important;\n            align-items: stretch !important;\n            gap: 10px !important;\n          }\n          \n          .memory-panel-container .greeting-item input[placeholder*=\"\"] {\n            width: 100% !important;\n            max-width: 80px !important;\n            margin: 0 auto !important;\n          }\n          \n          .memory-panel-container .greeting-item input[placeholder*=\"\"],\n          .memory-panel-container .greeting-item input[placeholder*=\"\"] {\n            width: 100% !important;\n            flex: none !important;\n          }\n          \n          .memory-panel-container .greeting-item button {\n            width: 100% !important;\n            justify-content: center !important;\n          }\n          \n          /*  */\n          .memory-panel-container iframe,\n          body iframe[srcdoc*=\"scene-grid\"] {\n            width: 100% !important;\n            max-width: 100% !important;\n          }\n          \n          /* iframe */\n          @supports (-webkit-touch-callout: none) {\n            /* iOS Safari */\n            body iframe {\n              width: 100% !important;\n              max-width: 100vw !important;\n            }\n          }\n          \n          /* / */\n          .memory-panel-container .delete-button,\n          .memory-panel-container [class*=\"delete\"],\n          .memory-panel-container .action-button {\n            min-width: 44px !important;\n            min-height: 44px !important;\n            padding: 8px !important;\n          }\n          \n          /* label */\n          .memory-panel-container label {\n            font-size: 13px !important;\n            margin-bottom: 6px !important;\n            display: block !important;\n          }\n          \n          /*  */\n          .memory-panel-container input,\n          .memory-panel-container textarea,\n          .memory-panel-container select,\n          .memory-panel-container button,\n          .memory-panel-container pre,\n          .memory-panel-container code {\n            max-width: 100% !important;\n            word-wrap: break-word !important;\n          }\n          \n          /*  */\n          .memory-panel-container .section-header {\n            padding: 16px !important;\n            font-size: 14px !important;\n            flex-direction: column !important;\n            align-items: stretch !important;\n            gap: 12px !important;\n          }\n          \n          .memory-panel-container .section-header h3 {\n            font-size: 15px !important;\n            margin-bottom: 0 !important;\n          }\n          \n          /*  */\n          .memory-panel-container .empty-space,\n          .memory-panel-container [style*=\"padding: 20px\"],\n          .memory-panel-container [style*=\"padding: 25px\"] {\n            padding: 12px !important;\n          }\n          \n          /*  */\n          #memoryPanelMinimizeIcon {\n            width: 48px !important;\n            height: 48px !important;\n            top: 15px !important;\n            right: 15px !important;\n          }\n          \n          #memoryPanelMinimizeIcon i {\n            font-size: 22px !important;\n          }\n        }\n      </style>\n    `;\n    $('head').append(responsiveCSS);\n    console.log(' CSS');\n  }\n\n  setTimeout(() => {\n    console.log('.ts setTimeout ');\n\n    // \n    const existingPanel = $('#memoryManagementPanel');\n\n    if (existingPanel.length > 0) {\n      console.log('mzrodyu...');\n      // \n      existingPanel.remove();\n      // DOM\n      setTimeout(() => {\n        console.log('...');\n      }, 100);\n    }\n\n    console.log('  - :', new Date().toISOString());\n\n    //  - \n    const panelContainer = $(`\n      <div id=\"memoryManagementPanel\" style=\"\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 95vw;\n        max-width: 1600px;\n        height: 92vh;\n        max-height: 92vh;\n        background: #1a1a1a;\n        border: 1px solid #3a3a3a;\n        border-radius: 8px;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n        z-index: 999999;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n      \">\n      </div>\n    `);\n\n    //  body\n    $('body').append(panelContainer);\n    console.log(' body, :', panelContainer[0]);\n\n    //  Vue \n    console.log(' Vue :', panelContainer[0]);\n\n    const app = createApp().use(globalPinia); // pinia\n\n    try {\n      app.mount(panelContainer[0]);\n      console.log('Vue ');\n      console.log('Vue :', (panelContainer[0] as any).__vue_app__);\n    } catch (error) {\n      console.error('Vue :', error);\n      console.error(':', JSON.stringify(error, null, 2));\n      console.error(':', (error as Error).stack);\n    }\n\n    console.log('mzrodyu:', panelContainer[0]);\n\n    // \n    setTimeout(() => {\n      createMinimizeIcon();\n      console.log(' ');\n    }, 500);\n  }, 200);\n});\n\n// \nfunction createMinimizeIcon() {\n  // \n  const existingIcon = $('#memoryPanelMinimizeIcon');\n  if (existingIcon.length > 0) {\n    existingIcon.fadeIn(200);\n    return existingIcon;\n  }\n\n  const isMobile = window.innerWidth <= 768;\n\n  // \n  const tabs = [\n    { key: 'settings', label: ' ', icon: 'fa-solid fa-cog' },\n    { key: 'summary', label: ' ', icon: 'fa-solid fa-list' },\n    { key: 'table', label: ' ', icon: 'fa-solid fa-table' },\n    { key: 'greetings', label: ' ', icon: 'fa-solid fa-comments' },\n    { key: 'regex', label: ' ', icon: 'fa-solid fa-code' },\n    { key: 'status', label: ' ', icon: 'fa-solid fa-chart-bar' },\n    { key: 'project', label: ' ', icon: 'fa-solid fa-laptop-code' },\n    { key: 'tools', label: ' ', icon: 'fa-solid fa-tools' },\n    { key: 'mvu', label: ' MVU Beta', icon: 'fa-solid fa-flask' },\n    { key: 'help', label: ' ', icon: 'fa-solid fa-question-circle' },\n  ];\n\n  // \n  const quickMenu = $(`\n    <div id=\"memoryPanelQuickMenu\" style=\"\n      position: fixed;\n      top: 0;\n      left: 0;\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 12px;\n      padding: 8px;\n      display: none;\n      z-index: 999999;\n      box-shadow: 0 8px 32px rgba(74, 158, 255, 0.6), 0 4px 16px rgba(0, 0, 0, 0.8);\n      min-width: 200px;\n      max-height: 80vh;\n      overflow-y: auto;\n    \">\n      <div style=\"\n        padding: 8px 12px;\n        color: #4a9eff;\n        font-size: 12px;\n        font-weight: 600;\n        border-bottom: 1px solid rgba(74, 158, 255, 0.2);\n        margin-bottom: 4px;\n      \">\n        \n      </div>\n      ${tabs\n        .map(\n          tab => `\n        <div class=\"quick-menu-item\" data-tab=\"${tab.key}\" style=\"\n          padding: 10px 12px;\n          margin: 2px 0;\n          cursor: pointer;\n          border-radius: 8px;\n          transition: all 0.2s;\n          color: #e0e0e0;\n          font-size: 13px;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          background: transparent;\n        \">\n          ${tab.label}\n        </div>\n      `,\n        )\n        .join('')}\n    </div>\n  `);\n\n  // \n  quickMenu.find('.quick-menu-item').hover(\n    function () {\n      $(this).css({\n        background: 'rgba(74, 158, 255, 0.15)',\n        color: '#4a9eff',\n        transform: 'translateX(-3px)',\n      });\n    },\n    function () {\n      $(this).css({\n        background: 'transparent',\n        color: '#e0e0e0',\n        transform: 'translateX(0)',\n      });\n    },\n  );\n\n  // \n  quickMenu.find('.quick-menu-item').on('click', function () {\n    const tabKey = $(this).data('tab');\n    const panel = $('#memoryManagementPanel');\n\n    // \n    if (!panel.is(':visible')) {\n      panel.fadeIn(200);\n    }\n\n    // \n    setTimeout(() => {\n      const tabOrder = [\n        'settings',\n        'summary',\n        'table',\n        'greetings',\n        'regex',\n        'status',\n        'project',\n        'tools',\n        'mvu',\n        'help',\n      ];\n      const tabIndex = tabOrder.indexOf(tabKey);\n\n      if (tabIndex >= 0) {\n        // \n        const tabs = panel.find('.tab-item');\n        if (tabs.length > tabIndex) {\n          tabs.eq(tabIndex).trigger('click');\n        }\n      }\n    }, 150);\n\n    // \n    quickMenu.fadeOut(200);\n  });\n\n  // \n  quickMenu.css({\n    'scrollbar-width': 'thin',\n    'scrollbar-color': '#4a9eff #1a1a1a',\n  });\n\n  const icon = $(`\n    <div id=\"memoryPanelMinimizeIcon\" style=\"\n      position: fixed;\n      top: ${isMobile ? '20px' : '20px'};\n      right: ${isMobile ? '20px' : '20px'};\n      width: ${isMobile ? '64px' : '72px'};\n      height: ${isMobile ? '64px' : '72px'};\n      background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);\n      border: 3px solid #4a9eff;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      z-index: 999998;\n      box-shadow: 0 4px 16px rgba(74, 158, 255, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3);\n      transition: all 0.3s ease;\n      font-size: ${isMobile ? '32px' : '38px'};\n    \">\n      \n    </div>\n  `);\n\n  let hideMenuTimeout: number | null = null;\n\n  // \n  function updateMenuPosition() {\n    const iconPos = icon.offset();\n    const iconWidth = icon.outerWidth() || 72;\n    const iconHeight = icon.outerHeight() || 72;\n    const menuWidth = quickMenu.outerWidth() || 200;\n    const menuHeight = quickMenu.outerHeight() || 400;\n\n    console.log(' :', { iconPos, iconWidth, iconHeight, menuWidth, menuHeight });\n\n    if (!iconPos) {\n      console.warn(' ');\n      return;\n    }\n\n    // \n    let left = iconPos.left - menuWidth - 10;\n    let top = iconPos.top;\n\n    console.log(' :', { left, top });\n\n    // \n    if (left < 10) {\n      left = iconPos.left + iconWidth + 10;\n      console.log(' :', left);\n    }\n\n    // \n    const windowWidth = $(window).width() || 1920;\n    if (left + menuWidth > windowWidth - 10) {\n      left = iconPos.left - (menuWidth - iconWidth) / 2;\n      // \n      if (iconPos.top > menuHeight + 10) {\n        top = iconPos.top - menuHeight - 10;\n        console.log(' :', { left, top });\n      } else {\n        // \n        top = iconPos.top + iconHeight + 10;\n        console.log(' :', { left, top });\n      }\n    }\n\n    // \n    const windowHeight = $(window).height() || 1080;\n    const finalLeft = Math.max(10, Math.min(left, windowWidth - menuWidth - 10));\n    const finalTop = Math.max(10, Math.min(top, windowHeight - Math.min(menuHeight, windowHeight * 0.8) - 10));\n\n    console.log(' :', { finalLeft, finalTop, windowWidth, windowHeight });\n\n    quickMenu.css({ left: finalLeft + 'px', top: finalTop + 'px' });\n  }\n\n  //  + \n  icon.hover(\n    function () {\n      if (hideMenuTimeout) {\n        clearTimeout(hideMenuTimeout);\n        hideMenuTimeout = null;\n      }\n\n      $(this).css({\n        transform: 'scale(1.15) rotate(5deg)',\n        boxShadow: '0 6px 24px rgba(74, 158, 255, 0.6), 0 4px 12px rgba(0, 0, 0, 0.4)',\n        borderColor: '#5ab0ff',\n      });\n\n      // \n      quickMenu.css('opacity', '0').show();\n      updateMenuPosition();\n      quickMenu.css('opacity', '1').hide().fadeIn(200);\n      console.log(' :', quickMenu.offset());\n    },\n    function () {\n      $(this).css({\n        transform: 'scale(1) rotate(0deg)',\n        boxShadow: '0 4px 16px rgba(74, 158, 255, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3)',\n        borderColor: '#4a9eff',\n      });\n\n      // \n      hideMenuTimeout = window.setTimeout(() => {\n        if (!quickMenu.is(':hover')) {\n          quickMenu.fadeOut(200);\n        }\n      }, 200);\n    },\n  );\n\n  // \n  quickMenu.hover(\n    function () {\n      if (hideMenuTimeout) {\n        clearTimeout(hideMenuTimeout);\n        hideMenuTimeout = null;\n      }\n    },\n    function () {\n      quickMenu.fadeOut(200);\n    },\n  );\n\n  // \n  icon.on('click', () => {\n    const panel = $('#memoryManagementPanel');\n    if (panel.is(':visible')) {\n      // \n      panel.fadeOut(200);\n      icon.fadeIn(200);\n    } else {\n      // \n      panel.fadeIn(200);\n    }\n  });\n\n  // \n  icon.draggable({\n    containment: 'window',\n    scroll: false,\n    start: function () {\n      $(this).css('transition', 'none');\n      quickMenu.hide(); // \n    },\n    stop: function () {\n      $(this).css('transition', 'all 0.3s ease');\n    },\n  });\n\n  $('body').append(quickMenu);\n  $('body').append(icon);\n\n  console.log(' :', icon);\n  console.log(' :', quickMenu);\n  console.log(' :', $('#memoryPanelQuickMenu').length > 0);\n\n  return icon;\n}\n\n// \nexport function minimizeMemoryPanel() {\n  const panel = $('#memoryManagementPanel');\n  if (panel.length === 0) return;\n\n  panel.fadeOut(200);\n  createMinimizeIcon(); // \n}\n\n// /\nexport function toggleMemoryPanel() {\n  const panel = $('#memoryManagementPanel');\n  if (panel.length === 0) return;\n\n  if (panel.is(':visible')) {\n    panel.fadeOut(200);\n  } else {\n    panel.fadeIn(200);\n  }\n}\n"],"file":".BLRKj0zn.chunk.js"}