$(()=>{setTimeout(()=>{let e=!1;const o=()=>{if(!e){e=!0;try{const n=['#top-bar','#top-settings-holder','#topBar','.topBar','#navbar','.navbar','header','.header','#header','.top_header','.navigation'];let t=$(),l='';for(const e of n){const o=$(e);if(o.length>0){t=o,l=e,console.log(`æ‰¾åˆ°å¯¼èˆªæ : ${e}`);break}}if(0===t.length)return console.log('æœªæ‰¾åˆ°å¯¼èˆªæ ï¼Œ500msåé‡è¯•...'),void setTimeout(o,500);console.log(`ä½¿ç”¨å¯¼èˆªæ : ${l}`);const r=$('#memoryNavButton');r.length>0&&(console.log('mzrodyuçŒ«çŒ«çš„å°ç ´çƒ‚å¯¼èˆªæŒ‰é’®å·²å­˜åœ¨ï¼Œç§»é™¤åé‡æ–°æ·»åŠ '),r.remove());let s=t;if('#top-bar'===l){const e=$('#top-settings-holder');e.length>0&&(s=e,console.log('ä½¿ç”¨ top-settings-holder ä½œä¸ºå®¹å™¨'))}const i=$('<div id="memoryNavButton" class="interactable" style="\n            padding: 8px;\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            cursor: pointer;\n            color: inherit;\n            border-radius: 4px;\n            transition: background 0.2s;\n            position: relative;\n          " title="mzrodyuçŒ«çŒ«çš„å°ç ´çƒ‚">\n            <span style="font-size: 24px">ğŸ±</span>\n          </div>');if(console.log('ç›®æ ‡å®¹å™¨ç±»å‹:',s[0]?.id||'æœªæŒ‡å®š'),console.log('ç›®æ ‡å®¹å™¨HTML:',s[0]?.outerHTML?.substring(0,300)),'top-settings-holder'===s[0]?.id){console.log('æ·»åŠ åˆ° top-settings-holder æœ€å‰é¢');const e=s.children().first();e.length>0?i.insertBefore(e):s.prepend(i)}else console.log('æ·»åŠ åˆ°å®¹å™¨å‰é¢'),s.prepend(i);i.on('click',function(e){e.preventDefault(),e.stopPropagation(),console.log('ç‚¹å‡»mzrodyuçŒ«çŒ«çš„å°ç ´çƒ‚å¯¼èˆªæŒ‰é’®');const o=$('#memoryManagementPanel');o.length>0?o.is(':visible')?o.fadeOut(200):o.fadeIn(200):toastr.error('æµ®åŠ¨é¢æ¿æœªåŠ è½½')}),i.on('mouseenter',function(){$(this).css('background','rgba(255, 255, 255, 0.1)')}).on('mouseleave',function(){$(this).css('background','transparent')}),console.log('mzrodyuçŒ«çŒ«çš„å°ç ´çƒ‚å¯¼èˆªæŒ‰é’®å·²æ·»åŠ åˆ°:',s[0]?.id||'å®¹å™¨'),console.log('æŒ‰é’®ä½ç½®:',i[0]?.parentElement?.children?.[0]?.className||'å·²æ·»åŠ '),console.log('æŒ‰é’®å…ƒç´ :',i[0]),console.log('é¢æ¿å®¹å™¨é•¿åº¦:',$('#memoryManagementPanel').length),e=!1}catch(n){console.error('æ·»åŠ å¯¼èˆªæŒ‰é’®å¤±è´¥:',n),e=!1,setTimeout(o,500)}}};if(o(),setInterval(()=>{0!==$('#memoryNavButton').length||e||(console.log('æ£€æµ‹åˆ°æŒ‰é’®æ¶ˆå¤±ï¼Œé‡æ–°æ·»åŠ ...'),o())},2e3),'undefined'!=typeof SillyTavern&&SillyTavern.eventSource)try{SillyTavern.eventSource.on(SillyTavern.eventTypes.CHAT_CHANGED,()=>{console.log('èŠå¤©å˜åŒ–ï¼Œæ£€æŸ¥æŒ‰é’®...'),setTimeout(()=>{0!==$('#memoryNavButton').length||e||(console.log('èŠå¤©å˜åŒ–åæŒ‰é’®æ¶ˆå¤±ï¼Œé‡æ–°æ·»åŠ ...'),o())},500)})}catch(n){console.log('æ— æ³•ç›‘å¬äº‹ä»¶:',n)}else if(void 0!==window.TavernHelper&&'function'==typeof window.TavernHelper.eventOn)try{const n=window.TavernHelper,t=window.tavern_events;n.eventOn(t.CHAT_CHANGED,()=>{console.log('èŠå¤©å˜åŒ–ï¼Œæ£€æŸ¥æŒ‰é’®...'),setTimeout(()=>{0!==$('#memoryNavButton').length||e||(console.log('èŠå¤©å˜åŒ–åæŒ‰é’®æ¶ˆå¤±ï¼Œé‡æ–°æ·»åŠ ...'),o())},500)})}catch(n){console.log('æ— æ³•ç›‘å¬äº‹ä»¶:',n)}},300)});
//# sourceMappingURL=æ·»åŠ å¯¼èˆªæŒ‰é’®.D4VySo6M.chunk.js.map
